function Kb(a,l){for(var h=0;h<l.length;h++){const x=l[h];if(typeof x!="string"&&!Array.isArray(x)){for(const j in x)if(j!=="default"&&!(j in a)){const k=Object.getOwnPropertyDescriptor(x,j);k&&Object.defineProperty(a,j,k.get?k:{enumerable:!0,get:()=>x[j]})}}}return Object.freeze(Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}))}(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const j of document.querySelectorAll('link[rel="modulepreload"]'))x(j);new MutationObserver(j=>{for(const k of j)if(k.type==="childList")for(const _ of k.addedNodes)_.tagName==="LINK"&&_.rel==="modulepreload"&&x(_)}).observe(document,{childList:!0,subtree:!0});function h(j){const k={};return j.integrity&&(k.integrity=j.integrity),j.referrerPolicy&&(k.referrerPolicy=j.referrerPolicy),j.crossOrigin==="use-credentials"?k.credentials="include":j.crossOrigin==="anonymous"?k.credentials="omit":k.credentials="same-origin",k}function x(j){if(j.ep)return;j.ep=!0;const k=h(j);fetch(j.href,k)}})();function Bx(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var bg={exports:{}},qp={},jg={exports:{}},Ei={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yy;function Qb(){if(Yy)return Ei;Yy=1;var a=Symbol.for("react.element"),l=Symbol.for("react.portal"),h=Symbol.for("react.fragment"),x=Symbol.for("react.strict_mode"),j=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),_=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),z=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),D=Symbol.iterator;function O(Se){return Se===null||typeof Se!="object"?null:(Se=D&&Se[D]||Se["@@iterator"],typeof Se=="function"?Se:null)}var ie={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,ae={};function se(Se,Ye,ot){this.props=Se,this.context=Ye,this.refs=ae,this.updater=ot||ie}se.prototype.isReactComponent={},se.prototype.setState=function(Se,Ye){if(typeof Se!="object"&&typeof Se!="function"&&Se!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Se,Ye,"setState")},se.prototype.forceUpdate=function(Se){this.updater.enqueueForceUpdate(this,Se,"forceUpdate")};function pe(){}pe.prototype=se.prototype;function Pe(Se,Ye,ot){this.props=Se,this.context=Ye,this.refs=ae,this.updater=ot||ie}var Ie=Pe.prototype=new pe;Ie.constructor=Pe,Q(Ie,se.prototype),Ie.isPureReactComponent=!0;var Ze=Array.isArray,Je=Object.prototype.hasOwnProperty,Xe={current:null},ut={key:!0,ref:!0,__self:!0,__source:!0};function je(Se,Ye,ot){var _t,zt={},ti=null,Ot=null;if(Ye!=null)for(_t in Ye.ref!==void 0&&(Ot=Ye.ref),Ye.key!==void 0&&(ti=""+Ye.key),Ye)Je.call(Ye,_t)&&!ut.hasOwnProperty(_t)&&(zt[_t]=Ye[_t]);var Rt=arguments.length-2;if(Rt===1)zt.children=ot;else if(1<Rt){for(var xi=Array(Rt),Bi=0;Bi<Rt;Bi++)xi[Bi]=arguments[Bi+2];zt.children=xi}if(Se&&Se.defaultProps)for(_t in Rt=Se.defaultProps,Rt)zt[_t]===void 0&&(zt[_t]=Rt[_t]);return{$$typeof:a,type:Se,key:ti,ref:Ot,props:zt,_owner:Xe.current}}function Ae(Se,Ye){return{$$typeof:a,type:Se.type,key:Ye,ref:Se.ref,props:Se.props,_owner:Se._owner}}function He(Se){return typeof Se=="object"&&Se!==null&&Se.$$typeof===a}function ct(Se){var Ye={"=":"=0",":":"=2"};return"$"+Se.replace(/[=:]/g,function(ot){return Ye[ot]})}var Jt=/\/+/g;function Ve(Se,Ye){return typeof Se=="object"&&Se!==null&&Se.key!=null?ct(""+Se.key):Ye.toString(36)}function at(Se,Ye,ot,_t,zt){var ti=typeof Se;(ti==="undefined"||ti==="boolean")&&(Se=null);var Ot=!1;if(Se===null)Ot=!0;else switch(ti){case"string":case"number":Ot=!0;break;case"object":switch(Se.$$typeof){case a:case l:Ot=!0}}if(Ot)return Ot=Se,zt=zt(Ot),Se=_t===""?"."+Ve(Ot,0):_t,Ze(zt)?(ot="",Se!=null&&(ot=Se.replace(Jt,"$&/")+"/"),at(zt,Ye,ot,"",function(Bi){return Bi})):zt!=null&&(He(zt)&&(zt=Ae(zt,ot+(!zt.key||Ot&&Ot.key===zt.key?"":(""+zt.key).replace(Jt,"$&/")+"/")+Se)),Ye.push(zt)),1;if(Ot=0,_t=_t===""?".":_t+":",Ze(Se))for(var Rt=0;Rt<Se.length;Rt++){ti=Se[Rt];var xi=_t+Ve(ti,Rt);Ot+=at(ti,Ye,ot,xi,zt)}else if(xi=O(Se),typeof xi=="function")for(Se=xi.call(Se),Rt=0;!(ti=Se.next()).done;)ti=ti.value,xi=_t+Ve(ti,Rt++),Ot+=at(ti,Ye,ot,xi,zt);else if(ti==="object")throw Ye=String(Se),Error("Objects are not valid as a React child (found: "+(Ye==="[object Object]"?"object with keys {"+Object.keys(Se).join(", ")+"}":Ye)+"). If you meant to render a collection of children, use an array instead.");return Ot}function Tt(Se,Ye,ot){if(Se==null)return Se;var _t=[],zt=0;return at(Se,_t,"","",function(ti){return Ye.call(ot,ti,zt++)}),_t}function Et(Se){if(Se._status===-1){var Ye=Se._result;Ye=Ye(),Ye.then(function(ot){(Se._status===0||Se._status===-1)&&(Se._status=1,Se._result=ot)},function(ot){(Se._status===0||Se._status===-1)&&(Se._status=2,Se._result=ot)}),Se._status===-1&&(Se._status=0,Se._result=Ye)}if(Se._status===1)return Se._result.default;throw Se._result}var gt={current:null},Be={transition:null},Nt={ReactCurrentDispatcher:gt,ReactCurrentBatchConfig:Be,ReactCurrentOwner:Xe};function it(){throw Error("act(...) is not supported in production builds of React.")}return Ei.Children={map:Tt,forEach:function(Se,Ye,ot){Tt(Se,function(){Ye.apply(this,arguments)},ot)},count:function(Se){var Ye=0;return Tt(Se,function(){Ye++}),Ye},toArray:function(Se){return Tt(Se,function(Ye){return Ye})||[]},only:function(Se){if(!He(Se))throw Error("React.Children.only expected to receive a single React element child.");return Se}},Ei.Component=se,Ei.Fragment=h,Ei.Profiler=j,Ei.PureComponent=Pe,Ei.StrictMode=x,Ei.Suspense=I,Ei.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Nt,Ei.act=it,Ei.cloneElement=function(Se,Ye,ot){if(Se==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Se+".");var _t=Q({},Se.props),zt=Se.key,ti=Se.ref,Ot=Se._owner;if(Ye!=null){if(Ye.ref!==void 0&&(ti=Ye.ref,Ot=Xe.current),Ye.key!==void 0&&(zt=""+Ye.key),Se.type&&Se.type.defaultProps)var Rt=Se.type.defaultProps;for(xi in Ye)Je.call(Ye,xi)&&!ut.hasOwnProperty(xi)&&(_t[xi]=Ye[xi]===void 0&&Rt!==void 0?Rt[xi]:Ye[xi])}var xi=arguments.length-2;if(xi===1)_t.children=ot;else if(1<xi){Rt=Array(xi);for(var Bi=0;Bi<xi;Bi++)Rt[Bi]=arguments[Bi+2];_t.children=Rt}return{$$typeof:a,type:Se.type,key:zt,ref:ti,props:_t,_owner:Ot}},Ei.createContext=function(Se){return Se={$$typeof:_,_currentValue:Se,_currentValue2:Se,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Se.Provider={$$typeof:k,_context:Se},Se.Consumer=Se},Ei.createElement=je,Ei.createFactory=function(Se){var Ye=je.bind(null,Se);return Ye.type=Se,Ye},Ei.createRef=function(){return{current:null}},Ei.forwardRef=function(Se){return{$$typeof:d,render:Se}},Ei.isValidElement=He,Ei.lazy=function(Se){return{$$typeof:R,_payload:{_status:-1,_result:Se},_init:Et}},Ei.memo=function(Se,Ye){return{$$typeof:z,type:Se,compare:Ye===void 0?null:Ye}},Ei.startTransition=function(Se){var Ye=Be.transition;Be.transition={};try{Se()}finally{Be.transition=Ye}},Ei.unstable_act=it,Ei.useCallback=function(Se,Ye){return gt.current.useCallback(Se,Ye)},Ei.useContext=function(Se){return gt.current.useContext(Se)},Ei.useDebugValue=function(){},Ei.useDeferredValue=function(Se){return gt.current.useDeferredValue(Se)},Ei.useEffect=function(Se,Ye){return gt.current.useEffect(Se,Ye)},Ei.useId=function(){return gt.current.useId()},Ei.useImperativeHandle=function(Se,Ye,ot){return gt.current.useImperativeHandle(Se,Ye,ot)},Ei.useInsertionEffect=function(Se,Ye){return gt.current.useInsertionEffect(Se,Ye)},Ei.useLayoutEffect=function(Se,Ye){return gt.current.useLayoutEffect(Se,Ye)},Ei.useMemo=function(Se,Ye){return gt.current.useMemo(Se,Ye)},Ei.useReducer=function(Se,Ye,ot){return gt.current.useReducer(Se,Ye,ot)},Ei.useRef=function(Se){return gt.current.useRef(Se)},Ei.useState=function(Se){return gt.current.useState(Se)},Ei.useSyncExternalStore=function(Se,Ye,ot){return gt.current.useSyncExternalStore(Se,Ye,ot)},Ei.useTransition=function(){return gt.current.useTransition()},Ei.version="18.3.1",Ei}var Jy;function Fx(){return Jy||(Jy=1,jg.exports=Qb()),jg.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ky;function e1(){if(Ky)return qp;Ky=1;var a=Fx(),l=Symbol.for("react.element"),h=Symbol.for("react.fragment"),x=Object.prototype.hasOwnProperty,j=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,k={key:!0,ref:!0,__self:!0,__source:!0};function _(d,I,z){var R,D={},O=null,ie=null;z!==void 0&&(O=""+z),I.key!==void 0&&(O=""+I.key),I.ref!==void 0&&(ie=I.ref);for(R in I)x.call(I,R)&&!k.hasOwnProperty(R)&&(D[R]=I[R]);if(d&&d.defaultProps)for(R in I=d.defaultProps,I)D[R]===void 0&&(D[R]=I[R]);return{$$typeof:l,type:d,key:O,ref:ie,props:D,_owner:j.current}}return qp.Fragment=h,qp.jsx=_,qp.jsxs=_,qp}var Qy;function t1(){return Qy||(Qy=1,bg.exports=e1()),bg.exports}var i=t1(),gf={},Ng={exports:{}},ua={},kg={exports:{}},Sg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e0;function i1(){return e0||(e0=1,(function(a){function l(Be,Nt){var it=Be.length;Be.push(Nt);e:for(;0<it;){var Se=it-1>>>1,Ye=Be[Se];if(0<j(Ye,Nt))Be[Se]=Nt,Be[it]=Ye,it=Se;else break e}}function h(Be){return Be.length===0?null:Be[0]}function x(Be){if(Be.length===0)return null;var Nt=Be[0],it=Be.pop();if(it!==Nt){Be[0]=it;e:for(var Se=0,Ye=Be.length,ot=Ye>>>1;Se<ot;){var _t=2*(Se+1)-1,zt=Be[_t],ti=_t+1,Ot=Be[ti];if(0>j(zt,it))ti<Ye&&0>j(Ot,zt)?(Be[Se]=Ot,Be[ti]=it,Se=ti):(Be[Se]=zt,Be[_t]=it,Se=_t);else if(ti<Ye&&0>j(Ot,it))Be[Se]=Ot,Be[ti]=it,Se=ti;else break e}}return Nt}function j(Be,Nt){var it=Be.sortIndex-Nt.sortIndex;return it!==0?it:Be.id-Nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var k=performance;a.unstable_now=function(){return k.now()}}else{var _=Date,d=_.now();a.unstable_now=function(){return _.now()-d}}var I=[],z=[],R=1,D=null,O=3,ie=!1,Q=!1,ae=!1,se=typeof setTimeout=="function"?setTimeout:null,pe=typeof clearTimeout=="function"?clearTimeout:null,Pe=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Ie(Be){for(var Nt=h(z);Nt!==null;){if(Nt.callback===null)x(z);else if(Nt.startTime<=Be)x(z),Nt.sortIndex=Nt.expirationTime,l(I,Nt);else break;Nt=h(z)}}function Ze(Be){if(ae=!1,Ie(Be),!Q)if(h(I)!==null)Q=!0,Et(Je);else{var Nt=h(z);Nt!==null&&gt(Ze,Nt.startTime-Be)}}function Je(Be,Nt){Q=!1,ae&&(ae=!1,pe(je),je=-1),ie=!0;var it=O;try{for(Ie(Nt),D=h(I);D!==null&&(!(D.expirationTime>Nt)||Be&&!ct());){var Se=D.callback;if(typeof Se=="function"){D.callback=null,O=D.priorityLevel;var Ye=Se(D.expirationTime<=Nt);Nt=a.unstable_now(),typeof Ye=="function"?D.callback=Ye:D===h(I)&&x(I),Ie(Nt)}else x(I);D=h(I)}if(D!==null)var ot=!0;else{var _t=h(z);_t!==null&&gt(Ze,_t.startTime-Nt),ot=!1}return ot}finally{D=null,O=it,ie=!1}}var Xe=!1,ut=null,je=-1,Ae=5,He=-1;function ct(){return!(a.unstable_now()-He<Ae)}function Jt(){if(ut!==null){var Be=a.unstable_now();He=Be;var Nt=!0;try{Nt=ut(!0,Be)}finally{Nt?Ve():(Xe=!1,ut=null)}}else Xe=!1}var Ve;if(typeof Pe=="function")Ve=function(){Pe(Jt)};else if(typeof MessageChannel<"u"){var at=new MessageChannel,Tt=at.port2;at.port1.onmessage=Jt,Ve=function(){Tt.postMessage(null)}}else Ve=function(){se(Jt,0)};function Et(Be){ut=Be,Xe||(Xe=!0,Ve())}function gt(Be,Nt){je=se(function(){Be(a.unstable_now())},Nt)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(Be){Be.callback=null},a.unstable_continueExecution=function(){Q||ie||(Q=!0,Et(Je))},a.unstable_forceFrameRate=function(Be){0>Be||125<Be?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<Be?Math.floor(1e3/Be):5},a.unstable_getCurrentPriorityLevel=function(){return O},a.unstable_getFirstCallbackNode=function(){return h(I)},a.unstable_next=function(Be){switch(O){case 1:case 2:case 3:var Nt=3;break;default:Nt=O}var it=O;O=Nt;try{return Be()}finally{O=it}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(Be,Nt){switch(Be){case 1:case 2:case 3:case 4:case 5:break;default:Be=3}var it=O;O=Be;try{return Nt()}finally{O=it}},a.unstable_scheduleCallback=function(Be,Nt,it){var Se=a.unstable_now();switch(typeof it=="object"&&it!==null?(it=it.delay,it=typeof it=="number"&&0<it?Se+it:Se):it=Se,Be){case 1:var Ye=-1;break;case 2:Ye=250;break;case 5:Ye=1073741823;break;case 4:Ye=1e4;break;default:Ye=5e3}return Ye=it+Ye,Be={id:R++,callback:Nt,priorityLevel:Be,startTime:it,expirationTime:Ye,sortIndex:-1},it>Se?(Be.sortIndex=it,l(z,Be),h(I)===null&&Be===h(z)&&(ae?(pe(je),je=-1):ae=!0,gt(Ze,it-Se))):(Be.sortIndex=Ye,l(I,Be),Q||ie||(Q=!0,Et(Je))),Be},a.unstable_shouldYield=ct,a.unstable_wrapCallback=function(Be){var Nt=O;return function(){var it=O;O=Nt;try{return Be.apply(this,arguments)}finally{O=it}}}})(Sg)),Sg}var t0;function s1(){return t0||(t0=1,kg.exports=i1()),kg.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function r1(){if(i0)return ua;i0=1;var a=Fx(),l=s1();function h(n){for(var c="https://reactjs.org/docs/error-decoder.html?invariant="+n,g=1;g<arguments.length;g++)c+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+n+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var x=new Set,j={};function k(n,c){_(n,c),_(n+"Capture",c)}function _(n,c){for(j[n]=c,n=0;n<c.length;n++)x.add(c[n])}var d=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),I=Object.prototype.hasOwnProperty,z=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,R={},D={};function O(n){return I.call(D,n)?!0:I.call(R,n)?!1:z.test(n)?D[n]=!0:(R[n]=!0,!1)}function ie(n,c,g,N){if(g!==null&&g.type===0)return!1;switch(typeof c){case"function":case"symbol":return!0;case"boolean":return N?!1:g!==null?!g.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Q(n,c,g,N){if(c===null||typeof c>"u"||ie(n,c,g,N))return!0;if(N)return!1;if(g!==null)switch(g.type){case 3:return!c;case 4:return c===!1;case 5:return isNaN(c);case 6:return isNaN(c)||1>c}return!1}function ae(n,c,g,N,E,L,Y){this.acceptsBooleans=c===2||c===3||c===4,this.attributeName=N,this.attributeNamespace=E,this.mustUseProperty=g,this.propertyName=n,this.type=c,this.sanitizeURL=L,this.removeEmptyString=Y}var se={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){se[n]=new ae(n,0,!1,n,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var c=n[0];se[c]=new ae(c,1,!1,n[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(n){se[n]=new ae(n,2,!1,n.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){se[n]=new ae(n,2,!1,n,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){se[n]=new ae(n,3,!1,n.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(n){se[n]=new ae(n,3,!0,n,null,!1,!1)}),["capture","download"].forEach(function(n){se[n]=new ae(n,4,!1,n,null,!1,!1)}),["cols","rows","size","span"].forEach(function(n){se[n]=new ae(n,6,!1,n,null,!1,!1)}),["rowSpan","start"].forEach(function(n){se[n]=new ae(n,5,!1,n.toLowerCase(),null,!1,!1)});var pe=/[\-:]([a-z])/g;function Pe(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var c=n.replace(pe,Pe);se[c]=new ae(c,1,!1,n,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var c=n.replace(pe,Pe);se[c]=new ae(c,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(n){var c=n.replace(pe,Pe);se[c]=new ae(c,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(n){se[n]=new ae(n,1,!1,n.toLowerCase(),null,!1,!1)}),se.xlinkHref=new ae("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(n){se[n]=new ae(n,1,!1,n.toLowerCase(),null,!0,!0)});function Ie(n,c,g,N){var E=se.hasOwnProperty(c)?se[c]:null;(E!==null?E.type!==0:N||!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(Q(c,g,E,N)&&(g=null),N||E===null?O(c)&&(g===null?n.removeAttribute(c):n.setAttribute(c,""+g)):E.mustUseProperty?n[E.propertyName]=g===null?E.type===3?!1:"":g:(c=E.attributeName,N=E.attributeNamespace,g===null?n.removeAttribute(c):(E=E.type,g=E===3||E===4&&g===!0?"":""+g,N?n.setAttributeNS(N,c,g):n.setAttribute(c,g))))}var Ze=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Je=Symbol.for("react.element"),Xe=Symbol.for("react.portal"),ut=Symbol.for("react.fragment"),je=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),He=Symbol.for("react.provider"),ct=Symbol.for("react.context"),Jt=Symbol.for("react.forward_ref"),Ve=Symbol.for("react.suspense"),at=Symbol.for("react.suspense_list"),Tt=Symbol.for("react.memo"),Et=Symbol.for("react.lazy"),gt=Symbol.for("react.offscreen"),Be=Symbol.iterator;function Nt(n){return n===null||typeof n!="object"?null:(n=Be&&n[Be]||n["@@iterator"],typeof n=="function"?n:null)}var it=Object.assign,Se;function Ye(n){if(Se===void 0)try{throw Error()}catch(g){var c=g.stack.trim().match(/\n( *(at )?)/);Se=c&&c[1]||""}return`
`+Se+n}var ot=!1;function _t(n,c){if(!n||ot)return"";ot=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(c)if(c=function(){throw Error()},Object.defineProperty(c.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(c,[])}catch($e){var N=$e}Reflect.construct(n,[],c)}else{try{c.call()}catch($e){N=$e}n.call(c.prototype)}else{try{throw Error()}catch($e){N=$e}n()}}catch($e){if($e&&N&&typeof $e.stack=="string"){for(var E=$e.stack.split(`
`),L=N.stack.split(`
`),Y=E.length-1,fe=L.length-1;1<=Y&&0<=fe&&E[Y]!==L[fe];)fe--;for(;1<=Y&&0<=fe;Y--,fe--)if(E[Y]!==L[fe]){if(Y!==1||fe!==1)do if(Y--,fe--,0>fe||E[Y]!==L[fe]){var be=`
`+E[Y].replace(" at new "," at ");return n.displayName&&be.includes("<anonymous>")&&(be=be.replace("<anonymous>",n.displayName)),be}while(1<=Y&&0<=fe);break}}}finally{ot=!1,Error.prepareStackTrace=g}return(n=n?n.displayName||n.name:"")?Ye(n):""}function zt(n){switch(n.tag){case 5:return Ye(n.type);case 16:return Ye("Lazy");case 13:return Ye("Suspense");case 19:return Ye("SuspenseList");case 0:case 2:case 15:return n=_t(n.type,!1),n;case 11:return n=_t(n.type.render,!1),n;case 1:return n=_t(n.type,!0),n;default:return""}}function ti(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case ut:return"Fragment";case Xe:return"Portal";case Ae:return"Profiler";case je:return"StrictMode";case Ve:return"Suspense";case at:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case ct:return(n.displayName||"Context")+".Consumer";case He:return(n._context.displayName||"Context")+".Provider";case Jt:var c=n.render;return n=n.displayName,n||(n=c.displayName||c.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Tt:return c=n.displayName||null,c!==null?c:ti(n.type)||"Memo";case Et:c=n._payload,n=n._init;try{return ti(n(c))}catch{}}return null}function Ot(n){var c=n.type;switch(n.tag){case 24:return"Cache";case 9:return(c.displayName||"Context")+".Consumer";case 10:return(c._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=c.render,n=n.displayName||n.name||"",c.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return c;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ti(c);case 8:return c===je?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c}return null}function Rt(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function xi(n){var c=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Bi(n){var c=xi(n)?"checked":"value",g=Object.getOwnPropertyDescriptor(n.constructor.prototype,c),N=""+n[c];if(!n.hasOwnProperty(c)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var E=g.get,L=g.set;return Object.defineProperty(n,c,{configurable:!0,get:function(){return E.call(this)},set:function(Y){N=""+Y,L.call(this,Y)}}),Object.defineProperty(n,c,{enumerable:g.enumerable}),{getValue:function(){return N},setValue:function(Y){N=""+Y},stopTracking:function(){n._valueTracker=null,delete n[c]}}}}function Ys(n){n._valueTracker||(n._valueTracker=Bi(n))}function hs(n){if(!n)return!1;var c=n._valueTracker;if(!c)return!0;var g=c.getValue(),N="";return n&&(N=xi(n)?n.checked?"true":"false":n.value),n=N,n!==g?(c.setValue(n),!0):!1}function Gr(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Pr(n,c){var g=c.checked;return it({},c,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??n._wrapperState.initialChecked})}function pa(n,c){var g=c.defaultValue==null?"":c.defaultValue,N=c.checked!=null?c.checked:c.defaultChecked;g=Rt(c.value!=null?c.value:g),n._wrapperState={initialChecked:N,initialValue:g,controlled:c.type==="checkbox"||c.type==="radio"?c.checked!=null:c.value!=null}}function Oe(n,c){c=c.checked,c!=null&&Ie(n,"checked",c,!1)}function mr(n,c){Oe(n,c);var g=Rt(c.value),N=c.type;if(g!=null)N==="number"?(g===0&&n.value===""||n.value!=g)&&(n.value=""+g):n.value!==""+g&&(n.value=""+g);else if(N==="submit"||N==="reset"){n.removeAttribute("value");return}c.hasOwnProperty("value")?hi(n,c.type,g):c.hasOwnProperty("defaultValue")&&hi(n,c.type,Rt(c.defaultValue)),c.checked==null&&c.defaultChecked!=null&&(n.defaultChecked=!!c.defaultChecked)}function ma(n,c,g){if(c.hasOwnProperty("value")||c.hasOwnProperty("defaultValue")){var N=c.type;if(!(N!=="submit"&&N!=="reset"||c.value!==void 0&&c.value!==null))return;c=""+n._wrapperState.initialValue,g||c===n.value||(n.value=c),n.defaultValue=c}g=n.name,g!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,g!==""&&(n.name=g)}function hi(n,c,g){(c!=="number"||Gr(n.ownerDocument)!==n)&&(g==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+g&&(n.defaultValue=""+g))}var Fi=Array.isArray;function dn(n,c,g,N){if(n=n.options,c){c={};for(var E=0;E<g.length;E++)c["$"+g[E]]=!0;for(g=0;g<n.length;g++)E=c.hasOwnProperty("$"+n[g].value),n[g].selected!==E&&(n[g].selected=E),E&&N&&(n[g].defaultSelected=!0)}else{for(g=""+Rt(g),c=null,E=0;E<n.length;E++){if(n[E].value===g){n[E].selected=!0,N&&(n[E].defaultSelected=!0);return}c!==null||n[E].disabled||(c=n[E])}c!==null&&(c.selected=!0)}}function ss(n,c){if(c.dangerouslySetInnerHTML!=null)throw Error(h(91));return it({},c,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Js(n,c){var g=c.value;if(g==null){if(g=c.children,c=c.defaultValue,g!=null){if(c!=null)throw Error(h(92));if(Fi(g)){if(1<g.length)throw Error(h(93));g=g[0]}c=g}c==null&&(c=""),g=c}n._wrapperState={initialValue:Rt(g)}}function fa(n,c){var g=Rt(c.value),N=Rt(c.defaultValue);g!=null&&(g=""+g,g!==n.value&&(n.value=g),c.defaultValue==null&&n.defaultValue!==g&&(n.defaultValue=g)),N!=null&&(n.defaultValue=""+N)}function fr(n){var c=n.textContent;c===n._wrapperState.initialValue&&c!==""&&c!==null&&(n.value=c)}function Mn(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ga(n,c){return n==null||n==="http://www.w3.org/1999/xhtml"?Mn(c):n==="http://www.w3.org/2000/svg"&&c==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var st,gr=(function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(c,g,N,E){MSApp.execUnsafeLocalFunction(function(){return n(c,g,N,E)})}:n})(function(n,c){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=c;else{for(st=st||document.createElement("div"),st.innerHTML="<svg>"+c.valueOf().toString()+"</svg>",c=st.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;c.firstChild;)n.appendChild(c.firstChild)}});function Xi(n,c){if(c){var g=n.firstChild;if(g&&g===n.lastChild&&g.nodeType===3){g.nodeValue=c;return}}n.textContent=c}var Ks={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},xr=["Webkit","ms","Moz","O"];Object.keys(Ks).forEach(function(n){xr.forEach(function(c){c=c+n.charAt(0).toUpperCase()+n.substring(1),Ks[c]=Ks[n]})});function dt(n,c,g){return c==null||typeof c=="boolean"||c===""?"":g||typeof c!="number"||c===0||Ks.hasOwnProperty(n)&&Ks[n]?(""+c).trim():c+"px"}function ui(n,c){n=n.style;for(var g in c)if(c.hasOwnProperty(g)){var N=g.indexOf("--")===0,E=dt(g,c[g],N);g==="float"&&(g="cssFloat"),N?n.setProperty(g,E):n[g]=E}}var Kt=it({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ps(n,c){if(c){if(Kt[n]&&(c.children!=null||c.dangerouslySetInnerHTML!=null))throw Error(h(137,n));if(c.dangerouslySetInnerHTML!=null){if(c.children!=null)throw Error(h(60));if(typeof c.dangerouslySetInnerHTML!="object"||!("__html"in c.dangerouslySetInnerHTML))throw Error(h(61))}if(c.style!=null&&typeof c.style!="object")throw Error(h(62))}}function yr(n,c){if(n.indexOf("-")===-1)return typeof c.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ei=null;function xs(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Zr=null,vr=null,Vs=null;function he(n){if(n=ic(n)){if(typeof Zr!="function")throw Error(h(280));var c=n.stateNode;c&&(c=sc(c),Zr(n.stateNode,n.type,c))}}function H(n){vr?Vs?Vs.push(n):Vs=[n]:vr=n}function q(){if(vr){var n=vr,c=Vs;if(Vs=vr=null,he(n),c)for(n=0;n<c.length;n++)he(c[n])}}function K(n,c){return n(c)}function oe(){}var ve=!1;function _e(n,c,g){if(ve)return n(c,g);ve=!0;try{return K(n,c,g)}finally{ve=!1,(vr!==null||Vs!==null)&&(oe(),q())}}function ke(n,c){var g=n.stateNode;if(g===null)return null;var N=sc(g);if(N===null)return null;g=N[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(N=!N.disabled)||(n=n.type,N=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!N;break e;default:n=!1}if(n)return null;if(g&&typeof g!="function")throw Error(h(231,c,typeof g));return g}var xe=!1;if(d)try{var Le={};Object.defineProperty(Le,"passive",{get:function(){xe=!0}}),window.addEventListener("test",Le,Le),window.removeEventListener("test",Le,Le)}catch{xe=!1}function We(n,c,g,N,E,L,Y,fe,be){var $e=Array.prototype.slice.call(arguments,3);try{c.apply(g,$e)}catch(tt){this.onError(tt)}}var Re=!1,et=null,Dt=!1,Ht=null,ki={onError:function(n){Re=!0,et=n}};function li(n,c,g,N,E,L,Y,fe,be){Re=!1,et=null,We.apply(ki,arguments)}function Si(n,c,g,N,E,L,Y,fe,be){if(li.apply(this,arguments),Re){if(Re){var $e=et;Re=!1,et=null}else throw Error(h(198));Dt||(Dt=!0,Ht=$e)}}function pi(n){var c=n,g=n;if(n.alternate)for(;c.return;)c=c.return;else{n=c;do c=n,(c.flags&4098)!==0&&(g=c.return),n=c.return;while(n)}return c.tag===3?g:null}function ys(n){if(n.tag===13){var c=n.memoizedState;if(c===null&&(n=n.alternate,n!==null&&(c=n.memoizedState)),c!==null)return c.dehydrated}return null}function rs(n){if(pi(n)!==n)throw Error(h(188))}function yi(n){var c=n.alternate;if(!c){if(c=pi(n),c===null)throw Error(h(188));return c!==n?null:n}for(var g=n,N=c;;){var E=g.return;if(E===null)break;var L=E.alternate;if(L===null){if(N=E.return,N!==null){g=N;continue}break}if(E.child===L.child){for(L=E.child;L;){if(L===g)return rs(E),n;if(L===N)return rs(E),c;L=L.sibling}throw Error(h(188))}if(g.return!==N.return)g=E,N=L;else{for(var Y=!1,fe=E.child;fe;){if(fe===g){Y=!0,g=E,N=L;break}if(fe===N){Y=!0,N=E,g=L;break}fe=fe.sibling}if(!Y){for(fe=L.child;fe;){if(fe===g){Y=!0,g=L,N=E;break}if(fe===N){Y=!0,N=L,g=E;break}fe=fe.sibling}if(!Y)throw Error(h(189))}}if(g.alternate!==N)throw Error(h(190))}if(g.tag!==3)throw Error(h(188));return g.stateNode.current===g?n:c}function Ii(n){return n=yi(n),n!==null?Yi(n):null}function Yi(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var c=Yi(n);if(c!==null)return c;n=n.sibling}return null}var Es=l.unstable_scheduleCallback,$s=l.unstable_cancelCallback,_r=l.unstable_shouldYield,Go=l.unstable_requestPaint,ai=l.unstable_now,_u=l.unstable_getCurrentPriorityLevel,Bl=l.unstable_ImmediatePriority,Er=l.unstable_UserBlockingPriority,or=l.unstable_NormalPriority,op=l.unstable_LowPriority,Xr=l.unstable_IdlePriority,lr=null,wr=null;function vo(n){if(wr&&typeof wr.onCommitFiberRoot=="function")try{wr.onCommitFiberRoot(lr,n,void 0,(n.current.flags&128)===128)}catch{}}var Li=Math.clz32?Math.clz32:vs,Fl=Math.log,An=Math.LN2;function vs(n){return n>>>=0,n===0?32:31-(Fl(n)/An|0)|0}var _o=64,Mr=4194304;function wo(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ar(n,c){var g=n.pendingLanes;if(g===0)return 0;var N=0,E=n.suspendedLanes,L=n.pingedLanes,Y=g&268435455;if(Y!==0){var fe=Y&~E;fe!==0?N=wo(fe):(L&=Y,L!==0&&(N=wo(L)))}else Y=g&~E,Y!==0?N=wo(Y):L!==0&&(N=wo(L));if(N===0)return 0;if(c!==0&&c!==N&&(c&E)===0&&(E=N&-N,L=c&-c,E>=L||E===16&&(L&4194240)!==0))return c;if((N&4)!==0&&(N|=g&16),c=n.entangledLanes,c!==0)for(n=n.entanglements,c&=N;0<c;)g=31-Li(c),E=1<<g,N|=n[g],c&=~E;return N}function lp(n,c){switch(n){case 1:case 2:case 4:return c+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pc(n,c){for(var g=n.suspendedLanes,N=n.pingedLanes,E=n.expirationTimes,L=n.pendingLanes;0<L;){var Y=31-Li(L),fe=1<<Y,be=E[Y];be===-1?((fe&g)===0||(fe&N)!==0)&&(E[Y]=lp(fe,c)):be<=c&&(n.expiredLanes|=fe),L&=~fe}}function xa(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function ya(){var n=_o;return _o<<=1,(_o&4194240)===0&&(_o=64),n}function Ti(n){for(var c=[],g=0;31>g;g++)c.push(n);return c}function bo(n,c,g){n.pendingLanes|=c,c!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,c=31-Li(c),n[c]=g}function wu(n,c){var g=n.pendingLanes&~c;n.pendingLanes=c,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=c,n.mutableReadLanes&=c,n.entangledLanes&=c,c=n.entanglements;var N=n.eventTimes;for(n=n.expirationTimes;0<g;){var E=31-Li(g),L=1<<E;c[E]=0,N[E]=-1,n[E]=-1,g&=~L}}function Ua(n,c){var g=n.entangledLanes|=c;for(n=n.entanglements;g;){var N=31-Li(g),E=1<<N;E&c|n[N]&c&&(n[N]|=c),g&=~E}}var zi=0;function Ol(n){return n&=-n,1<n?4<n?(n&268435455)!==0?16:536870912:4:1}var Zo,Xo,jo,bu,Fd,Ec=!1,Mc=[],Ir=null,hn=null,_s=null,Us=new Map,Ha=new Map,In=[],Ac="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ju(n,c){switch(n){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":Us.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ha.delete(c.pointerId)}}function Qn(n,c,g,N,E,L){return n===null||n.nativeEvent!==L?(n={blockedOn:c,domEventName:g,eventSystemFlags:N,nativeEvent:L,targetContainers:[E]},c!==null&&(c=ic(c),c!==null&&Xo(c)),n):(n.eventSystemFlags|=N,c=n.targetContainers,E!==null&&c.indexOf(E)===-1&&c.push(E),n)}function cp(n,c,g,N,E){switch(c){case"focusin":return Ir=Qn(Ir,n,c,g,N,E),!0;case"dragenter":return hn=Qn(hn,n,c,g,N,E),!0;case"mouseover":return _s=Qn(_s,n,c,g,N,E),!0;case"pointerover":var L=E.pointerId;return Us.set(L,Qn(Us.get(L)||null,n,c,g,N,E)),!0;case"gotpointercapture":return L=E.pointerId,Ha.set(L,Qn(Ha.get(L)||null,n,c,g,N,E)),!0}return!1}function Nu(n){var c=Ea(n.target);if(c!==null){var g=pi(c);if(g!==null){if(c=g.tag,c===13){if(c=ys(g),c!==null){n.blockedOn=c,Fd(n.priority,function(){jo(g)});return}}else if(c===3&&g.stateNode.current.memoizedState.isDehydrated){n.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Vl(n){if(n.blockedOn!==null)return!1;for(var c=n.targetContainers;0<c.length;){var g=$l(n.domEventName,n.eventSystemFlags,c[0],n.nativeEvent);if(g===null){g=n.nativeEvent;var N=new g.constructor(g.type,g);ei=N,g.target.dispatchEvent(N),ei=null}else return c=ic(g),c!==null&&Xo(c),n.blockedOn=g,!1;c.shift()}return!0}function Od(n,c,g){Vl(n)&&g.delete(c)}function up(){Ec=!1,Ir!==null&&Vl(Ir)&&(Ir=null),hn!==null&&Vl(hn)&&(hn=null),_s!==null&&Vl(_s)&&(_s=null),Us.forEach(Od),Ha.forEach(Od)}function Yo(n,c){n.blockedOn===c&&(n.blockedOn=null,Ec||(Ec=!0,l.unstable_scheduleCallback(l.unstable_NormalPriority,up)))}function va(n){function c(E){return Yo(E,n)}if(0<Mc.length){Yo(Mc[0],n);for(var g=1;g<Mc.length;g++){var N=Mc[g];N.blockedOn===n&&(N.blockedOn=null)}}for(Ir!==null&&Yo(Ir,n),hn!==null&&Yo(hn,n),_s!==null&&Yo(_s,n),Us.forEach(c),Ha.forEach(c),g=0;g<In.length;g++)N=In[g],N.blockedOn===n&&(N.blockedOn=null);for(;0<In.length&&(g=In[0],g.blockedOn===null);)Nu(g),g.blockedOn===null&&In.shift()}var Wa=Ze.ReactCurrentBatchConfig,No=!0;function ku(n,c,g,N){var E=zi,L=Wa.transition;Wa.transition=null;try{zi=1,pn(n,c,g,N)}finally{zi=E,Wa.transition=L}}function Su(n,c,g,N){var E=zi,L=Wa.transition;Wa.transition=null;try{zi=4,pn(n,c,g,N)}finally{zi=E,Wa.transition=L}}function pn(n,c,g,N){if(No){var E=$l(n,c,g,N);if(E===null)tc(n,c,N,Ic,g),ju(n,N);else if(cp(E,n,c,g,N))N.stopPropagation();else if(ju(n,N),c&4&&-1<Ac.indexOf(n)){for(;E!==null;){var L=ic(E);if(L!==null&&Zo(L),L=$l(n,c,g,N),L===null&&tc(n,c,N,Ic,g),L===E)break;E=L}E!==null&&N.stopPropagation()}else tc(n,c,N,null,g)}}var Ic=null;function $l(n,c,g,N){if(Ic=null,n=xs(N),n=Ea(n),n!==null)if(c=pi(n),c===null)n=null;else if(g=c.tag,g===13){if(n=ys(c),n!==null)return n;n=null}else if(g===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;n=null}else c!==n&&(n=null);return Ic=n,null}function qa(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_u()){case Bl:return 1;case Er:return 4;case or:case op:return 16;case Xr:return 536870912;default:return 16}default:return 16}}var br=null,Pi=null,ko=null;function Vd(){if(ko)return ko;var n,c=Pi,g=c.length,N,E="value"in br?br.value:br.textContent,L=E.length;for(n=0;n<g&&c[n]===E[n];n++);var Y=g-n;for(N=1;N<=Y&&c[g-N]===E[L-N];N++);return ko=E.slice(n,1<N?1-N:void 0)}function _a(n){var c=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&c===13&&(n=13)):n=c,n===10&&(n=13),32<=n||n===13?n:0}function zc(){return!0}function Tu(){return!1}function Yr(n){function c(g,N,E,L,Y){this._reactName=g,this._targetInst=E,this.type=N,this.nativeEvent=L,this.target=Y,this.currentTarget=null;for(var fe in n)n.hasOwnProperty(fe)&&(g=n[fe],this[fe]=g?g(L):L[fe]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?zc:Tu,this.isPropagationStopped=Tu,this}return it(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=zc)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=zc)},persist:function(){},isPersistent:zc}),c}var So={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ul=Yr(So),Jo=it({},So,{view:0,detail:0}),$d=Yr(Jo),Dc,Rc,zn,Hl=it({},Jo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ql,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==zn&&(zn&&n.type==="mousemove"?(Dc=n.screenX-zn.screenX,Rc=n.screenY-zn.screenY):Rc=Dc=0,zn=n),Dc)},movementY:function(n){return"movementY"in n?n.movementY:Rc}}),Ud=Yr(Hl),Hd=it({},Hl,{dataTransfer:0}),Wl=Yr(Hd),dp=it({},Jo,{relatedTarget:0}),Ko=Yr(dp),hp=it({},So,{animationName:0,elapsedTime:0,pseudoElement:0}),pp=Yr(hp),Wd=it({},So,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qd=Yr(Wd),Gd=it({},So,{data:0}),Lc=Yr(Gd),Zd={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Bc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wa={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Cu(n){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(n):(n=wa[n])?!!c[n]:!1}function ql(){return Cu}var Pu=it({},Jo,{key:function(n){if(n.key){var c=Zd[n.key]||n.key;if(c!=="Unidentified")return c}return n.type==="keypress"?(n=_a(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?Bc[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ql,charCode:function(n){return n.type==="keypress"?_a(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?_a(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),Fc=Yr(Pu),Eu=it({},Hl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ga=Yr(Eu),Mu=it({},Jo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ql}),mp=Yr(Mu),ps=it({},So,{propertyName:0,elapsedTime:0,pseudoElement:0}),fp=Yr(ps),_i=it({},Hl,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Oc=Yr(_i),Wi=[9,13,27,32],Di=d&&"CompositionEvent"in window,Dn=null;d&&"documentMode"in document&&(Dn=document.documentMode);var Gl=d&&"TextEvent"in window&&!Dn,Qo=d&&(!Di||Dn&&8<Dn&&11>=Dn),Vc=" ",Za=!1;function To(n,c){switch(n){case"keyup":return Wi.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jr(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Xa=!1;function Au(n,c){switch(n){case"compositionend":return Jr(c);case"keypress":return c.which!==32?null:(Za=!0,Vc);case"textInput":return n=c.data,n===Vc&&Za?null:n;default:return null}}function Iu(n,c){if(Xa)return n==="compositionend"||!Di&&To(n,c)?(n=Vd(),ko=Pi=br=null,Xa=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return Qo&&c.locale!=="ko"?null:c.data;default:return null}}var Co={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function el(n){var c=n&&n.nodeName&&n.nodeName.toLowerCase();return c==="input"?!!Co[n.type]:c==="textarea"}function tl(n,c,g,N){H(N),c=ol(c,"onChange"),0<c.length&&(g=new Ul("onChange","change",null,g,N),n.push({event:g,listeners:c}))}var ea=null,ba=null;function $c(n){Gc(n,0)}function ja(n){var c=Fn(n);if(hs(c))return n}function il(n,c){if(n==="change")return c}var zu=!1;if(d){var Zl;if(d){var ji="oninput"in document;if(!ji){var Xl=document.createElement("div");Xl.setAttribute("oninput","return;"),ji=typeof Xl.oninput=="function"}Zl=ji}else Zl=!1;zu=Zl&&(!document.documentMode||9<document.documentMode)}function Xd(){ea&&(ea.detachEvent("onpropertychange",Du),ba=ea=null)}function Du(n){if(n.propertyName==="value"&&ja(ba)){var c=[];tl(c,ba,n,xs(n)),_e($c,c)}}function sl(n,c,g){n==="focusin"?(Xd(),ea=c,ba=g,ea.attachEvent("onpropertychange",Du)):n==="focusout"&&Xd()}function Yd(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return ja(ba)}function Uc(n,c){if(n==="click")return ja(c)}function Jd(n,c){if(n==="input"||n==="change")return ja(c)}function Kd(n,c){return n===c&&(n!==0||1/n===1/c)||n!==n&&c!==c}var zr=typeof Object.is=="function"?Object.is:Kd;function Ya(n,c){if(zr(n,c))return!0;if(typeof n!="object"||n===null||typeof c!="object"||c===null)return!1;var g=Object.keys(n),N=Object.keys(c);if(g.length!==N.length)return!1;for(N=0;N<g.length;N++){var E=g[N];if(!I.call(c,E)||!zr(n[E],c[E]))return!1}return!0}function Po(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function Eo(n,c){var g=Po(n);n=0;for(var N;g;){if(g.nodeType===3){if(N=n+g.textContent.length,n<=c&&N>=c)return{node:g,offset:c-n};n=N}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Po(g)}}function Mo(n,c){return n&&c?n===c?!0:n&&n.nodeType===3?!1:c&&c.nodeType===3?Mo(n,c.parentNode):"contains"in n?n.contains(c):n.compareDocumentPosition?!!(n.compareDocumentPosition(c)&16):!1:!1}function Hc(){for(var n=window,c=Gr();c instanceof n.HTMLIFrameElement;){try{var g=typeof c.contentWindow.location.href=="string"}catch{g=!1}if(g)n=c.contentWindow;else break;c=Gr(n.document)}return c}function Ja(n){var c=n&&n.nodeName&&n.nodeName.toLowerCase();return c&&(c==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||c==="textarea"||n.contentEditable==="true")}function Yl(n){var c=Hc(),g=n.focusedElem,N=n.selectionRange;if(c!==g&&g&&g.ownerDocument&&Mo(g.ownerDocument.documentElement,g)){if(N!==null&&Ja(g)){if(c=N.start,n=N.end,n===void 0&&(n=c),"selectionStart"in g)g.selectionStart=c,g.selectionEnd=Math.min(n,g.value.length);else if(n=(c=g.ownerDocument||document)&&c.defaultView||window,n.getSelection){n=n.getSelection();var E=g.textContent.length,L=Math.min(N.start,E);N=N.end===void 0?L:Math.min(N.end,E),!n.extend&&L>N&&(E=N,N=L,L=E),E=Eo(g,L);var Y=Eo(g,N);E&&Y&&(n.rangeCount!==1||n.anchorNode!==E.node||n.anchorOffset!==E.offset||n.focusNode!==Y.node||n.focusOffset!==Y.offset)&&(c=c.createRange(),c.setStart(E.node,E.offset),n.removeAllRanges(),L>N?(n.addRange(c),n.extend(Y.node,Y.offset)):(c.setEnd(Y.node,Y.offset),n.addRange(c)))}}for(c=[],n=g;n=n.parentNode;)n.nodeType===1&&c.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<c.length;g++)n=c[g],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var Wc=d&&"documentMode"in document&&11>=document.documentMode,Na=null,Jl=null,Kl=null,qc=!1;function Ql(n,c,g){var N=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;qc||Na==null||Na!==Gr(N)||(N=Na,"selectionStart"in N&&Ja(N)?N={start:N.selectionStart,end:N.selectionEnd}:(N=(N.ownerDocument&&N.ownerDocument.defaultView||window).getSelection(),N={anchorNode:N.anchorNode,anchorOffset:N.anchorOffset,focusNode:N.focusNode,focusOffset:N.focusOffset}),Kl&&Ya(Kl,N)||(Kl=N,N=ol(Jl,"onSelect"),0<N.length&&(c=new Ul("onSelect","select",null,c,g),n.push({event:c,listeners:N}),c.target=Na)))}function rl(n,c){var g={};return g[n.toLowerCase()]=c.toLowerCase(),g["Webkit"+n]="webkit"+c,g["Moz"+n]="moz"+c,g}var ta={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},Ao={},Qs={};d&&(Qs=document.createElement("div").style,"AnimationEvent"in window||(delete ta.animationend.animation,delete ta.animationiteration.animation,delete ta.animationstart.animation),"TransitionEvent"in window||delete ta.transitionend.transition);function ia(n){if(Ao[n])return Ao[n];if(!ta[n])return n;var c=ta[n],g;for(g in c)if(c.hasOwnProperty(g)&&g in Qs)return Ao[n]=c[g];return n}var Ru=ia("animationend"),Lu=ia("animationiteration"),ls=ia("animationstart"),mn=ia("transitionend"),Dr=new Map,nl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function sa(n,c){Dr.set(n,c),k(c,[n])}for(var al=0;al<nl.length;al++){var Ka=nl[al],ka=Ka.toLowerCase(),Bu=Ka[0].toUpperCase()+Ka.slice(1);sa(ka,"on"+Bu)}sa(Ru,"onAnimationEnd"),sa(Lu,"onAnimationIteration"),sa(ls,"onAnimationStart"),sa("dblclick","onDoubleClick"),sa("focusin","onFocus"),sa("focusout","onBlur"),sa(mn,"onTransitionEnd"),_("onMouseEnter",["mouseout","mouseover"]),_("onMouseLeave",["mouseout","mouseover"]),_("onPointerEnter",["pointerout","pointerover"]),_("onPointerLeave",["pointerout","pointerover"]),k("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),k("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),k("onBeforeInput",["compositionend","keypress","textInput","paste"]),k("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),k("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fu=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qa));function ec(n,c,g){var N=n.type||"unknown-event";n.currentTarget=g,Si(N,c,void 0,n),n.currentTarget=null}function Gc(n,c){c=(c&4)!==0;for(var g=0;g<n.length;g++){var N=n[g],E=N.event;N=N.listeners;e:{var L=void 0;if(c)for(var Y=N.length-1;0<=Y;Y--){var fe=N[Y],be=fe.instance,$e=fe.currentTarget;if(fe=fe.listener,be!==L&&E.isPropagationStopped())break e;ec(E,fe,$e),L=be}else for(Y=0;Y<N.length;Y++){if(fe=N[Y],be=fe.instance,$e=fe.currentTarget,fe=fe.listener,be!==L&&E.isPropagationStopped())break e;ec(E,fe,$e),L=be}}}if(Dt)throw n=Ht,Dt=!1,Ht=null,n}function qi(n,c){var g=c[wi];g===void 0&&(g=c[wi]=new Set);var N=n+"__bubble";g.has(N)||(Zc(c,n,2,!1),g.add(N))}function Sa(n,c,g){var N=0;c&&(N|=4),Zc(g,n,N,c)}var Io="_reactListening"+Math.random().toString(36).slice(2);function Ta(n){if(!n[Io]){n[Io]=!0,x.forEach(function(g){g!=="selectionchange"&&(Fu.has(g)||Sa(g,!1,n),Sa(g,!0,n))});var c=n.nodeType===9?n:n.ownerDocument;c===null||c[Io]||(c[Io]=!0,Sa("selectionchange",!1,c))}}function Zc(n,c,g,N){switch(qa(c)){case 1:var E=ku;break;case 4:E=Su;break;default:E=pn}g=E.bind(null,c,g,n),E=void 0,!xe||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(E=!0),N?E!==void 0?n.addEventListener(c,g,{capture:!0,passive:E}):n.addEventListener(c,g,!0):E!==void 0?n.addEventListener(c,g,{passive:E}):n.addEventListener(c,g,!1)}function tc(n,c,g,N,E){var L=N;if((c&1)===0&&(c&2)===0&&N!==null)e:for(;;){if(N===null)return;var Y=N.tag;if(Y===3||Y===4){var fe=N.stateNode.containerInfo;if(fe===E||fe.nodeType===8&&fe.parentNode===E)break;if(Y===4)for(Y=N.return;Y!==null;){var be=Y.tag;if((be===3||be===4)&&(be=Y.stateNode.containerInfo,be===E||be.nodeType===8&&be.parentNode===E))return;Y=Y.return}for(;fe!==null;){if(Y=Ea(fe),Y===null)return;if(be=Y.tag,be===5||be===6){N=L=Y;continue e}fe=fe.parentNode}}N=N.return}_e(function(){var $e=L,tt=xs(g),nt=[];e:{var Qe=Dr.get(n);if(Qe!==void 0){var bt=Ul,Lt=n;switch(n){case"keypress":if(_a(g)===0)break e;case"keydown":case"keyup":bt=Fc;break;case"focusin":Lt="focus",bt=Ko;break;case"focusout":Lt="blur",bt=Ko;break;case"beforeblur":case"afterblur":bt=Ko;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=Ud;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Wl;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=mp;break;case Ru:case Lu:case ls:bt=pp;break;case mn:bt=fp;break;case"scroll":bt=$d;break;case"wheel":bt=Oc;break;case"copy":case"cut":case"paste":bt=qd;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=Ga}var Wt=(c&4)!==0,Ns=!Wt&&n==="scroll",De=Wt?Qe!==null?Qe+"Capture":null:Qe;Wt=[];for(var Te=$e,Fe;Te!==null;){Fe=Te;var ft=Fe.stateNode;if(Fe.tag===5&&ft!==null&&(Fe=ft,De!==null&&(ft=ke(Te,De),ft!=null&&Wt.push(zo(Te,ft,Fe)))),Ns)break;Te=Te.return}0<Wt.length&&(Qe=new bt(Qe,Lt,null,g,tt),nt.push({event:Qe,listeners:Wt}))}}if((c&7)===0){e:{if(Qe=n==="mouseover"||n==="pointerover",bt=n==="mouseout"||n==="pointerout",Qe&&g!==ei&&(Lt=g.relatedTarget||g.fromElement)&&(Ea(Lt)||Lt[Bn]))break e;if((bt||Qe)&&(Qe=tt.window===tt?tt:(Qe=tt.ownerDocument)?Qe.defaultView||Qe.parentWindow:window,bt?(Lt=g.relatedTarget||g.toElement,bt=$e,Lt=Lt?Ea(Lt):null,Lt!==null&&(Ns=pi(Lt),Lt!==Ns||Lt.tag!==5&&Lt.tag!==6)&&(Lt=null)):(bt=null,Lt=$e),bt!==Lt)){if(Wt=Ud,ft="onMouseLeave",De="onMouseEnter",Te="mouse",(n==="pointerout"||n==="pointerover")&&(Wt=Ga,ft="onPointerLeave",De="onPointerEnter",Te="pointer"),Ns=bt==null?Qe:Fn(bt),Fe=Lt==null?Qe:Fn(Lt),Qe=new Wt(ft,Te+"leave",bt,g,tt),Qe.target=Ns,Qe.relatedTarget=Fe,ft=null,Ea(tt)===$e&&(Wt=new Wt(De,Te+"enter",Lt,g,tt),Wt.target=Fe,Wt.relatedTarget=Ns,ft=Wt),Ns=ft,bt&&Lt)t:{for(Wt=bt,De=Lt,Te=0,Fe=Wt;Fe;Fe=Ca(Fe))Te++;for(Fe=0,ft=De;ft;ft=Ca(ft))Fe++;for(;0<Te-Fe;)Wt=Ca(Wt),Te--;for(;0<Fe-Te;)De=Ca(De),Fe--;for(;Te--;){if(Wt===De||De!==null&&Wt===De.alternate)break t;Wt=Ca(Wt),De=Ca(De)}Wt=null}else Wt=null;bt!==null&&ll(nt,Qe,bt,Wt,!1),Lt!==null&&Ns!==null&&ll(nt,Ns,Lt,Wt,!0)}}e:{if(Qe=$e?Fn($e):window,bt=Qe.nodeName&&Qe.nodeName.toLowerCase(),bt==="select"||bt==="input"&&Qe.type==="file")var Xt=il;else if(el(Qe))if(zu)Xt=Jd;else{Xt=Yd;var ri=sl}else(bt=Qe.nodeName)&&bt.toLowerCase()==="input"&&(Qe.type==="checkbox"||Qe.type==="radio")&&(Xt=Uc);if(Xt&&(Xt=Xt(n,$e))){tl(nt,Xt,g,tt);break e}ri&&ri(n,Qe,$e),n==="focusout"&&(ri=Qe._wrapperState)&&ri.controlled&&Qe.type==="number"&&hi(Qe,"number",Qe.value)}switch(ri=$e?Fn($e):window,n){case"focusin":(el(ri)||ri.contentEditable==="true")&&(Na=ri,Jl=$e,Kl=null);break;case"focusout":Kl=Jl=Na=null;break;case"mousedown":qc=!0;break;case"contextmenu":case"mouseup":case"dragend":qc=!1,Ql(nt,g,tt);break;case"selectionchange":if(Wc)break;case"keydown":case"keyup":Ql(nt,g,tt)}var Yt;if(Di)e:{switch(n){case"compositionstart":var di="onCompositionStart";break e;case"compositionend":di="onCompositionEnd";break e;case"compositionupdate":di="onCompositionUpdate";break e}di=void 0}else Xa?To(n,g)&&(di="onCompositionEnd"):n==="keydown"&&g.keyCode===229&&(di="onCompositionStart");di&&(Qo&&g.locale!=="ko"&&(Xa||di!=="onCompositionStart"?di==="onCompositionEnd"&&Xa&&(Yt=Vd()):(br=tt,Pi="value"in br?br.value:br.textContent,Xa=!0)),ri=ol($e,di),0<ri.length&&(di=new Lc(di,n,null,g,tt),nt.push({event:di,listeners:ri}),Yt?di.data=Yt:(Yt=Jr(g),Yt!==null&&(di.data=Yt)))),(Yt=Gl?Au(n,g):Iu(n,g))&&($e=ol($e,"onBeforeInput"),0<$e.length&&(tt=new Lc("onBeforeInput","beforeinput",null,g,tt),nt.push({event:tt,listeners:$e}),tt.data=Yt))}Gc(nt,c)})}function zo(n,c,g){return{instance:n,listener:c,currentTarget:g}}function ol(n,c){for(var g=c+"Capture",N=[];n!==null;){var E=n,L=E.stateNode;E.tag===5&&L!==null&&(E=L,L=ke(n,g),L!=null&&N.unshift(zo(n,L,E)),L=ke(n,c),L!=null&&N.push(zo(n,L,E))),n=n.return}return N}function Ca(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ll(n,c,g,N,E){for(var L=c._reactName,Y=[];g!==null&&g!==N;){var fe=g,be=fe.alternate,$e=fe.stateNode;if(be!==null&&be===N)break;fe.tag===5&&$e!==null&&(fe=$e,E?(be=ke(g,L),be!=null&&Y.unshift(zo(g,be,fe))):E||(be=ke(g,L),be!=null&&Y.push(zo(g,be,fe)))),g=g.return}Y.length!==0&&n.push({event:c,listeners:Y})}var Qd=/\r\n?/g,fn=/\u0000|\uFFFD/g;function Rn(n){return(typeof n=="string"?n:""+n).replace(Qd,`
`).replace(fn,"")}function cl(n,c,g){if(c=Rn(c),Rn(n)!==c&&g)throw Error(h(425))}function Rr(){}var Pa=null,Ou=null;function Vu(n,c){return n==="textarea"||n==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var Xc=typeof setTimeout=="function"?setTimeout:void 0,eh=typeof clearTimeout=="function"?clearTimeout:void 0,Yc=typeof Promise=="function"?Promise:void 0,ul=typeof queueMicrotask=="function"?queueMicrotask:typeof Yc<"u"?function(n){return Yc.resolve(null).then(n).catch(gn)}:Xc;function gn(n){setTimeout(function(){throw n})}function Ct(n,c){var g=c,N=0;do{var E=g.nextSibling;if(n.removeChild(g),E&&E.nodeType===8)if(g=E.data,g==="/$"){if(N===0){n.removeChild(E),va(c);return}N--}else g!=="$"&&g!=="$?"&&g!=="$!"||N++;g=E}while(g);va(c)}function Ln(n){for(;n!=null;n=n.nextSibling){var c=n.nodeType;if(c===1||c===3)break;if(c===8){if(c=n.data,c==="$"||c==="$!"||c==="$?")break;if(c==="/$")return null}}return n}function Jc(n){n=n.previousSibling;for(var c=0;n;){if(n.nodeType===8){var g=n.data;if(g==="$"||g==="$!"||g==="$?"){if(c===0)return n;c--}else g==="/$"&&c++}n=n.previousSibling}return null}var Do=Math.random().toString(36).slice(2),jr="__reactFiber$"+Do,ra="__reactProps$"+Do,Bn="__reactContainer$"+Do,wi="__reactEvents$"+Do,$u="__reactListeners$"+Do,gp="__reactHandles$"+Do;function Ea(n){var c=n[jr];if(c)return c;for(var g=n.parentNode;g;){if(c=g[Bn]||g[jr]){if(g=c.alternate,c.child!==null||g!==null&&g.child!==null)for(n=Jc(n);n!==null;){if(g=n[jr])return g;n=Jc(n)}return c}n=g,g=n.parentNode}return null}function ic(n){return n=n[jr]||n[Bn],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Fn(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(h(33))}function sc(n){return n[ra]||null}var rc=[],Ro=-1;function eo(n){return{current:n}}function Gi(n){0>Ro||(n.current=rc[Ro],rc[Ro]=null,Ro--)}function Ji(n,c){Ro++,rc[Ro]=n.current,n.current=c}var to={},Vi=eo(to),bi=eo(!1),xn=to;function Ma(n,c){var g=n.type.contextTypes;if(!g)return to;var N=n.stateNode;if(N&&N.__reactInternalMemoizedUnmaskedChildContext===c)return N.__reactInternalMemoizedMaskedChildContext;var E={},L;for(L in g)E[L]=c[L];return N&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=c,n.__reactInternalMemoizedMaskedChildContext=E),E}function er(n){return n=n.childContextTypes,n!=null}function nc(){Gi(bi),Gi(Vi)}function dl(n,c,g){if(Vi.current!==to)throw Error(h(168));Ji(Vi,c),Ji(bi,g)}function hl(n,c,g){var N=n.stateNode;if(c=c.childContextTypes,typeof N.getChildContext!="function")return g;N=N.getChildContext();for(var E in N)if(!(E in c))throw Error(h(108,Ot(n)||"Unknown",E));return it({},g,N)}function Kr(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||to,xn=Vi.current,Ji(Vi,n),Ji(bi,bi.current),!0}function pl(n,c,g){var N=n.stateNode;if(!N)throw Error(h(169));g?(n=hl(n,c,xn),N.__reactInternalMemoizedMergedChildContext=n,Gi(bi),Gi(Vi),Ji(Vi,n)):Gi(bi),Ji(bi,g)}var Pt=null,qt=!1,ml=!1;function ac(n){Pt===null?Pt=[n]:Pt.push(n)}function Uu(n){qt=!0,ac(n)}function v(){if(!ml&&Pt!==null){ml=!0;var n=0,c=zi;try{var g=Pt;for(zi=1;n<g.length;n++){var N=g[n];do N=N(!0);while(N!==null)}Pt=null,qt=!1}catch(E){throw Pt!==null&&(Pt=Pt.slice(n+1)),Es(Bl,v),E}finally{zi=c,ml=!1}}return null}var e=[],o=0,p=null,m=0,y=[],T=0,P=null,M=1,B="";function $(n,c){e[o++]=m,e[o++]=p,p=n,m=c}function U(n,c,g){y[T++]=M,y[T++]=B,y[T++]=P,P=n;var N=M;n=B;var E=32-Li(N)-1;N&=~(1<<E),g+=1;var L=32-Li(c)+E;if(30<L){var Y=E-E%5;L=(N&(1<<Y)-1).toString(32),N>>=Y,E-=Y,M=1<<32-Li(c)+E|g<<E|N,B=L+n}else M=1<<L|g<<E|N,B=n}function X(n){n.return!==null&&($(n,1),U(n,1,0))}function ee(n){for(;n===p;)p=e[--o],e[o]=null,m=e[--o],e[o]=null;for(;n===P;)P=y[--T],y[T]=null,B=y[--T],y[T]=null,M=y[--T],y[T]=null}var ne=null,le=null,ue=!1,me=null;function ye(n,c){var g=Nn(5,null,null,0);g.elementType="DELETED",g.stateNode=c,g.return=n,c=n.deletions,c===null?(n.deletions=[g],n.flags|=16):c.push(g)}function ce(n,c){switch(n.tag){case 5:var g=n.type;return c=c.nodeType!==1||g.toLowerCase()!==c.nodeName.toLowerCase()?null:c,c!==null?(n.stateNode=c,ne=n,le=Ln(c.firstChild),!0):!1;case 6:return c=n.pendingProps===""||c.nodeType!==3?null:c,c!==null?(n.stateNode=c,ne=n,le=null,!0):!1;case 13:return c=c.nodeType!==8?null:c,c!==null?(g=P!==null?{id:M,overflow:B}:null,n.memoizedState={dehydrated:c,treeContext:g,retryLane:1073741824},g=Nn(18,null,null,0),g.stateNode=c,g.return=n,n.child=g,ne=n,le=null,!0):!1;default:return!1}}function Ne(n){return(n.mode&1)!==0&&(n.flags&128)===0}function Ce(n){if(ue){var c=le;if(c){var g=c;if(!ce(n,c)){if(Ne(n))throw Error(h(418));c=Ln(g.nextSibling);var N=ne;c&&ce(n,c)?ye(N,g):(n.flags=n.flags&-4097|2,ue=!1,ne=n)}}else{if(Ne(n))throw Error(h(418));n.flags=n.flags&-4097|2,ue=!1,ne=n}}}function ze(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;ne=n}function Ge(n){if(n!==ne)return!1;if(!ue)return ze(n),ue=!0,!1;var c;if((c=n.tag!==3)&&!(c=n.tag!==5)&&(c=n.type,c=c!=="head"&&c!=="body"&&!Vu(n.type,n.memoizedProps)),c&&(c=le)){if(Ne(n))throw rt(),Error(h(418));for(;c;)ye(n,c),c=Ln(c.nextSibling)}if(ze(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(h(317));e:{for(n=n.nextSibling,c=0;n;){if(n.nodeType===8){var g=n.data;if(g==="/$"){if(c===0){le=Ln(n.nextSibling);break e}c--}else g!=="$"&&g!=="$!"&&g!=="$?"||c++}n=n.nextSibling}le=null}}else le=ne?Ln(n.stateNode.nextSibling):null;return!0}function rt(){for(var n=le;n;)n=Ln(n.nextSibling)}function ht(){le=ne=null,ue=!1}function wt(n){me===null?me=[n]:me.push(n)}var pt=Ze.ReactCurrentBatchConfig;function lt(n,c,g){if(n=g.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(h(309));var N=g.stateNode}if(!N)throw Error(h(147,n));var E=N,L=""+n;return c!==null&&c.ref!==null&&typeof c.ref=="function"&&c.ref._stringRef===L?c.ref:(c=function(Y){var fe=E.refs;Y===null?delete fe[L]:fe[L]=Y},c._stringRef=L,c)}if(typeof n!="string")throw Error(h(284));if(!g._owner)throw Error(h(290,n))}return n}function At(n,c){throw n=Object.prototype.toString.call(c),Error(h(31,n==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":n))}function si(n){var c=n._init;return c(n._payload)}function mt(n){function c(De,Te){if(n){var Fe=De.deletions;Fe===null?(De.deletions=[Te],De.flags|=16):Fe.push(Te)}}function g(De,Te){if(!n)return null;for(;Te!==null;)c(De,Te),Te=Te.sibling;return null}function N(De,Te){for(De=new Map;Te!==null;)Te.key!==null?De.set(Te.key,Te):De.set(Te.index,Te),Te=Te.sibling;return De}function E(De,Te){return De=Sl(De,Te),De.index=0,De.sibling=null,De}function L(De,Te,Fe){return De.index=Fe,n?(Fe=De.alternate,Fe!==null?(Fe=Fe.index,Fe<Te?(De.flags|=2,Te):Fe):(De.flags|=2,Te)):(De.flags|=1048576,Te)}function Y(De){return n&&De.alternate===null&&(De.flags|=2),De}function fe(De,Te,Fe,ft){return Te===null||Te.tag!==6?(Te=la(Fe,De.mode,ft),Te.return=De,Te):(Te=E(Te,Fe),Te.return=De,Te)}function be(De,Te,Fe,ft){var Xt=Fe.type;return Xt===ut?tt(De,Te,Fe.props.children,ft,Fe.key):Te!==null&&(Te.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===Et&&si(Xt)===Te.type)?(ft=E(Te,Fe.props),ft.ref=lt(De,Te,Fe),ft.return=De,ft):(ft=xd(Fe.type,Fe.key,Fe.props,null,De.mode,ft),ft.ref=lt(De,Te,Fe),ft.return=De,ft)}function $e(De,Te,Fe,ft){return Te===null||Te.tag!==4||Te.stateNode.containerInfo!==Fe.containerInfo||Te.stateNode.implementation!==Fe.implementation?(Te=ao(Fe,De.mode,ft),Te.return=De,Te):(Te=E(Te,Fe.children||[]),Te.return=De,Te)}function tt(De,Te,Fe,ft,Xt){return Te===null||Te.tag!==7?(Te=Tl(Fe,De.mode,ft,Xt),Te.return=De,Te):(Te=E(Te,Fe),Te.return=De,Te)}function nt(De,Te,Fe){if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Te=la(""+Te,De.mode,Fe),Te.return=De,Te;if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case Je:return Fe=xd(Te.type,Te.key,Te.props,null,De.mode,Fe),Fe.ref=lt(De,null,Te),Fe.return=De,Fe;case Xe:return Te=ao(Te,De.mode,Fe),Te.return=De,Te;case Et:var ft=Te._init;return nt(De,ft(Te._payload),Fe)}if(Fi(Te)||Nt(Te))return Te=Tl(Te,De.mode,Fe,null),Te.return=De,Te;At(De,Te)}return null}function Qe(De,Te,Fe,ft){var Xt=Te!==null?Te.key:null;if(typeof Fe=="string"&&Fe!==""||typeof Fe=="number")return Xt!==null?null:fe(De,Te,""+Fe,ft);if(typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case Je:return Fe.key===Xt?be(De,Te,Fe,ft):null;case Xe:return Fe.key===Xt?$e(De,Te,Fe,ft):null;case Et:return Xt=Fe._init,Qe(De,Te,Xt(Fe._payload),ft)}if(Fi(Fe)||Nt(Fe))return Xt!==null?null:tt(De,Te,Fe,ft,null);At(De,Fe)}return null}function bt(De,Te,Fe,ft,Xt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return De=De.get(Fe)||null,fe(Te,De,""+ft,Xt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case Je:return De=De.get(ft.key===null?Fe:ft.key)||null,be(Te,De,ft,Xt);case Xe:return De=De.get(ft.key===null?Fe:ft.key)||null,$e(Te,De,ft,Xt);case Et:var ri=ft._init;return bt(De,Te,Fe,ri(ft._payload),Xt)}if(Fi(ft)||Nt(ft))return De=De.get(Fe)||null,tt(Te,De,ft,Xt,null);At(Te,ft)}return null}function Lt(De,Te,Fe,ft){for(var Xt=null,ri=null,Yt=Te,di=Te=0,rr=null;Yt!==null&&di<Fe.length;di++){Yt.index>di?(rr=Yt,Yt=null):rr=Yt.sibling;var Ri=Qe(De,Yt,Fe[di],ft);if(Ri===null){Yt===null&&(Yt=rr);break}n&&Yt&&Ri.alternate===null&&c(De,Yt),Te=L(Ri,Te,di),ri===null?Xt=Ri:ri.sibling=Ri,ri=Ri,Yt=rr}if(di===Fe.length)return g(De,Yt),ue&&$(De,di),Xt;if(Yt===null){for(;di<Fe.length;di++)Yt=nt(De,Fe[di],ft),Yt!==null&&(Te=L(Yt,Te,di),ri===null?Xt=Yt:ri.sibling=Yt,ri=Yt);return ue&&$(De,di),Xt}for(Yt=N(De,Yt);di<Fe.length;di++)rr=bt(Yt,De,di,Fe[di],ft),rr!==null&&(n&&rr.alternate!==null&&Yt.delete(rr.key===null?di:rr.key),Te=L(rr,Te,di),ri===null?Xt=rr:ri.sibling=rr,ri=rr);return n&&Yt.forEach(function(Oo){return c(De,Oo)}),ue&&$(De,di),Xt}function Wt(De,Te,Fe,ft){var Xt=Nt(Fe);if(typeof Xt!="function")throw Error(h(150));if(Fe=Xt.call(Fe),Fe==null)throw Error(h(151));for(var ri=Xt=null,Yt=Te,di=Te=0,rr=null,Ri=Fe.next();Yt!==null&&!Ri.done;di++,Ri=Fe.next()){Yt.index>di?(rr=Yt,Yt=null):rr=Yt.sibling;var Oo=Qe(De,Yt,Ri.value,ft);if(Oo===null){Yt===null&&(Yt=rr);break}n&&Yt&&Oo.alternate===null&&c(De,Yt),Te=L(Oo,Te,di),ri===null?Xt=Oo:ri.sibling=Oo,ri=Oo,Yt=rr}if(Ri.done)return g(De,Yt),ue&&$(De,di),Xt;if(Yt===null){for(;!Ri.done;di++,Ri=Fe.next())Ri=nt(De,Ri.value,ft),Ri!==null&&(Te=L(Ri,Te,di),ri===null?Xt=Ri:ri.sibling=Ri,ri=Ri);return ue&&$(De,di),Xt}for(Yt=N(De,Yt);!Ri.done;di++,Ri=Fe.next())Ri=bt(Yt,De,di,Ri.value,ft),Ri!==null&&(n&&Ri.alternate!==null&&Yt.delete(Ri.key===null?di:Ri.key),Te=L(Ri,Te,di),ri===null?Xt=Ri:ri.sibling=Ri,ri=Ri);return n&&Yt.forEach(function(ug){return c(De,ug)}),ue&&$(De,di),Xt}function Ns(De,Te,Fe,ft){if(typeof Fe=="object"&&Fe!==null&&Fe.type===ut&&Fe.key===null&&(Fe=Fe.props.children),typeof Fe=="object"&&Fe!==null){switch(Fe.$$typeof){case Je:e:{for(var Xt=Fe.key,ri=Te;ri!==null;){if(ri.key===Xt){if(Xt=Fe.type,Xt===ut){if(ri.tag===7){g(De,ri.sibling),Te=E(ri,Fe.props.children),Te.return=De,De=Te;break e}}else if(ri.elementType===Xt||typeof Xt=="object"&&Xt!==null&&Xt.$$typeof===Et&&si(Xt)===ri.type){g(De,ri.sibling),Te=E(ri,Fe.props),Te.ref=lt(De,ri,Fe),Te.return=De,De=Te;break e}g(De,ri);break}else c(De,ri);ri=ri.sibling}Fe.type===ut?(Te=Tl(Fe.props.children,De.mode,ft,Fe.key),Te.return=De,De=Te):(ft=xd(Fe.type,Fe.key,Fe.props,null,De.mode,ft),ft.ref=lt(De,Te,Fe),ft.return=De,De=ft)}return Y(De);case Xe:e:{for(ri=Fe.key;Te!==null;){if(Te.key===ri)if(Te.tag===4&&Te.stateNode.containerInfo===Fe.containerInfo&&Te.stateNode.implementation===Fe.implementation){g(De,Te.sibling),Te=E(Te,Fe.children||[]),Te.return=De,De=Te;break e}else{g(De,Te);break}else c(De,Te);Te=Te.sibling}Te=ao(Fe,De.mode,ft),Te.return=De,De=Te}return Y(De);case Et:return ri=Fe._init,Ns(De,Te,ri(Fe._payload),ft)}if(Fi(Fe))return Lt(De,Te,Fe,ft);if(Nt(Fe))return Wt(De,Te,Fe,ft);At(De,Fe)}return typeof Fe=="string"&&Fe!==""||typeof Fe=="number"?(Fe=""+Fe,Te!==null&&Te.tag===6?(g(De,Te.sibling),Te=E(Te,Fe),Te.return=De,De=Te):(g(De,Te),Te=la(Fe,De.mode,ft),Te.return=De,De=Te),Y(De)):g(De,Te)}return Ns}var xt=mt(!0),ii=mt(!1),Oi=eo(null),ci=null,fi=null,$i=null;function Hs(){$i=fi=ci=null}function Qr(n){var c=Oi.current;Gi(Oi),n._currentValue=c}function Ui(n,c,g){for(;n!==null;){var N=n.alternate;if((n.childLanes&c)!==c?(n.childLanes|=c,N!==null&&(N.childLanes|=c)):N!==null&&(N.childLanes&c)!==c&&(N.childLanes|=c),n===g)break;n=n.return}}function Ms(n,c){ci=n,$i=fi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&((n.lanes&c)!==0&&(rn=!0),n.firstContext=null)}function Ki(n){var c=n._currentValue;if($i!==n)if(n={context:n,memoizedValue:c,next:null},fi===null){if(ci===null)throw Error(h(308));fi=n,ci.dependencies={lanes:0,firstContext:n}}else fi=fi.next=n;return c}var ms=null;function tr(n){ms===null?ms=[n]:ms.push(n)}function On(n,c,g,N){var E=c.interleaved;return E===null?(g.next=g,tr(c)):(g.next=E.next,E.next=g),c.interleaved=g,Lr(n,N)}function Lr(n,c){n.lanes|=c;var g=n.alternate;for(g!==null&&(g.lanes|=c),g=n,n=n.return;n!==null;)n.childLanes|=c,g=n.alternate,g!==null&&(g.childLanes|=c),g=n,n=n.return;return g.tag===3?g.stateNode:null}var Vn=!1;function io(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function en(n,c){n=n.updateQueue,c.updateQueue===n&&(c.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function yn(n,c){return{eventTime:n,lane:c,tag:0,payload:null,callback:null,next:null}}function na(n,c,g){var N=n.updateQueue;if(N===null)return null;if(N=N.shared,(Mi&2)!==0){var E=N.pending;return E===null?c.next=c:(c.next=E.next,E.next=c),N.pending=c,Lr(n,g)}return E=N.interleaved,E===null?(c.next=c,tr(N)):(c.next=E.next,E.next=c),N.interleaved=c,Lr(n,g)}function Nr(n,c,g){if(c=c.updateQueue,c!==null&&(c=c.shared,(g&4194240)!==0)){var N=c.lanes;N&=n.pendingLanes,g|=N,c.lanes=g,Ua(n,g)}}function tn(n,c){var g=n.updateQueue,N=n.alternate;if(N!==null&&(N=N.updateQueue,g===N)){var E=null,L=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};L===null?E=L=Y:L=L.next=Y,g=g.next}while(g!==null);L===null?E=L=c:L=L.next=c}else E=L=c;g={baseState:N.baseState,firstBaseUpdate:E,lastBaseUpdate:L,shared:N.shared,effects:N.effects},n.updateQueue=g;return}n=g.lastBaseUpdate,n===null?g.firstBaseUpdate=c:n.next=c,g.lastBaseUpdate=c}function $n(n,c,g,N){var E=n.updateQueue;Vn=!1;var L=E.firstBaseUpdate,Y=E.lastBaseUpdate,fe=E.shared.pending;if(fe!==null){E.shared.pending=null;var be=fe,$e=be.next;be.next=null,Y===null?L=$e:Y.next=$e,Y=be;var tt=n.alternate;tt!==null&&(tt=tt.updateQueue,fe=tt.lastBaseUpdate,fe!==Y&&(fe===null?tt.firstBaseUpdate=$e:fe.next=$e,tt.lastBaseUpdate=be))}if(L!==null){var nt=E.baseState;Y=0,tt=$e=be=null,fe=L;do{var Qe=fe.lane,bt=fe.eventTime;if((N&Qe)===Qe){tt!==null&&(tt=tt.next={eventTime:bt,lane:0,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null});e:{var Lt=n,Wt=fe;switch(Qe=c,bt=g,Wt.tag){case 1:if(Lt=Wt.payload,typeof Lt=="function"){nt=Lt.call(bt,nt,Qe);break e}nt=Lt;break e;case 3:Lt.flags=Lt.flags&-65537|128;case 0:if(Lt=Wt.payload,Qe=typeof Lt=="function"?Lt.call(bt,nt,Qe):Lt,Qe==null)break e;nt=it({},nt,Qe);break e;case 2:Vn=!0}}fe.callback!==null&&fe.lane!==0&&(n.flags|=64,Qe=E.effects,Qe===null?E.effects=[fe]:Qe.push(fe))}else bt={eventTime:bt,lane:Qe,tag:fe.tag,payload:fe.payload,callback:fe.callback,next:null},tt===null?($e=tt=bt,be=nt):tt=tt.next=bt,Y|=Qe;if(fe=fe.next,fe===null){if(fe=E.shared.pending,fe===null)break;Qe=fe,fe=Qe.next,Qe.next=null,E.lastBaseUpdate=Qe,E.shared.pending=null}}while(!0);if(tt===null&&(be=nt),E.baseState=be,E.firstBaseUpdate=$e,E.lastBaseUpdate=tt,c=E.shared.interleaved,c!==null){E=c;do Y|=E.lane,E=E.next;while(E!==c)}else L===null&&(E.shared.lanes=0);hc|=Y,n.lanes=Y,n.memoizedState=nt}}function vn(n,c,g){if(n=c.effects,c.effects=null,n!==null)for(c=0;c<n.length;c++){var N=n[c],E=N.callback;if(E!==null){if(N.callback=null,N=g,typeof E!="function")throw Error(h(191,E));E.call(N)}}}var ws={},es=eo(ws),ir=eo(ws),vi=eo(ws);function sn(n){if(n===ws)throw Error(h(174));return n}function so(n,c){switch(Ji(vi,c),Ji(ir,n),Ji(es,ws),n=c.nodeType,n){case 9:case 11:c=(c=c.documentElement)?c.namespaceURI:ga(null,"");break;default:n=n===8?c.parentNode:c,c=n.namespaceURI||null,n=n.tagName,c=ga(c,n)}Gi(es),Ji(es,c)}function Un(){Gi(es),Gi(ir),Gi(vi)}function Hu(n){sn(vi.current);var c=sn(es.current),g=ga(c,n.type);c!==g&&(Ji(ir,n),Ji(es,g))}function Wu(n){ir.current===n&&(Gi(es),Gi(ir))}var ns=eo(0);function Hn(n){for(var c=n;c!==null;){if(c.tag===13){var g=c.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===n)break;for(;c.sibling===null;){if(c.return===null||c.return===n)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}var Kc=[];function fl(){for(var n=0;n<Kc.length;n++)Kc[n]._workInProgressVersionPrimary=null;Kc.length=0}var ro=Ze.ReactCurrentDispatcher,gl=Ze.ReactCurrentBatchConfig,aa=0,Hi=null,cs=null,As=null,qu=!1,Qc=!1,Gu=0,xp=0;function Ws(){throw Error(h(321))}function xl(n,c){if(c===null)return!1;for(var g=0;g<c.length&&g<n.length;g++)if(!zr(n[g],c[g]))return!1;return!0}function Aa(n,c,g,N,E,L){if(aa=L,Hi=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,ro.current=n===null||n.memoizedState===null?oh:Kf,n=g(N,E),Qc){L=0;do{if(Qc=!1,Gu=0,25<=L)throw Error(h(301));L+=1,As=cs=null,c.updateQueue=null,ro.current=Pm,n=g(N,E)}while(Qc)}if(ro.current=ah,c=cs!==null&&cs.next!==null,aa=0,As=cs=Hi=null,qu=!1,c)throw Error(h(300));return n}function Wn(){var n=Gu!==0;return Gu=0,n}function kr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return As===null?Hi.memoizedState=As=n:As=As.next=n,As}function qn(){if(cs===null){var n=Hi.alternate;n=n!==null?n.memoizedState:null}else n=cs.next;var c=As===null?Hi.memoizedState:As.next;if(c!==null)As=c,cs=n;else{if(n===null)throw Error(h(310));cs=n,n={memoizedState:cs.memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},As===null?Hi.memoizedState=As=n:As=As.next=n}return As}function Ia(n,c){return typeof c=="function"?c(n):c}function yp(n){var c=qn(),g=c.queue;if(g===null)throw Error(h(311));g.lastRenderedReducer=n;var N=cs,E=N.baseQueue,L=g.pending;if(L!==null){if(E!==null){var Y=E.next;E.next=L.next,L.next=Y}N.baseQueue=E=L,g.pending=null}if(E!==null){L=E.next,N=N.baseState;var fe=Y=null,be=null,$e=L;do{var tt=$e.lane;if((aa&tt)===tt)be!==null&&(be=be.next={lane:0,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null}),N=$e.hasEagerState?$e.eagerState:n(N,$e.action);else{var nt={lane:tt,action:$e.action,hasEagerState:$e.hasEagerState,eagerState:$e.eagerState,next:null};be===null?(fe=be=nt,Y=N):be=be.next=nt,Hi.lanes|=tt,hc|=tt}$e=$e.next}while($e!==null&&$e!==L);be===null?Y=N:be.next=fe,zr(N,c.memoizedState)||(rn=!0),c.memoizedState=N,c.baseState=Y,c.baseQueue=be,g.lastRenderedState=N}if(n=g.interleaved,n!==null){E=n;do L=E.lane,Hi.lanes|=L,hc|=L,E=E.next;while(E!==n)}else E===null&&(g.lanes=0);return[c.memoizedState,g.dispatch]}function th(n){var c=qn(),g=c.queue;if(g===null)throw Error(h(311));g.lastRenderedReducer=n;var N=g.dispatch,E=g.pending,L=c.memoizedState;if(E!==null){g.pending=null;var Y=E=E.next;do L=n(L,Y.action),Y=Y.next;while(Y!==E);zr(L,c.memoizedState)||(rn=!0),c.memoizedState=L,c.baseQueue===null&&(c.baseState=L),g.lastRenderedState=L}return[L,N]}function bs(){}function ih(n,c){var g=Hi,N=qn(),E=c(),L=!zr(N.memoizedState,E);if(L&&(N.memoizedState=E,rn=!0),N=N.queue,Yu(vl.bind(null,g,N,n),[n]),N.getSnapshot!==c||L||As!==null&&As.memoizedState.tag&1){if(g.flags|=2048,Xu(9,yl.bind(null,g,N,E,c),void 0,null),sr===null)throw Error(h(349));(aa&30)!==0||vp(g,c,E)}return E}function vp(n,c,g){n.flags|=16384,n={getSnapshot:c,value:g},c=Hi.updateQueue,c===null?(c={lastEffect:null,stores:null},Hi.updateQueue=c,c.stores=[n]):(g=c.stores,g===null?c.stores=[n]:g.push(n))}function yl(n,c,g,N){c.value=g,c.getSnapshot=N,Zu(c)&&sh(n)}function vl(n,c,g){return g(function(){Zu(c)&&sh(n)})}function Zu(n){var c=n.getSnapshot;n=n.value;try{var g=c();return!zr(n,g)}catch{return!0}}function sh(n){var c=Lr(n,1);c!==null&&Da(c,n,1,-1)}function _p(n){var c=kr();return typeof n=="function"&&(n=n()),c.memoizedState=c.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ia,lastRenderedState:n},c.queue=n,n=n.dispatch=tu.bind(null,Hi,n),[c.memoizedState,n]}function Xu(n,c,g,N){return n={tag:n,create:c,destroy:g,deps:N,next:null},c=Hi.updateQueue,c===null?(c={lastEffect:null,stores:null},Hi.updateQueue=c,c.lastEffect=n.next=n):(g=c.lastEffect,g===null?c.lastEffect=n.next=n:(N=g.next,g.next=n,n.next=N,c.lastEffect=n)),n}function wp(){return qn().memoizedState}function rh(n,c,g,N){var E=kr();Hi.flags|=n,E.memoizedState=Xu(1|c,g,void 0,N===void 0?null:N)}function eu(n,c,g,N){var E=qn();N=N===void 0?null:N;var L=void 0;if(cs!==null){var Y=cs.memoizedState;if(L=Y.destroy,N!==null&&xl(N,Y.deps)){E.memoizedState=Xu(c,g,L,N);return}}Hi.flags|=n,E.memoizedState=Xu(1|c,g,L,N)}function km(n,c){return rh(8390656,8,n,c)}function Yu(n,c){return eu(2048,8,n,c)}function bp(n,c){return eu(4,2,n,c)}function jp(n,c){return eu(4,4,n,c)}function oc(n,c){if(typeof c=="function")return n=n(),c(n),function(){c(null)};if(c!=null)return n=n(),c.current=n,function(){c.current=null}}function Sm(n,c,g){return g=g!=null?g.concat([n]):null,eu(4,4,oc.bind(null,c,n),g)}function lc(){}function Ju(n,c){var g=qn();c=c===void 0?null:c;var N=g.memoizedState;return N!==null&&c!==null&&xl(c,N[1])?N[0]:(g.memoizedState=[n,c],n)}function Ku(n,c){var g=qn();c=c===void 0?null:c;var N=g.memoizedState;return N!==null&&c!==null&&xl(c,N[1])?N[0]:(n=n(),g.memoizedState=[n,c],n)}function Np(n,c,g){return(aa&21)===0?(n.baseState&&(n.baseState=!1,rn=!0),n.memoizedState=g):(zr(g,c)||(g=ya(),Hi.lanes|=g,hc|=g,n.baseState=!0),c)}function Tm(n,c){var g=zi;zi=g!==0&&4>g?g:4,n(!0);var N=gl.transition;gl.transition={};try{n(!1),c()}finally{zi=g,gl.transition=N}}function Cm(){return qn().memoizedState}function Br(n,c,g){var N=kl(n);if(g={lane:N,action:g,hasEagerState:!1,eagerState:null,next:null},nh(n))kp(c,g);else if(g=On(n,c,g,N),g!==null){var E=nn();Da(g,n,N,E),iu(g,c,N)}}function tu(n,c,g){var N=kl(n),E={lane:N,action:g,hasEagerState:!1,eagerState:null,next:null};if(nh(n))kp(c,E);else{var L=n.alternate;if(n.lanes===0&&(L===null||L.lanes===0)&&(L=c.lastRenderedReducer,L!==null))try{var Y=c.lastRenderedState,fe=L(Y,g);if(E.hasEagerState=!0,E.eagerState=fe,zr(fe,Y)){var be=c.interleaved;be===null?(E.next=E,tr(c)):(E.next=be.next,be.next=E),c.interleaved=E;return}}catch{}finally{}g=On(n,c,E,N),g!==null&&(E=nn(),Da(g,n,N,E),iu(g,c,N))}}function nh(n){var c=n.alternate;return n===Hi||c!==null&&c===Hi}function kp(n,c){Qc=qu=!0;var g=n.pending;g===null?c.next=c:(c.next=g.next,g.next=c),n.pending=c}function iu(n,c,g){if((g&4194240)!==0){var N=c.lanes;N&=n.pendingLanes,g|=N,c.lanes=g,Ua(n,g)}}var ah={readContext:Ki,useCallback:Ws,useContext:Ws,useEffect:Ws,useImperativeHandle:Ws,useInsertionEffect:Ws,useLayoutEffect:Ws,useMemo:Ws,useReducer:Ws,useRef:Ws,useState:Ws,useDebugValue:Ws,useDeferredValue:Ws,useTransition:Ws,useMutableSource:Ws,useSyncExternalStore:Ws,useId:Ws,unstable_isNewReconciler:!1},oh={readContext:Ki,useCallback:function(n,c){return kr().memoizedState=[n,c===void 0?null:c],n},useContext:Ki,useEffect:km,useImperativeHandle:function(n,c,g){return g=g!=null?g.concat([n]):null,rh(4194308,4,oc.bind(null,c,n),g)},useLayoutEffect:function(n,c){return rh(4194308,4,n,c)},useInsertionEffect:function(n,c){return rh(4,2,n,c)},useMemo:function(n,c){var g=kr();return c=c===void 0?null:c,n=n(),g.memoizedState=[n,c],n},useReducer:function(n,c,g){var N=kr();return c=g!==void 0?g(c):c,N.memoizedState=N.baseState=c,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:c},N.queue=n,n=n.dispatch=Br.bind(null,Hi,n),[N.memoizedState,n]},useRef:function(n){var c=kr();return n={current:n},c.memoizedState=n},useState:_p,useDebugValue:lc,useDeferredValue:function(n){return kr().memoizedState=n},useTransition:function(){var n=_p(!1),c=n[0];return n=Tm.bind(null,n[1]),kr().memoizedState=n,[c,n]},useMutableSource:function(){},useSyncExternalStore:function(n,c,g){var N=Hi,E=kr();if(ue){if(g===void 0)throw Error(h(407));g=g()}else{if(g=c(),sr===null)throw Error(h(349));(aa&30)!==0||vp(N,c,g)}E.memoizedState=g;var L={value:g,getSnapshot:c};return E.queue=L,km(vl.bind(null,N,L,n),[n]),N.flags|=2048,Xu(9,yl.bind(null,N,L,g,c),void 0,null),g},useId:function(){var n=kr(),c=sr.identifierPrefix;if(ue){var g=B,N=M;g=(N&~(1<<32-Li(N)-1)).toString(32)+g,c=":"+c+"R"+g,g=Gu++,0<g&&(c+="H"+g.toString(32)),c+=":"}else g=xp++,c=":"+c+"r"+g.toString(32)+":";return n.memoizedState=c},unstable_isNewReconciler:!1},Kf={readContext:Ki,useCallback:Ju,useContext:Ki,useEffect:Yu,useImperativeHandle:Sm,useInsertionEffect:bp,useLayoutEffect:jp,useMemo:Ku,useReducer:yp,useRef:wp,useState:function(){return yp(Ia)},useDebugValue:lc,useDeferredValue:function(n){var c=qn();return Np(c,cs.memoizedState,n)},useTransition:function(){var n=yp(Ia)[0],c=qn().memoizedState;return[n,c]},useMutableSource:bs,useSyncExternalStore:ih,useId:Cm,unstable_isNewReconciler:!1},Pm={readContext:Ki,useCallback:Ju,useContext:Ki,useEffect:Yu,useImperativeHandle:Sm,useInsertionEffect:bp,useLayoutEffect:jp,useMemo:Ku,useReducer:th,useRef:wp,useState:function(){return th(Ia)},useDebugValue:lc,useDeferredValue:function(n){var c=qn();return cs===null?c.memoizedState=n:Np(c,cs.memoizedState,n)},useTransition:function(){var n=th(Ia)[0],c=qn().memoizedState;return[n,c]},useMutableSource:bs,useSyncExternalStore:ih,useId:Cm,unstable_isNewReconciler:!1};function oa(n,c){if(n&&n.defaultProps){c=it({},c),n=n.defaultProps;for(var g in n)c[g]===void 0&&(c[g]=n[g]);return c}return c}function lh(n,c,g,N){c=n.memoizedState,g=g(N,c),g=g==null?c:it({},c,g),n.memoizedState=g,n.lanes===0&&(n.updateQueue.baseState=g)}var ch={isMounted:function(n){return(n=n._reactInternals)?pi(n)===n:!1},enqueueSetState:function(n,c,g){n=n._reactInternals;var N=nn(),E=kl(n),L=yn(N,E);L.payload=c,g!=null&&(L.callback=g),c=na(n,L,E),c!==null&&(Da(c,n,E,N),Nr(c,n,E))},enqueueReplaceState:function(n,c,g){n=n._reactInternals;var N=nn(),E=kl(n),L=yn(N,E);L.tag=1,L.payload=c,g!=null&&(L.callback=g),c=na(n,L,E),c!==null&&(Da(c,n,E,N),Nr(c,n,E))},enqueueForceUpdate:function(n,c){n=n._reactInternals;var g=nn(),N=kl(n),E=yn(g,N);E.tag=2,c!=null&&(E.callback=c),c=na(n,E,N),c!==null&&(Da(c,n,N,g),Nr(c,n,N))}};function uh(n,c,g,N,E,L,Y){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(N,L,Y):c.prototype&&c.prototype.isPureReactComponent?!Ya(g,N)||!Ya(E,L):!0}function Sp(n,c,g){var N=!1,E=to,L=c.contextType;return typeof L=="object"&&L!==null?L=Ki(L):(E=er(c)?xn:Vi.current,N=c.contextTypes,L=(N=N!=null)?Ma(n,E):to),c=new c(g,L),n.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,c.updater=ch,n.stateNode=c,c._reactInternals=n,N&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=E,n.__reactInternalMemoizedMaskedChildContext=L),c}function dh(n,c,g,N){n=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(g,N),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(g,N),c.state!==n&&ch.enqueueReplaceState(c,c.state,null)}function cc(n,c,g,N){var E=n.stateNode;E.props=g,E.state=n.memoizedState,E.refs={},io(n);var L=c.contextType;typeof L=="object"&&L!==null?E.context=Ki(L):(L=er(c)?xn:Vi.current,E.context=Ma(n,L)),E.state=n.memoizedState,L=c.getDerivedStateFromProps,typeof L=="function"&&(lh(n,c,L,g),E.state=n.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(c=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),c!==E.state&&ch.enqueueReplaceState(E,E.state,null),$n(n,g,E,N),E.state=n.memoizedState),typeof E.componentDidMount=="function"&&(n.flags|=4194308)}function cr(n,c){try{var g="",N=c;do g+=zt(N),N=N.return;while(N);var E=g}catch(L){E=`
Error generating stack: `+L.message+`
`+L.stack}return{value:n,source:c,stack:E,digest:null}}function hh(n,c,g){return{value:n,source:null,stack:g??null,digest:c??null}}function Qu(n,c){try{console.error(c.value)}catch(g){setTimeout(function(){throw g})}}var Qf=typeof WeakMap=="function"?WeakMap:Map;function Tp(n,c,g){g=yn(-1,g),g.tag=3,g.payload={element:null};var N=c.value;return g.callback=function(){cd||(cd=!0,jh=N),Qu(n,c)},g}function Em(n,c,g){g=yn(-1,g),g.tag=3;var N=n.type.getDerivedStateFromError;if(typeof N=="function"){var E=c.value;g.payload=function(){return N(E)},g.callback=function(){Qu(n,c)}}var L=n.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(g.callback=function(){Qu(n,c),typeof N!="function"&&(Ni===null?Ni=new Set([this]):Ni.add(this));var Y=c.stack;this.componentDidCatch(c.value,{componentStack:Y!==null?Y:""})}),g}function Mm(n,c,g){var N=n.pingCache;if(N===null){N=n.pingCache=new Qf;var E=new Set;N.set(c,E)}else E=N.get(c),E===void 0&&(E=new Set,N.set(c,E));E.has(g)||(E.add(g),n=ng.bind(null,n,c,g),c.then(n,n))}function Am(n){do{var c;if((c=n.tag===13)&&(c=n.memoizedState,c=c!==null?c.dehydrated!==null:!0),c)return n;n=n.return}while(n!==null);return null}function Im(n,c,g,N,E){return(n.mode&1)===0?(n===c?n.flags|=65536:(n.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(c=yn(-1,1),c.tag=2,na(g,c,1))),g.lanes|=1),n):(n.flags|=65536,n.lanes=E,n)}var zm=Ze.ReactCurrentOwner,rn=!1;function Is(n,c,g,N){c.child=n===null?ii(c,null,g,N):xt(c,n.child,g,N)}function su(n,c,g,N,E){g=g.render;var L=c.ref;return Ms(c,E),N=Aa(n,c,g,N,L,E),g=Wn(),n!==null&&!rn?(c.updateQueue=n.updateQueue,c.flags&=-2053,n.lanes&=~E,Gn(n,c,E)):(ue&&g&&X(c),c.flags|=1,Is(n,c,N,E),c.child)}function Dm(n,c,g,N,E){if(n===null){var L=g.type;return typeof L=="function"&&!gd(L)&&L.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(c.tag=15,c.type=L,Rm(n,c,L,N,E)):(n=xd(g.type,null,N,c,c.mode,E),n.ref=c.ref,n.return=c,c.child=n)}if(L=n.child,(n.lanes&E)===0){var Y=L.memoizedProps;if(g=g.compare,g=g!==null?g:Ya,g(Y,N)&&n.ref===c.ref)return Gn(n,c,E)}return c.flags|=1,n=Sl(L,N),n.ref=c.ref,n.return=c,c.child=n}function Rm(n,c,g,N,E){if(n!==null){var L=n.memoizedProps;if(Ya(L,N)&&n.ref===c.ref)if(rn=!1,c.pendingProps=N=L,(n.lanes&E)!==0)(n.flags&131072)!==0&&(rn=!0);else return c.lanes=n.lanes,Gn(n,c,E)}return Cp(n,c,g,N,E)}function Lm(n,c,g){var N=c.pendingProps,E=N.children,L=n!==null?n.memoizedState:null;if(N.mode==="hidden")if((c.mode&1)===0)c.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ji(au,Vr),Vr|=g;else{if((g&1073741824)===0)return n=L!==null?L.baseLanes|g:g,c.lanes=c.childLanes=1073741824,c.memoizedState={baseLanes:n,cachePool:null,transitions:null},c.updateQueue=null,Ji(au,Vr),Vr|=n,null;c.memoizedState={baseLanes:0,cachePool:null,transitions:null},N=L!==null?L.baseLanes:g,Ji(au,Vr),Vr|=N}else L!==null?(N=L.baseLanes|g,c.memoizedState=null):N=g,Ji(au,Vr),Vr|=N;return Is(n,c,E,g),c.child}function Bm(n,c){var g=c.ref;(n===null&&g!==null||n!==null&&n.ref!==g)&&(c.flags|=512,c.flags|=2097152)}function Cp(n,c,g,N,E){var L=er(g)?xn:Vi.current;return L=Ma(c,L),Ms(c,E),g=Aa(n,c,g,N,L,E),N=Wn(),n!==null&&!rn?(c.updateQueue=n.updateQueue,c.flags&=-2053,n.lanes&=~E,Gn(n,c,E)):(ue&&N&&X(c),c.flags|=1,Is(n,c,g,E),c.child)}function Fm(n,c,g,N,E){if(er(g)){var L=!0;Kr(c)}else L=!1;if(Ms(c,E),c.stateNode===null)id(n,c),Sp(c,g,N),cc(c,g,N,E),N=!0;else if(n===null){var Y=c.stateNode,fe=c.memoizedProps;Y.props=fe;var be=Y.context,$e=g.contextType;typeof $e=="object"&&$e!==null?$e=Ki($e):($e=er(g)?xn:Vi.current,$e=Ma(c,$e));var tt=g.getDerivedStateFromProps,nt=typeof tt=="function"||typeof Y.getSnapshotBeforeUpdate=="function";nt||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(fe!==N||be!==$e)&&dh(c,Y,N,$e),Vn=!1;var Qe=c.memoizedState;Y.state=Qe,$n(c,N,Y,E),be=c.memoizedState,fe!==N||Qe!==be||bi.current||Vn?(typeof tt=="function"&&(lh(c,g,tt,N),be=c.memoizedState),(fe=Vn||uh(c,g,fe,N,Qe,be,$e))?(nt||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(c.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=N,c.memoizedState=be),Y.props=N,Y.state=be,Y.context=$e,N=fe):(typeof Y.componentDidMount=="function"&&(c.flags|=4194308),N=!1)}else{Y=c.stateNode,en(n,c),fe=c.memoizedProps,$e=c.type===c.elementType?fe:oa(c.type,fe),Y.props=$e,nt=c.pendingProps,Qe=Y.context,be=g.contextType,typeof be=="object"&&be!==null?be=Ki(be):(be=er(g)?xn:Vi.current,be=Ma(c,be));var bt=g.getDerivedStateFromProps;(tt=typeof bt=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(fe!==nt||Qe!==be)&&dh(c,Y,N,be),Vn=!1,Qe=c.memoizedState,Y.state=Qe,$n(c,N,Y,E);var Lt=c.memoizedState;fe!==nt||Qe!==Lt||bi.current||Vn?(typeof bt=="function"&&(lh(c,g,bt,N),Lt=c.memoizedState),($e=Vn||uh(c,g,$e,N,Qe,Lt,be)||!1)?(tt||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(N,Lt,be),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(N,Lt,be)),typeof Y.componentDidUpdate=="function"&&(c.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof Y.componentDidUpdate!="function"||fe===n.memoizedProps&&Qe===n.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||fe===n.memoizedProps&&Qe===n.memoizedState||(c.flags|=1024),c.memoizedProps=N,c.memoizedState=Lt),Y.props=N,Y.state=Lt,Y.context=be,N=$e):(typeof Y.componentDidUpdate!="function"||fe===n.memoizedProps&&Qe===n.memoizedState||(c.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||fe===n.memoizedProps&&Qe===n.memoizedState||(c.flags|=1024),N=!1)}return Pp(n,c,g,N,L,E)}function Pp(n,c,g,N,E,L){Bm(n,c);var Y=(c.flags&128)!==0;if(!N&&!Y)return E&&pl(c,g,!1),Gn(n,c,L);N=c.stateNode,zm.current=c;var fe=Y&&typeof g.getDerivedStateFromError!="function"?null:N.render();return c.flags|=1,n!==null&&Y?(c.child=xt(c,n.child,null,L),c.child=xt(c,null,fe,L)):Is(n,c,fe,L),c.memoizedState=N.state,E&&pl(c,g,!0),c.child}function ph(n){var c=n.stateNode;c.pendingContext?dl(n,c.pendingContext,c.pendingContext!==c.context):c.context&&dl(n,c.context,!1),so(n,c.containerInfo)}function Om(n,c,g,N,E){return ht(),wt(E),c.flags|=256,Is(n,c,g,N),c.child}var _l={dehydrated:null,treeContext:null,retryLane:0};function Ep(n){return{baseLanes:n,cachePool:null,transitions:null}}function fs(n,c,g){var N=c.pendingProps,E=ns.current,L=!1,Y=(c.flags&128)!==0,fe;if((fe=Y)||(fe=n!==null&&n.memoizedState===null?!1:(E&2)!==0),fe?(L=!0,c.flags&=-129):(n===null||n.memoizedState!==null)&&(E|=1),Ji(ns,E&1),n===null)return Ce(c),n=c.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?((c.mode&1)===0?c.lanes=1:n.data==="$!"?c.lanes=8:c.lanes=1073741824,null):(Y=N.children,n=N.fallback,L?(N=c.mode,L=c.child,Y={mode:"hidden",children:Y},(N&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=Y):L=Cl(Y,N,0,null),n=Tl(n,N,g,null),L.return=c,n.return=c,L.sibling=n,c.child=L,c.child.memoizedState=Ep(g),c.memoizedState=_l,n):ru(c,Y));if(E=n.memoizedState,E!==null&&(fe=E.dehydrated,fe!==null))return mh(n,c,Y,N,fe,E,g);if(L){L=N.fallback,Y=c.mode,E=n.child,fe=E.sibling;var be={mode:"hidden",children:N.children};return(Y&1)===0&&c.child!==E?(N=c.child,N.childLanes=0,N.pendingProps=be,c.deletions=null):(N=Sl(E,be),N.subtreeFlags=E.subtreeFlags&14680064),fe!==null?L=Sl(fe,L):(L=Tl(L,Y,g,null),L.flags|=2),L.return=c,N.return=c,N.sibling=L,c.child=N,N=L,L=c.child,Y=n.child.memoizedState,Y=Y===null?Ep(g):{baseLanes:Y.baseLanes|g,cachePool:null,transitions:Y.transitions},L.memoizedState=Y,L.childLanes=n.childLanes&~g,c.memoizedState=_l,N}return L=n.child,n=L.sibling,N=Sl(L,{mode:"visible",children:N.children}),(c.mode&1)===0&&(N.lanes=g),N.return=c,N.sibling=null,n!==null&&(g=c.deletions,g===null?(c.deletions=[n],c.flags|=16):g.push(n)),c.child=N,c.memoizedState=null,N}function ru(n,c){return c=Cl({mode:"visible",children:c},n.mode,0,null),c.return=n,n.child=c}function ed(n,c,g,N){return N!==null&&wt(N),xt(c,n.child,null,g),n=ru(c,c.pendingProps.children),n.flags|=2,c.memoizedState=null,n}function mh(n,c,g,N,E,L,Y){if(g)return c.flags&256?(c.flags&=-257,N=hh(Error(h(422))),ed(n,c,Y,N)):c.memoizedState!==null?(c.child=n.child,c.flags|=128,null):(L=N.fallback,E=c.mode,N=Cl({mode:"visible",children:N.children},E,0,null),L=Tl(L,E,Y,null),L.flags|=2,N.return=c,L.return=c,N.sibling=L,c.child=N,(c.mode&1)!==0&&xt(c,n.child,null,Y),c.child.memoizedState=Ep(Y),c.memoizedState=_l,L);if((c.mode&1)===0)return ed(n,c,Y,null);if(E.data==="$!"){if(N=E.nextSibling&&E.nextSibling.dataset,N)var fe=N.dgst;return N=fe,L=Error(h(419)),N=hh(L,N,void 0),ed(n,c,Y,N)}if(fe=(Y&n.childLanes)!==0,rn||fe){if(N=sr,N!==null){switch(Y&-Y){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=(E&(N.suspendedLanes|Y))!==0?0:E,E!==0&&E!==L.retryLane&&(L.retryLane=E,Lr(n,E),Da(N,n,E,-1))}return Sh(),N=hh(Error(h(421))),ed(n,c,Y,N)}return E.data==="$?"?(c.flags|=128,c.child=n.child,c=sf.bind(null,n),E._reactRetry=c,null):(n=L.treeContext,le=Ln(E.nextSibling),ne=c,ue=!0,me=null,n!==null&&(y[T++]=M,y[T++]=B,y[T++]=P,M=n.id,B=n.overflow,P=c),c=ru(c,N.children),c.flags|=4096,c)}function td(n,c,g){n.lanes|=c;var N=n.alternate;N!==null&&(N.lanes|=c),Ui(n.return,c,g)}function uc(n,c,g,N,E){var L=n.memoizedState;L===null?n.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:N,tail:g,tailMode:E}:(L.isBackwards=c,L.rendering=null,L.renderingStartTime=0,L.last=N,L.tail=g,L.tailMode=E)}function Mp(n,c,g){var N=c.pendingProps,E=N.revealOrder,L=N.tail;if(Is(n,c,N.children,g),N=ns.current,(N&2)!==0)N=N&1|2,c.flags|=128;else{if(n!==null&&(n.flags&128)!==0)e:for(n=c.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&td(n,g,c);else if(n.tag===19)td(n,g,c);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===c)break e;for(;n.sibling===null;){if(n.return===null||n.return===c)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}N&=1}if(Ji(ns,N),(c.mode&1)===0)c.memoizedState=null;else switch(E){case"forwards":for(g=c.child,E=null;g!==null;)n=g.alternate,n!==null&&Hn(n)===null&&(E=g),g=g.sibling;g=E,g===null?(E=c.child,c.child=null):(E=g.sibling,g.sibling=null),uc(c,!1,E,g,L);break;case"backwards":for(g=null,E=c.child,c.child=null;E!==null;){if(n=E.alternate,n!==null&&Hn(n)===null){c.child=E;break}n=E.sibling,E.sibling=g,g=E,E=n}uc(c,!0,g,null,L);break;case"together":uc(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function id(n,c){(c.mode&1)===0&&n!==null&&(n.alternate=null,c.alternate=null,c.flags|=2)}function Gn(n,c,g){if(n!==null&&(c.dependencies=n.dependencies),hc|=c.lanes,(g&c.childLanes)===0)return null;if(n!==null&&c.child!==n.child)throw Error(h(153));if(c.child!==null){for(n=c.child,g=Sl(n,n.pendingProps),c.child=g,g.return=c;n.sibling!==null;)n=n.sibling,g=g.sibling=Sl(n,n.pendingProps),g.return=c;g.sibling=null}return c.child}function Ap(n,c,g){switch(c.tag){case 3:ph(c),ht();break;case 5:Hu(c);break;case 1:er(c.type)&&Kr(c);break;case 4:so(c,c.stateNode.containerInfo);break;case 10:var N=c.type._context,E=c.memoizedProps.value;Ji(Oi,N._currentValue),N._currentValue=E;break;case 13:if(N=c.memoizedState,N!==null)return N.dehydrated!==null?(Ji(ns,ns.current&1),c.flags|=128,null):(g&c.child.childLanes)!==0?fs(n,c,g):(Ji(ns,ns.current&1),n=Gn(n,c,g),n!==null?n.sibling:null);Ji(ns,ns.current&1);break;case 19:if(N=(g&c.childLanes)!==0,(n.flags&128)!==0){if(N)return Mp(n,c,g);c.flags|=128}if(E=c.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),Ji(ns,ns.current),N)break;return null;case 22:case 23:return c.lanes=0,Lm(n,c,g)}return Gn(n,c,g)}var fh,sd,gh,Ip;fh=function(n,c){for(var g=c.child;g!==null;){if(g.tag===5||g.tag===6)n.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===c)break;for(;g.sibling===null;){if(g.return===null||g.return===c)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},sd=function(){},gh=function(n,c,g,N){var E=n.memoizedProps;if(E!==N){n=c.stateNode,sn(es.current);var L=null;switch(g){case"input":E=Pr(n,E),N=Pr(n,N),L=[];break;case"select":E=it({},E,{value:void 0}),N=it({},N,{value:void 0}),L=[];break;case"textarea":E=ss(n,E),N=ss(n,N),L=[];break;default:typeof E.onClick!="function"&&typeof N.onClick=="function"&&(n.onclick=Rr)}Ps(g,N);var Y;g=null;for($e in E)if(!N.hasOwnProperty($e)&&E.hasOwnProperty($e)&&E[$e]!=null)if($e==="style"){var fe=E[$e];for(Y in fe)fe.hasOwnProperty(Y)&&(g||(g={}),g[Y]="")}else $e!=="dangerouslySetInnerHTML"&&$e!=="children"&&$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&$e!=="autoFocus"&&(j.hasOwnProperty($e)?L||(L=[]):(L=L||[]).push($e,null));for($e in N){var be=N[$e];if(fe=E?.[$e],N.hasOwnProperty($e)&&be!==fe&&(be!=null||fe!=null))if($e==="style")if(fe){for(Y in fe)!fe.hasOwnProperty(Y)||be&&be.hasOwnProperty(Y)||(g||(g={}),g[Y]="");for(Y in be)be.hasOwnProperty(Y)&&fe[Y]!==be[Y]&&(g||(g={}),g[Y]=be[Y])}else g||(L||(L=[]),L.push($e,g)),g=be;else $e==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,fe=fe?fe.__html:void 0,be!=null&&fe!==be&&(L=L||[]).push($e,be)):$e==="children"?typeof be!="string"&&typeof be!="number"||(L=L||[]).push($e,""+be):$e!=="suppressContentEditableWarning"&&$e!=="suppressHydrationWarning"&&(j.hasOwnProperty($e)?(be!=null&&$e==="onScroll"&&qi("scroll",n),L||fe===be||(L=[])):(L=L||[]).push($e,be))}g&&(L=L||[]).push("style",g);var $e=L;(c.updateQueue=$e)&&(c.flags|=4)}},Ip=function(n,c,g,N){g!==N&&(c.flags|=4)};function nu(n,c){if(!ue)switch(n.tailMode){case"hidden":c=n.tail;for(var g=null;c!==null;)c.alternate!==null&&(g=c),c=c.sibling;g===null?n.tail=null:g.sibling=null;break;case"collapsed":g=n.tail;for(var N=null;g!==null;)g.alternate!==null&&(N=g),g=g.sibling;N===null?c||n.tail===null?n.tail=null:n.tail.sibling=null:N.sibling=null}}function Fr(n){var c=n.alternate!==null&&n.alternate.child===n.child,g=0,N=0;if(c)for(var E=n.child;E!==null;)g|=E.lanes|E.childLanes,N|=E.subtreeFlags&14680064,N|=E.flags&14680064,E.return=n,E=E.sibling;else for(E=n.child;E!==null;)g|=E.lanes|E.childLanes,N|=E.subtreeFlags,N|=E.flags,E.return=n,E=E.sibling;return n.subtreeFlags|=N,n.childLanes=g,c}function eg(n,c,g){var N=c.pendingProps;switch(ee(c),c.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Fr(c),null;case 1:return er(c.type)&&nc(),Fr(c),null;case 3:return N=c.stateNode,Un(),Gi(bi),Gi(Vi),fl(),N.pendingContext&&(N.context=N.pendingContext,N.pendingContext=null),(n===null||n.child===null)&&(Ge(c)?c.flags|=4:n===null||n.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,me!==null&&(Lp(me),me=null))),sd(n,c),Fr(c),null;case 5:Wu(c);var E=sn(vi.current);if(g=c.type,n!==null&&c.stateNode!=null)gh(n,c,g,N,E),n.ref!==c.ref&&(c.flags|=512,c.flags|=2097152);else{if(!N){if(c.stateNode===null)throw Error(h(166));return Fr(c),null}if(n=sn(es.current),Ge(c)){N=c.stateNode,g=c.type;var L=c.memoizedProps;switch(N[jr]=c,N[ra]=L,n=(c.mode&1)!==0,g){case"dialog":qi("cancel",N),qi("close",N);break;case"iframe":case"object":case"embed":qi("load",N);break;case"video":case"audio":for(E=0;E<Qa.length;E++)qi(Qa[E],N);break;case"source":qi("error",N);break;case"img":case"image":case"link":qi("error",N),qi("load",N);break;case"details":qi("toggle",N);break;case"input":pa(N,L),qi("invalid",N);break;case"select":N._wrapperState={wasMultiple:!!L.multiple},qi("invalid",N);break;case"textarea":Js(N,L),qi("invalid",N)}Ps(g,L),E=null;for(var Y in L)if(L.hasOwnProperty(Y)){var fe=L[Y];Y==="children"?typeof fe=="string"?N.textContent!==fe&&(L.suppressHydrationWarning!==!0&&cl(N.textContent,fe,n),E=["children",fe]):typeof fe=="number"&&N.textContent!==""+fe&&(L.suppressHydrationWarning!==!0&&cl(N.textContent,fe,n),E=["children",""+fe]):j.hasOwnProperty(Y)&&fe!=null&&Y==="onScroll"&&qi("scroll",N)}switch(g){case"input":Ys(N),ma(N,L,!0);break;case"textarea":Ys(N),fr(N);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(N.onclick=Rr)}N=E,c.updateQueue=N,N!==null&&(c.flags|=4)}else{Y=E.nodeType===9?E:E.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=Mn(g)),n==="http://www.w3.org/1999/xhtml"?g==="script"?(n=Y.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof N.is=="string"?n=Y.createElement(g,{is:N.is}):(n=Y.createElement(g),g==="select"&&(Y=n,N.multiple?Y.multiple=!0:N.size&&(Y.size=N.size))):n=Y.createElementNS(n,g),n[jr]=c,n[ra]=N,fh(n,c,!1,!1),c.stateNode=n;e:{switch(Y=yr(g,N),g){case"dialog":qi("cancel",n),qi("close",n),E=N;break;case"iframe":case"object":case"embed":qi("load",n),E=N;break;case"video":case"audio":for(E=0;E<Qa.length;E++)qi(Qa[E],n);E=N;break;case"source":qi("error",n),E=N;break;case"img":case"image":case"link":qi("error",n),qi("load",n),E=N;break;case"details":qi("toggle",n),E=N;break;case"input":pa(n,N),E=Pr(n,N),qi("invalid",n);break;case"option":E=N;break;case"select":n._wrapperState={wasMultiple:!!N.multiple},E=it({},N,{value:void 0}),qi("invalid",n);break;case"textarea":Js(n,N),E=ss(n,N),qi("invalid",n);break;default:E=N}Ps(g,E),fe=E;for(L in fe)if(fe.hasOwnProperty(L)){var be=fe[L];L==="style"?ui(n,be):L==="dangerouslySetInnerHTML"?(be=be?be.__html:void 0,be!=null&&gr(n,be)):L==="children"?typeof be=="string"?(g!=="textarea"||be!=="")&&Xi(n,be):typeof be=="number"&&Xi(n,""+be):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(j.hasOwnProperty(L)?be!=null&&L==="onScroll"&&qi("scroll",n):be!=null&&Ie(n,L,be,Y))}switch(g){case"input":Ys(n),ma(n,N,!1);break;case"textarea":Ys(n),fr(n);break;case"option":N.value!=null&&n.setAttribute("value",""+Rt(N.value));break;case"select":n.multiple=!!N.multiple,L=N.value,L!=null?dn(n,!!N.multiple,L,!1):N.defaultValue!=null&&dn(n,!!N.multiple,N.defaultValue,!0);break;default:typeof E.onClick=="function"&&(n.onclick=Rr)}switch(g){case"button":case"input":case"select":case"textarea":N=!!N.autoFocus;break e;case"img":N=!0;break e;default:N=!1}}N&&(c.flags|=4)}c.ref!==null&&(c.flags|=512,c.flags|=2097152)}return Fr(c),null;case 6:if(n&&c.stateNode!=null)Ip(n,c,n.memoizedProps,N);else{if(typeof N!="string"&&c.stateNode===null)throw Error(h(166));if(g=sn(vi.current),sn(es.current),Ge(c)){if(N=c.stateNode,g=c.memoizedProps,N[jr]=c,(L=N.nodeValue!==g)&&(n=ne,n!==null))switch(n.tag){case 3:cl(N.nodeValue,g,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&cl(N.nodeValue,g,(n.mode&1)!==0)}L&&(c.flags|=4)}else N=(g.nodeType===9?g:g.ownerDocument).createTextNode(N),N[jr]=c,c.stateNode=N}return Fr(c),null;case 13:if(Gi(ns),N=c.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ue&&le!==null&&(c.mode&1)!==0&&(c.flags&128)===0)rt(),ht(),c.flags|=98560,L=!1;else if(L=Ge(c),N!==null&&N.dehydrated!==null){if(n===null){if(!L)throw Error(h(318));if(L=c.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(h(317));L[jr]=c}else ht(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Fr(c),L=!1}else me!==null&&(Lp(me),me=null),L=!0;if(!L)return c.flags&65536?c:null}return(c.flags&128)!==0?(c.lanes=g,c):(N=N!==null,N!==(n!==null&&n.memoizedState!==null)&&N&&(c.child.flags|=8192,(c.mode&1)!==0&&(n===null||(ns.current&1)!==0?qs===0&&(qs=3):Sh())),c.updateQueue!==null&&(c.flags|=4),Fr(c),null);case 4:return Un(),sd(n,c),n===null&&Ta(c.stateNode.containerInfo),Fr(c),null;case 10:return Qr(c.type._context),Fr(c),null;case 17:return er(c.type)&&nc(),Fr(c),null;case 19:if(Gi(ns),L=c.memoizedState,L===null)return Fr(c),null;if(N=(c.flags&128)!==0,Y=L.rendering,Y===null)if(N)nu(L,!1);else{if(qs!==0||n!==null&&(n.flags&128)!==0)for(n=c.child;n!==null;){if(Y=Hn(n),Y!==null){for(c.flags|=128,nu(L,!1),N=Y.updateQueue,N!==null&&(c.updateQueue=N,c.flags|=4),c.subtreeFlags=0,N=g,g=c.child;g!==null;)L=g,n=N,L.flags&=14680066,Y=L.alternate,Y===null?(L.childLanes=0,L.lanes=n,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=Y.childLanes,L.lanes=Y.lanes,L.child=Y.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=Y.memoizedProps,L.memoizedState=Y.memoizedState,L.updateQueue=Y.updateQueue,L.type=Y.type,n=Y.dependencies,L.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),g=g.sibling;return Ji(ns,ns.current&1|2),c.child}n=n.sibling}L.tail!==null&&ai()>as&&(c.flags|=128,N=!0,nu(L,!1),c.lanes=4194304)}else{if(!N)if(n=Hn(Y),n!==null){if(c.flags|=128,N=!0,g=n.updateQueue,g!==null&&(c.updateQueue=g,c.flags|=4),nu(L,!0),L.tail===null&&L.tailMode==="hidden"&&!Y.alternate&&!ue)return Fr(c),null}else 2*ai()-L.renderingStartTime>as&&g!==1073741824&&(c.flags|=128,N=!0,nu(L,!1),c.lanes=4194304);L.isBackwards?(Y.sibling=c.child,c.child=Y):(g=L.last,g!==null?g.sibling=Y:c.child=Y,L.last=Y)}return L.tail!==null?(c=L.tail,L.rendering=c,L.tail=c.sibling,L.renderingStartTime=ai(),c.sibling=null,g=ns.current,Ji(ns,N?g&1|2:g&1),c):(Fr(c),null);case 22:case 23:return hd(),N=c.memoizedState!==null,n!==null&&n.memoizedState!==null!==N&&(c.flags|=8192),N&&(c.mode&1)!==0?(Vr&1073741824)!==0&&(Fr(c),c.subtreeFlags&6&&(c.flags|=8192)):Fr(c),null;case 24:return null;case 25:return null}throw Error(h(156,c.tag))}function tg(n,c){switch(ee(c),c.tag){case 1:return er(c.type)&&nc(),n=c.flags,n&65536?(c.flags=n&-65537|128,c):null;case 3:return Un(),Gi(bi),Gi(Vi),fl(),n=c.flags,(n&65536)!==0&&(n&128)===0?(c.flags=n&-65537|128,c):null;case 5:return Wu(c),null;case 13:if(Gi(ns),n=c.memoizedState,n!==null&&n.dehydrated!==null){if(c.alternate===null)throw Error(h(340));ht()}return n=c.flags,n&65536?(c.flags=n&-65537|128,c):null;case 19:return Gi(ns),null;case 4:return Un(),null;case 10:return Qr(c.type._context),null;case 22:case 23:return hd(),null;case 24:return null;default:return null}}var xh=!1,Or=!1,wl=typeof WeakSet=="function"?WeakSet:Set,Vt=null;function dc(n,c){var g=n.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(N){us(n,c,N)}else g.current=null}function bl(n,c,g){try{g()}catch(N){us(n,c,N)}}var Vm=!1;function ig(n,c){if(Pa=No,n=Hc(),Ja(n)){if("selectionStart"in n)var g={start:n.selectionStart,end:n.selectionEnd};else e:{g=(g=n.ownerDocument)&&g.defaultView||window;var N=g.getSelection&&g.getSelection();if(N&&N.rangeCount!==0){g=N.anchorNode;var E=N.anchorOffset,L=N.focusNode;N=N.focusOffset;try{g.nodeType,L.nodeType}catch{g=null;break e}var Y=0,fe=-1,be=-1,$e=0,tt=0,nt=n,Qe=null;t:for(;;){for(var bt;nt!==g||E!==0&&nt.nodeType!==3||(fe=Y+E),nt!==L||N!==0&&nt.nodeType!==3||(be=Y+N),nt.nodeType===3&&(Y+=nt.nodeValue.length),(bt=nt.firstChild)!==null;)Qe=nt,nt=bt;for(;;){if(nt===n)break t;if(Qe===g&&++$e===E&&(fe=Y),Qe===L&&++tt===N&&(be=Y),(bt=nt.nextSibling)!==null)break;nt=Qe,Qe=nt.parentNode}nt=bt}g=fe===-1||be===-1?null:{start:fe,end:be}}else g=null}g=g||{start:0,end:0}}else g=null;for(Ou={focusedElem:n,selectionRange:g},No=!1,Vt=c;Vt!==null;)if(c=Vt,n=c.child,(c.subtreeFlags&1028)!==0&&n!==null)n.return=c,Vt=n;else for(;Vt!==null;){c=Vt;try{var Lt=c.alternate;if((c.flags&1024)!==0)switch(c.tag){case 0:case 11:case 15:break;case 1:if(Lt!==null){var Wt=Lt.memoizedProps,Ns=Lt.memoizedState,De=c.stateNode,Te=De.getSnapshotBeforeUpdate(c.elementType===c.type?Wt:oa(c.type,Wt),Ns);De.__reactInternalSnapshotBeforeUpdate=Te}break;case 3:var Fe=c.stateNode.containerInfo;Fe.nodeType===1?Fe.textContent="":Fe.nodeType===9&&Fe.documentElement&&Fe.removeChild(Fe.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(h(163))}}catch(ft){us(c,c.return,ft)}if(n=c.sibling,n!==null){n.return=c.return,Vt=n;break}Vt=c.return}return Lt=Vm,Vm=!1,Lt}function rd(n,c,g){var N=c.updateQueue;if(N=N!==null?N.lastEffect:null,N!==null){var E=N=N.next;do{if((E.tag&n)===n){var L=E.destroy;E.destroy=void 0,L!==void 0&&bl(c,g,L)}E=E.next}while(E!==N)}}function nd(n,c){if(c=c.updateQueue,c=c!==null?c.lastEffect:null,c!==null){var g=c=c.next;do{if((g.tag&n)===n){var N=g.create;g.destroy=N()}g=g.next}while(g!==c)}}function yh(n){var c=n.ref;if(c!==null){var g=n.stateNode;switch(n.tag){case 5:n=g;break;default:n=g}typeof c=="function"?c(n):c.current=n}}function $m(n){var c=n.alternate;c!==null&&(n.alternate=null,$m(c)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(c=n.stateNode,c!==null&&(delete c[jr],delete c[ra],delete c[wi],delete c[$u],delete c[gp])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Um(n){return n.tag===5||n.tag===3||n.tag===4}function Hm(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Um(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function zp(n,c,g){var N=n.tag;if(N===5||N===6)n=n.stateNode,c?g.nodeType===8?g.parentNode.insertBefore(n,c):g.insertBefore(n,c):(g.nodeType===8?(c=g.parentNode,c.insertBefore(n,g)):(c=g,c.appendChild(n)),g=g._reactRootContainer,g!=null||c.onclick!==null||(c.onclick=Rr));else if(N!==4&&(n=n.child,n!==null))for(zp(n,c,g),n=n.sibling;n!==null;)zp(n,c,g),n=n.sibling}function ad(n,c,g){var N=n.tag;if(N===5||N===6)n=n.stateNode,c?g.insertBefore(n,c):g.appendChild(n);else if(N!==4&&(n=n.child,n!==null))for(ad(n,c,g),n=n.sibling;n!==null;)ad(n,c,g),n=n.sibling}var zs=null,Zn=!1;function jl(n,c,g){for(g=g.child;g!==null;)Wm(n,c,g),g=g.sibling}function Wm(n,c,g){if(wr&&typeof wr.onCommitFiberUnmount=="function")try{wr.onCommitFiberUnmount(lr,g)}catch{}switch(g.tag){case 5:Or||dc(g,c);case 6:var N=zs,E=Zn;zs=null,jl(n,c,g),zs=N,Zn=E,zs!==null&&(Zn?(n=zs,g=g.stateNode,n.nodeType===8?n.parentNode.removeChild(g):n.removeChild(g)):zs.removeChild(g.stateNode));break;case 18:zs!==null&&(Zn?(n=zs,g=g.stateNode,n.nodeType===8?Ct(n.parentNode,g):n.nodeType===1&&Ct(n,g),va(n)):Ct(zs,g.stateNode));break;case 4:N=zs,E=Zn,zs=g.stateNode.containerInfo,Zn=!0,jl(n,c,g),zs=N,Zn=E;break;case 0:case 11:case 14:case 15:if(!Or&&(N=g.updateQueue,N!==null&&(N=N.lastEffect,N!==null))){E=N=N.next;do{var L=E,Y=L.destroy;L=L.tag,Y!==void 0&&((L&2)!==0||(L&4)!==0)&&bl(g,c,Y),E=E.next}while(E!==N)}jl(n,c,g);break;case 1:if(!Or&&(dc(g,c),N=g.stateNode,typeof N.componentWillUnmount=="function"))try{N.props=g.memoizedProps,N.state=g.memoizedState,N.componentWillUnmount()}catch(fe){us(g,c,fe)}jl(n,c,g);break;case 21:jl(n,c,g);break;case 22:g.mode&1?(Or=(N=Or)||g.memoizedState!==null,jl(n,c,g),Or=N):jl(n,c,g);break;default:jl(n,c,g)}}function Dp(n){var c=n.updateQueue;if(c!==null){n.updateQueue=null;var g=n.stateNode;g===null&&(g=n.stateNode=new wl),c.forEach(function(N){var E=rf.bind(null,n,N);g.has(N)||(g.add(N),N.then(E,E))})}}function za(n,c){var g=c.deletions;if(g!==null)for(var N=0;N<g.length;N++){var E=g[N];try{var L=n,Y=c,fe=Y;e:for(;fe!==null;){switch(fe.tag){case 5:zs=fe.stateNode,Zn=!1;break e;case 3:zs=fe.stateNode.containerInfo,Zn=!0;break e;case 4:zs=fe.stateNode.containerInfo,Zn=!0;break e}fe=fe.return}if(zs===null)throw Error(h(160));Wm(L,Y,E),zs=null,Zn=!1;var be=E.alternate;be!==null&&(be.return=null),E.return=null}catch($e){us(E,c,$e)}}if(c.subtreeFlags&12854)for(c=c.child;c!==null;)qm(c,n),c=c.sibling}function qm(n,c){var g=n.alternate,N=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(za(c,n),_n(n),N&4){try{rd(3,n,n.return),nd(3,n)}catch(Wt){us(n,n.return,Wt)}try{rd(5,n,n.return)}catch(Wt){us(n,n.return,Wt)}}break;case 1:za(c,n),_n(n),N&512&&g!==null&&dc(g,g.return);break;case 5:if(za(c,n),_n(n),N&512&&g!==null&&dc(g,g.return),n.flags&32){var E=n.stateNode;try{Xi(E,"")}catch(Wt){us(n,n.return,Wt)}}if(N&4&&(E=n.stateNode,E!=null)){var L=n.memoizedProps,Y=g!==null?g.memoizedProps:L,fe=n.type,be=n.updateQueue;if(n.updateQueue=null,be!==null)try{fe==="input"&&L.type==="radio"&&L.name!=null&&Oe(E,L),yr(fe,Y);var $e=yr(fe,L);for(Y=0;Y<be.length;Y+=2){var tt=be[Y],nt=be[Y+1];tt==="style"?ui(E,nt):tt==="dangerouslySetInnerHTML"?gr(E,nt):tt==="children"?Xi(E,nt):Ie(E,tt,nt,$e)}switch(fe){case"input":mr(E,L);break;case"textarea":fa(E,L);break;case"select":var Qe=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!L.multiple;var bt=L.value;bt!=null?dn(E,!!L.multiple,bt,!1):Qe!==!!L.multiple&&(L.defaultValue!=null?dn(E,!!L.multiple,L.defaultValue,!0):dn(E,!!L.multiple,L.multiple?[]:"",!1))}E[ra]=L}catch(Wt){us(n,n.return,Wt)}}break;case 6:if(za(c,n),_n(n),N&4){if(n.stateNode===null)throw Error(h(162));E=n.stateNode,L=n.memoizedProps;try{E.nodeValue=L}catch(Wt){us(n,n.return,Wt)}}break;case 3:if(za(c,n),_n(n),N&4&&g!==null&&g.memoizedState.isDehydrated)try{va(c.containerInfo)}catch(Wt){us(n,n.return,Wt)}break;case 4:za(c,n),_n(n);break;case 13:za(c,n),_n(n),E=n.child,E.flags&8192&&(L=E.memoizedState!==null,E.stateNode.isHidden=L,!L||E.alternate!==null&&E.alternate.memoizedState!==null||(pc=ai())),N&4&&Dp(n);break;case 22:if(tt=g!==null&&g.memoizedState!==null,n.mode&1?(Or=($e=Or)||tt,za(c,n),Or=$e):za(c,n),_n(n),N&8192){if($e=n.memoizedState!==null,(n.stateNode.isHidden=$e)&&!tt&&(n.mode&1)!==0)for(Vt=n,tt=n.child;tt!==null;){for(nt=Vt=tt;Vt!==null;){switch(Qe=Vt,bt=Qe.child,Qe.tag){case 0:case 11:case 14:case 15:rd(4,Qe,Qe.return);break;case 1:dc(Qe,Qe.return);var Lt=Qe.stateNode;if(typeof Lt.componentWillUnmount=="function"){N=Qe,g=Qe.return;try{c=N,Lt.props=c.memoizedProps,Lt.state=c.memoizedState,Lt.componentWillUnmount()}catch(Wt){us(N,g,Wt)}}break;case 5:dc(Qe,Qe.return);break;case 22:if(Qe.memoizedState!==null){Ym(nt);continue}}bt!==null?(bt.return=Qe,Vt=bt):Ym(nt)}tt=tt.sibling}e:for(tt=null,nt=n;;){if(nt.tag===5){if(tt===null){tt=nt;try{E=nt.stateNode,$e?(L=E.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(fe=nt.stateNode,be=nt.memoizedProps.style,Y=be!=null&&be.hasOwnProperty("display")?be.display:null,fe.style.display=dt("display",Y))}catch(Wt){us(n,n.return,Wt)}}}else if(nt.tag===6){if(tt===null)try{nt.stateNode.nodeValue=$e?"":nt.memoizedProps}catch(Wt){us(n,n.return,Wt)}}else if((nt.tag!==22&&nt.tag!==23||nt.memoizedState===null||nt===n)&&nt.child!==null){nt.child.return=nt,nt=nt.child;continue}if(nt===n)break e;for(;nt.sibling===null;){if(nt.return===null||nt.return===n)break e;tt===nt&&(tt=null),nt=nt.return}tt===nt&&(tt=null),nt.sibling.return=nt.return,nt=nt.sibling}}break;case 19:za(c,n),_n(n),N&4&&Dp(n);break;case 21:break;default:za(c,n),_n(n)}}function _n(n){var c=n.flags;if(c&2){try{e:{for(var g=n.return;g!==null;){if(Um(g)){var N=g;break e}g=g.return}throw Error(h(160))}switch(N.tag){case 5:var E=N.stateNode;N.flags&32&&(Xi(E,""),N.flags&=-33);var L=Hm(n);ad(n,L,E);break;case 3:case 4:var Y=N.stateNode.containerInfo,fe=Hm(n);zp(n,fe,Y);break;default:throw Error(h(161))}}catch(be){us(n,n.return,be)}n.flags&=-3}c&4096&&(n.flags&=-4097)}function Gm(n,c,g){Vt=n,Zm(n)}function Zm(n,c,g){for(var N=(n.mode&1)!==0;Vt!==null;){var E=Vt,L=E.child;if(E.tag===22&&N){var Y=E.memoizedState!==null||xh;if(!Y){var fe=E.alternate,be=fe!==null&&fe.memoizedState!==null||Or;fe=xh;var $e=Or;if(xh=Y,(Or=be)&&!$e)for(Vt=E;Vt!==null;)Y=Vt,be=Y.child,Y.tag===22&&Y.memoizedState!==null?Jm(E):be!==null?(be.return=Y,Vt=be):Jm(E);for(;L!==null;)Vt=L,Zm(L),L=L.sibling;Vt=E,xh=fe,Or=$e}Xm(n)}else(E.subtreeFlags&8772)!==0&&L!==null?(L.return=E,Vt=L):Xm(n)}}function Xm(n){for(;Vt!==null;){var c=Vt;if((c.flags&8772)!==0){var g=c.alternate;try{if((c.flags&8772)!==0)switch(c.tag){case 0:case 11:case 15:Or||nd(5,c);break;case 1:var N=c.stateNode;if(c.flags&4&&!Or)if(g===null)N.componentDidMount();else{var E=c.elementType===c.type?g.memoizedProps:oa(c.type,g.memoizedProps);N.componentDidUpdate(E,g.memoizedState,N.__reactInternalSnapshotBeforeUpdate)}var L=c.updateQueue;L!==null&&vn(c,L,N);break;case 3:var Y=c.updateQueue;if(Y!==null){if(g=null,c.child!==null)switch(c.child.tag){case 5:g=c.child.stateNode;break;case 1:g=c.child.stateNode}vn(c,Y,g)}break;case 5:var fe=c.stateNode;if(g===null&&c.flags&4){g=fe;var be=c.memoizedProps;switch(c.type){case"button":case"input":case"select":case"textarea":be.autoFocus&&g.focus();break;case"img":be.src&&(g.src=be.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(c.memoizedState===null){var $e=c.alternate;if($e!==null){var tt=$e.memoizedState;if(tt!==null){var nt=tt.dehydrated;nt!==null&&va(nt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(h(163))}Or||c.flags&512&&yh(c)}catch(Qe){us(c,c.return,Qe)}}if(c===n){Vt=null;break}if(g=c.sibling,g!==null){g.return=c.return,Vt=g;break}Vt=c.return}}function Ym(n){for(;Vt!==null;){var c=Vt;if(c===n){Vt=null;break}var g=c.sibling;if(g!==null){g.return=c.return,Vt=g;break}Vt=c.return}}function Jm(n){for(;Vt!==null;){var c=Vt;try{switch(c.tag){case 0:case 11:case 15:var g=c.return;try{nd(4,c)}catch(be){us(c,g,be)}break;case 1:var N=c.stateNode;if(typeof N.componentDidMount=="function"){var E=c.return;try{N.componentDidMount()}catch(be){us(c,E,be)}}var L=c.return;try{yh(c)}catch(be){us(c,L,be)}break;case 5:var Y=c.return;try{yh(c)}catch(be){us(c,Y,be)}}}catch(be){us(c,c.return,be)}if(c===n){Vt=null;break}var fe=c.sibling;if(fe!==null){fe.return=c.return,Vt=fe;break}Vt=c.return}}var sg=Math.ceil,vh=Ze.ReactCurrentDispatcher,_h=Ze.ReactCurrentOwner,wn=Ze.ReactCurrentBatchConfig,Mi=0,sr=null,Ds=null,Sr=0,Vr=0,au=eo(0),qs=0,od=null,hc=0,wh=0,bh=0,ld=null,bn=null,pc=0,as=1/0,no=null,cd=!1,jh=null,Ni=null,ou=!1,Lo=null,ud=0,Xn=0,Nl=null,dd=-1,Nh=0;function nn(){return(Mi&6)!==0?ai():dd!==-1?dd:dd=ai()}function kl(n){return(n.mode&1)===0?1:(Mi&2)!==0&&Sr!==0?Sr&-Sr:pt.transition!==null?(Nh===0&&(Nh=ya()),Nh):(n=zi,n!==0||(n=window.event,n=n===void 0?16:qa(n.type)),n)}function Da(n,c,g,N){if(50<Xn)throw Xn=0,Nl=null,Error(h(185));bo(n,g,N),((Mi&2)===0||n!==sr)&&(n===sr&&((Mi&2)===0&&(wh|=g),qs===4&&Ra(n,Sr)),jn(n,N),g===1&&Mi===0&&(c.mode&1)===0&&(as=ai()+500,qt&&v()))}function jn(n,c){var g=n.callbackNode;Pc(n,c);var N=Ar(n,n===sr?Sr:0);if(N===0)g!==null&&$s(g),n.callbackNode=null,n.callbackPriority=0;else if(c=N&-N,n.callbackPriority!==c){if(g!=null&&$s(g),c===1)n.tag===0?Uu(mc.bind(null,n)):ac(mc.bind(null,n)),ul(function(){(Mi&6)===0&&v()}),g=null;else{switch(Ol(N)){case 1:g=Bl;break;case 4:g=Er;break;case 16:g=or;break;case 536870912:g=Xr;break;default:g=or}g=Op(g,Km.bind(null,n))}n.callbackPriority=c,n.callbackNode=g}}function Km(n,c){if(dd=-1,Nh=0,(Mi&6)!==0)throw Error(h(327));var g=n.callbackNode;if(Ba()&&n.callbackNode!==g)return null;var N=Ar(n,n===sr?Sr:0);if(N===0)return null;if((N&30)!==0||(N&n.expiredLanes)!==0||c)c=pd(n,N);else{c=N;var E=Mi;Mi|=2;var L=ef();(sr!==n||Sr!==c)&&(no=null,as=ai()+500,fc(n,c));do try{Bp();break}catch(fe){Qm(n,fe)}while(!0);Hs(),vh.current=L,Mi=E,Ds!==null?c=0:(sr=null,Sr=0,c=qs)}if(c!==0){if(c===2&&(E=xa(n),E!==0&&(N=E,c=Rp(n,E))),c===1)throw g=od,fc(n,0),Ra(n,N),jn(n,ai()),g;if(c===6)Ra(n,N);else{if(E=n.current.alternate,(N&30)===0&&!rg(E)&&(c=pd(n,N),c===2&&(L=xa(n),L!==0&&(N=L,c=Rp(n,L))),c===1))throw g=od,fc(n,0),Ra(n,N),jn(n,ai()),g;switch(n.finishedWork=E,n.finishedLanes=N,c){case 0:case 1:throw Error(h(345));case 2:La(n,bn,no);break;case 3:if(Ra(n,N),(N&130023424)===N&&(c=pc+500-ai(),10<c)){if(Ar(n,0)!==0)break;if(E=n.suspendedLanes,(E&N)!==N){nn(),n.pingedLanes|=n.suspendedLanes&E;break}n.timeoutHandle=Xc(La.bind(null,n,bn,no),c);break}La(n,bn,no);break;case 4:if(Ra(n,N),(N&4194240)===N)break;for(c=n.eventTimes,E=-1;0<N;){var Y=31-Li(N);L=1<<Y,Y=c[Y],Y>E&&(E=Y),N&=~L}if(N=E,N=ai()-N,N=(120>N?120:480>N?480:1080>N?1080:1920>N?1920:3e3>N?3e3:4320>N?4320:1960*sg(N/1960))-N,10<N){n.timeoutHandle=Xc(La.bind(null,n,bn,no),N);break}La(n,bn,no);break;case 5:La(n,bn,no);break;default:throw Error(h(329))}}}return jn(n,ai()),n.callbackNode===g?Km.bind(null,n):null}function Rp(n,c){var g=ld;return n.current.memoizedState.isDehydrated&&(fc(n,c).flags|=256),n=pd(n,c),n!==2&&(c=bn,bn=g,c!==null&&Lp(c)),n}function Lp(n){bn===null?bn=n:bn.push.apply(bn,n)}function rg(n){for(var c=n;;){if(c.flags&16384){var g=c.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var N=0;N<g.length;N++){var E=g[N],L=E.getSnapshot;E=E.value;try{if(!zr(L(),E))return!1}catch{return!1}}}if(g=c.child,c.subtreeFlags&16384&&g!==null)g.return=c,c=g;else{if(c===n)break;for(;c.sibling===null;){if(c.return===null||c.return===n)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function Ra(n,c){for(c&=~bh,c&=~wh,n.suspendedLanes|=c,n.pingedLanes&=~c,n=n.expirationTimes;0<c;){var g=31-Li(c),N=1<<g;n[g]=-1,c&=~N}}function mc(n){if((Mi&6)!==0)throw Error(h(327));Ba();var c=Ar(n,0);if((c&1)===0)return jn(n,ai()),null;var g=pd(n,c);if(n.tag!==0&&g===2){var N=xa(n);N!==0&&(c=N,g=Rp(n,N))}if(g===1)throw g=od,fc(n,0),Ra(n,c),jn(n,ai()),g;if(g===6)throw Error(h(345));return n.finishedWork=n.current.alternate,n.finishedLanes=c,La(n,bn,no),jn(n,ai()),null}function kh(n,c){var g=Mi;Mi|=1;try{return n(c)}finally{Mi=g,Mi===0&&(as=ai()+500,qt&&v())}}function Bo(n){Lo!==null&&Lo.tag===0&&(Mi&6)===0&&Ba();var c=Mi;Mi|=1;var g=wn.transition,N=zi;try{if(wn.transition=null,zi=1,n)return n()}finally{zi=N,wn.transition=g,Mi=c,(Mi&6)===0&&v()}}function hd(){Vr=au.current,Gi(au)}function fc(n,c){n.finishedWork=null,n.finishedLanes=0;var g=n.timeoutHandle;if(g!==-1&&(n.timeoutHandle=-1,eh(g)),Ds!==null)for(g=Ds.return;g!==null;){var N=g;switch(ee(N),N.tag){case 1:N=N.type.childContextTypes,N!=null&&nc();break;case 3:Un(),Gi(bi),Gi(Vi),fl();break;case 5:Wu(N);break;case 4:Un();break;case 13:Gi(ns);break;case 19:Gi(ns);break;case 10:Qr(N.type._context);break;case 22:case 23:hd()}g=g.return}if(sr=n,Ds=n=Sl(n.current,null),Sr=Vr=c,qs=0,od=null,bh=wh=hc=0,bn=ld=null,ms!==null){for(c=0;c<ms.length;c++)if(g=ms[c],N=g.interleaved,N!==null){g.interleaved=null;var E=N.next,L=g.pending;if(L!==null){var Y=L.next;L.next=E,N.next=Y}g.pending=N}ms=null}return n}function Qm(n,c){do{var g=Ds;try{if(Hs(),ro.current=ah,qu){for(var N=Hi.memoizedState;N!==null;){var E=N.queue;E!==null&&(E.pending=null),N=N.next}qu=!1}if(aa=0,As=cs=Hi=null,Qc=!1,Gu=0,_h.current=null,g===null||g.return===null){qs=1,od=c,Ds=null;break}e:{var L=n,Y=g.return,fe=g,be=c;if(c=Sr,fe.flags|=32768,be!==null&&typeof be=="object"&&typeof be.then=="function"){var $e=be,tt=fe,nt=tt.tag;if((tt.mode&1)===0&&(nt===0||nt===11||nt===15)){var Qe=tt.alternate;Qe?(tt.updateQueue=Qe.updateQueue,tt.memoizedState=Qe.memoizedState,tt.lanes=Qe.lanes):(tt.updateQueue=null,tt.memoizedState=null)}var bt=Am(Y);if(bt!==null){bt.flags&=-257,Im(bt,Y,fe,L,c),bt.mode&1&&Mm(L,$e,c),c=bt,be=$e;var Lt=c.updateQueue;if(Lt===null){var Wt=new Set;Wt.add(be),c.updateQueue=Wt}else Lt.add(be);break e}else{if((c&1)===0){Mm(L,$e,c),Sh();break e}be=Error(h(426))}}else if(ue&&fe.mode&1){var Ns=Am(Y);if(Ns!==null){(Ns.flags&65536)===0&&(Ns.flags|=256),Im(Ns,Y,fe,L,c),wt(cr(be,fe));break e}}L=be=cr(be,fe),qs!==4&&(qs=2),ld===null?ld=[L]:ld.push(L),L=Y;do{switch(L.tag){case 3:L.flags|=65536,c&=-c,L.lanes|=c;var De=Tp(L,be,c);tn(L,De);break e;case 1:fe=be;var Te=L.type,Fe=L.stateNode;if((L.flags&128)===0&&(typeof Te.getDerivedStateFromError=="function"||Fe!==null&&typeof Fe.componentDidCatch=="function"&&(Ni===null||!Ni.has(Fe)))){L.flags|=65536,c&=-c,L.lanes|=c;var ft=Em(L,fe,c);tn(L,ft);break e}}L=L.return}while(L!==null)}Fo(g)}catch(Xt){c=Xt,Ds===g&&g!==null&&(Ds=g=g.return);continue}break}while(!0)}function ef(){var n=vh.current;return vh.current=ah,n===null?ah:n}function Sh(){(qs===0||qs===3||qs===2)&&(qs=4),sr===null||(hc&268435455)===0&&(wh&268435455)===0||Ra(sr,Sr)}function pd(n,c){var g=Mi;Mi|=2;var N=ef();(sr!==n||Sr!==c)&&(no=null,fc(n,c));do try{an();break}catch(E){Qm(n,E)}while(!0);if(Hs(),Mi=g,vh.current=N,Ds!==null)throw Error(h(261));return sr=null,Sr=0,qs}function an(){for(;Ds!==null;)Fp(Ds)}function Bp(){for(;Ds!==null&&!_r();)Fp(Ds)}function Fp(n){var c=nf(n.alternate,n,Vr);n.memoizedProps=n.pendingProps,c===null?Fo(n):Ds=c,_h.current=null}function Fo(n){var c=n;do{var g=c.alternate;if(n=c.return,(c.flags&32768)===0){if(g=eg(g,c,Vr),g!==null){Ds=g;return}}else{if(g=tg(g,c),g!==null){g.flags&=32767,Ds=g;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{qs=6,Ds=null;return}}if(c=c.sibling,c!==null){Ds=c;return}Ds=c=n}while(c!==null);qs===0&&(qs=5)}function La(n,c,g){var N=zi,E=wn.transition;try{wn.transition=null,zi=1,md(n,c,g,N)}finally{wn.transition=E,zi=N}return null}function md(n,c,g,N){do Ba();while(Lo!==null);if((Mi&6)!==0)throw Error(h(327));g=n.finishedWork;var E=n.finishedLanes;if(g===null)return null;if(n.finishedWork=null,n.finishedLanes=0,g===n.current)throw Error(h(177));n.callbackNode=null,n.callbackPriority=0;var L=g.lanes|g.childLanes;if(wu(n,L),n===sr&&(Ds=sr=null,Sr=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||ou||(ou=!0,Op(or,function(){return Ba(),null})),L=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||L){L=wn.transition,wn.transition=null;var Y=zi;zi=1;var fe=Mi;Mi|=4,_h.current=null,ig(n,g),qm(g,n),Yl(Ou),No=!!Pa,Ou=Pa=null,n.current=g,Gm(g),Go(),Mi=fe,zi=Y,wn.transition=L}else n.current=g;if(ou&&(ou=!1,Lo=n,ud=E),L=n.pendingLanes,L===0&&(Ni=null),vo(g.stateNode),jn(n,ai()),c!==null)for(N=n.onRecoverableError,g=0;g<c.length;g++)E=c[g],N(E.value,{componentStack:E.stack,digest:E.digest});if(cd)throw cd=!1,n=jh,jh=null,n;return(ud&1)!==0&&n.tag!==0&&Ba(),L=n.pendingLanes,(L&1)!==0?n===Nl?Xn++:(Xn=0,Nl=n):Xn=0,v(),null}function Ba(){if(Lo!==null){var n=Ol(ud),c=wn.transition,g=zi;try{if(wn.transition=null,zi=16>n?16:n,Lo===null)var N=!1;else{if(n=Lo,Lo=null,ud=0,(Mi&6)!==0)throw Error(h(331));var E=Mi;for(Mi|=4,Vt=n.current;Vt!==null;){var L=Vt,Y=L.child;if((Vt.flags&16)!==0){var fe=L.deletions;if(fe!==null){for(var be=0;be<fe.length;be++){var $e=fe[be];for(Vt=$e;Vt!==null;){var tt=Vt;switch(tt.tag){case 0:case 11:case 15:rd(8,tt,L)}var nt=tt.child;if(nt!==null)nt.return=tt,Vt=nt;else for(;Vt!==null;){tt=Vt;var Qe=tt.sibling,bt=tt.return;if($m(tt),tt===$e){Vt=null;break}if(Qe!==null){Qe.return=bt,Vt=Qe;break}Vt=bt}}}var Lt=L.alternate;if(Lt!==null){var Wt=Lt.child;if(Wt!==null){Lt.child=null;do{var Ns=Wt.sibling;Wt.sibling=null,Wt=Ns}while(Wt!==null)}}Vt=L}}if((L.subtreeFlags&2064)!==0&&Y!==null)Y.return=L,Vt=Y;else e:for(;Vt!==null;){if(L=Vt,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:rd(9,L,L.return)}var De=L.sibling;if(De!==null){De.return=L.return,Vt=De;break e}Vt=L.return}}var Te=n.current;for(Vt=Te;Vt!==null;){Y=Vt;var Fe=Y.child;if((Y.subtreeFlags&2064)!==0&&Fe!==null)Fe.return=Y,Vt=Fe;else e:for(Y=Te;Vt!==null;){if(fe=Vt,(fe.flags&2048)!==0)try{switch(fe.tag){case 0:case 11:case 15:nd(9,fe)}}catch(Xt){us(fe,fe.return,Xt)}if(fe===Y){Vt=null;break e}var ft=fe.sibling;if(ft!==null){ft.return=fe.return,Vt=ft;break e}Vt=fe.return}}if(Mi=E,v(),wr&&typeof wr.onPostCommitFiberRoot=="function")try{wr.onPostCommitFiberRoot(lr,n)}catch{}N=!0}return N}finally{zi=g,wn.transition=c}}return!1}function fd(n,c,g){c=cr(g,c),c=Tp(n,c,1),n=na(n,c,1),c=nn(),n!==null&&(bo(n,1,c),jn(n,c))}function us(n,c,g){if(n.tag===3)fd(n,n,g);else for(;c!==null;){if(c.tag===3){fd(c,n,g);break}else if(c.tag===1){var N=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof N.componentDidCatch=="function"&&(Ni===null||!Ni.has(N))){n=cr(g,n),n=Em(c,n,1),c=na(c,n,1),n=nn(),c!==null&&(bo(c,1,n),jn(c,n));break}}c=c.return}}function ng(n,c,g){var N=n.pingCache;N!==null&&N.delete(c),c=nn(),n.pingedLanes|=n.suspendedLanes&g,sr===n&&(Sr&g)===g&&(qs===4||qs===3&&(Sr&130023424)===Sr&&500>ai()-pc?fc(n,0):bh|=g),jn(n,c)}function tf(n,c){c===0&&((n.mode&1)===0?c=1:(c=Mr,Mr<<=1,(Mr&130023424)===0&&(Mr=4194304)));var g=nn();n=Lr(n,c),n!==null&&(bo(n,c,g),jn(n,g))}function sf(n){var c=n.memoizedState,g=0;c!==null&&(g=c.retryLane),tf(n,g)}function rf(n,c){var g=0;switch(n.tag){case 13:var N=n.stateNode,E=n.memoizedState;E!==null&&(g=E.retryLane);break;case 19:N=n.stateNode;break;default:throw Error(h(314))}N!==null&&N.delete(c),tf(n,g)}var nf;nf=function(n,c,g){if(n!==null)if(n.memoizedProps!==c.pendingProps||bi.current)rn=!0;else{if((n.lanes&g)===0&&(c.flags&128)===0)return rn=!1,Ap(n,c,g);rn=(n.flags&131072)!==0}else rn=!1,ue&&(c.flags&1048576)!==0&&U(c,m,c.index);switch(c.lanes=0,c.tag){case 2:var N=c.type;id(n,c),n=c.pendingProps;var E=Ma(c,Vi.current);Ms(c,g),E=Aa(null,c,N,n,E,g);var L=Wn();return c.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(c.tag=1,c.memoizedState=null,c.updateQueue=null,er(N)?(L=!0,Kr(c)):L=!1,c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,io(c),E.updater=ch,c.stateNode=E,E._reactInternals=c,cc(c,N,n,g),c=Pp(null,c,N,!0,L,g)):(c.tag=0,ue&&L&&X(c),Is(null,c,E,g),c=c.child),c;case 16:N=c.elementType;e:{switch(id(n,c),n=c.pendingProps,E=N._init,N=E(N._payload),c.type=N,E=c.tag=ag(N),n=oa(N,n),E){case 0:c=Cp(null,c,N,n,g);break e;case 1:c=Fm(null,c,N,n,g);break e;case 11:c=su(null,c,N,n,g);break e;case 14:c=Dm(null,c,N,oa(N.type,n),g);break e}throw Error(h(306,N,""))}return c;case 0:return N=c.type,E=c.pendingProps,E=c.elementType===N?E:oa(N,E),Cp(n,c,N,E,g);case 1:return N=c.type,E=c.pendingProps,E=c.elementType===N?E:oa(N,E),Fm(n,c,N,E,g);case 3:e:{if(ph(c),n===null)throw Error(h(387));N=c.pendingProps,L=c.memoizedState,E=L.element,en(n,c),$n(c,N,null,g);var Y=c.memoizedState;if(N=Y.element,L.isDehydrated)if(L={element:N,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},c.updateQueue.baseState=L,c.memoizedState=L,c.flags&256){E=cr(Error(h(423)),c),c=Om(n,c,N,g,E);break e}else if(N!==E){E=cr(Error(h(424)),c),c=Om(n,c,N,g,E);break e}else for(le=Ln(c.stateNode.containerInfo.firstChild),ne=c,ue=!0,me=null,g=ii(c,null,N,g),c.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(ht(),N===E){c=Gn(n,c,g);break e}Is(n,c,N,g)}c=c.child}return c;case 5:return Hu(c),n===null&&Ce(c),N=c.type,E=c.pendingProps,L=n!==null?n.memoizedProps:null,Y=E.children,Vu(N,E)?Y=null:L!==null&&Vu(N,L)&&(c.flags|=32),Bm(n,c),Is(n,c,Y,g),c.child;case 6:return n===null&&Ce(c),null;case 13:return fs(n,c,g);case 4:return so(c,c.stateNode.containerInfo),N=c.pendingProps,n===null?c.child=xt(c,null,N,g):Is(n,c,N,g),c.child;case 11:return N=c.type,E=c.pendingProps,E=c.elementType===N?E:oa(N,E),su(n,c,N,E,g);case 7:return Is(n,c,c.pendingProps,g),c.child;case 8:return Is(n,c,c.pendingProps.children,g),c.child;case 12:return Is(n,c,c.pendingProps.children,g),c.child;case 10:e:{if(N=c.type._context,E=c.pendingProps,L=c.memoizedProps,Y=E.value,Ji(Oi,N._currentValue),N._currentValue=Y,L!==null)if(zr(L.value,Y)){if(L.children===E.children&&!bi.current){c=Gn(n,c,g);break e}}else for(L=c.child,L!==null&&(L.return=c);L!==null;){var fe=L.dependencies;if(fe!==null){Y=L.child;for(var be=fe.firstContext;be!==null;){if(be.context===N){if(L.tag===1){be=yn(-1,g&-g),be.tag=2;var $e=L.updateQueue;if($e!==null){$e=$e.shared;var tt=$e.pending;tt===null?be.next=be:(be.next=tt.next,tt.next=be),$e.pending=be}}L.lanes|=g,be=L.alternate,be!==null&&(be.lanes|=g),Ui(L.return,g,c),fe.lanes|=g;break}be=be.next}}else if(L.tag===10)Y=L.type===c.type?null:L.child;else if(L.tag===18){if(Y=L.return,Y===null)throw Error(h(341));Y.lanes|=g,fe=Y.alternate,fe!==null&&(fe.lanes|=g),Ui(Y,g,c),Y=L.sibling}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===c){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}Is(n,c,E.children,g),c=c.child}return c;case 9:return E=c.type,N=c.pendingProps.children,Ms(c,g),E=Ki(E),N=N(E),c.flags|=1,Is(n,c,N,g),c.child;case 14:return N=c.type,E=oa(N,c.pendingProps),E=oa(N.type,E),Dm(n,c,N,E,g);case 15:return Rm(n,c,c.type,c.pendingProps,g);case 17:return N=c.type,E=c.pendingProps,E=c.elementType===N?E:oa(N,E),id(n,c),c.tag=1,er(N)?(n=!0,Kr(c)):n=!1,Ms(c,g),Sp(c,N,E),cc(c,N,E,g),Pp(null,c,N,!0,n,g);case 19:return Mp(n,c,g);case 22:return Lm(n,c,g)}throw Error(h(156,c.tag))};function Op(n,c){return Es(n,c)}function af(n,c,g,N){this.tag=n,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=N,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(n,c,g,N){return new af(n,c,g,N)}function gd(n){return n=n.prototype,!(!n||!n.isReactComponent)}function ag(n){if(typeof n=="function")return gd(n)?1:0;if(n!=null){if(n=n.$$typeof,n===Jt)return 11;if(n===Tt)return 14}return 2}function Sl(n,c){var g=n.alternate;return g===null?(g=Nn(n.tag,c,n.key,n.mode),g.elementType=n.elementType,g.type=n.type,g.stateNode=n.stateNode,g.alternate=n,n.alternate=g):(g.pendingProps=c,g.type=n.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=n.flags&14680064,g.childLanes=n.childLanes,g.lanes=n.lanes,g.child=n.child,g.memoizedProps=n.memoizedProps,g.memoizedState=n.memoizedState,g.updateQueue=n.updateQueue,c=n.dependencies,g.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},g.sibling=n.sibling,g.index=n.index,g.ref=n.ref,g}function xd(n,c,g,N,E,L){var Y=2;if(N=n,typeof n=="function")gd(n)&&(Y=1);else if(typeof n=="string")Y=5;else e:switch(n){case ut:return Tl(g.children,E,L,c);case je:Y=8,E|=8;break;case Ae:return n=Nn(12,g,c,E|2),n.elementType=Ae,n.lanes=L,n;case Ve:return n=Nn(13,g,c,E),n.elementType=Ve,n.lanes=L,n;case at:return n=Nn(19,g,c,E),n.elementType=at,n.lanes=L,n;case gt:return Cl(g,E,L,c);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case He:Y=10;break e;case ct:Y=9;break e;case Jt:Y=11;break e;case Tt:Y=14;break e;case Et:Y=16,N=null;break e}throw Error(h(130,n==null?n:typeof n,""))}return c=Nn(Y,g,c,E),c.elementType=n,c.type=N,c.lanes=L,c}function Tl(n,c,g,N){return n=Nn(7,n,N,c),n.lanes=g,n}function Cl(n,c,g,N){return n=Nn(22,n,N,c),n.elementType=gt,n.lanes=g,n.stateNode={isHidden:!1},n}function la(n,c,g){return n=Nn(6,n,null,c),n.lanes=g,n}function ao(n,c,g){return c=Nn(4,n.children!==null?n.children:[],n.key,c),c.lanes=g,c.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},c}function of(n,c,g,N,E){this.tag=c,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ti(0),this.expirationTimes=Ti(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ti(0),this.identifierPrefix=N,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function yd(n,c,g,N,E,L,Y,fe,be){return n=new of(n,c,g,fe,be),c===1?(c=1,L===!0&&(c|=8)):c=0,L=Nn(3,null,null,c),n.current=L,L.stateNode=n,L.memoizedState={element:N,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},io(L),n}function og(n,c,g){var N=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Xe,key:N==null?null:""+N,children:n,containerInfo:c,implementation:g}}function lf(n){if(!n)return to;n=n._reactInternals;e:{if(pi(n)!==n||n.tag!==1)throw Error(h(170));var c=n;do{switch(c.tag){case 3:c=c.stateNode.context;break e;case 1:if(er(c.type)){c=c.stateNode.__reactInternalMemoizedMergedChildContext;break e}}c=c.return}while(c!==null);throw Error(h(171))}if(n.tag===1){var g=n.type;if(er(g))return hl(n,g,c)}return c}function vd(n,c,g,N,E,L,Y,fe,be){return n=yd(g,N,!0,n,E,L,Y,fe,be),n.context=lf(null),g=n.current,N=nn(),E=kl(g),L=yn(N,E),L.callback=c??null,na(g,L,E),n.current.lanes=E,bo(n,E,N),jn(n,N),n}function lu(n,c,g,N){var E=c.current,L=nn(),Y=kl(E);return g=lf(g),c.context===null?c.context=g:c.pendingContext=g,c=yn(L,Y),c.payload={element:n},N=N===void 0?null:N,N!==null&&(c.callback=N),n=na(E,c,Y),n!==null&&(Da(n,E,Y,L),Nr(n,E,Y)),Y}function Th(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Ch(n,c){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var g=n.retryLane;n.retryLane=g!==0&&g<c?g:c}}function _d(n,c){Ch(n,c),(n=n.alternate)&&Ch(n,c)}function cu(){return null}var Vp=typeof reportError=="function"?reportError:function(n){console.error(n)};function Ph(n){this._internalRoot=n}uu.prototype.render=Ph.prototype.render=function(n){var c=this._internalRoot;if(c===null)throw Error(h(409));lu(n,c,null,null)},uu.prototype.unmount=Ph.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var c=n.containerInfo;Bo(function(){lu(null,n,null,null)}),c[Bn]=null}};function uu(n){this._internalRoot=n}uu.prototype.unstable_scheduleHydration=function(n){if(n){var c=bu();n={blockedOn:null,target:n,priority:c};for(var g=0;g<In.length&&c!==0&&c<In[g].priority;g++);In.splice(g,0,n),g===0&&Nu(n)}};function Eh(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function gc(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function $p(){}function lg(n,c,g,N,E){if(E){if(typeof N=="function"){var L=N;N=function(){var $e=Th(Y);L.call($e)}}var Y=vd(c,N,n,0,null,!1,!1,"",$p);return n._reactRootContainer=Y,n[Bn]=Y.current,Ta(n.nodeType===8?n.parentNode:n),Bo(),Y}for(;E=n.lastChild;)n.removeChild(E);if(typeof N=="function"){var fe=N;N=function(){var $e=Th(be);fe.call($e)}}var be=yd(n,0,!1,null,null,!1,!1,"",$p);return n._reactRootContainer=be,n[Bn]=be.current,Ta(n.nodeType===8?n.parentNode:n),Bo(function(){lu(c,be,g,N)}),be}function Mh(n,c,g,N,E){var L=g._reactRootContainer;if(L){var Y=L;if(typeof E=="function"){var fe=E;E=function(){var be=Th(Y);fe.call(be)}}lu(c,Y,n,E)}else Y=lg(g,c,n,E,N);return Th(Y)}Zo=function(n){switch(n.tag){case 3:var c=n.stateNode;if(c.current.memoizedState.isDehydrated){var g=wo(c.pendingLanes);g!==0&&(Ua(c,g|1),jn(c,ai()),(Mi&6)===0&&(as=ai()+500,v()))}break;case 13:Bo(function(){var N=Lr(n,1);if(N!==null){var E=nn();Da(N,n,1,E)}}),_d(n,1)}},Xo=function(n){if(n.tag===13){var c=Lr(n,134217728);if(c!==null){var g=nn();Da(c,n,134217728,g)}_d(n,134217728)}},jo=function(n){if(n.tag===13){var c=kl(n),g=Lr(n,c);if(g!==null){var N=nn();Da(g,n,c,N)}_d(n,c)}},bu=function(){return zi},Fd=function(n,c){var g=zi;try{return zi=n,c()}finally{zi=g}},Zr=function(n,c,g){switch(c){case"input":if(mr(n,g),c=g.name,g.type==="radio"&&c!=null){for(g=n;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+c)+'][type="radio"]'),c=0;c<g.length;c++){var N=g[c];if(N!==n&&N.form===n.form){var E=sc(N);if(!E)throw Error(h(90));hs(N),mr(N,E)}}}break;case"textarea":fa(n,g);break;case"select":c=g.value,c!=null&&dn(n,!!g.multiple,c,!1)}},K=kh,oe=Bo;var cf={usingClientEntryPoint:!1,Events:[ic,Fn,sc,H,q,kh]},wd={findFiberByHostInstance:Ea,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},cg={bundleType:wd.bundleType,version:wd.version,rendererPackageName:wd.rendererPackageName,rendererConfig:wd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ze.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=Ii(n),n===null?null:n.stateNode},findFiberByHostInstance:wd.findFiberByHostInstance||cu,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{lr=Ah.inject(cg),wr=Ah}catch{}}return ua.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cf,ua.createPortal=function(n,c){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Eh(c))throw Error(h(200));return og(n,c,null,g)},ua.createRoot=function(n,c){if(!Eh(n))throw Error(h(299));var g=!1,N="",E=Vp;return c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(N=c.identifierPrefix),c.onRecoverableError!==void 0&&(E=c.onRecoverableError)),c=yd(n,1,!1,null,null,g,!1,N,E),n[Bn]=c.current,Ta(n.nodeType===8?n.parentNode:n),new Ph(c)},ua.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var c=n._reactInternals;if(c===void 0)throw typeof n.render=="function"?Error(h(188)):(n=Object.keys(n).join(","),Error(h(268,n)));return n=Ii(c),n=n===null?null:n.stateNode,n},ua.flushSync=function(n){return Bo(n)},ua.hydrate=function(n,c,g){if(!gc(c))throw Error(h(200));return Mh(null,n,c,!0,g)},ua.hydrateRoot=function(n,c,g){if(!Eh(n))throw Error(h(405));var N=g!=null&&g.hydratedSources||null,E=!1,L="",Y=Vp;if(g!=null&&(g.unstable_strictMode===!0&&(E=!0),g.identifierPrefix!==void 0&&(L=g.identifierPrefix),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError)),c=vd(c,null,n,1,g??null,E,!1,L,Y),n[Bn]=c.current,Ta(n),N)for(n=0;n<N.length;n++)g=N[n],E=g._getVersion,E=E(g._source),c.mutableSourceEagerHydrationData==null?c.mutableSourceEagerHydrationData=[g,E]:c.mutableSourceEagerHydrationData.push(g,E);return new uu(c)},ua.render=function(n,c,g){if(!gc(c))throw Error(h(200));return Mh(null,n,c,!1,g)},ua.unmountComponentAtNode=function(n){if(!gc(n))throw Error(h(40));return n._reactRootContainer?(Bo(function(){Mh(null,null,n,!1,function(){n._reactRootContainer=null,n[Bn]=null})}),!0):!1},ua.unstable_batchedUpdates=kh,ua.unstable_renderSubtreeIntoContainer=function(n,c,g,N){if(!gc(g))throw Error(h(200));if(n==null||n._reactInternals===void 0)throw Error(h(38));return Mh(n,c,g,!1,N)},ua.version="18.3.1-next-f1338f8080-20240426",ua}var s0;function Jv(){if(s0)return Ng.exports;s0=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(l){console.error(l)}}return a(),Ng.exports=r1(),Ng.exports}var r0;function n1(){if(r0)return gf;r0=1;var a=Jv();return gf.createRoot=a.createRoot,gf.hydrateRoot=a.hydrateRoot,gf}var a1=n1(),G=Fx();const kt=Bx(G);/**
 * react-router v7.8.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var n0="popstate";function o1(a={}){function l(x,j){let{pathname:k,search:_,hash:d}=x.location;return ix("",{pathname:k,search:_,hash:d},j.state&&j.state.usr||null,j.state&&j.state.key||"default")}function h(x,j){return typeof j=="string"?j:rm(j)}return c1(l,h,null,a)}function Cs(a,l){if(a===!1||a===null||typeof a>"u")throw new Error(l)}function go(a,l){if(!a){typeof console<"u"&&console.warn(l);try{throw new Error(l)}catch{}}}function l1(){return Math.random().toString(36).substring(2,10)}function a0(a,l){return{usr:a.state,key:a.key,idx:l}}function ix(a,l,h=null,x){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof l=="string"?Xh(l):l,state:h,key:l&&l.key||x||l1()}}function rm({pathname:a="/",search:l="",hash:h=""}){return l&&l!=="?"&&(a+=l.charAt(0)==="?"?l:"?"+l),h&&h!=="#"&&(a+=h.charAt(0)==="#"?h:"#"+h),a}function Xh(a){let l={};if(a){let h=a.indexOf("#");h>=0&&(l.hash=a.substring(h),a=a.substring(0,h));let x=a.indexOf("?");x>=0&&(l.search=a.substring(x),a=a.substring(0,x)),a&&(l.pathname=a)}return l}function c1(a,l,h,x={}){let{window:j=document.defaultView,v5Compat:k=!1}=x,_=j.history,d="POP",I=null,z=R();z==null&&(z=0,_.replaceState({..._.state,idx:z},""));function R(){return(_.state||{idx:null}).idx}function D(){d="POP";let se=R(),pe=se==null?null:se-z;z=se,I&&I({action:d,location:ae.location,delta:pe})}function O(se,pe){d="PUSH";let Pe=ix(ae.location,se,pe);z=R()+1;let Ie=a0(Pe,z),Ze=ae.createHref(Pe);try{_.pushState(Ie,"",Ze)}catch(Je){if(Je instanceof DOMException&&Je.name==="DataCloneError")throw Je;j.location.assign(Ze)}k&&I&&I({action:d,location:ae.location,delta:1})}function ie(se,pe){d="REPLACE";let Pe=ix(ae.location,se,pe);z=R();let Ie=a0(Pe,z),Ze=ae.createHref(Pe);_.replaceState(Ie,"",Ze),k&&I&&I({action:d,location:ae.location,delta:0})}function Q(se){return u1(se)}let ae={get action(){return d},get location(){return a(j,_)},listen(se){if(I)throw new Error("A history only accepts one active listener");return j.addEventListener(n0,D),I=se,()=>{j.removeEventListener(n0,D),I=null}},createHref(se){return l(j,se)},createURL:Q,encodeLocation(se){let pe=Q(se);return{pathname:pe.pathname,search:pe.search,hash:pe.hash}},push:O,replace:ie,go(se){return _.go(se)}};return ae}function u1(a,l=!1){let h="http://localhost";typeof window<"u"&&(h=window.location.origin!=="null"?window.location.origin:window.location.href),Cs(h,"No window.location.(origin|href) available to create URL");let x=typeof a=="string"?a:rm(a);return x=x.replace(/ $/,"%20"),!l&&x.startsWith("//")&&(x=h+x),new URL(x,h)}function Kv(a,l,h="/"){return d1(a,l,h,!1)}function d1(a,l,h,x){let j=typeof l=="string"?Xh(l):l,k=Nc(j.pathname||"/",h);if(k==null)return null;let _=Qv(a);h1(_);let d=null;for(let I=0;d==null&&I<_.length;++I){let z=j1(k);d=w1(_[I],z,x)}return d}function Qv(a,l=[],h=[],x="",j=!1){let k=(_,d,I=j,z)=>{let R={relativePath:z===void 0?_.path||"":z,caseSensitive:_.caseSensitive===!0,childrenIndex:d,route:_};if(R.relativePath.startsWith("/")){if(!R.relativePath.startsWith(x)&&I)return;Cs(R.relativePath.startsWith(x),`Absolute route path "${R.relativePath}" nested under path "${x}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),R.relativePath=R.relativePath.slice(x.length)}let D=bc([x,R.relativePath]),O=h.concat(R);_.children&&_.children.length>0&&(Cs(_.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${D}".`),Qv(_.children,l,O,D,I)),!(_.path==null&&!_.index)&&l.push({path:D,score:v1(D,_.index),routesMeta:O})};return a.forEach((_,d)=>{if(_.path===""||!_.path?.includes("?"))k(_,d);else for(let I of e_(_.path))k(_,d,!0,I)}),l}function e_(a){let l=a.split("/");if(l.length===0)return[];let[h,...x]=l,j=h.endsWith("?"),k=h.replace(/\?$/,"");if(x.length===0)return j?[k,""]:[k];let _=e_(x.join("/")),d=[];return d.push(..._.map(I=>I===""?k:[k,I].join("/"))),j&&d.push(..._),d.map(I=>a.startsWith("/")&&I===""?"/":I)}function h1(a){a.sort((l,h)=>l.score!==h.score?h.score-l.score:_1(l.routesMeta.map(x=>x.childrenIndex),h.routesMeta.map(x=>x.childrenIndex)))}var p1=/^:[\w-]+$/,m1=3,f1=2,g1=1,x1=10,y1=-2,o0=a=>a==="*";function v1(a,l){let h=a.split("/"),x=h.length;return h.some(o0)&&(x+=y1),l&&(x+=f1),h.filter(j=>!o0(j)).reduce((j,k)=>j+(p1.test(k)?m1:k===""?g1:x1),x)}function _1(a,l){return a.length===l.length&&a.slice(0,-1).every((x,j)=>x===l[j])?a[a.length-1]-l[l.length-1]:0}function w1(a,l,h=!1){let{routesMeta:x}=a,j={},k="/",_=[];for(let d=0;d<x.length;++d){let I=x[d],z=d===x.length-1,R=k==="/"?l:l.slice(k.length)||"/",D=zf({path:I.relativePath,caseSensitive:I.caseSensitive,end:z},R),O=I.route;if(!D&&z&&h&&!x[x.length-1].route.index&&(D=zf({path:I.relativePath,caseSensitive:I.caseSensitive,end:!1},R)),!D)return null;Object.assign(j,D.params),_.push({params:j,pathname:bc([k,D.pathname]),pathnameBase:T1(bc([k,D.pathnameBase])),route:O}),D.pathnameBase!=="/"&&(k=bc([k,D.pathnameBase]))}return _}function zf(a,l){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[h,x]=b1(a.path,a.caseSensitive,a.end),j=l.match(h);if(!j)return null;let k=j[0],_=k.replace(/(.)\/+$/,"$1"),d=j.slice(1);return{params:x.reduce((z,{paramName:R,isOptional:D},O)=>{if(R==="*"){let Q=d[O]||"";_=k.slice(0,k.length-Q.length).replace(/(.)\/+$/,"$1")}const ie=d[O];return D&&!ie?z[R]=void 0:z[R]=(ie||"").replace(/%2F/g,"/"),z},{}),pathname:k,pathnameBase:_,pattern:a}}function b1(a,l=!1,h=!0){go(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let x=[],j="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(_,d,I)=>(x.push({paramName:d,isOptional:I!=null}),I?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(x.push({paramName:"*"}),j+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):h?j+="\\/*$":a!==""&&a!=="/"&&(j+="(?:(?=\\/|$))"),[new RegExp(j,l?void 0:"i"),x]}function j1(a){try{return a.split("/").map(l=>decodeURIComponent(l).replace(/\//g,"%2F")).join("/")}catch(l){return go(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${l}).`),a}}function Nc(a,l){if(l==="/")return a;if(!a.toLowerCase().startsWith(l.toLowerCase()))return null;let h=l.endsWith("/")?l.length-1:l.length,x=a.charAt(h);return x&&x!=="/"?null:a.slice(h)||"/"}function N1(a,l="/"){let{pathname:h,search:x="",hash:j=""}=typeof a=="string"?Xh(a):a;return{pathname:h?h.startsWith("/")?h:k1(h,l):l,search:C1(x),hash:P1(j)}}function k1(a,l){let h=l.replace(/\/+$/,"").split("/");return a.split("/").forEach(j=>{j===".."?h.length>1&&h.pop():j!=="."&&h.push(j)}),h.length>1?h.join("/"):"/"}function Tg(a,l,h,x){return`Cannot include a '${a}' character in a manually specified \`to.${l}\` field [${JSON.stringify(x)}].  Please separate it out to the \`to.${h}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S1(a){return a.filter((l,h)=>h===0||l.route.path&&l.route.path.length>0)}function Ox(a){let l=S1(a);return l.map((h,x)=>x===l.length-1?h.pathname:h.pathnameBase)}function Vx(a,l,h,x=!1){let j;typeof a=="string"?j=Xh(a):(j={...a},Cs(!j.pathname||!j.pathname.includes("?"),Tg("?","pathname","search",j)),Cs(!j.pathname||!j.pathname.includes("#"),Tg("#","pathname","hash",j)),Cs(!j.search||!j.search.includes("#"),Tg("#","search","hash",j)));let k=a===""||j.pathname==="",_=k?"/":j.pathname,d;if(_==null)d=h;else{let D=l.length-1;if(!x&&_.startsWith("..")){let O=_.split("/");for(;O[0]==="..";)O.shift(),D-=1;j.pathname=O.join("/")}d=D>=0?l[D]:"/"}let I=N1(j,d),z=_&&_!=="/"&&_.endsWith("/"),R=(k||_===".")&&h.endsWith("/");return!I.pathname.endsWith("/")&&(z||R)&&(I.pathname+="/"),I}var bc=a=>a.join("/").replace(/\/\/+/g,"/"),T1=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),C1=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,P1=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function E1(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}var t_=["POST","PUT","PATCH","DELETE"];new Set(t_);var M1=["GET",...t_];new Set(M1);var Yh=G.createContext(null);Yh.displayName="DataRouter";var $f=G.createContext(null);$f.displayName="DataRouterState";G.createContext(!1);var i_=G.createContext({isTransitioning:!1});i_.displayName="ViewTransition";var A1=G.createContext(new Map);A1.displayName="Fetchers";var I1=G.createContext(null);I1.displayName="Await";var Wo=G.createContext(null);Wo.displayName="Navigation";var fm=G.createContext(null);fm.displayName="Location";var qo=G.createContext({outlet:null,matches:[],isDataRoute:!1});qo.displayName="Route";var $x=G.createContext(null);$x.displayName="RouteError";function z1(a,{relative:l}={}){Cs(Jh(),"useHref() may be used only in the context of a <Router> component.");let{basename:h,navigator:x}=G.useContext(Wo),{hash:j,pathname:k,search:_}=gm(a,{relative:l}),d=k;return h!=="/"&&(d=k==="/"?h:bc([h,k])),x.createHref({pathname:d,search:_,hash:j})}function Jh(){return G.useContext(fm)!=null}function xo(){return Cs(Jh(),"useLocation() may be used only in the context of a <Router> component."),G.useContext(fm).location}var s_="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function r_(a){G.useContext(Wo).static||G.useLayoutEffect(a)}function un(){let{isDataRoute:a}=G.useContext(qo);return a?Z1():D1()}function D1(){Cs(Jh(),"useNavigate() may be used only in the context of a <Router> component.");let a=G.useContext(Yh),{basename:l,navigator:h}=G.useContext(Wo),{matches:x}=G.useContext(qo),{pathname:j}=xo(),k=JSON.stringify(Ox(x)),_=G.useRef(!1);return r_(()=>{_.current=!0}),G.useCallback((I,z={})=>{if(go(_.current,s_),!_.current)return;if(typeof I=="number"){h.go(I);return}let R=Vx(I,JSON.parse(k),j,z.relative==="path");a==null&&l!=="/"&&(R.pathname=R.pathname==="/"?l:bc([l,R.pathname])),(z.replace?h.replace:h.push)(R,z.state,z)},[l,h,k,j,a])}G.createContext(null);function R1(){let{matches:a}=G.useContext(qo),l=a[a.length-1];return l?l.params:{}}function gm(a,{relative:l}={}){let{matches:h}=G.useContext(qo),{pathname:x}=xo(),j=JSON.stringify(Ox(h));return G.useMemo(()=>Vx(a,JSON.parse(j),x,l==="path"),[a,j,x,l])}function L1(a,l){return n_(a,l)}function n_(a,l,h,x,j){Cs(Jh(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:k}=G.useContext(Wo),{matches:_}=G.useContext(qo),d=_[_.length-1],I=d?d.params:{},z=d?d.pathname:"/",R=d?d.pathnameBase:"/",D=d&&d.route;{let Pe=D&&D.path||"";a_(z,!D||Pe.endsWith("*")||Pe.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${z}" (under <Route path="${Pe}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Pe}"> to <Route path="${Pe==="/"?"*":`${Pe}/*`}">.`)}let O=xo(),ie;if(l){let Pe=typeof l=="string"?Xh(l):l;Cs(R==="/"||Pe.pathname?.startsWith(R),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${R}" but pathname "${Pe.pathname}" was given in the \`location\` prop.`),ie=Pe}else ie=O;let Q=ie.pathname||"/",ae=Q;if(R!=="/"){let Pe=R.replace(/^\//,"").split("/");ae="/"+Q.replace(/^\//,"").split("/").slice(Pe.length).join("/")}let se=Kv(a,{pathname:ae});go(D||se!=null,`No routes matched location "${ie.pathname}${ie.search}${ie.hash}" `),go(se==null||se[se.length-1].route.element!==void 0||se[se.length-1].route.Component!==void 0||se[se.length-1].route.lazy!==void 0,`Matched leaf route at location "${ie.pathname}${ie.search}${ie.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let pe=$1(se&&se.map(Pe=>Object.assign({},Pe,{params:Object.assign({},I,Pe.params),pathname:bc([R,k.encodeLocation?k.encodeLocation(Pe.pathname).pathname:Pe.pathname]),pathnameBase:Pe.pathnameBase==="/"?R:bc([R,k.encodeLocation?k.encodeLocation(Pe.pathnameBase).pathname:Pe.pathnameBase])})),_,h,x,j);return l&&pe?G.createElement(fm.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...ie},navigationType:"POP"}},pe):pe}function B1(){let a=G1(),l=E1(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),h=a instanceof Error?a.stack:null,x="rgba(200,200,200, 0.5)",j={padding:"0.5rem",backgroundColor:x},k={padding:"2px 4px",backgroundColor:x},_=null;return console.error("Error handled by React Router default ErrorBoundary:",a),_=G.createElement(G.Fragment,null,G.createElement("p",null,"💿 Hey developer 👋"),G.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",G.createElement("code",{style:k},"ErrorBoundary")," or"," ",G.createElement("code",{style:k},"errorElement")," prop on your route.")),G.createElement(G.Fragment,null,G.createElement("h2",null,"Unexpected Application Error!"),G.createElement("h3",{style:{fontStyle:"italic"}},l),h?G.createElement("pre",{style:j},h):null,_)}var F1=G.createElement(B1,null),O1=class extends G.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,l){return l.location!==a.location||l.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:l.error,location:l.location,revalidation:a.revalidation||l.revalidation}}componentDidCatch(a,l){this.props.unstable_onError?this.props.unstable_onError(a,l):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?G.createElement(qo.Provider,{value:this.props.routeContext},G.createElement($x.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function V1({routeContext:a,match:l,children:h}){let x=G.useContext(Yh);return x&&x.static&&x.staticContext&&(l.route.errorElement||l.route.ErrorBoundary)&&(x.staticContext._deepestRenderedBoundaryId=l.route.id),G.createElement(qo.Provider,{value:a},h)}function $1(a,l=[],h=null,x=null,j=null){if(a==null){if(!h)return null;if(h.errors)a=h.matches;else if(l.length===0&&!h.initialized&&h.matches.length>0)a=h.matches;else return null}let k=a,_=h?.errors;if(_!=null){let z=k.findIndex(R=>R.route.id&&_?.[R.route.id]!==void 0);Cs(z>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(_).join(",")}`),k=k.slice(0,Math.min(k.length,z+1))}let d=!1,I=-1;if(h)for(let z=0;z<k.length;z++){let R=k[z];if((R.route.HydrateFallback||R.route.hydrateFallbackElement)&&(I=z),R.route.id){let{loaderData:D,errors:O}=h,ie=R.route.loader&&!D.hasOwnProperty(R.route.id)&&(!O||O[R.route.id]===void 0);if(R.route.lazy||ie){d=!0,I>=0?k=k.slice(0,I+1):k=[k[0]];break}}}return k.reduceRight((z,R,D)=>{let O,ie=!1,Q=null,ae=null;h&&(O=_&&R.route.id?_[R.route.id]:void 0,Q=R.route.errorElement||F1,d&&(I<0&&D===0?(a_("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),ie=!0,ae=null):I===D&&(ie=!0,ae=R.route.hydrateFallbackElement||null)));let se=l.concat(k.slice(0,D+1)),pe=()=>{let Pe;return O?Pe=Q:ie?Pe=ae:R.route.Component?Pe=G.createElement(R.route.Component,null):R.route.element?Pe=R.route.element:Pe=z,G.createElement(V1,{match:R,routeContext:{outlet:z,matches:se,isDataRoute:h!=null},children:Pe})};return h&&(R.route.ErrorBoundary||R.route.errorElement||D===0)?G.createElement(O1,{location:h.location,revalidation:h.revalidation,component:Q,error:O,children:pe(),routeContext:{outlet:null,matches:se,isDataRoute:!0},unstable_onError:x}):pe()},null)}function Ux(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function U1(a){let l=G.useContext(Yh);return Cs(l,Ux(a)),l}function H1(a){let l=G.useContext($f);return Cs(l,Ux(a)),l}function W1(a){let l=G.useContext(qo);return Cs(l,Ux(a)),l}function Hx(a){let l=W1(a),h=l.matches[l.matches.length-1];return Cs(h.route.id,`${a} can only be used on routes that contain a unique "id"`),h.route.id}function q1(){return Hx("useRouteId")}function G1(){let a=G.useContext($x),l=H1("useRouteError"),h=Hx("useRouteError");return a!==void 0?a:l.errors?.[h]}function Z1(){let{router:a}=U1("useNavigate"),l=Hx("useNavigate"),h=G.useRef(!1);return r_(()=>{h.current=!0}),G.useCallback(async(j,k={})=>{go(h.current,s_),h.current&&(typeof j=="number"?a.navigate(j):await a.navigate(j,{fromRouteId:l,...k}))},[a,l])}var l0={};function a_(a,l,h){!l&&!l0[a]&&(l0[a]=!0,go(!1,h))}G.memo(X1);function X1({routes:a,future:l,state:h,unstable_onError:x}){return n_(a,void 0,h,x,l)}function c0({to:a,replace:l,state:h,relative:x}){Cs(Jh(),"<Navigate> may be used only in the context of a <Router> component.");let{static:j}=G.useContext(Wo);go(!j,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:k}=G.useContext(qo),{pathname:_}=xo(),d=un(),I=Vx(a,Ox(k),_,x==="path"),z=JSON.stringify(I);return G.useEffect(()=>{d(JSON.parse(z),{replace:l,state:h,relative:x})},[d,z,x,l,h]),null}function gs(a){Cs(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y1({basename:a="/",children:l=null,location:h,navigationType:x="POP",navigator:j,static:k=!1}){Cs(!Jh(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let _=a.replace(/^\/*/,"/"),d=G.useMemo(()=>({basename:_,navigator:j,static:k,future:{}}),[_,j,k]);typeof h=="string"&&(h=Xh(h));let{pathname:I="/",search:z="",hash:R="",state:D=null,key:O="default"}=h,ie=G.useMemo(()=>{let Q=Nc(I,_);return Q==null?null:{location:{pathname:Q,search:z,hash:R,state:D,key:O},navigationType:x}},[_,I,z,R,D,O,x]);return go(ie!=null,`<Router basename="${_}"> is not able to match the URL "${I}${z}${R}" because it does not start with the basename, so the <Router> won't render anything.`),ie==null?null:G.createElement(Wo.Provider,{value:d},G.createElement(fm.Provider,{children:l,value:ie}))}function J1({children:a,location:l}){return L1(sx(a),l)}function sx(a,l=[]){let h=[];return G.Children.forEach(a,(x,j)=>{if(!G.isValidElement(x))return;let k=[...l,j];if(x.type===G.Fragment){h.push.apply(h,sx(x.props.children,k));return}Cs(x.type===gs,`[${typeof x.type=="string"?x.type:x.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Cs(!x.props.index||!x.props.children,"An index route cannot have child routes.");let _={id:x.props.id||k.join("-"),caseSensitive:x.props.caseSensitive,element:x.props.element,Component:x.props.Component,index:x.props.index,path:x.props.path,loader:x.props.loader,action:x.props.action,hydrateFallbackElement:x.props.hydrateFallbackElement,HydrateFallback:x.props.HydrateFallback,errorElement:x.props.errorElement,ErrorBoundary:x.props.ErrorBoundary,hasErrorBoundary:x.props.hasErrorBoundary===!0||x.props.ErrorBoundary!=null||x.props.errorElement!=null,shouldRevalidate:x.props.shouldRevalidate,handle:x.props.handle,lazy:x.props.lazy};x.props.children&&(_.children=sx(x.props.children,k)),h.push(_)}),h}var Sf="get",Tf="application/x-www-form-urlencoded";function Uf(a){return a!=null&&typeof a.tagName=="string"}function K1(a){return Uf(a)&&a.tagName.toLowerCase()==="button"}function Q1(a){return Uf(a)&&a.tagName.toLowerCase()==="form"}function e2(a){return Uf(a)&&a.tagName.toLowerCase()==="input"}function t2(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function i2(a,l){return a.button===0&&(!l||l==="_self")&&!t2(a)}function rx(a=""){return new URLSearchParams(typeof a=="string"||Array.isArray(a)||a instanceof URLSearchParams?a:Object.keys(a).reduce((l,h)=>{let x=a[h];return l.concat(Array.isArray(x)?x.map(j=>[h,j]):[[h,x]])},[]))}function s2(a,l){let h=rx(a);return l&&l.forEach((x,j)=>{h.has(j)||l.getAll(j).forEach(k=>{h.append(j,k)})}),h}var xf=null;function r2(){if(xf===null)try{new FormData(document.createElement("form"),0),xf=!1}catch{xf=!0}return xf}var n2=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Cg(a){return a!=null&&!n2.has(a)?(go(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Tf}"`),null):a}function a2(a,l){let h,x,j,k,_;if(Q1(a)){let d=a.getAttribute("action");x=d?Nc(d,l):null,h=a.getAttribute("method")||Sf,j=Cg(a.getAttribute("enctype"))||Tf,k=new FormData(a)}else if(K1(a)||e2(a)&&(a.type==="submit"||a.type==="image")){let d=a.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let I=a.getAttribute("formaction")||d.getAttribute("action");if(x=I?Nc(I,l):null,h=a.getAttribute("formmethod")||d.getAttribute("method")||Sf,j=Cg(a.getAttribute("formenctype"))||Cg(d.getAttribute("enctype"))||Tf,k=new FormData(d,a),!r2()){let{name:z,type:R,value:D}=a;if(R==="image"){let O=z?`${z}.`:"";k.append(`${O}x`,"0"),k.append(`${O}y`,"0")}else z&&k.append(z,D)}}else{if(Uf(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');h=Sf,x=null,j=Tf,_=a}return k&&j==="text/plain"&&(_=k,k=void 0),{action:x,method:h.toLowerCase(),encType:j,formData:k,body:_}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Wx(a,l){if(a===!1||a===null||typeof a>"u")throw new Error(l)}function o2(a,l,h){let x=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return x.pathname==="/"?x.pathname=`_root.${h}`:l&&Nc(x.pathname,l)==="/"?x.pathname=`${l.replace(/\/$/,"")}/_root.${h}`:x.pathname=`${x.pathname.replace(/\/$/,"")}.${h}`,x}async function l2(a,l){if(a.id in l)return l[a.id];try{let h=await import(a.module);return l[a.id]=h,h}catch(h){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(h),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function c2(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function u2(a,l,h){let x=await Promise.all(a.map(async j=>{let k=l.routes[j.route.id];if(k){let _=await l2(k,h);return _.links?_.links():[]}return[]}));return m2(x.flat(1).filter(c2).filter(j=>j.rel==="stylesheet"||j.rel==="preload").map(j=>j.rel==="stylesheet"?{...j,rel:"prefetch",as:"style"}:{...j,rel:"prefetch"}))}function u0(a,l,h,x,j,k){let _=(I,z)=>h[z]?I.route.id!==h[z].route.id:!0,d=(I,z)=>h[z].pathname!==I.pathname||h[z].route.path?.endsWith("*")&&h[z].params["*"]!==I.params["*"];return k==="assets"?l.filter((I,z)=>_(I,z)||d(I,z)):k==="data"?l.filter((I,z)=>{let R=x.routes[I.route.id];if(!R||!R.hasLoader)return!1;if(_(I,z)||d(I,z))return!0;if(I.route.shouldRevalidate){let D=I.route.shouldRevalidate({currentUrl:new URL(j.pathname+j.search+j.hash,window.origin),currentParams:h[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:I.params,defaultShouldRevalidate:!0});if(typeof D=="boolean")return D}return!0}):[]}function d2(a,l,{includeHydrateFallback:h}={}){return h2(a.map(x=>{let j=l.routes[x.route.id];if(!j)return[];let k=[j.module];return j.clientActionModule&&(k=k.concat(j.clientActionModule)),j.clientLoaderModule&&(k=k.concat(j.clientLoaderModule)),h&&j.hydrateFallbackModule&&(k=k.concat(j.hydrateFallbackModule)),j.imports&&(k=k.concat(j.imports)),k}).flat(1))}function h2(a){return[...new Set(a)]}function p2(a){let l={},h=Object.keys(a).sort();for(let x of h)l[x]=a[x];return l}function m2(a,l){let h=new Set;return new Set(l),a.reduce((x,j)=>{let k=JSON.stringify(p2(j));return h.has(k)||(h.add(k),x.push({key:k,link:j})),x},[])}function o_(){let a=G.useContext(Yh);return Wx(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function f2(){let a=G.useContext($f);return Wx(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var qx=G.createContext(void 0);qx.displayName="FrameworkContext";function l_(){let a=G.useContext(qx);return Wx(a,"You must render this element inside a <HydratedRouter> element"),a}function g2(a,l){let h=G.useContext(qx),[x,j]=G.useState(!1),[k,_]=G.useState(!1),{onFocus:d,onBlur:I,onMouseEnter:z,onMouseLeave:R,onTouchStart:D}=l,O=G.useRef(null);G.useEffect(()=>{if(a==="render"&&_(!0),a==="viewport"){let ae=pe=>{pe.forEach(Pe=>{_(Pe.isIntersecting)})},se=new IntersectionObserver(ae,{threshold:.5});return O.current&&se.observe(O.current),()=>{se.disconnect()}}},[a]),G.useEffect(()=>{if(x){let ae=setTimeout(()=>{_(!0)},100);return()=>{clearTimeout(ae)}}},[x]);let ie=()=>{j(!0)},Q=()=>{j(!1),_(!1)};return h?a!=="intent"?[k,O,{}]:[k,O,{onFocus:Gp(d,ie),onBlur:Gp(I,Q),onMouseEnter:Gp(z,ie),onMouseLeave:Gp(R,Q),onTouchStart:Gp(D,ie)}]:[!1,O,{}]}function Gp(a,l){return h=>{a&&a(h),h.defaultPrevented||l(h)}}function x2({page:a,...l}){let{router:h}=o_(),x=G.useMemo(()=>Kv(h.routes,a,h.basename),[h.routes,a,h.basename]);return x?G.createElement(v2,{page:a,matches:x,...l}):null}function y2(a){let{manifest:l,routeModules:h}=l_(),[x,j]=G.useState([]);return G.useEffect(()=>{let k=!1;return u2(a,l,h).then(_=>{k||j(_)}),()=>{k=!0}},[a,l,h]),x}function v2({page:a,matches:l,...h}){let x=xo(),{manifest:j,routeModules:k}=l_(),{basename:_}=o_(),{loaderData:d,matches:I}=f2(),z=G.useMemo(()=>u0(a,l,I,j,x,"data"),[a,l,I,j,x]),R=G.useMemo(()=>u0(a,l,I,j,x,"assets"),[a,l,I,j,x]),D=G.useMemo(()=>{if(a===x.pathname+x.search+x.hash)return[];let Q=new Set,ae=!1;if(l.forEach(pe=>{let Pe=j.routes[pe.route.id];!Pe||!Pe.hasLoader||(!z.some(Ie=>Ie.route.id===pe.route.id)&&pe.route.id in d&&k[pe.route.id]?.shouldRevalidate||Pe.hasClientLoader?ae=!0:Q.add(pe.route.id))}),Q.size===0)return[];let se=o2(a,_,"data");return ae&&Q.size>0&&se.searchParams.set("_routes",l.filter(pe=>Q.has(pe.route.id)).map(pe=>pe.route.id).join(",")),[se.pathname+se.search]},[_,d,x,j,z,l,a,k]),O=G.useMemo(()=>d2(R,j),[R,j]),ie=y2(R);return G.createElement(G.Fragment,null,D.map(Q=>G.createElement("link",{key:Q,rel:"prefetch",as:"fetch",href:Q,...h})),O.map(Q=>G.createElement("link",{key:Q,rel:"modulepreload",href:Q,...h})),ie.map(({key:Q,link:ae})=>G.createElement("link",{key:Q,nonce:h.nonce,...ae})))}function _2(...a){return l=>{a.forEach(h=>{typeof h=="function"?h(l):h!=null&&(h.current=l)})}}var c_=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{c_&&(window.__reactRouterVersion="7.8.2")}catch{}function w2({basename:a,children:l,window:h}){let x=G.useRef();x.current==null&&(x.current=o1({window:h,v5Compat:!0}));let j=x.current,[k,_]=G.useState({action:j.action,location:j.location}),d=G.useCallback(I=>{G.startTransition(()=>_(I))},[_]);return G.useLayoutEffect(()=>j.listen(d),[j,d]),G.createElement(Y1,{basename:a,children:l,location:k.location,navigationType:k.action,navigator:j})}var u_=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,mi=G.forwardRef(function({onClick:l,discover:h="render",prefetch:x="none",relative:j,reloadDocument:k,replace:_,state:d,target:I,to:z,preventScrollReset:R,viewTransition:D,...O},ie){let{basename:Q}=G.useContext(Wo),ae=typeof z=="string"&&u_.test(z),se,pe=!1;if(typeof z=="string"&&ae&&(se=z,c_))try{let Ae=new URL(window.location.href),He=z.startsWith("//")?new URL(Ae.protocol+z):new URL(z),ct=Nc(He.pathname,Q);He.origin===Ae.origin&&ct!=null?z=ct+He.search+He.hash:pe=!0}catch{go(!1,`<Link to="${z}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let Pe=z1(z,{relative:j}),[Ie,Ze,Je]=g2(x,O),Xe=k2(z,{replace:_,state:d,target:I,preventScrollReset:R,relative:j,viewTransition:D});function ut(Ae){l&&l(Ae),Ae.defaultPrevented||Xe(Ae)}let je=G.createElement("a",{...O,...Je,href:se||Pe,onClick:pe||k?l:ut,ref:_2(ie,Ze),target:I,"data-discover":!ae&&h==="render"?"true":void 0});return Ie&&!ae?G.createElement(G.Fragment,null,je,G.createElement(x2,{page:Pe})):je});mi.displayName="Link";var b2=G.forwardRef(function({"aria-current":l="page",caseSensitive:h=!1,className:x="",end:j=!1,style:k,to:_,viewTransition:d,children:I,...z},R){let D=gm(_,{relative:z.relative}),O=xo(),ie=G.useContext($f),{navigator:Q,basename:ae}=G.useContext(Wo),se=ie!=null&&M2(D)&&d===!0,pe=Q.encodeLocation?Q.encodeLocation(D).pathname:D.pathname,Pe=O.pathname,Ie=ie&&ie.navigation&&ie.navigation.location?ie.navigation.location.pathname:null;h||(Pe=Pe.toLowerCase(),Ie=Ie?Ie.toLowerCase():null,pe=pe.toLowerCase()),Ie&&ae&&(Ie=Nc(Ie,ae)||Ie);const Ze=pe!=="/"&&pe.endsWith("/")?pe.length-1:pe.length;let Je=Pe===pe||!j&&Pe.startsWith(pe)&&Pe.charAt(Ze)==="/",Xe=Ie!=null&&(Ie===pe||!j&&Ie.startsWith(pe)&&Ie.charAt(pe.length)==="/"),ut={isActive:Je,isPending:Xe,isTransitioning:se},je=Je?l:void 0,Ae;typeof x=="function"?Ae=x(ut):Ae=[x,Je?"active":null,Xe?"pending":null,se?"transitioning":null].filter(Boolean).join(" ");let He=typeof k=="function"?k(ut):k;return G.createElement(mi,{...z,"aria-current":je,className:Ae,ref:R,style:He,to:_,viewTransition:d},typeof I=="function"?I(ut):I)});b2.displayName="NavLink";var j2=G.forwardRef(({discover:a="render",fetcherKey:l,navigate:h,reloadDocument:x,replace:j,state:k,method:_=Sf,action:d,onSubmit:I,relative:z,preventScrollReset:R,viewTransition:D,...O},ie)=>{let Q=P2(),ae=E2(d,{relative:z}),se=_.toLowerCase()==="get"?"get":"post",pe=typeof d=="string"&&u_.test(d),Pe=Ie=>{if(I&&I(Ie),Ie.defaultPrevented)return;Ie.preventDefault();let Ze=Ie.nativeEvent.submitter,Je=Ze?.getAttribute("formmethod")||_;Q(Ze||Ie.currentTarget,{fetcherKey:l,method:Je,navigate:h,replace:j,state:k,relative:z,preventScrollReset:R,viewTransition:D})};return G.createElement("form",{ref:ie,method:se,action:ae,onSubmit:x?I:Pe,...O,"data-discover":!pe&&a==="render"?"true":void 0})});j2.displayName="Form";function N2(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function d_(a){let l=G.useContext(Yh);return Cs(l,N2(a)),l}function k2(a,{target:l,replace:h,state:x,preventScrollReset:j,relative:k,viewTransition:_}={}){let d=un(),I=xo(),z=gm(a,{relative:k});return G.useCallback(R=>{if(i2(R,l)){R.preventDefault();let D=h!==void 0?h:rm(I)===rm(z);d(a,{replace:D,state:x,preventScrollReset:j,relative:k,viewTransition:_})}},[I,d,z,h,x,l,a,j,k,_])}function S2(a){go(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let l=G.useRef(rx(a)),h=G.useRef(!1),x=xo(),j=G.useMemo(()=>s2(x.search,h.current?null:l.current),[x.search]),k=un(),_=G.useCallback((d,I)=>{const z=rx(typeof d=="function"?d(new URLSearchParams(j)):d);h.current=!0,k("?"+z,I)},[k,j]);return[j,_]}var T2=0,C2=()=>`__${String(++T2)}__`;function P2(){let{router:a}=d_("useSubmit"),{basename:l}=G.useContext(Wo),h=q1();return G.useCallback(async(x,j={})=>{let{action:k,method:_,encType:d,formData:I,body:z}=a2(x,l);if(j.navigate===!1){let R=j.fetcherKey||C2();await a.fetch(R,h,j.action||k,{preventScrollReset:j.preventScrollReset,formData:I,body:z,formMethod:j.method||_,formEncType:j.encType||d,flushSync:j.flushSync})}else await a.navigate(j.action||k,{preventScrollReset:j.preventScrollReset,formData:I,body:z,formMethod:j.method||_,formEncType:j.encType||d,replace:j.replace,state:j.state,fromRouteId:h,flushSync:j.flushSync,viewTransition:j.viewTransition})},[a,l,h])}function E2(a,{relative:l}={}){let{basename:h}=G.useContext(Wo),x=G.useContext(qo);Cs(x,"useFormAction must be used inside a RouteContext");let[j]=x.matches.slice(-1),k={...gm(a||".",{relative:l})},_=xo();if(a==null){k.search=_.search;let d=new URLSearchParams(k.search),I=d.getAll("index");if(I.some(R=>R==="")){d.delete("index"),I.filter(D=>D).forEach(D=>d.append("index",D));let R=d.toString();k.search=R?`?${R}`:""}}return(!a||a===".")&&j.route.index&&(k.search=k.search?k.search.replace(/^\?/,"?index&"):"?index"),h!=="/"&&(k.pathname=k.pathname==="/"?h:bc([h,k.pathname])),rm(k)}function M2(a,{relative:l}={}){let h=G.useContext(i_);Cs(h!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:x}=d_("useViewTransitionState"),j=gm(a,{relative:l});if(!h.isTransitioning)return!1;let k=Nc(h.currentLocation.pathname,x)||h.currentLocation.pathname,_=Nc(h.nextLocation.pathname,x)||h.nextLocation.pathname;return zf(j.pathname,_)!=null||zf(j.pathname,k)!=null}var Gx=Jv();const A2=Bx(Gx),Zx=G.createContext({});function Xx(a){const l=G.useRef(null);return l.current===null&&(l.current=a()),l.current}const Yx=typeof window<"u",h_=Yx?G.useLayoutEffect:G.useEffect,Hf=G.createContext(null);function Jx(a,l){a.indexOf(l)===-1&&a.push(l)}function Kx(a,l){const h=a.indexOf(l);h>-1&&a.splice(h,1)}const kc=(a,l,h)=>h>l?l:h<a?a:h;let Qx=()=>{};const Sc={},p_=a=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(a);function m_(a){return typeof a=="object"&&a!==null}const f_=a=>/^0[^.\s]+$/u.test(a);function ey(a){let l;return()=>(l===void 0&&(l=a()),l)}const ho=a=>a,I2=(a,l)=>h=>l(a(h)),xm=(...a)=>a.reduce(I2),nm=(a,l,h)=>{const x=l-a;return x===0?1:(h-a)/x};class ty{constructor(){this.subscriptions=[]}add(l){return Jx(this.subscriptions,l),()=>Kx(this.subscriptions,l)}notify(l,h,x){const j=this.subscriptions.length;if(j)if(j===1)this.subscriptions[0](l,h,x);else for(let k=0;k<j;k++){const _=this.subscriptions[k];_&&_(l,h,x)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Il=a=>a*1e3,zl=a=>a/1e3;function g_(a,l){return l?a*(1e3/l):0}const x_=(a,l,h)=>(((1-3*h+3*l)*a+(3*h-6*l))*a+3*l)*a,z2=1e-7,D2=12;function R2(a,l,h,x,j){let k,_,d=0;do _=l+(h-l)/2,k=x_(_,x,j)-a,k>0?h=_:l=_;while(Math.abs(k)>z2&&++d<D2);return _}function ym(a,l,h,x){if(a===l&&h===x)return ho;const j=k=>R2(k,0,1,a,h);return k=>k===0||k===1?k:x_(j(k),l,x)}const y_=a=>l=>l<=.5?a(2*l)/2:(2-a(2*(1-l)))/2,v_=a=>l=>1-a(1-l),__=ym(.33,1.53,.69,.99),iy=v_(__),w_=y_(iy),b_=a=>(a*=2)<1?.5*iy(a):.5*(2-Math.pow(2,-10*(a-1))),sy=a=>1-Math.sin(Math.acos(a)),j_=v_(sy),N_=y_(sy),L2=ym(.42,0,1,1),B2=ym(0,0,.58,1),k_=ym(.42,0,.58,1),F2=a=>Array.isArray(a)&&typeof a[0]!="number",S_=a=>Array.isArray(a)&&typeof a[0]=="number",O2={linear:ho,easeIn:L2,easeInOut:k_,easeOut:B2,circIn:sy,circInOut:N_,circOut:j_,backIn:iy,backInOut:w_,backOut:__,anticipate:b_},V2=a=>typeof a=="string",d0=a=>{if(S_(a)){Qx(a.length===4);const[l,h,x,j]=a;return ym(l,h,x,j)}else if(V2(a))return O2[a];return a},yf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function $2(a,l){let h=new Set,x=new Set,j=!1,k=!1;const _=new WeakSet;let d={delta:0,timestamp:0,isProcessing:!1};function I(R){_.has(R)&&(z.schedule(R),a()),R(d)}const z={schedule:(R,D=!1,O=!1)=>{const Q=O&&j?h:x;return D&&_.add(R),Q.has(R)||Q.add(R),R},cancel:R=>{x.delete(R),_.delete(R)},process:R=>{if(d=R,j){k=!0;return}j=!0,[h,x]=[x,h],h.forEach(I),h.clear(),j=!1,k&&(k=!1,z.process(R))}};return z}const U2=40;function T_(a,l){let h=!1,x=!0;const j={delta:0,timestamp:0,isProcessing:!1},k=()=>h=!0,_=yf.reduce((Ie,Ze)=>(Ie[Ze]=$2(k),Ie),{}),{setup:d,read:I,resolveKeyframes:z,preUpdate:R,update:D,preRender:O,render:ie,postRender:Q}=_,ae=()=>{const Ie=Sc.useManualTiming?j.timestamp:performance.now();h=!1,Sc.useManualTiming||(j.delta=x?1e3/60:Math.max(Math.min(Ie-j.timestamp,U2),1)),j.timestamp=Ie,j.isProcessing=!0,d.process(j),I.process(j),z.process(j),R.process(j),D.process(j),O.process(j),ie.process(j),Q.process(j),j.isProcessing=!1,h&&l&&(x=!1,a(ae))},se=()=>{h=!0,x=!0,j.isProcessing||a(ae)};return{schedule:yf.reduce((Ie,Ze)=>{const Je=_[Ze];return Ie[Ze]=(Xe,ut=!1,je=!1)=>(h||se(),Je.schedule(Xe,ut,je)),Ie},{}),cancel:Ie=>{for(let Ze=0;Ze<yf.length;Ze++)_[yf[Ze]].cancel(Ie)},state:j,steps:_}}const{schedule:Ts,cancel:fu,state:cn,steps:Pg}=T_(typeof requestAnimationFrame<"u"?requestAnimationFrame:ho,!0);let Cf;function H2(){Cf=void 0}const ha={now:()=>(Cf===void 0&&ha.set(cn.isProcessing||Sc.useManualTiming?cn.timestamp:performance.now()),Cf),set:a=>{Cf=a,queueMicrotask(H2)}},C_=a=>l=>typeof l=="string"&&l.startsWith(a),ry=C_("--"),W2=C_("var(--"),ny=a=>W2(a)?q2.test(a.split("/*")[0].trim()):!1,q2=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Kh={test:a=>typeof a=="number",parse:parseFloat,transform:a=>a},am={...Kh,transform:a=>kc(0,1,a)},vf={...Kh,default:1},Qp=a=>Math.round(a*1e5)/1e5,ay=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function G2(a){return a==null}const Z2=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,oy=(a,l)=>h=>!!(typeof h=="string"&&Z2.test(h)&&h.startsWith(a)||l&&!G2(h)&&Object.prototype.hasOwnProperty.call(h,l)),P_=(a,l,h)=>x=>{if(typeof x!="string")return x;const[j,k,_,d]=x.match(ay);return{[a]:parseFloat(j),[l]:parseFloat(k),[h]:parseFloat(_),alpha:d!==void 0?parseFloat(d):1}},X2=a=>kc(0,255,a),Eg={...Kh,transform:a=>Math.round(X2(a))},Pd={test:oy("rgb","red"),parse:P_("red","green","blue"),transform:({red:a,green:l,blue:h,alpha:x=1})=>"rgba("+Eg.transform(a)+", "+Eg.transform(l)+", "+Eg.transform(h)+", "+Qp(am.transform(x))+")"};function Y2(a){let l="",h="",x="",j="";return a.length>5?(l=a.substring(1,3),h=a.substring(3,5),x=a.substring(5,7),j=a.substring(7,9)):(l=a.substring(1,2),h=a.substring(2,3),x=a.substring(3,4),j=a.substring(4,5),l+=l,h+=h,x+=x,j+=j),{red:parseInt(l,16),green:parseInt(h,16),blue:parseInt(x,16),alpha:j?parseInt(j,16)/255:1}}const nx={test:oy("#"),parse:Y2,transform:Pd.transform},vm=a=>({test:l=>typeof l=="string"&&l.endsWith(a)&&l.split(" ").length===1,parse:parseFloat,transform:l=>`${l}${a}`}),pu=vm("deg"),Dl=vm("%"),gi=vm("px"),J2=vm("vh"),K2=vm("vw"),h0={...Dl,parse:a=>Dl.parse(a)/100,transform:a=>Dl.transform(a*100)},Lh={test:oy("hsl","hue"),parse:P_("hue","saturation","lightness"),transform:({hue:a,saturation:l,lightness:h,alpha:x=1})=>"hsla("+Math.round(a)+", "+Dl.transform(Qp(l))+", "+Dl.transform(Qp(h))+", "+Qp(am.transform(x))+")"},pr={test:a=>Pd.test(a)||nx.test(a)||Lh.test(a),parse:a=>Pd.test(a)?Pd.parse(a):Lh.test(a)?Lh.parse(a):nx.parse(a),transform:a=>typeof a=="string"?a:a.hasOwnProperty("red")?Pd.transform(a):Lh.transform(a),getAnimatableNone:a=>{const l=pr.parse(a);return l.alpha=0,pr.transform(l)}},Q2=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function ej(a){return isNaN(a)&&typeof a=="string"&&(a.match(ay)?.length||0)+(a.match(Q2)?.length||0)>0}const E_="number",M_="color",tj="var",ij="var(",p0="${}",sj=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function om(a){const l=a.toString(),h=[],x={color:[],number:[],var:[]},j=[];let k=0;const d=l.replace(sj,I=>(pr.test(I)?(x.color.push(k),j.push(M_),h.push(pr.parse(I))):I.startsWith(ij)?(x.var.push(k),j.push(tj),h.push(I)):(x.number.push(k),j.push(E_),h.push(parseFloat(I))),++k,p0)).split(p0);return{values:h,split:d,indexes:x,types:j}}function A_(a){return om(a).values}function I_(a){const{split:l,types:h}=om(a),x=l.length;return j=>{let k="";for(let _=0;_<x;_++)if(k+=l[_],j[_]!==void 0){const d=h[_];d===E_?k+=Qp(j[_]):d===M_?k+=pr.transform(j[_]):k+=j[_]}return k}}const rj=a=>typeof a=="number"?0:pr.test(a)?pr.getAnimatableNone(a):a;function nj(a){const l=A_(a);return I_(a)(l.map(rj))}const gu={test:ej,parse:A_,createTransformer:I_,getAnimatableNone:nj};function Mg(a,l,h){return h<0&&(h+=1),h>1&&(h-=1),h<1/6?a+(l-a)*6*h:h<1/2?l:h<2/3?a+(l-a)*(2/3-h)*6:a}function aj({hue:a,saturation:l,lightness:h,alpha:x}){a/=360,l/=100,h/=100;let j=0,k=0,_=0;if(!l)j=k=_=h;else{const d=h<.5?h*(1+l):h+l-h*l,I=2*h-d;j=Mg(I,d,a+1/3),k=Mg(I,d,a),_=Mg(I,d,a-1/3)}return{red:Math.round(j*255),green:Math.round(k*255),blue:Math.round(_*255),alpha:x}}function Df(a,l){return h=>h>0?l:a}const Os=(a,l,h)=>a+(l-a)*h,Ag=(a,l,h)=>{const x=a*a,j=h*(l*l-x)+x;return j<0?0:Math.sqrt(j)},oj=[nx,Pd,Lh],lj=a=>oj.find(l=>l.test(a));function m0(a){const l=lj(a);if(!l)return!1;let h=l.parse(a);return l===Lh&&(h=aj(h)),h}const f0=(a,l)=>{const h=m0(a),x=m0(l);if(!h||!x)return Df(a,l);const j={...h};return k=>(j.red=Ag(h.red,x.red,k),j.green=Ag(h.green,x.green,k),j.blue=Ag(h.blue,x.blue,k),j.alpha=Os(h.alpha,x.alpha,k),Pd.transform(j))},ax=new Set(["none","hidden"]);function cj(a,l){return ax.has(a)?h=>h<=0?a:l:h=>h>=1?l:a}function uj(a,l){return h=>Os(a,l,h)}function ly(a){return typeof a=="number"?uj:typeof a=="string"?ny(a)?Df:pr.test(a)?f0:pj:Array.isArray(a)?z_:typeof a=="object"?pr.test(a)?f0:dj:Df}function z_(a,l){const h=[...a],x=h.length,j=a.map((k,_)=>ly(k)(k,l[_]));return k=>{for(let _=0;_<x;_++)h[_]=j[_](k);return h}}function dj(a,l){const h={...a,...l},x={};for(const j in h)a[j]!==void 0&&l[j]!==void 0&&(x[j]=ly(a[j])(a[j],l[j]));return j=>{for(const k in x)h[k]=x[k](j);return h}}function hj(a,l){const h=[],x={color:0,var:0,number:0};for(let j=0;j<l.values.length;j++){const k=l.types[j],_=a.indexes[k][x[k]],d=a.values[_]??0;h[j]=d,x[k]++}return h}const pj=(a,l)=>{const h=gu.createTransformer(l),x=om(a),j=om(l);return x.indexes.var.length===j.indexes.var.length&&x.indexes.color.length===j.indexes.color.length&&x.indexes.number.length>=j.indexes.number.length?ax.has(a)&&!j.values.length||ax.has(l)&&!x.values.length?cj(a,l):xm(z_(hj(x,j),j.values),h):Df(a,l)};function D_(a,l,h){return typeof a=="number"&&typeof l=="number"&&typeof h=="number"?Os(a,l,h):ly(a)(a,l)}const mj=a=>{const l=({timestamp:h})=>a(h);return{start:(h=!0)=>Ts.update(l,h),stop:()=>fu(l),now:()=>cn.isProcessing?cn.timestamp:ha.now()}},R_=(a,l,h=10)=>{let x="";const j=Math.max(Math.round(l/h),2);for(let k=0;k<j;k++)x+=Math.round(a(k/(j-1))*1e4)/1e4+", ";return`linear(${x.substring(0,x.length-2)})`},Rf=2e4;function cy(a){let l=0;const h=50;let x=a.next(l);for(;!x.done&&l<Rf;)l+=h,x=a.next(l);return l>=Rf?1/0:l}function fj(a,l=100,h){const x=h({...a,keyframes:[0,l]}),j=Math.min(cy(x),Rf);return{type:"keyframes",ease:k=>x.next(j*k).value/l,duration:zl(j)}}const gj=5;function L_(a,l,h){const x=Math.max(l-gj,0);return g_(h-a(x),l-x)}const Gs={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Ig=.001;function xj({duration:a=Gs.duration,bounce:l=Gs.bounce,velocity:h=Gs.velocity,mass:x=Gs.mass}){let j,k,_=1-l;_=kc(Gs.minDamping,Gs.maxDamping,_),a=kc(Gs.minDuration,Gs.maxDuration,zl(a)),_<1?(j=z=>{const R=z*_,D=R*a,O=R-h,ie=ox(z,_),Q=Math.exp(-D);return Ig-O/ie*Q},k=z=>{const D=z*_*a,O=D*h+h,ie=Math.pow(_,2)*Math.pow(z,2)*a,Q=Math.exp(-D),ae=ox(Math.pow(z,2),_);return(-j(z)+Ig>0?-1:1)*((O-ie)*Q)/ae}):(j=z=>{const R=Math.exp(-z*a),D=(z-h)*a+1;return-Ig+R*D},k=z=>{const R=Math.exp(-z*a),D=(h-z)*(a*a);return R*D});const d=5/a,I=vj(j,k,d);if(a=Il(a),isNaN(I))return{stiffness:Gs.stiffness,damping:Gs.damping,duration:a};{const z=Math.pow(I,2)*x;return{stiffness:z,damping:_*2*Math.sqrt(x*z),duration:a}}}const yj=12;function vj(a,l,h){let x=h;for(let j=1;j<yj;j++)x=x-a(x)/l(x);return x}function ox(a,l){return a*Math.sqrt(1-l*l)}const _j=["duration","bounce"],wj=["stiffness","damping","mass"];function g0(a,l){return l.some(h=>a[h]!==void 0)}function bj(a){let l={velocity:Gs.velocity,stiffness:Gs.stiffness,damping:Gs.damping,mass:Gs.mass,isResolvedFromDuration:!1,...a};if(!g0(a,wj)&&g0(a,_j))if(a.visualDuration){const h=a.visualDuration,x=2*Math.PI/(h*1.2),j=x*x,k=2*kc(.05,1,1-(a.bounce||0))*Math.sqrt(j);l={...l,mass:Gs.mass,stiffness:j,damping:k}}else{const h=xj(a);l={...l,...h,mass:Gs.mass},l.isResolvedFromDuration=!0}return l}function Lf(a=Gs.visualDuration,l=Gs.bounce){const h=typeof a!="object"?{visualDuration:a,keyframes:[0,1],bounce:l}:a;let{restSpeed:x,restDelta:j}=h;const k=h.keyframes[0],_=h.keyframes[h.keyframes.length-1],d={done:!1,value:k},{stiffness:I,damping:z,mass:R,duration:D,velocity:O,isResolvedFromDuration:ie}=bj({...h,velocity:-zl(h.velocity||0)}),Q=O||0,ae=z/(2*Math.sqrt(I*R)),se=_-k,pe=zl(Math.sqrt(I/R)),Pe=Math.abs(se)<5;x||(x=Pe?Gs.restSpeed.granular:Gs.restSpeed.default),j||(j=Pe?Gs.restDelta.granular:Gs.restDelta.default);let Ie;if(ae<1){const Je=ox(pe,ae);Ie=Xe=>{const ut=Math.exp(-ae*pe*Xe);return _-ut*((Q+ae*pe*se)/Je*Math.sin(Je*Xe)+se*Math.cos(Je*Xe))}}else if(ae===1)Ie=Je=>_-Math.exp(-pe*Je)*(se+(Q+pe*se)*Je);else{const Je=pe*Math.sqrt(ae*ae-1);Ie=Xe=>{const ut=Math.exp(-ae*pe*Xe),je=Math.min(Je*Xe,300);return _-ut*((Q+ae*pe*se)*Math.sinh(je)+Je*se*Math.cosh(je))/Je}}const Ze={calculatedDuration:ie&&D||null,next:Je=>{const Xe=Ie(Je);if(ie)d.done=Je>=D;else{let ut=Je===0?Q:0;ae<1&&(ut=Je===0?Il(Q):L_(Ie,Je,Xe));const je=Math.abs(ut)<=x,Ae=Math.abs(_-Xe)<=j;d.done=je&&Ae}return d.value=d.done?_:Xe,d},toString:()=>{const Je=Math.min(cy(Ze),Rf),Xe=R_(ut=>Ze.next(Je*ut).value,Je,30);return Je+"ms "+Xe},toTransition:()=>{}};return Ze}Lf.applyToOptions=a=>{const l=fj(a,100,Lf);return a.ease=l.ease,a.duration=Il(l.duration),a.type="keyframes",a};function lx({keyframes:a,velocity:l=0,power:h=.8,timeConstant:x=325,bounceDamping:j=10,bounceStiffness:k=500,modifyTarget:_,min:d,max:I,restDelta:z=.5,restSpeed:R}){const D=a[0],O={done:!1,value:D},ie=je=>d!==void 0&&je<d||I!==void 0&&je>I,Q=je=>d===void 0?I:I===void 0||Math.abs(d-je)<Math.abs(I-je)?d:I;let ae=h*l;const se=D+ae,pe=_===void 0?se:_(se);pe!==se&&(ae=pe-D);const Pe=je=>-ae*Math.exp(-je/x),Ie=je=>pe+Pe(je),Ze=je=>{const Ae=Pe(je),He=Ie(je);O.done=Math.abs(Ae)<=z,O.value=O.done?pe:He};let Je,Xe;const ut=je=>{ie(O.value)&&(Je=je,Xe=Lf({keyframes:[O.value,Q(O.value)],velocity:L_(Ie,je,O.value),damping:j,stiffness:k,restDelta:z,restSpeed:R}))};return ut(0),{calculatedDuration:null,next:je=>{let Ae=!1;return!Xe&&Je===void 0&&(Ae=!0,Ze(je),ut(je)),Je!==void 0&&je>=Je?Xe.next(je-Je):(!Ae&&Ze(je),O)}}}function jj(a,l,h){const x=[],j=h||Sc.mix||D_,k=a.length-1;for(let _=0;_<k;_++){let d=j(a[_],a[_+1]);if(l){const I=Array.isArray(l)?l[_]||ho:l;d=xm(I,d)}x.push(d)}return x}function Nj(a,l,{clamp:h=!0,ease:x,mixer:j}={}){const k=a.length;if(Qx(k===l.length),k===1)return()=>l[0];if(k===2&&l[0]===l[1])return()=>l[1];const _=a[0]===a[1];a[0]>a[k-1]&&(a=[...a].reverse(),l=[...l].reverse());const d=jj(l,x,j),I=d.length,z=R=>{if(_&&R<a[0])return l[0];let D=0;if(I>1)for(;D<a.length-2&&!(R<a[D+1]);D++);const O=nm(a[D],a[D+1],R);return d[D](O)};return h?R=>z(kc(a[0],a[k-1],R)):z}function kj(a,l){const h=a[a.length-1];for(let x=1;x<=l;x++){const j=nm(0,l,x);a.push(Os(h,1,j))}}function Sj(a){const l=[0];return kj(l,a.length-1),l}function Tj(a,l){return a.map(h=>h*l)}function Cj(a,l){return a.map(()=>l||k_).splice(0,a.length-1)}function em({duration:a=300,keyframes:l,times:h,ease:x="easeInOut"}){const j=F2(x)?x.map(d0):d0(x),k={done:!1,value:l[0]},_=Tj(h&&h.length===l.length?h:Sj(l),a),d=Nj(_,l,{ease:Array.isArray(j)?j:Cj(l,j)});return{calculatedDuration:a,next:I=>(k.value=d(I),k.done=I>=a,k)}}const Pj=a=>a!==null;function uy(a,{repeat:l,repeatType:h="loop"},x,j=1){const k=a.filter(Pj),d=j<0||l&&h!=="loop"&&l%2===1?0:k.length-1;return!d||x===void 0?k[d]:x}const Ej={decay:lx,inertia:lx,tween:em,keyframes:em,spring:Lf};function B_(a){typeof a.type=="string"&&(a.type=Ej[a.type])}class dy{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(l=>{this.resolve=l})}notifyFinished(){this.resolve()}then(l,h){return this.finished.then(l,h)}}const Mj=a=>a/100;class hy extends dy{constructor(l){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:h}=this.options;h&&h.updatedAt!==ha.now()&&this.tick(ha.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=l,this.initAnimation(),this.play(),l.autoplay===!1&&this.pause()}initAnimation(){const{options:l}=this;B_(l);const{type:h=em,repeat:x=0,repeatDelay:j=0,repeatType:k,velocity:_=0}=l;let{keyframes:d}=l;const I=h||em;I!==em&&typeof d[0]!="number"&&(this.mixKeyframes=xm(Mj,D_(d[0],d[1])),d=[0,100]);const z=I({...l,keyframes:d});k==="mirror"&&(this.mirroredGenerator=I({...l,keyframes:[...d].reverse(),velocity:-_})),z.calculatedDuration===null&&(z.calculatedDuration=cy(z));const{calculatedDuration:R}=z;this.calculatedDuration=R,this.resolvedDuration=R+j,this.totalDuration=this.resolvedDuration*(x+1)-j,this.generator=z}updateTime(l){const h=Math.round(l-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=h}tick(l,h=!1){const{generator:x,totalDuration:j,mixKeyframes:k,mirroredGenerator:_,resolvedDuration:d,calculatedDuration:I}=this;if(this.startTime===null)return x.next(0);const{delay:z=0,keyframes:R,repeat:D,repeatType:O,repeatDelay:ie,type:Q,onUpdate:ae,finalKeyframe:se}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,l):this.speed<0&&(this.startTime=Math.min(l-j/this.speed,this.startTime)),h?this.currentTime=l:this.updateTime(l);const pe=this.currentTime-z*(this.playbackSpeed>=0?1:-1),Pe=this.playbackSpeed>=0?pe<0:pe>j;this.currentTime=Math.max(pe,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=j);let Ie=this.currentTime,Ze=x;if(D){const je=Math.min(this.currentTime,j)/d;let Ae=Math.floor(je),He=je%1;!He&&je>=1&&(He=1),He===1&&Ae--,Ae=Math.min(Ae,D+1),!!(Ae%2)&&(O==="reverse"?(He=1-He,ie&&(He-=ie/d)):O==="mirror"&&(Ze=_)),Ie=kc(0,1,He)*d}const Je=Pe?{done:!1,value:R[0]}:Ze.next(Ie);k&&(Je.value=k(Je.value));let{done:Xe}=Je;!Pe&&I!==null&&(Xe=this.playbackSpeed>=0?this.currentTime>=j:this.currentTime<=0);const ut=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Xe);return ut&&Q!==lx&&(Je.value=uy(R,this.options,se,this.speed)),ae&&ae(Je.value),ut&&this.finish(),Je}then(l,h){return this.finished.then(l,h)}get duration(){return zl(this.calculatedDuration)}get time(){return zl(this.currentTime)}set time(l){l=Il(l),this.currentTime=l,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=l:this.driver&&(this.startTime=this.driver.now()-l/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(l){this.updateTime(ha.now());const h=this.playbackSpeed!==l;this.playbackSpeed=l,h&&(this.time=zl(this.currentTime))}play(){if(this.isStopped)return;const{driver:l=mj,startTime:h}=this.options;this.driver||(this.driver=l(j=>this.tick(j))),this.options.onPlay?.();const x=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=x):this.holdTime!==null?this.startTime=x-this.holdTime:this.startTime||(this.startTime=h??x),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(ha.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(l){return this.startTime=0,this.tick(l,!0)}attachTimeline(l){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),l.observe(this)}}function Aj(a){for(let l=1;l<a.length;l++)a[l]??(a[l]=a[l-1])}const Ed=a=>a*180/Math.PI,cx=a=>{const l=Ed(Math.atan2(a[1],a[0]));return ux(l)},Ij={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:a=>(Math.abs(a[0])+Math.abs(a[3]))/2,rotate:cx,rotateZ:cx,skewX:a=>Ed(Math.atan(a[1])),skewY:a=>Ed(Math.atan(a[2])),skew:a=>(Math.abs(a[1])+Math.abs(a[2]))/2},ux=a=>(a=a%360,a<0&&(a+=360),a),x0=cx,y0=a=>Math.sqrt(a[0]*a[0]+a[1]*a[1]),v0=a=>Math.sqrt(a[4]*a[4]+a[5]*a[5]),zj={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:y0,scaleY:v0,scale:a=>(y0(a)+v0(a))/2,rotateX:a=>ux(Ed(Math.atan2(a[6],a[5]))),rotateY:a=>ux(Ed(Math.atan2(-a[2],a[0]))),rotateZ:x0,rotate:x0,skewX:a=>Ed(Math.atan(a[4])),skewY:a=>Ed(Math.atan(a[1])),skew:a=>(Math.abs(a[1])+Math.abs(a[4]))/2};function dx(a){return a.includes("scale")?1:0}function hx(a,l){if(!a||a==="none")return dx(l);const h=a.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let x,j;if(h)x=zj,j=h;else{const d=a.match(/^matrix\(([-\d.e\s,]+)\)$/u);x=Ij,j=d}if(!j)return dx(l);const k=x[l],_=j[1].split(",").map(Rj);return typeof k=="function"?k(_):_[k]}const Dj=(a,l)=>{const{transform:h="none"}=getComputedStyle(a);return hx(h,l)};function Rj(a){return parseFloat(a.trim())}const Qh=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],ep=new Set(Qh),_0=a=>a===Kh||a===gi,Lj=new Set(["x","y","z"]),Bj=Qh.filter(a=>!Lj.has(a));function Fj(a){const l=[];return Bj.forEach(h=>{const x=a.getValue(h);x!==void 0&&(l.push([h,x.get()]),x.set(h.startsWith("scale")?1:0))}),l}const Ad={width:({x:a},{paddingLeft:l="0",paddingRight:h="0"})=>a.max-a.min-parseFloat(l)-parseFloat(h),height:({y:a},{paddingTop:l="0",paddingBottom:h="0"})=>a.max-a.min-parseFloat(l)-parseFloat(h),top:(a,{top:l})=>parseFloat(l),left:(a,{left:l})=>parseFloat(l),bottom:({y:a},{top:l})=>parseFloat(l)+(a.max-a.min),right:({x:a},{left:l})=>parseFloat(l)+(a.max-a.min),x:(a,{transform:l})=>hx(l,"x"),y:(a,{transform:l})=>hx(l,"y")};Ad.translateX=Ad.x;Ad.translateY=Ad.y;const Id=new Set;let px=!1,mx=!1,fx=!1;function F_(){if(mx){const a=Array.from(Id).filter(x=>x.needsMeasurement),l=new Set(a.map(x=>x.element)),h=new Map;l.forEach(x=>{const j=Fj(x);j.length&&(h.set(x,j),x.render())}),a.forEach(x=>x.measureInitialState()),l.forEach(x=>{x.render();const j=h.get(x);j&&j.forEach(([k,_])=>{x.getValue(k)?.set(_)})}),a.forEach(x=>x.measureEndState()),a.forEach(x=>{x.suspendedScrollY!==void 0&&window.scrollTo(0,x.suspendedScrollY)})}mx=!1,px=!1,Id.forEach(a=>a.complete(fx)),Id.clear()}function O_(){Id.forEach(a=>{a.readKeyframes(),a.needsMeasurement&&(mx=!0)})}function Oj(){fx=!0,O_(),F_(),fx=!1}class py{constructor(l,h,x,j,k,_=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...l],this.onComplete=h,this.name=x,this.motionValue=j,this.element=k,this.isAsync=_}scheduleResolve(){this.state="scheduled",this.isAsync?(Id.add(this),px||(px=!0,Ts.read(O_),Ts.resolveKeyframes(F_))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:l,name:h,element:x,motionValue:j}=this;if(l[0]===null){const k=j?.get(),_=l[l.length-1];if(k!==void 0)l[0]=k;else if(x&&h){const d=x.readValue(h,_);d!=null&&(l[0]=d)}l[0]===void 0&&(l[0]=_),j&&k===void 0&&j.set(l[0])}Aj(l)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(l=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,l),Id.delete(this)}cancel(){this.state==="scheduled"&&(Id.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Vj=a=>a.startsWith("--");function $j(a,l,h){Vj(l)?a.style.setProperty(l,h):a.style[l]=h}const Uj=ey(()=>window.ScrollTimeline!==void 0),Hj={};function Wj(a,l){const h=ey(a);return()=>Hj[l]??h()}const V_=Wj(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Jp=([a,l,h,x])=>`cubic-bezier(${a}, ${l}, ${h}, ${x})`,w0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Jp([0,.65,.55,1]),circOut:Jp([.55,0,1,.45]),backIn:Jp([.31,.01,.66,-.59]),backOut:Jp([.33,1.53,.69,.99])};function $_(a,l){if(a)return typeof a=="function"?V_()?R_(a,l):"ease-out":S_(a)?Jp(a):Array.isArray(a)?a.map(h=>$_(h,l)||w0.easeOut):w0[a]}function qj(a,l,h,{delay:x=0,duration:j=300,repeat:k=0,repeatType:_="loop",ease:d="easeOut",times:I}={},z=void 0){const R={[l]:h};I&&(R.offset=I);const D=$_(d,j);Array.isArray(D)&&(R.easing=D);const O={delay:x,duration:j,easing:Array.isArray(D)?"linear":D,fill:"both",iterations:k+1,direction:_==="reverse"?"alternate":"normal"};return z&&(O.pseudoElement=z),a.animate(R,O)}function U_(a){return typeof a=="function"&&"applyToOptions"in a}function Gj({type:a,...l}){return U_(a)&&V_()?a.applyToOptions(l):(l.duration??(l.duration=300),l.ease??(l.ease="easeOut"),l)}class Zj extends dy{constructor(l){if(super(),this.finishedTime=null,this.isStopped=!1,!l)return;const{element:h,name:x,keyframes:j,pseudoElement:k,allowFlatten:_=!1,finalKeyframe:d,onComplete:I}=l;this.isPseudoElement=!!k,this.allowFlatten=_,this.options=l,Qx(typeof l.type!="string");const z=Gj(l);this.animation=qj(h,x,j,z,k),z.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!k){const R=uy(j,this.options,d,this.speed);this.updateMotionValue?this.updateMotionValue(R):$j(h,x,R),this.animation.cancel()}I?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:l}=this;l==="idle"||l==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const l=this.animation.effect?.getComputedTiming?.().duration||0;return zl(Number(l))}get time(){return zl(Number(this.animation.currentTime)||0)}set time(l){this.finishedTime=null,this.animation.currentTime=Il(l)}get speed(){return this.animation.playbackRate}set speed(l){l<0&&(this.finishedTime=null),this.animation.playbackRate=l}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(l){this.animation.startTime=l}attachTimeline({timeline:l,observe:h}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,l&&Uj()?(this.animation.timeline=l,ho):h(this)}}const H_={anticipate:b_,backInOut:w_,circInOut:N_};function Xj(a){return a in H_}function Yj(a){typeof a.ease=="string"&&Xj(a.ease)&&(a.ease=H_[a.ease])}const b0=10;class Jj extends Zj{constructor(l){Yj(l),B_(l),super(l),l.startTime&&(this.startTime=l.startTime),this.options=l}updateMotionValue(l){const{motionValue:h,onUpdate:x,onComplete:j,element:k,..._}=this.options;if(!h)return;if(l!==void 0){h.set(l);return}const d=new hy({..._,autoplay:!1}),I=Il(this.finishedTime??this.time);h.setWithVelocity(d.sample(I-b0).value,d.sample(I).value,b0),d.stop()}}const j0=(a,l)=>l==="zIndex"?!1:!!(typeof a=="number"||Array.isArray(a)||typeof a=="string"&&(gu.test(a)||a==="0")&&!a.startsWith("url("));function Kj(a){const l=a[0];if(a.length===1)return!0;for(let h=0;h<a.length;h++)if(a[h]!==l)return!0}function Qj(a,l,h,x){const j=a[0];if(j===null)return!1;if(l==="display"||l==="visibility")return!0;const k=a[a.length-1],_=j0(j,l),d=j0(k,l);return!_||!d?!1:Kj(a)||(h==="spring"||U_(h))&&x}function gx(a){a.duration=0,a.type}const eN=new Set(["opacity","clipPath","filter","transform"]),tN=ey(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function iN(a){const{motionValue:l,name:h,repeatDelay:x,repeatType:j,damping:k,type:_}=a;if(!(l?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:I,transformTemplate:z}=l.owner.getProps();return tN()&&h&&eN.has(h)&&(h!=="transform"||!z)&&!I&&!x&&j!=="mirror"&&k!==0&&_!=="inertia"}const sN=40;class rN extends dy{constructor({autoplay:l=!0,delay:h=0,type:x="keyframes",repeat:j=0,repeatDelay:k=0,repeatType:_="loop",keyframes:d,name:I,motionValue:z,element:R,...D}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=ha.now();const O={autoplay:l,delay:h,type:x,repeat:j,repeatDelay:k,repeatType:_,name:I,motionValue:z,element:R,...D},ie=R?.KeyframeResolver||py;this.keyframeResolver=new ie(d,(Q,ae,se)=>this.onKeyframesResolved(Q,ae,O,!se),I,z,R),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(l,h,x,j){this.keyframeResolver=void 0;const{name:k,type:_,velocity:d,delay:I,isHandoff:z,onUpdate:R}=x;this.resolvedAt=ha.now(),Qj(l,k,_,d)||((Sc.instantAnimations||!I)&&R?.(uy(l,x,h)),l[0]=l[l.length-1],gx(x),x.repeat=0);const O={startTime:j?this.resolvedAt?this.resolvedAt-this.createdAt>sN?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:h,...x,keyframes:l},ie=!z&&iN(O)?new Jj({...O,element:O.motionValue.owner.current}):new hy(O);ie.finished.then(()=>this.notifyFinished()).catch(ho),this.pendingTimeline&&(this.stopTimeline=ie.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=ie}get finished(){return this._animation?this.animation.finished:this._finished}then(l,h){return this.finished.finally(l).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Oj()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(l){this.animation.time=l}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(l){this.animation.speed=l}get startTime(){return this.animation.startTime}attachTimeline(l){return this._animation?this.stopTimeline=this.animation.attachTimeline(l):this.pendingTimeline=l,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const nN=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function aN(a){const l=nN.exec(a);if(!l)return[,];const[,h,x,j]=l;return[`--${h??x}`,j]}function W_(a,l,h=1){const[x,j]=aN(a);if(!x)return;const k=window.getComputedStyle(l).getPropertyValue(x);if(k){const _=k.trim();return p_(_)?parseFloat(_):_}return ny(j)?W_(j,l,h+1):j}function my(a,l){return a?.[l]??a?.default??a}const q_=new Set(["width","height","top","left","right","bottom",...Qh]),oN={test:a=>a==="auto",parse:a=>a},G_=a=>l=>l.test(a),Z_=[Kh,gi,Dl,pu,K2,J2,oN],N0=a=>Z_.find(G_(a));function lN(a){return typeof a=="number"?a===0:a!==null?a==="none"||a==="0"||f_(a):!0}const cN=new Set(["brightness","contrast","saturate","opacity"]);function uN(a){const[l,h]=a.slice(0,-1).split("(");if(l==="drop-shadow")return a;const[x]=h.match(ay)||[];if(!x)return a;const j=h.replace(x,"");let k=cN.has(l)?1:0;return x!==h&&(k*=100),l+"("+k+j+")"}const dN=/\b([a-z-]*)\(.*?\)/gu,xx={...gu,getAnimatableNone:a=>{const l=a.match(dN);return l?l.map(uN).join(" "):a}},k0={...Kh,transform:Math.round},hN={rotate:pu,rotateX:pu,rotateY:pu,rotateZ:pu,scale:vf,scaleX:vf,scaleY:vf,scaleZ:vf,skew:pu,skewX:pu,skewY:pu,distance:gi,translateX:gi,translateY:gi,translateZ:gi,x:gi,y:gi,z:gi,perspective:gi,transformPerspective:gi,opacity:am,originX:h0,originY:h0,originZ:gi},fy={borderWidth:gi,borderTopWidth:gi,borderRightWidth:gi,borderBottomWidth:gi,borderLeftWidth:gi,borderRadius:gi,radius:gi,borderTopLeftRadius:gi,borderTopRightRadius:gi,borderBottomRightRadius:gi,borderBottomLeftRadius:gi,width:gi,maxWidth:gi,height:gi,maxHeight:gi,top:gi,right:gi,bottom:gi,left:gi,padding:gi,paddingTop:gi,paddingRight:gi,paddingBottom:gi,paddingLeft:gi,margin:gi,marginTop:gi,marginRight:gi,marginBottom:gi,marginLeft:gi,backgroundPositionX:gi,backgroundPositionY:gi,...hN,zIndex:k0,fillOpacity:am,strokeOpacity:am,numOctaves:k0},pN={...fy,color:pr,backgroundColor:pr,outlineColor:pr,fill:pr,stroke:pr,borderColor:pr,borderTopColor:pr,borderRightColor:pr,borderBottomColor:pr,borderLeftColor:pr,filter:xx,WebkitFilter:xx},X_=a=>pN[a];function Y_(a,l){let h=X_(a);return h!==xx&&(h=gu),h.getAnimatableNone?h.getAnimatableNone(l):void 0}const mN=new Set(["auto","none","0"]);function fN(a,l,h){let x=0,j;for(;x<a.length&&!j;){const k=a[x];typeof k=="string"&&!mN.has(k)&&om(k).values.length&&(j=a[x]),x++}if(j&&h)for(const k of l)a[k]=Y_(h,j)}class gN extends py{constructor(l,h,x,j,k){super(l,h,x,j,k,!0)}readKeyframes(){const{unresolvedKeyframes:l,element:h,name:x}=this;if(!h||!h.current)return;super.readKeyframes();for(let I=0;I<l.length;I++){let z=l[I];if(typeof z=="string"&&(z=z.trim(),ny(z))){const R=W_(z,h.current);R!==void 0&&(l[I]=R),I===l.length-1&&(this.finalKeyframe=z)}}if(this.resolveNoneKeyframes(),!q_.has(x)||l.length!==2)return;const[j,k]=l,_=N0(j),d=N0(k);if(_!==d)if(_0(_)&&_0(d))for(let I=0;I<l.length;I++){const z=l[I];typeof z=="string"&&(l[I]=parseFloat(z))}else Ad[x]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:l,name:h}=this,x=[];for(let j=0;j<l.length;j++)(l[j]===null||lN(l[j]))&&x.push(j);x.length&&fN(l,x,h)}measureInitialState(){const{element:l,unresolvedKeyframes:h,name:x}=this;if(!l||!l.current)return;x==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ad[x](l.measureViewportBox(),window.getComputedStyle(l.current)),h[0]=this.measuredOrigin;const j=h[h.length-1];j!==void 0&&l.getValue(x,j).jump(j,!1)}measureEndState(){const{element:l,name:h,unresolvedKeyframes:x}=this;if(!l||!l.current)return;const j=l.getValue(h);j&&j.jump(this.measuredOrigin,!1);const k=x.length-1,_=x[k];x[k]=Ad[h](l.measureViewportBox(),window.getComputedStyle(l.current)),_!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=_),this.removedTransforms?.length&&this.removedTransforms.forEach(([d,I])=>{l.getValue(d).set(I)}),this.resolveNoneKeyframes()}}function xN(a,l,h){if(a instanceof EventTarget)return[a];if(typeof a=="string"){let x=document;const j=h?.[a]??x.querySelectorAll(a);return j?Array.from(j):[]}return Array.from(a)}const J_=(a,l)=>l&&typeof a=="number"?l.transform(a):a;function K_(a){return m_(a)&&"offsetHeight"in a}const S0=30,yN=a=>!isNaN(parseFloat(a));class vN{constructor(l,h={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=x=>{const j=ha.now();if(this.updatedAt!==j&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(x),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const k of this.dependents)k.dirty()},this.hasAnimated=!1,this.setCurrent(l),this.owner=h.owner}setCurrent(l){this.current=l,this.updatedAt=ha.now(),this.canTrackVelocity===null&&l!==void 0&&(this.canTrackVelocity=yN(this.current))}setPrevFrameValue(l=this.current){this.prevFrameValue=l,this.prevUpdatedAt=this.updatedAt}onChange(l){return this.on("change",l)}on(l,h){this.events[l]||(this.events[l]=new ty);const x=this.events[l].add(h);return l==="change"?()=>{x(),Ts.read(()=>{this.events.change.getSize()||this.stop()})}:x}clearListeners(){for(const l in this.events)this.events[l].clear()}attach(l,h){this.passiveEffect=l,this.stopPassiveEffect=h}set(l){this.passiveEffect?this.passiveEffect(l,this.updateAndNotify):this.updateAndNotify(l)}setWithVelocity(l,h,x){this.set(h),this.prev=void 0,this.prevFrameValue=l,this.prevUpdatedAt=this.updatedAt-x}jump(l,h=!0){this.updateAndNotify(l),this.prev=l,this.prevUpdatedAt=this.prevFrameValue=void 0,h&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(l){this.dependents||(this.dependents=new Set),this.dependents.add(l)}removeDependent(l){this.dependents&&this.dependents.delete(l)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const l=ha.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||l-this.updatedAt>S0)return 0;const h=Math.min(this.updatedAt-this.prevUpdatedAt,S0);return g_(parseFloat(this.current)-parseFloat(this.prevFrameValue),h)}start(l){return this.stop(),new Promise(h=>{this.hasAnimated=!0,this.animation=l(h),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wh(a,l){return new vN(a,l)}const{schedule:gy}=T_(queueMicrotask,!1),Uo={x:!1,y:!1};function Q_(){return Uo.x||Uo.y}function _N(a){return a==="x"||a==="y"?Uo[a]?null:(Uo[a]=!0,()=>{Uo[a]=!1}):Uo.x||Uo.y?null:(Uo.x=Uo.y=!0,()=>{Uo.x=Uo.y=!1})}function ew(a,l){const h=xN(a),x=new AbortController,j={passive:!0,...l,signal:x.signal};return[h,j,()=>x.abort()]}function T0(a){return!(a.pointerType==="touch"||Q_())}function wN(a,l,h={}){const[x,j,k]=ew(a,h),_=d=>{if(!T0(d))return;const{target:I}=d,z=l(I,d);if(typeof z!="function"||!I)return;const R=D=>{T0(D)&&(z(D),I.removeEventListener("pointerleave",R))};I.addEventListener("pointerleave",R,j)};return x.forEach(d=>{d.addEventListener("pointerenter",_,j)}),k}const tw=(a,l)=>l?a===l?!0:tw(a,l.parentElement):!1,xy=a=>a.pointerType==="mouse"?typeof a.button!="number"||a.button<=0:a.isPrimary!==!1,bN=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function jN(a){return bN.has(a.tagName)||a.tabIndex!==-1}const Pf=new WeakSet;function C0(a){return l=>{l.key==="Enter"&&a(l)}}function zg(a,l){a.dispatchEvent(new PointerEvent("pointer"+l,{isPrimary:!0,bubbles:!0}))}const NN=(a,l)=>{const h=a.currentTarget;if(!h)return;const x=C0(()=>{if(Pf.has(h))return;zg(h,"down");const j=C0(()=>{zg(h,"up")}),k=()=>zg(h,"cancel");h.addEventListener("keyup",j,l),h.addEventListener("blur",k,l)});h.addEventListener("keydown",x,l),h.addEventListener("blur",()=>h.removeEventListener("keydown",x),l)};function P0(a){return xy(a)&&!Q_()}function kN(a,l,h={}){const[x,j,k]=ew(a,h),_=d=>{const I=d.currentTarget;if(!P0(d))return;Pf.add(I);const z=l(I,d),R=(ie,Q)=>{window.removeEventListener("pointerup",D),window.removeEventListener("pointercancel",O),Pf.has(I)&&Pf.delete(I),P0(ie)&&typeof z=="function"&&z(ie,{success:Q})},D=ie=>{R(ie,I===window||I===document||h.useGlobalTarget||tw(I,ie.target))},O=ie=>{R(ie,!1)};window.addEventListener("pointerup",D,j),window.addEventListener("pointercancel",O,j)};return x.forEach(d=>{(h.useGlobalTarget?window:d).addEventListener("pointerdown",_,j),K_(d)&&(d.addEventListener("focus",z=>NN(z,j)),!jN(d)&&!d.hasAttribute("tabindex")&&(d.tabIndex=0))}),k}function iw(a){return m_(a)&&"ownerSVGElement"in a}function SN(a){return iw(a)&&a.tagName==="svg"}const Pn=a=>!!(a&&a.getVelocity),TN=[...Z_,pr,gu],CN=a=>TN.find(G_(a)),yy=G.createContext({transformPagePoint:a=>a,isStatic:!1,reducedMotion:"never"});class PN extends G.Component{getSnapshotBeforeUpdate(l){const h=this.props.childRef.current;if(h&&l.isPresent&&!this.props.isPresent){const x=h.offsetParent,j=K_(x)&&x.offsetWidth||0,k=this.props.sizeRef.current;k.height=h.offsetHeight||0,k.width=h.offsetWidth||0,k.top=h.offsetTop,k.left=h.offsetLeft,k.right=j-k.width-k.left}return null}componentDidUpdate(){}render(){return this.props.children}}function EN({children:a,isPresent:l,anchorX:h,root:x}){const j=G.useId(),k=G.useRef(null),_=G.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:d}=G.useContext(yy);return G.useInsertionEffect(()=>{const{width:I,height:z,top:R,left:D,right:O}=_.current;if(l||!k.current||!I||!z)return;const ie=h==="left"?`left: ${D}`:`right: ${O}`;k.current.dataset.motionPopId=j;const Q=document.createElement("style");d&&(Q.nonce=d);const ae=x??document.head;return ae.appendChild(Q),Q.sheet&&Q.sheet.insertRule(`
          [data-motion-pop-id="${j}"] {
            position: absolute !important;
            width: ${I}px !important;
            height: ${z}px !important;
            ${ie}px !important;
            top: ${R}px !important;
          }
        `),()=>{ae.contains(Q)&&ae.removeChild(Q)}},[l]),i.jsx(PN,{isPresent:l,childRef:k,sizeRef:_,children:G.cloneElement(a,{ref:k})})}const MN=({children:a,initial:l,isPresent:h,onExitComplete:x,custom:j,presenceAffectsLayout:k,mode:_,anchorX:d,root:I})=>{const z=Xx(AN),R=G.useId();let D=!0,O=G.useMemo(()=>(D=!1,{id:R,initial:l,isPresent:h,custom:j,onExitComplete:ie=>{z.set(ie,!0);for(const Q of z.values())if(!Q)return;x&&x()},register:ie=>(z.set(ie,!1),()=>z.delete(ie))}),[h,z,x]);return k&&D&&(O={...O}),G.useMemo(()=>{z.forEach((ie,Q)=>z.set(Q,!1))},[h]),G.useEffect(()=>{!h&&!z.size&&x&&x()},[h]),_==="popLayout"&&(a=i.jsx(EN,{isPresent:h,anchorX:d,root:I,children:a})),i.jsx(Hf.Provider,{value:O,children:a})};function AN(){return new Map}function sw(a=!0){const l=G.useContext(Hf);if(l===null)return[!0,null];const{isPresent:h,onExitComplete:x,register:j}=l,k=G.useId();G.useEffect(()=>{if(a)return j(k)},[a]);const _=G.useCallback(()=>a&&x&&x(k),[k,x,a]);return!h&&x?[!1,_]:[!0]}const _f=a=>a.key||"";function E0(a){const l=[];return G.Children.forEach(a,h=>{G.isValidElement(h)&&l.push(h)}),l}const IN=({children:a,custom:l,initial:h=!0,onExitComplete:x,presenceAffectsLayout:j=!0,mode:k="sync",propagate:_=!1,anchorX:d="left",root:I})=>{const[z,R]=sw(_),D=G.useMemo(()=>E0(a),[a]),O=_&&!z?[]:D.map(_f),ie=G.useRef(!0),Q=G.useRef(D),ae=Xx(()=>new Map),[se,pe]=G.useState(D),[Pe,Ie]=G.useState(D);h_(()=>{ie.current=!1,Q.current=D;for(let Xe=0;Xe<Pe.length;Xe++){const ut=_f(Pe[Xe]);O.includes(ut)?ae.delete(ut):ae.get(ut)!==!0&&ae.set(ut,!1)}},[Pe,O.length,O.join("-")]);const Ze=[];if(D!==se){let Xe=[...D];for(let ut=0;ut<Pe.length;ut++){const je=Pe[ut],Ae=_f(je);O.includes(Ae)||(Xe.splice(ut,0,je),Ze.push(je))}return k==="wait"&&Ze.length&&(Xe=Ze),Ie(E0(Xe)),pe(D),null}const{forceRender:Je}=G.useContext(Zx);return i.jsx(i.Fragment,{children:Pe.map(Xe=>{const ut=_f(Xe),je=_&&!z?!1:D===Pe||O.includes(ut),Ae=()=>{if(ae.has(ut))ae.set(ut,!0);else return;let He=!0;ae.forEach(ct=>{ct||(He=!1)}),He&&(Je?.(),Ie(Q.current),_&&R?.(),x&&x())};return i.jsx(MN,{isPresent:je,initial:!ie.current||h?void 0:!1,custom:l,presenceAffectsLayout:j,mode:k,root:I,onExitComplete:je?void 0:Ae,anchorX:d,children:Xe},ut)})})},rw=G.createContext({strict:!1}),M0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},qh={};for(const a in M0)qh[a]={isEnabled:l=>M0[a].some(h=>!!l[h])};function zN(a){for(const l in a)qh[l]={...qh[l],...a[l]}}const DN=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Bf(a){return a.startsWith("while")||a.startsWith("drag")&&a!=="draggable"||a.startsWith("layout")||a.startsWith("onTap")||a.startsWith("onPan")||a.startsWith("onLayout")||DN.has(a)}let nw=a=>!Bf(a);function RN(a){typeof a=="function"&&(nw=l=>l.startsWith("on")?!Bf(l):a(l))}try{RN(require("@emotion/is-prop-valid").default)}catch{}function LN(a,l,h){const x={};for(const j in a)j==="values"&&typeof a.values=="object"||(nw(j)||h===!0&&Bf(j)||!l&&!Bf(j)||a.draggable&&j.startsWith("onDrag"))&&(x[j]=a[j]);return x}const Wf=G.createContext({});function qf(a){return a!==null&&typeof a=="object"&&typeof a.start=="function"}function lm(a){return typeof a=="string"||Array.isArray(a)}const vy=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_y=["initial",...vy];function Gf(a){return qf(a.animate)||_y.some(l=>lm(a[l]))}function aw(a){return!!(Gf(a)||a.variants)}function BN(a,l){if(Gf(a)){const{initial:h,animate:x}=a;return{initial:h===!1||lm(h)?h:void 0,animate:lm(x)?x:void 0}}return a.inherit!==!1?l:{}}function FN(a){const{initial:l,animate:h}=BN(a,G.useContext(Wf));return G.useMemo(()=>({initial:l,animate:h}),[A0(l),A0(h)])}function A0(a){return Array.isArray(a)?a.join(" "):a}const cm={};function ON(a){for(const l in a)cm[l]=a[l],ry(l)&&(cm[l].isCSSVariable=!0)}function ow(a,{layout:l,layoutId:h}){return ep.has(a)||a.startsWith("origin")||(l||h!==void 0)&&(!!cm[a]||a==="opacity")}const VN={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},$N=Qh.length;function UN(a,l,h){let x="",j=!0;for(let k=0;k<$N;k++){const _=Qh[k],d=a[_];if(d===void 0)continue;let I=!0;if(typeof d=="number"?I=d===(_.startsWith("scale")?1:0):I=parseFloat(d)===0,!I||h){const z=J_(d,fy[_]);if(!I){j=!1;const R=VN[_]||_;x+=`${R}(${z}) `}h&&(l[_]=z)}}return x=x.trim(),h?x=h(l,j?"":x):j&&(x="none"),x}function wy(a,l,h){const{style:x,vars:j,transformOrigin:k}=a;let _=!1,d=!1;for(const I in l){const z=l[I];if(ep.has(I)){_=!0;continue}else if(ry(I)){j[I]=z;continue}else{const R=J_(z,fy[I]);I.startsWith("origin")?(d=!0,k[I]=R):x[I]=R}}if(l.transform||(_||h?x.transform=UN(l,a.transform,h):x.transform&&(x.transform="none")),d){const{originX:I="50%",originY:z="50%",originZ:R=0}=k;x.transformOrigin=`${I} ${z} ${R}`}}const by=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function lw(a,l,h){for(const x in l)!Pn(l[x])&&!ow(x,h)&&(a[x]=l[x])}function HN({transformTemplate:a},l){return G.useMemo(()=>{const h=by();return wy(h,l,a),Object.assign({},h.vars,h.style)},[l])}function WN(a,l){const h=a.style||{},x={};return lw(x,h,a),Object.assign(x,HN(a,l)),x}function qN(a,l){const h={},x=WN(a,l);return a.drag&&a.dragListener!==!1&&(h.draggable=!1,x.userSelect=x.WebkitUserSelect=x.WebkitTouchCallout="none",x.touchAction=a.drag===!0?"none":`pan-${a.drag==="x"?"y":"x"}`),a.tabIndex===void 0&&(a.onTap||a.onTapStart||a.whileTap)&&(h.tabIndex=0),h.style=x,h}const GN={offset:"stroke-dashoffset",array:"stroke-dasharray"},ZN={offset:"strokeDashoffset",array:"strokeDasharray"};function XN(a,l,h=1,x=0,j=!0){a.pathLength=1;const k=j?GN:ZN;a[k.offset]=gi.transform(-x);const _=gi.transform(l),d=gi.transform(h);a[k.array]=`${_} ${d}`}function cw(a,{attrX:l,attrY:h,attrScale:x,pathLength:j,pathSpacing:k=1,pathOffset:_=0,...d},I,z,R){if(wy(a,d,z),I){a.style.viewBox&&(a.attrs.viewBox=a.style.viewBox);return}a.attrs=a.style,a.style={};const{attrs:D,style:O}=a;D.transform&&(O.transform=D.transform,delete D.transform),(O.transform||D.transformOrigin)&&(O.transformOrigin=D.transformOrigin??"50% 50%",delete D.transformOrigin),O.transform&&(O.transformBox=R?.transformBox??"fill-box",delete D.transformBox),l!==void 0&&(D.x=l),h!==void 0&&(D.y=h),x!==void 0&&(D.scale=x),j!==void 0&&XN(D,j,k,_,!1)}const uw=()=>({...by(),attrs:{}}),dw=a=>typeof a=="string"&&a.toLowerCase()==="svg";function YN(a,l,h,x){const j=G.useMemo(()=>{const k=uw();return cw(k,l,dw(x),a.transformTemplate,a.style),{...k.attrs,style:{...k.style}}},[l]);if(a.style){const k={};lw(k,a.style,a),j.style={...k,...j.style}}return j}const JN=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function jy(a){return typeof a!="string"||a.includes("-")?!1:!!(JN.indexOf(a)>-1||/[A-Z]/u.test(a))}function KN(a,l,h,{latestValues:x},j,k=!1){const d=(jy(a)?YN:qN)(l,x,j,a),I=LN(l,typeof a=="string",k),z=a!==G.Fragment?{...I,...d,ref:h}:{},{children:R}=l,D=G.useMemo(()=>Pn(R)?R.get():R,[R]);return G.createElement(a,{...z,children:D})}function I0(a){const l=[{},{}];return a?.values.forEach((h,x)=>{l[0][x]=h.get(),l[1][x]=h.getVelocity()}),l}function Ny(a,l,h,x){if(typeof l=="function"){const[j,k]=I0(x);l=l(h!==void 0?h:a.custom,j,k)}if(typeof l=="string"&&(l=a.variants&&a.variants[l]),typeof l=="function"){const[j,k]=I0(x);l=l(h!==void 0?h:a.custom,j,k)}return l}function Ef(a){return Pn(a)?a.get():a}function QN({scrapeMotionValuesFromProps:a,createRenderState:l},h,x,j){return{latestValues:ek(h,x,j,a),renderState:l()}}function ek(a,l,h,x){const j={},k=x(a,{});for(const O in k)j[O]=Ef(k[O]);let{initial:_,animate:d}=a;const I=Gf(a),z=aw(a);l&&z&&!I&&a.inherit!==!1&&(_===void 0&&(_=l.initial),d===void 0&&(d=l.animate));let R=h?h.initial===!1:!1;R=R||_===!1;const D=R?d:_;if(D&&typeof D!="boolean"&&!qf(D)){const O=Array.isArray(D)?D:[D];for(let ie=0;ie<O.length;ie++){const Q=Ny(a,O[ie]);if(Q){const{transitionEnd:ae,transition:se,...pe}=Q;for(const Pe in pe){let Ie=pe[Pe];if(Array.isArray(Ie)){const Ze=R?Ie.length-1:0;Ie=Ie[Ze]}Ie!==null&&(j[Pe]=Ie)}for(const Pe in ae)j[Pe]=ae[Pe]}}}return j}const hw=a=>(l,h)=>{const x=G.useContext(Wf),j=G.useContext(Hf),k=()=>QN(a,l,x,j);return h?k():Xx(k)};function ky(a,l,h){const{style:x}=a,j={};for(const k in x)(Pn(x[k])||l.style&&Pn(l.style[k])||ow(k,a)||h?.getValue(k)?.liveStyle!==void 0)&&(j[k]=x[k]);return j}const tk=hw({scrapeMotionValuesFromProps:ky,createRenderState:by});function pw(a,l,h){const x=ky(a,l,h);for(const j in a)if(Pn(a[j])||Pn(l[j])){const k=Qh.indexOf(j)!==-1?"attr"+j.charAt(0).toUpperCase()+j.substring(1):j;x[k]=a[j]}return x}const ik=hw({scrapeMotionValuesFromProps:pw,createRenderState:uw}),sk=Symbol.for("motionComponentSymbol");function Bh(a){return a&&typeof a=="object"&&Object.prototype.hasOwnProperty.call(a,"current")}function rk(a,l,h){return G.useCallback(x=>{x&&a.onMount&&a.onMount(x),l&&(x?l.mount(x):l.unmount()),h&&(typeof h=="function"?h(x):Bh(h)&&(h.current=x))},[l])}const Sy=a=>a.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),nk="framerAppearId",mw="data-"+Sy(nk),fw=G.createContext({});function ak(a,l,h,x,j){const{visualElement:k}=G.useContext(Wf),_=G.useContext(rw),d=G.useContext(Hf),I=G.useContext(yy).reducedMotion,z=G.useRef(null);x=x||_.renderer,!z.current&&x&&(z.current=x(a,{visualState:l,parent:k,props:h,presenceContext:d,blockInitialAnimation:d?d.initial===!1:!1,reducedMotionConfig:I}));const R=z.current,D=G.useContext(fw);R&&!R.projection&&j&&(R.type==="html"||R.type==="svg")&&ok(z.current,h,j,D);const O=G.useRef(!1);G.useInsertionEffect(()=>{R&&O.current&&R.update(h,d)});const ie=h[mw],Q=G.useRef(!!ie&&!window.MotionHandoffIsComplete?.(ie)&&window.MotionHasOptimisedAnimation?.(ie));return h_(()=>{R&&(O.current=!0,window.MotionIsMounted=!0,R.updateFeatures(),R.scheduleRenderMicrotask(),Q.current&&R.animationState&&R.animationState.animateChanges())}),G.useEffect(()=>{R&&(!Q.current&&R.animationState&&R.animationState.animateChanges(),Q.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(ie)}),Q.current=!1),R.enteringChildren=void 0)}),R}function ok(a,l,h,x){const{layoutId:j,layout:k,drag:_,dragConstraints:d,layoutScroll:I,layoutRoot:z,layoutCrossfade:R}=l;a.projection=new h(a.latestValues,l["data-framer-portal-id"]?void 0:gw(a.parent)),a.projection.setOptions({layoutId:j,layout:k,alwaysMeasureLayout:!!_||d&&Bh(d),visualElement:a,animationType:typeof k=="string"?k:"both",initialPromotionConfig:x,crossfade:R,layoutScroll:I,layoutRoot:z})}function gw(a){if(a)return a.options.allowProjection!==!1?a.projection:gw(a.parent)}function Dg(a,{forwardMotionProps:l=!1}={},h,x){h&&zN(h);const j=jy(a)?ik:tk;function k(d,I){let z;const R={...G.useContext(yy),...d,layoutId:lk(d)},{isStatic:D}=R,O=FN(d),ie=j(d,D);if(!D&&Yx){ck();const Q=uk(R);z=Q.MeasureLayout,O.visualElement=ak(a,ie,R,x,Q.ProjectionNode)}return i.jsxs(Wf.Provider,{value:O,children:[z&&O.visualElement?i.jsx(z,{visualElement:O.visualElement,...R}):null,KN(a,d,rk(ie,O.visualElement,I),ie,D,l)]})}k.displayName=`motion.${typeof a=="string"?a:`create(${a.displayName??a.name??""})`}`;const _=G.forwardRef(k);return _[sk]=a,_}function lk({layoutId:a}){const l=G.useContext(Zx).id;return l&&a!==void 0?l+"-"+a:a}function ck(a,l){G.useContext(rw).strict}function uk(a){const{drag:l,layout:h}=qh;if(!l&&!h)return{};const x={...l,...h};return{MeasureLayout:l?.isEnabled(a)||h?.isEnabled(a)?x.MeasureLayout:void 0,ProjectionNode:x.ProjectionNode}}function dk(a,l){if(typeof Proxy>"u")return Dg;const h=new Map,x=(k,_)=>Dg(k,_,a,l),j=(k,_)=>x(k,_);return new Proxy(j,{get:(k,_)=>_==="create"?x:(h.has(_)||h.set(_,Dg(_,void 0,a,l)),h.get(_))})}function xw({top:a,left:l,right:h,bottom:x}){return{x:{min:l,max:h},y:{min:a,max:x}}}function hk({x:a,y:l}){return{top:l.min,right:a.max,bottom:l.max,left:a.min}}function pk(a,l){if(!l)return a;const h=l({x:a.left,y:a.top}),x=l({x:a.right,y:a.bottom});return{top:h.y,left:h.x,bottom:x.y,right:x.x}}function Rg(a){return a===void 0||a===1}function yx({scale:a,scaleX:l,scaleY:h}){return!Rg(a)||!Rg(l)||!Rg(h)}function Sd(a){return yx(a)||yw(a)||a.z||a.rotate||a.rotateX||a.rotateY||a.skewX||a.skewY}function yw(a){return z0(a.x)||z0(a.y)}function z0(a){return a&&a!=="0%"}function Ff(a,l,h){const x=a-h,j=l*x;return h+j}function D0(a,l,h,x,j){return j!==void 0&&(a=Ff(a,j,x)),Ff(a,h,x)+l}function vx(a,l=0,h=1,x,j){a.min=D0(a.min,l,h,x,j),a.max=D0(a.max,l,h,x,j)}function vw(a,{x:l,y:h}){vx(a.x,l.translate,l.scale,l.originPoint),vx(a.y,h.translate,h.scale,h.originPoint)}const R0=.999999999999,L0=1.0000000000001;function mk(a,l,h,x=!1){const j=h.length;if(!j)return;l.x=l.y=1;let k,_;for(let d=0;d<j;d++){k=h[d],_=k.projectionDelta;const{visualElement:I}=k.options;I&&I.props.style&&I.props.style.display==="contents"||(x&&k.options.layoutScroll&&k.scroll&&k!==k.root&&Oh(a,{x:-k.scroll.offset.x,y:-k.scroll.offset.y}),_&&(l.x*=_.x.scale,l.y*=_.y.scale,vw(a,_)),x&&Sd(k.latestValues)&&Oh(a,k.latestValues))}l.x<L0&&l.x>R0&&(l.x=1),l.y<L0&&l.y>R0&&(l.y=1)}function Fh(a,l){a.min=a.min+l,a.max=a.max+l}function B0(a,l,h,x,j=.5){const k=Os(a.min,a.max,j);vx(a,l,h,k,x)}function Oh(a,l){B0(a.x,l.x,l.scaleX,l.scale,l.originX),B0(a.y,l.y,l.scaleY,l.scale,l.originY)}function _w(a,l){return xw(pk(a.getBoundingClientRect(),l))}function fk(a,l,h){const x=_w(a,h),{scroll:j}=l;return j&&(Fh(x.x,j.offset.x),Fh(x.y,j.offset.y)),x}const F0=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vh=()=>({x:F0(),y:F0()}),O0=()=>({min:0,max:0}),nr=()=>({x:O0(),y:O0()}),_x={current:null},ww={current:!1};function gk(){if(ww.current=!0,!!Yx)if(window.matchMedia){const a=window.matchMedia("(prefers-reduced-motion)"),l=()=>_x.current=a.matches;a.addEventListener("change",l),l()}else _x.current=!1}const xk=new WeakMap;function yk(a,l,h){for(const x in l){const j=l[x],k=h[x];if(Pn(j))a.addValue(x,j);else if(Pn(k))a.addValue(x,Wh(j,{owner:a}));else if(k!==j)if(a.hasValue(x)){const _=a.getValue(x);_.liveStyle===!0?_.jump(j):_.hasAnimated||_.set(j)}else{const _=a.getStaticValue(x);a.addValue(x,Wh(_!==void 0?_:j,{owner:a}))}}for(const x in h)l[x]===void 0&&a.removeValue(x);return l}const V0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class vk{scrapeMotionValuesFromProps(l,h,x){return{}}constructor({parent:l,props:h,presenceContext:x,reducedMotionConfig:j,blockInitialAnimation:k,visualState:_},d={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=py,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const O=ha.now();this.renderScheduledAt<O&&(this.renderScheduledAt=O,Ts.render(this.render,!1,!0))};const{latestValues:I,renderState:z}=_;this.latestValues=I,this.baseTarget={...I},this.initialValues=h.initial?{...I}:{},this.renderState=z,this.parent=l,this.props=h,this.presenceContext=x,this.depth=l?l.depth+1:0,this.reducedMotionConfig=j,this.options=d,this.blockInitialAnimation=!!k,this.isControllingVariants=Gf(h),this.isVariantNode=aw(h),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(l&&l.current);const{willChange:R,...D}=this.scrapeMotionValuesFromProps(h,{},this);for(const O in D){const ie=D[O];I[O]!==void 0&&Pn(ie)&&ie.set(I[O])}}mount(l){this.current=l,xk.set(l,this),this.projection&&!this.projection.instance&&this.projection.mount(l),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((h,x)=>this.bindToMotionValue(x,h)),ww.current||gk(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:_x.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),fu(this.notifyUpdate),fu(this.render),this.valueSubscriptions.forEach(l=>l()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const l in this.events)this.events[l].clear();for(const l in this.features){const h=this.features[l];h&&(h.unmount(),h.isMounted=!1)}this.current=null}addChild(l){this.children.add(l),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(l)}removeChild(l){this.children.delete(l),this.enteringChildren&&this.enteringChildren.delete(l)}bindToMotionValue(l,h){this.valueSubscriptions.has(l)&&this.valueSubscriptions.get(l)();const x=ep.has(l);x&&this.onBindTransform&&this.onBindTransform();const j=h.on("change",_=>{this.latestValues[l]=_,this.props.onUpdate&&Ts.preRender(this.notifyUpdate),x&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let k;window.MotionCheckAppearSync&&(k=window.MotionCheckAppearSync(this,l,h)),this.valueSubscriptions.set(l,()=>{j(),k&&k(),h.owner&&h.stop()})}sortNodePosition(l){return!this.current||!this.sortInstanceNodePosition||this.type!==l.type?0:this.sortInstanceNodePosition(this.current,l.current)}updateFeatures(){let l="animation";for(l in qh){const h=qh[l];if(!h)continue;const{isEnabled:x,Feature:j}=h;if(!this.features[l]&&j&&x(this.props)&&(this.features[l]=new j(this)),this.features[l]){const k=this.features[l];k.isMounted?k.update():(k.mount(),k.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):nr()}getStaticValue(l){return this.latestValues[l]}setStaticValue(l,h){this.latestValues[l]=h}update(l,h){(l.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=l,this.prevPresenceContext=this.presenceContext,this.presenceContext=h;for(let x=0;x<V0.length;x++){const j=V0[x];this.propEventSubscriptions[j]&&(this.propEventSubscriptions[j](),delete this.propEventSubscriptions[j]);const k="on"+j,_=l[k];_&&(this.propEventSubscriptions[j]=this.on(j,_))}this.prevMotionValues=yk(this,this.scrapeMotionValuesFromProps(l,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(l){return this.props.variants?this.props.variants[l]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(l){const h=this.getClosestVariantNode();if(h)return h.variantChildren&&h.variantChildren.add(l),()=>h.variantChildren.delete(l)}addValue(l,h){const x=this.values.get(l);h!==x&&(x&&this.removeValue(l),this.bindToMotionValue(l,h),this.values.set(l,h),this.latestValues[l]=h.get())}removeValue(l){this.values.delete(l);const h=this.valueSubscriptions.get(l);h&&(h(),this.valueSubscriptions.delete(l)),delete this.latestValues[l],this.removeValueFromRenderState(l,this.renderState)}hasValue(l){return this.values.has(l)}getValue(l,h){if(this.props.values&&this.props.values[l])return this.props.values[l];let x=this.values.get(l);return x===void 0&&h!==void 0&&(x=Wh(h===null?void 0:h,{owner:this}),this.addValue(l,x)),x}readValue(l,h){let x=this.latestValues[l]!==void 0||!this.current?this.latestValues[l]:this.getBaseTargetFromProps(this.props,l)??this.readValueFromInstance(this.current,l,this.options);return x!=null&&(typeof x=="string"&&(p_(x)||f_(x))?x=parseFloat(x):!CN(x)&&gu.test(h)&&(x=Y_(l,h)),this.setBaseTarget(l,Pn(x)?x.get():x)),Pn(x)?x.get():x}setBaseTarget(l,h){this.baseTarget[l]=h}getBaseTarget(l){const{initial:h}=this.props;let x;if(typeof h=="string"||typeof h=="object"){const k=Ny(this.props,h,this.presenceContext?.custom);k&&(x=k[l])}if(h&&x!==void 0)return x;const j=this.getBaseTargetFromProps(this.props,l);return j!==void 0&&!Pn(j)?j:this.initialValues[l]!==void 0&&x===void 0?void 0:this.baseTarget[l]}on(l,h){return this.events[l]||(this.events[l]=new ty),this.events[l].add(h)}notify(l,...h){this.events[l]&&this.events[l].notify(...h)}scheduleRenderMicrotask(){gy.render(this.render)}}class bw extends vk{constructor(){super(...arguments),this.KeyframeResolver=gN}sortInstanceNodePosition(l,h){return l.compareDocumentPosition(h)&2?1:-1}getBaseTargetFromProps(l,h){return l.style?l.style[h]:void 0}removeValueFromRenderState(l,{vars:h,style:x}){delete h[l],delete x[l]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:l}=this.props;Pn(l)&&(this.childSubscription=l.on("change",h=>{this.current&&(this.current.textContent=`${h}`)}))}}function jw(a,{style:l,vars:h},x,j){const k=a.style;let _;for(_ in l)k[_]=l[_];j?.applyProjectionStyles(k,x);for(_ in h)k.setProperty(_,h[_])}function _k(a){return window.getComputedStyle(a)}class wk extends bw{constructor(){super(...arguments),this.type="html",this.renderInstance=jw}readValueFromInstance(l,h){if(ep.has(h))return this.projection?.isProjecting?dx(h):Dj(l,h);{const x=_k(l),j=(ry(h)?x.getPropertyValue(h):x[h])||0;return typeof j=="string"?j.trim():j}}measureInstanceViewportBox(l,{transformPagePoint:h}){return _w(l,h)}build(l,h,x){wy(l,h,x.transformTemplate)}scrapeMotionValuesFromProps(l,h,x){return ky(l,h,x)}}const Nw=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function bk(a,l,h,x){jw(a,l,void 0,x);for(const j in l.attrs)a.setAttribute(Nw.has(j)?j:Sy(j),l.attrs[j])}class jk extends bw{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=nr}getBaseTargetFromProps(l,h){return l[h]}readValueFromInstance(l,h){if(ep.has(h)){const x=X_(h);return x&&x.default||0}return h=Nw.has(h)?h:Sy(h),l.getAttribute(h)}scrapeMotionValuesFromProps(l,h,x){return pw(l,h,x)}build(l,h,x){cw(l,h,this.isSVGTag,x.transformTemplate,x.style)}renderInstance(l,h,x,j){bk(l,h,x,j)}mount(l){this.isSVGTag=dw(l.tagName),super.mount(l)}}const Nk=(a,l)=>jy(a)?new jk(l):new wk(l,{allowProjection:a!==G.Fragment});function $h(a,l,h){const x=a.getProps();return Ny(x,l,h!==void 0?h:x.custom,a)}const wx=a=>Array.isArray(a);function kk(a,l,h){a.hasValue(l)?a.getValue(l).set(h):a.addValue(l,Wh(h))}function Sk(a){return wx(a)?a[a.length-1]||0:a}function Tk(a,l){const h=$h(a,l);let{transitionEnd:x={},transition:j={},...k}=h||{};k={...k,...x};for(const _ in k){const d=Sk(k[_]);kk(a,_,d)}}function Ck(a){return!!(Pn(a)&&a.add)}function bx(a,l){const h=a.getValue("willChange");if(Ck(h))return h.add(l);if(!h&&Sc.WillChange){const x=new Sc.WillChange("auto");a.addValue("willChange",x),x.add(l)}}function kw(a){return a.props[mw]}const Pk=a=>a!==null;function Ek(a,{repeat:l,repeatType:h="loop"},x){const j=a.filter(Pk),k=l&&h!=="loop"&&l%2===1?0:j.length-1;return j[k]}const Mk={type:"spring",stiffness:500,damping:25,restSpeed:10},Ak=a=>({type:"spring",stiffness:550,damping:a===0?2*Math.sqrt(550):30,restSpeed:10}),Ik={type:"keyframes",duration:.8},zk={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Dk=(a,{keyframes:l})=>l.length>2?Ik:ep.has(a)?a.startsWith("scale")?Ak(l[1]):Mk:zk;function Rk({when:a,delay:l,delayChildren:h,staggerChildren:x,staggerDirection:j,repeat:k,repeatType:_,repeatDelay:d,from:I,elapsed:z,...R}){return!!Object.keys(R).length}const Ty=(a,l,h,x={},j,k)=>_=>{const d=my(x,a)||{},I=d.delay||x.delay||0;let{elapsed:z=0}=x;z=z-Il(I);const R={keyframes:Array.isArray(h)?h:[null,h],ease:"easeOut",velocity:l.getVelocity(),...d,delay:-z,onUpdate:O=>{l.set(O),d.onUpdate&&d.onUpdate(O)},onComplete:()=>{_(),d.onComplete&&d.onComplete()},name:a,motionValue:l,element:k?void 0:j};Rk(d)||Object.assign(R,Dk(a,R)),R.duration&&(R.duration=Il(R.duration)),R.repeatDelay&&(R.repeatDelay=Il(R.repeatDelay)),R.from!==void 0&&(R.keyframes[0]=R.from);let D=!1;if((R.type===!1||R.duration===0&&!R.repeatDelay)&&(gx(R),R.delay===0&&(D=!0)),(Sc.instantAnimations||Sc.skipAnimations)&&(D=!0,gx(R),R.delay=0),R.allowFlatten=!d.type&&!d.ease,D&&!k&&l.get()!==void 0){const O=Ek(R.keyframes,d);if(O!==void 0){Ts.update(()=>{R.onUpdate(O),R.onComplete()});return}}return d.isSync?new hy(R):new rN(R)};function Lk({protectedKeys:a,needsAnimating:l},h){const x=a.hasOwnProperty(h)&&l[h]!==!0;return l[h]=!1,x}function Sw(a,l,{delay:h=0,transitionOverride:x,type:j}={}){let{transition:k=a.getDefaultTransition(),transitionEnd:_,...d}=l;x&&(k=x);const I=[],z=j&&a.animationState&&a.animationState.getState()[j];for(const R in d){const D=a.getValue(R,a.latestValues[R]??null),O=d[R];if(O===void 0||z&&Lk(z,R))continue;const ie={delay:h,...my(k||{},R)},Q=D.get();if(Q!==void 0&&!D.isAnimating&&!Array.isArray(O)&&O===Q&&!ie.velocity)continue;let ae=!1;if(window.MotionHandoffAnimation){const pe=kw(a);if(pe){const Pe=window.MotionHandoffAnimation(pe,R,Ts);Pe!==null&&(ie.startTime=Pe,ae=!0)}}bx(a,R),D.start(Ty(R,D,O,a.shouldReduceMotion&&q_.has(R)?{type:!1}:ie,a,ae));const se=D.animation;se&&I.push(se)}return _&&Promise.all(I).then(()=>{Ts.update(()=>{_&&Tk(a,_)})}),I}function Tw(a,l,h,x=0,j=1){const k=Array.from(a).sort((z,R)=>z.sortNodePosition(R)).indexOf(l),_=a.size,d=(_-1)*x;return typeof h=="function"?h(k,_):j===1?k*x:d-k*x}function jx(a,l,h={}){const x=$h(a,l,h.type==="exit"?a.presenceContext?.custom:void 0);let{transition:j=a.getDefaultTransition()||{}}=x||{};h.transitionOverride&&(j=h.transitionOverride);const k=x?()=>Promise.all(Sw(a,x,h)):()=>Promise.resolve(),_=a.variantChildren&&a.variantChildren.size?(I=0)=>{const{delayChildren:z=0,staggerChildren:R,staggerDirection:D}=j;return Bk(a,l,I,z,R,D,h)}:()=>Promise.resolve(),{when:d}=j;if(d){const[I,z]=d==="beforeChildren"?[k,_]:[_,k];return I().then(()=>z())}else return Promise.all([k(),_(h.delay)])}function Bk(a,l,h=0,x=0,j=0,k=1,_){const d=[];for(const I of a.variantChildren)I.notify("AnimationStart",l),d.push(jx(I,l,{..._,delay:h+(typeof x=="function"?0:x)+Tw(a.variantChildren,I,x,j,k)}).then(()=>I.notify("AnimationComplete",l)));return Promise.all(d)}function Fk(a,l,h={}){a.notify("AnimationStart",l);let x;if(Array.isArray(l)){const j=l.map(k=>jx(a,k,h));x=Promise.all(j)}else if(typeof l=="string")x=jx(a,l,h);else{const j=typeof l=="function"?$h(a,l,h.custom):l;x=Promise.all(Sw(a,j,h))}return x.then(()=>{a.notify("AnimationComplete",l)})}function Cw(a,l){if(!Array.isArray(l))return!1;const h=l.length;if(h!==a.length)return!1;for(let x=0;x<h;x++)if(l[x]!==a[x])return!1;return!0}const Ok=_y.length;function Pw(a){if(!a)return;if(!a.isControllingVariants){const h=a.parent?Pw(a.parent)||{}:{};return a.props.initial!==void 0&&(h.initial=a.props.initial),h}const l={};for(let h=0;h<Ok;h++){const x=_y[h],j=a.props[x];(lm(j)||j===!1)&&(l[x]=j)}return l}const Vk=[...vy].reverse(),$k=vy.length;function Uk(a){return l=>Promise.all(l.map(({animation:h,options:x})=>Fk(a,h,x)))}function Hk(a){let l=Uk(a),h=$0(),x=!0;const j=I=>(z,R)=>{const D=$h(a,R,I==="exit"?a.presenceContext?.custom:void 0);if(D){const{transition:O,transitionEnd:ie,...Q}=D;z={...z,...Q,...ie}}return z};function k(I){l=I(a)}function _(I){const{props:z}=a,R=Pw(a.parent)||{},D=[],O=new Set;let ie={},Q=1/0;for(let se=0;se<$k;se++){const pe=Vk[se],Pe=h[pe],Ie=z[pe]!==void 0?z[pe]:R[pe],Ze=lm(Ie),Je=pe===I?Pe.isActive:null;Je===!1&&(Q=se);let Xe=Ie===R[pe]&&Ie!==z[pe]&&Ze;if(Xe&&x&&a.manuallyAnimateOnMount&&(Xe=!1),Pe.protectedKeys={...ie},!Pe.isActive&&Je===null||!Ie&&!Pe.prevProp||qf(Ie)||typeof Ie=="boolean")continue;const ut=Wk(Pe.prevProp,Ie);let je=ut||pe===I&&Pe.isActive&&!Xe&&Ze||se>Q&&Ze,Ae=!1;const He=Array.isArray(Ie)?Ie:[Ie];let ct=He.reduce(j(pe),{});Je===!1&&(ct={});const{prevResolvedValues:Jt={}}=Pe,Ve={...Jt,...ct},at=gt=>{je=!0,O.has(gt)&&(Ae=!0,O.delete(gt)),Pe.needsAnimating[gt]=!0;const Be=a.getValue(gt);Be&&(Be.liveStyle=!1)};for(const gt in Ve){const Be=ct[gt],Nt=Jt[gt];if(ie.hasOwnProperty(gt))continue;let it=!1;wx(Be)&&wx(Nt)?it=!Cw(Be,Nt):it=Be!==Nt,it?Be!=null?at(gt):O.add(gt):Be!==void 0&&O.has(gt)?at(gt):Pe.protectedKeys[gt]=!0}Pe.prevProp=Ie,Pe.prevResolvedValues=ct,Pe.isActive&&(ie={...ie,...ct}),x&&a.blockInitialAnimation&&(je=!1);const Tt=Xe&&ut;je&&(!Tt||Ae)&&D.push(...He.map(gt=>{const Be={type:pe};if(typeof gt=="string"&&x&&!Tt&&a.manuallyAnimateOnMount&&a.parent){const{parent:Nt}=a,it=$h(Nt,gt);if(Nt.enteringChildren&&it){const{delayChildren:Se}=it.transition||{};Be.delay=Tw(Nt.enteringChildren,a,Se)}}return{animation:gt,options:Be}}))}if(O.size){const se={};if(typeof z.initial!="boolean"){const pe=$h(a,Array.isArray(z.initial)?z.initial[0]:z.initial);pe&&pe.transition&&(se.transition=pe.transition)}O.forEach(pe=>{const Pe=a.getBaseTarget(pe),Ie=a.getValue(pe);Ie&&(Ie.liveStyle=!0),se[pe]=Pe??null}),D.push({animation:se})}let ae=!!D.length;return x&&(z.initial===!1||z.initial===z.animate)&&!a.manuallyAnimateOnMount&&(ae=!1),x=!1,ae?l(D):Promise.resolve()}function d(I,z){if(h[I].isActive===z)return Promise.resolve();a.variantChildren?.forEach(D=>D.animationState?.setActive(I,z)),h[I].isActive=z;const R=_(I);for(const D in h)h[D].protectedKeys={};return R}return{animateChanges:_,setActive:d,setAnimateFunction:k,getState:()=>h,reset:()=>{h=$0(),x=!0}}}function Wk(a,l){return typeof l=="string"?l!==a:Array.isArray(l)?!Cw(l,a):!1}function Nd(a=!1){return{isActive:a,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function $0(){return{animate:Nd(!0),whileInView:Nd(),whileHover:Nd(),whileTap:Nd(),whileDrag:Nd(),whileFocus:Nd(),exit:Nd()}}class xu{constructor(l){this.isMounted=!1,this.node=l}update(){}}class qk extends xu{constructor(l){super(l),l.animationState||(l.animationState=Hk(l))}updateAnimationControlsSubscription(){const{animate:l}=this.node.getProps();qf(l)&&(this.unmountControls=l.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:l}=this.node.getProps(),{animate:h}=this.node.prevProps||{};l!==h&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Gk=0;class Zk extends xu{constructor(){super(...arguments),this.id=Gk++}update(){if(!this.node.presenceContext)return;const{isPresent:l,onExitComplete:h}=this.node.presenceContext,{isPresent:x}=this.node.prevPresenceContext||{};if(!this.node.animationState||l===x)return;const j=this.node.animationState.setActive("exit",!l);h&&!l&&j.then(()=>{h(this.id)})}mount(){const{register:l,onExitComplete:h}=this.node.presenceContext||{};h&&h(this.id),l&&(this.unmount=l(this.id))}unmount(){}}const Xk={animation:{Feature:qk},exit:{Feature:Zk}};function um(a,l,h,x={passive:!0}){return a.addEventListener(l,h,x),()=>a.removeEventListener(l,h)}function _m(a){return{point:{x:a.pageX,y:a.pageY}}}const Yk=a=>l=>xy(l)&&a(l,_m(l));function tm(a,l,h,x){return um(a,l,Yk(h),x)}const Ew=1e-4,Jk=1-Ew,Kk=1+Ew,Mw=.01,Qk=0-Mw,eS=0+Mw;function Jn(a){return a.max-a.min}function tS(a,l,h){return Math.abs(a-l)<=h}function U0(a,l,h,x=.5){a.origin=x,a.originPoint=Os(l.min,l.max,a.origin),a.scale=Jn(h)/Jn(l),a.translate=Os(h.min,h.max,a.origin)-a.originPoint,(a.scale>=Jk&&a.scale<=Kk||isNaN(a.scale))&&(a.scale=1),(a.translate>=Qk&&a.translate<=eS||isNaN(a.translate))&&(a.translate=0)}function im(a,l,h,x){U0(a.x,l.x,h.x,x?x.originX:void 0),U0(a.y,l.y,h.y,x?x.originY:void 0)}function H0(a,l,h){a.min=h.min+l.min,a.max=a.min+Jn(l)}function iS(a,l,h){H0(a.x,l.x,h.x),H0(a.y,l.y,h.y)}function W0(a,l,h){a.min=l.min-h.min,a.max=a.min+Jn(l)}function sm(a,l,h){W0(a.x,l.x,h.x),W0(a.y,l.y,h.y)}function uo(a){return[a("x"),a("y")]}const Aw=({current:a})=>a?a.ownerDocument.defaultView:null,q0=(a,l)=>Math.abs(a-l);function sS(a,l){const h=q0(a.x,l.x),x=q0(a.y,l.y);return Math.sqrt(h**2+x**2)}class Iw{constructor(l,h,{transformPagePoint:x,contextWindow:j=window,dragSnapToOrigin:k=!1,distanceThreshold:_=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const O=Bg(this.lastMoveEventInfo,this.history),ie=this.startEvent!==null,Q=sS(O.offset,{x:0,y:0})>=this.distanceThreshold;if(!ie&&!Q)return;const{point:ae}=O,{timestamp:se}=cn;this.history.push({...ae,timestamp:se});const{onStart:pe,onMove:Pe}=this.handlers;ie||(pe&&pe(this.lastMoveEvent,O),this.startEvent=this.lastMoveEvent),Pe&&Pe(this.lastMoveEvent,O)},this.handlePointerMove=(O,ie)=>{this.lastMoveEvent=O,this.lastMoveEventInfo=Lg(ie,this.transformPagePoint),Ts.update(this.updatePoint,!0)},this.handlePointerUp=(O,ie)=>{this.end();const{onEnd:Q,onSessionEnd:ae,resumeAnimation:se}=this.handlers;if(this.dragSnapToOrigin&&se&&se(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const pe=Bg(O.type==="pointercancel"?this.lastMoveEventInfo:Lg(ie,this.transformPagePoint),this.history);this.startEvent&&Q&&Q(O,pe),ae&&ae(O,pe)},!xy(l))return;this.dragSnapToOrigin=k,this.handlers=h,this.transformPagePoint=x,this.distanceThreshold=_,this.contextWindow=j||window;const d=_m(l),I=Lg(d,this.transformPagePoint),{point:z}=I,{timestamp:R}=cn;this.history=[{...z,timestamp:R}];const{onSessionStart:D}=h;D&&D(l,Bg(I,this.history)),this.removeListeners=xm(tm(this.contextWindow,"pointermove",this.handlePointerMove),tm(this.contextWindow,"pointerup",this.handlePointerUp),tm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(l){this.handlers=l}end(){this.removeListeners&&this.removeListeners(),fu(this.updatePoint)}}function Lg(a,l){return l?{point:l(a.point)}:a}function G0(a,l){return{x:a.x-l.x,y:a.y-l.y}}function Bg({point:a},l){return{point:a,delta:G0(a,zw(l)),offset:G0(a,rS(l)),velocity:nS(l,.1)}}function rS(a){return a[0]}function zw(a){return a[a.length-1]}function nS(a,l){if(a.length<2)return{x:0,y:0};let h=a.length-1,x=null;const j=zw(a);for(;h>=0&&(x=a[h],!(j.timestamp-x.timestamp>Il(l)));)h--;if(!x)return{x:0,y:0};const k=zl(j.timestamp-x.timestamp);if(k===0)return{x:0,y:0};const _={x:(j.x-x.x)/k,y:(j.y-x.y)/k};return _.x===1/0&&(_.x=0),_.y===1/0&&(_.y=0),_}function aS(a,{min:l,max:h},x){return l!==void 0&&a<l?a=x?Os(l,a,x.min):Math.max(a,l):h!==void 0&&a>h&&(a=x?Os(h,a,x.max):Math.min(a,h)),a}function Z0(a,l,h){return{min:l!==void 0?a.min+l:void 0,max:h!==void 0?a.max+h-(a.max-a.min):void 0}}function oS(a,{top:l,left:h,bottom:x,right:j}){return{x:Z0(a.x,h,j),y:Z0(a.y,l,x)}}function X0(a,l){let h=l.min-a.min,x=l.max-a.max;return l.max-l.min<a.max-a.min&&([h,x]=[x,h]),{min:h,max:x}}function lS(a,l){return{x:X0(a.x,l.x),y:X0(a.y,l.y)}}function cS(a,l){let h=.5;const x=Jn(a),j=Jn(l);return j>x?h=nm(l.min,l.max-x,a.min):x>j&&(h=nm(a.min,a.max-j,l.min)),kc(0,1,h)}function uS(a,l){const h={};return l.min!==void 0&&(h.min=l.min-a.min),l.max!==void 0&&(h.max=l.max-a.min),h}const Nx=.35;function dS(a=Nx){return a===!1?a=0:a===!0&&(a=Nx),{x:Y0(a,"left","right"),y:Y0(a,"top","bottom")}}function Y0(a,l,h){return{min:J0(a,l),max:J0(a,h)}}function J0(a,l){return typeof a=="number"?a:a[l]||0}const hS=new WeakMap;class pS{constructor(l){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=nr(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=l}start(l,{snapToCursor:h=!1,distanceThreshold:x}={}){const{presenceContext:j}=this.visualElement;if(j&&j.isPresent===!1)return;const k=D=>{const{dragSnapToOrigin:O}=this.getProps();O?this.pauseAnimation():this.stopAnimation(),h&&this.snapToCursor(_m(D).point)},_=(D,O)=>{const{drag:ie,dragPropagation:Q,onDragStart:ae}=this.getProps();if(ie&&!Q&&(this.openDragLock&&this.openDragLock(),this.openDragLock=_N(ie),!this.openDragLock))return;this.latestPointerEvent=D,this.latestPanInfo=O,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),uo(pe=>{let Pe=this.getAxisMotionValue(pe).get()||0;if(Dl.test(Pe)){const{projection:Ie}=this.visualElement;if(Ie&&Ie.layout){const Ze=Ie.layout.layoutBox[pe];Ze&&(Pe=Jn(Ze)*(parseFloat(Pe)/100))}}this.originPoint[pe]=Pe}),ae&&Ts.postRender(()=>ae(D,O)),bx(this.visualElement,"transform");const{animationState:se}=this.visualElement;se&&se.setActive("whileDrag",!0)},d=(D,O)=>{this.latestPointerEvent=D,this.latestPanInfo=O;const{dragPropagation:ie,dragDirectionLock:Q,onDirectionLock:ae,onDrag:se}=this.getProps();if(!ie&&!this.openDragLock)return;const{offset:pe}=O;if(Q&&this.currentDirection===null){this.currentDirection=mS(pe),this.currentDirection!==null&&ae&&ae(this.currentDirection);return}this.updateAxis("x",O.point,pe),this.updateAxis("y",O.point,pe),this.visualElement.render(),se&&se(D,O)},I=(D,O)=>{this.latestPointerEvent=D,this.latestPanInfo=O,this.stop(D,O),this.latestPointerEvent=null,this.latestPanInfo=null},z=()=>uo(D=>this.getAnimationState(D)==="paused"&&this.getAxisMotionValue(D).animation?.play()),{dragSnapToOrigin:R}=this.getProps();this.panSession=new Iw(l,{onSessionStart:k,onStart:_,onMove:d,onSessionEnd:I,resumeAnimation:z},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:R,distanceThreshold:x,contextWindow:Aw(this.visualElement)})}stop(l,h){const x=l||this.latestPointerEvent,j=h||this.latestPanInfo,k=this.isDragging;if(this.cancel(),!k||!j||!x)return;const{velocity:_}=j;this.startAnimation(_);const{onDragEnd:d}=this.getProps();d&&Ts.postRender(()=>d(x,j))}cancel(){this.isDragging=!1;const{projection:l,animationState:h}=this.visualElement;l&&(l.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:x}=this.getProps();!x&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),h&&h.setActive("whileDrag",!1)}updateAxis(l,h,x){const{drag:j}=this.getProps();if(!x||!wf(l,j,this.currentDirection))return;const k=this.getAxisMotionValue(l);let _=this.originPoint[l]+x[l];this.constraints&&this.constraints[l]&&(_=aS(_,this.constraints[l],this.elastic[l])),k.set(_)}resolveConstraints(){const{dragConstraints:l,dragElastic:h}=this.getProps(),x=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,j=this.constraints;l&&Bh(l)?this.constraints||(this.constraints=this.resolveRefConstraints()):l&&x?this.constraints=oS(x.layoutBox,l):this.constraints=!1,this.elastic=dS(h),j!==this.constraints&&x&&this.constraints&&!this.hasMutatedConstraints&&uo(k=>{this.constraints!==!1&&this.getAxisMotionValue(k)&&(this.constraints[k]=uS(x.layoutBox[k],this.constraints[k]))})}resolveRefConstraints(){const{dragConstraints:l,onMeasureDragConstraints:h}=this.getProps();if(!l||!Bh(l))return!1;const x=l.current,{projection:j}=this.visualElement;if(!j||!j.layout)return!1;const k=fk(x,j.root,this.visualElement.getTransformPagePoint());let _=lS(j.layout.layoutBox,k);if(h){const d=h(hk(_));this.hasMutatedConstraints=!!d,d&&(_=xw(d))}return _}startAnimation(l){const{drag:h,dragMomentum:x,dragElastic:j,dragTransition:k,dragSnapToOrigin:_,onDragTransitionEnd:d}=this.getProps(),I=this.constraints||{},z=uo(R=>{if(!wf(R,h,this.currentDirection))return;let D=I&&I[R]||{};_&&(D={min:0,max:0});const O=j?200:1e6,ie=j?40:1e7,Q={type:"inertia",velocity:x?l[R]:0,bounceStiffness:O,bounceDamping:ie,timeConstant:750,restDelta:1,restSpeed:10,...k,...D};return this.startAxisValueAnimation(R,Q)});return Promise.all(z).then(d)}startAxisValueAnimation(l,h){const x=this.getAxisMotionValue(l);return bx(this.visualElement,l),x.start(Ty(l,x,0,h,this.visualElement,!1))}stopAnimation(){uo(l=>this.getAxisMotionValue(l).stop())}pauseAnimation(){uo(l=>this.getAxisMotionValue(l).animation?.pause())}getAnimationState(l){return this.getAxisMotionValue(l).animation?.state}getAxisMotionValue(l){const h=`_drag${l.toUpperCase()}`,x=this.visualElement.getProps(),j=x[h];return j||this.visualElement.getValue(l,(x.initial?x.initial[l]:void 0)||0)}snapToCursor(l){uo(h=>{const{drag:x}=this.getProps();if(!wf(h,x,this.currentDirection))return;const{projection:j}=this.visualElement,k=this.getAxisMotionValue(h);if(j&&j.layout){const{min:_,max:d}=j.layout.layoutBox[h];k.set(l[h]-Os(_,d,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:l,dragConstraints:h}=this.getProps(),{projection:x}=this.visualElement;if(!Bh(h)||!x||!this.constraints)return;this.stopAnimation();const j={x:0,y:0};uo(_=>{const d=this.getAxisMotionValue(_);if(d&&this.constraints!==!1){const I=d.get();j[_]=cS({min:I,max:I},this.constraints[_])}});const{transformTemplate:k}=this.visualElement.getProps();this.visualElement.current.style.transform=k?k({},""):"none",x.root&&x.root.updateScroll(),x.updateLayout(),this.resolveConstraints(),uo(_=>{if(!wf(_,l,null))return;const d=this.getAxisMotionValue(_),{min:I,max:z}=this.constraints[_];d.set(Os(I,z,j[_]))})}addListeners(){if(!this.visualElement.current)return;hS.set(this.visualElement,this);const l=this.visualElement.current,h=tm(l,"pointerdown",I=>{const{drag:z,dragListener:R=!0}=this.getProps();z&&R&&this.start(I)}),x=()=>{const{dragConstraints:I}=this.getProps();Bh(I)&&I.current&&(this.constraints=this.resolveRefConstraints())},{projection:j}=this.visualElement,k=j.addEventListener("measure",x);j&&!j.layout&&(j.root&&j.root.updateScroll(),j.updateLayout()),Ts.read(x);const _=um(window,"resize",()=>this.scalePositionWithinConstraints()),d=j.addEventListener("didUpdate",(({delta:I,hasLayoutChanged:z})=>{this.isDragging&&z&&(uo(R=>{const D=this.getAxisMotionValue(R);D&&(this.originPoint[R]+=I[R].translate,D.set(D.get()+I[R].translate))}),this.visualElement.render())}));return()=>{_(),h(),k(),d&&d()}}getProps(){const l=this.visualElement.getProps(),{drag:h=!1,dragDirectionLock:x=!1,dragPropagation:j=!1,dragConstraints:k=!1,dragElastic:_=Nx,dragMomentum:d=!0}=l;return{...l,drag:h,dragDirectionLock:x,dragPropagation:j,dragConstraints:k,dragElastic:_,dragMomentum:d}}}function wf(a,l,h){return(l===!0||l===a)&&(h===null||h===a)}function mS(a,l=10){let h=null;return Math.abs(a.y)>l?h="y":Math.abs(a.x)>l&&(h="x"),h}class fS extends xu{constructor(l){super(l),this.removeGroupControls=ho,this.removeListeners=ho,this.controls=new pS(l)}mount(){const{dragControls:l}=this.node.getProps();l&&(this.removeGroupControls=l.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ho}unmount(){this.removeGroupControls(),this.removeListeners()}}const K0=a=>(l,h)=>{a&&Ts.postRender(()=>a(l,h))};class gS extends xu{constructor(){super(...arguments),this.removePointerDownListener=ho}onPointerDown(l){this.session=new Iw(l,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Aw(this.node)})}createPanHandlers(){const{onPanSessionStart:l,onPanStart:h,onPan:x,onPanEnd:j}=this.node.getProps();return{onSessionStart:K0(l),onStart:K0(h),onMove:x,onEnd:(k,_)=>{delete this.session,j&&Ts.postRender(()=>j(k,_))}}}mount(){this.removePointerDownListener=tm(this.node.current,"pointerdown",l=>this.onPointerDown(l))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Mf={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Q0(a,l){return l.max===l.min?0:a/(l.max-l.min)*100}const Zp={correct:(a,l)=>{if(!l.target)return a;if(typeof a=="string")if(gi.test(a))a=parseFloat(a);else return a;const h=Q0(a,l.target.x),x=Q0(a,l.target.y);return`${h}% ${x}%`}},xS={correct:(a,{treeScale:l,projectionDelta:h})=>{const x=a,j=gu.parse(a);if(j.length>5)return x;const k=gu.createTransformer(a),_=typeof j[0]!="number"?1:0,d=h.x.scale*l.x,I=h.y.scale*l.y;j[0+_]/=d,j[1+_]/=I;const z=Os(d,I,.5);return typeof j[2+_]=="number"&&(j[2+_]/=z),typeof j[3+_]=="number"&&(j[3+_]/=z),k(j)}};let Fg=!1;class yS extends G.Component{componentDidMount(){const{visualElement:l,layoutGroup:h,switchLayoutGroup:x,layoutId:j}=this.props,{projection:k}=l;ON(vS),k&&(h.group&&h.group.add(k),x&&x.register&&j&&x.register(k),Fg&&k.root.didUpdate(),k.addEventListener("animationComplete",()=>{this.safeToRemove()}),k.setOptions({...k.options,onExitComplete:()=>this.safeToRemove()})),Mf.hasEverUpdated=!0}getSnapshotBeforeUpdate(l){const{layoutDependency:h,visualElement:x,drag:j,isPresent:k}=this.props,{projection:_}=x;return _&&(_.isPresent=k,Fg=!0,j||l.layoutDependency!==h||h===void 0||l.isPresent!==k?_.willUpdate():this.safeToRemove(),l.isPresent!==k&&(k?_.promote():_.relegate()||Ts.postRender(()=>{const d=_.getStack();(!d||!d.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:l}=this.props.visualElement;l&&(l.root.didUpdate(),gy.postRender(()=>{!l.currentAnimation&&l.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:l,layoutGroup:h,switchLayoutGroup:x}=this.props,{projection:j}=l;Fg=!0,j&&(j.scheduleCheckAfterUnmount(),h&&h.group&&h.group.remove(j),x&&x.deregister&&x.deregister(j))}safeToRemove(){const{safeToRemove:l}=this.props;l&&l()}render(){return null}}function Dw(a){const[l,h]=sw(),x=G.useContext(Zx);return i.jsx(yS,{...a,layoutGroup:x,switchLayoutGroup:G.useContext(fw),isPresent:l,safeToRemove:h})}const vS={borderRadius:{...Zp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Zp,borderTopRightRadius:Zp,borderBottomLeftRadius:Zp,borderBottomRightRadius:Zp,boxShadow:xS};function _S(a,l,h){const x=Pn(a)?a:Wh(a);return x.start(Ty("",x,l,h)),x.animation}const wS=(a,l)=>a.depth-l.depth;class bS{constructor(){this.children=[],this.isDirty=!1}add(l){Jx(this.children,l),this.isDirty=!0}remove(l){Kx(this.children,l),this.isDirty=!0}forEach(l){this.isDirty&&this.children.sort(wS),this.isDirty=!1,this.children.forEach(l)}}function jS(a,l){const h=ha.now(),x=({timestamp:j})=>{const k=j-h;k>=l&&(fu(x),a(k-l))};return Ts.setup(x,!0),()=>fu(x)}const Rw=["TopLeft","TopRight","BottomLeft","BottomRight"],NS=Rw.length,ev=a=>typeof a=="string"?parseFloat(a):a,tv=a=>typeof a=="number"||gi.test(a);function kS(a,l,h,x,j,k){j?(a.opacity=Os(0,h.opacity??1,SS(x)),a.opacityExit=Os(l.opacity??1,0,TS(x))):k&&(a.opacity=Os(l.opacity??1,h.opacity??1,x));for(let _=0;_<NS;_++){const d=`border${Rw[_]}Radius`;let I=iv(l,d),z=iv(h,d);if(I===void 0&&z===void 0)continue;I||(I=0),z||(z=0),I===0||z===0||tv(I)===tv(z)?(a[d]=Math.max(Os(ev(I),ev(z),x),0),(Dl.test(z)||Dl.test(I))&&(a[d]+="%")):a[d]=z}(l.rotate||h.rotate)&&(a.rotate=Os(l.rotate||0,h.rotate||0,x))}function iv(a,l){return a[l]!==void 0?a[l]:a.borderRadius}const SS=Lw(0,.5,j_),TS=Lw(.5,.95,ho);function Lw(a,l,h){return x=>x<a?0:x>l?1:h(nm(a,l,x))}function sv(a,l){a.min=l.min,a.max=l.max}function co(a,l){sv(a.x,l.x),sv(a.y,l.y)}function rv(a,l){a.translate=l.translate,a.scale=l.scale,a.originPoint=l.originPoint,a.origin=l.origin}function nv(a,l,h,x,j){return a-=l,a=Ff(a,1/h,x),j!==void 0&&(a=Ff(a,1/j,x)),a}function CS(a,l=0,h=1,x=.5,j,k=a,_=a){if(Dl.test(l)&&(l=parseFloat(l),l=Os(_.min,_.max,l/100)-_.min),typeof l!="number")return;let d=Os(k.min,k.max,x);a===k&&(d-=l),a.min=nv(a.min,l,h,d,j),a.max=nv(a.max,l,h,d,j)}function av(a,l,[h,x,j],k,_){CS(a,l[h],l[x],l[j],l.scale,k,_)}const PS=["x","scaleX","originX"],ES=["y","scaleY","originY"];function ov(a,l,h,x){av(a.x,l,PS,h?h.x:void 0,x?x.x:void 0),av(a.y,l,ES,h?h.y:void 0,x?x.y:void 0)}function lv(a){return a.translate===0&&a.scale===1}function Bw(a){return lv(a.x)&&lv(a.y)}function cv(a,l){return a.min===l.min&&a.max===l.max}function MS(a,l){return cv(a.x,l.x)&&cv(a.y,l.y)}function uv(a,l){return Math.round(a.min)===Math.round(l.min)&&Math.round(a.max)===Math.round(l.max)}function Fw(a,l){return uv(a.x,l.x)&&uv(a.y,l.y)}function dv(a){return Jn(a.x)/Jn(a.y)}function hv(a,l){return a.translate===l.translate&&a.scale===l.scale&&a.originPoint===l.originPoint}class AS{constructor(){this.members=[]}add(l){Jx(this.members,l),l.scheduleRender()}remove(l){if(Kx(this.members,l),l===this.prevLead&&(this.prevLead=void 0),l===this.lead){const h=this.members[this.members.length-1];h&&this.promote(h)}}relegate(l){const h=this.members.findIndex(j=>l===j);if(h===0)return!1;let x;for(let j=h;j>=0;j--){const k=this.members[j];if(k.isPresent!==!1){x=k;break}}return x?(this.promote(x),!0):!1}promote(l,h){const x=this.lead;if(l!==x&&(this.prevLead=x,this.lead=l,l.show(),x)){x.instance&&x.scheduleRender(),l.scheduleRender(),l.resumeFrom=x,h&&(l.resumeFrom.preserveOpacity=!0),x.snapshot&&(l.snapshot=x.snapshot,l.snapshot.latestValues=x.animationValues||x.latestValues),l.root&&l.root.isUpdating&&(l.isLayoutDirty=!0);const{crossfade:j}=l.options;j===!1&&x.hide()}}exitAnimationComplete(){this.members.forEach(l=>{const{options:h,resumingFrom:x}=l;h.onExitComplete&&h.onExitComplete(),x&&x.options.onExitComplete&&x.options.onExitComplete()})}scheduleRender(){this.members.forEach(l=>{l.instance&&l.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function IS(a,l,h){let x="";const j=a.x.translate/l.x,k=a.y.translate/l.y,_=h?.z||0;if((j||k||_)&&(x=`translate3d(${j}px, ${k}px, ${_}px) `),(l.x!==1||l.y!==1)&&(x+=`scale(${1/l.x}, ${1/l.y}) `),h){const{transformPerspective:z,rotate:R,rotateX:D,rotateY:O,skewX:ie,skewY:Q}=h;z&&(x=`perspective(${z}px) ${x}`),R&&(x+=`rotate(${R}deg) `),D&&(x+=`rotateX(${D}deg) `),O&&(x+=`rotateY(${O}deg) `),ie&&(x+=`skewX(${ie}deg) `),Q&&(x+=`skewY(${Q}deg) `)}const d=a.x.scale*l.x,I=a.y.scale*l.y;return(d!==1||I!==1)&&(x+=`scale(${d}, ${I})`),x||"none"}const Og=["","X","Y","Z"],zS=1e3;let DS=0;function Vg(a,l,h,x){const{latestValues:j}=l;j[a]&&(h[a]=j[a],l.setStaticValue(a,0),x&&(x[a]=0))}function Ow(a){if(a.hasCheckedOptimisedAppear=!0,a.root===a)return;const{visualElement:l}=a.options;if(!l)return;const h=kw(l);if(window.MotionHasOptimisedAnimation(h,"transform")){const{layout:j,layoutId:k}=a.options;window.MotionCancelOptimisedAnimation(h,"transform",Ts,!(j||k))}const{parent:x}=a;x&&!x.hasCheckedOptimisedAppear&&Ow(x)}function Vw({attachResizeListener:a,defaultParent:l,measureScroll:h,checkIsScrollRoot:x,resetTransform:j}){return class{constructor(_={},d=l?.()){this.id=DS++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(BS),this.nodes.forEach($S),this.nodes.forEach(US),this.nodes.forEach(FS)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=_,this.root=d?d.root||d:this,this.path=d?[...d.path,d]:[],this.parent=d,this.depth=d?d.depth+1:0;for(let I=0;I<this.path.length;I++)this.path[I].shouldResetTransform=!0;this.root===this&&(this.nodes=new bS)}addEventListener(_,d){return this.eventHandlers.has(_)||this.eventHandlers.set(_,new ty),this.eventHandlers.get(_).add(d)}notifyListeners(_,...d){const I=this.eventHandlers.get(_);I&&I.notify(...d)}hasListeners(_){return this.eventHandlers.has(_)}mount(_){if(this.instance)return;this.isSVG=iw(_)&&!SN(_),this.instance=_;const{layoutId:d,layout:I,visualElement:z}=this.options;if(z&&!z.current&&z.mount(_),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(I||d)&&(this.isLayoutDirty=!0),a){let R,D=0;const O=()=>this.root.updateBlockedByResize=!1;Ts.read(()=>{D=window.innerWidth}),a(_,()=>{const ie=window.innerWidth;ie!==D&&(D=ie,this.root.updateBlockedByResize=!0,R&&R(),R=jS(O,250),Mf.hasAnimatedSinceResize&&(Mf.hasAnimatedSinceResize=!1,this.nodes.forEach(fv)))})}d&&this.root.registerSharedNode(d,this),this.options.animate!==!1&&z&&(d||I)&&this.addEventListener("didUpdate",({delta:R,hasLayoutChanged:D,hasRelativeLayoutChanged:O,layout:ie})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const Q=this.options.transition||z.getDefaultTransition()||ZS,{onLayoutAnimationStart:ae,onLayoutAnimationComplete:se}=z.getProps(),pe=!this.targetLayout||!Fw(this.targetLayout,ie),Pe=!D&&O;if(this.options.layoutRoot||this.resumeFrom||Pe||D&&(pe||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const Ie={...my(Q,"layout"),onPlay:ae,onComplete:se};(z.shouldReduceMotion||this.options.layoutRoot)&&(Ie.delay=0,Ie.type=!1),this.startAnimation(Ie),this.setAnimationOrigin(R,Pe)}else D||fv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=ie})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const _=this.getStack();_&&_.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),fu(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(HS),this.animationId++)}getTransformTemplate(){const{visualElement:_}=this.options;return _&&_.getProps().transformTemplate}willUpdate(_=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ow(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let R=0;R<this.path.length;R++){const D=this.path[R];D.shouldResetTransform=!0,D.updateScroll("snapshot"),D.options.layoutRoot&&D.willUpdate(!1)}const{layoutId:d,layout:I}=this.options;if(d===void 0&&!I)return;const z=this.getTransformTemplate();this.prevTransformTemplateValue=z?z(this.latestValues,""):void 0,this.updateSnapshot(),_&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(pv);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(mv);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(VS),this.nodes.forEach(RS),this.nodes.forEach(LS)):this.nodes.forEach(mv),this.clearAllSnapshots();const d=ha.now();cn.delta=kc(0,1e3/60,d-cn.timestamp),cn.timestamp=d,cn.isProcessing=!0,Pg.update.process(cn),Pg.preRender.process(cn),Pg.render.process(cn),cn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,gy.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(OS),this.sharedNodes.forEach(WS)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ts.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ts.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Jn(this.snapshot.measuredBox.x)&&!Jn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let I=0;I<this.path.length;I++)this.path[I].updateScroll();const _=this.layout;this.layout=this.measure(!1),this.layoutCorrected=nr(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:d}=this.options;d&&d.notify("LayoutMeasure",this.layout.layoutBox,_?_.layoutBox:void 0)}updateScroll(_="measure"){let d=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===_&&(d=!1),d&&this.instance){const I=x(this.instance);this.scroll={animationId:this.root.animationId,phase:_,isRoot:I,offset:h(this.instance),wasRoot:this.scroll?this.scroll.isRoot:I}}}resetTransform(){if(!j)return;const _=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,d=this.projectionDelta&&!Bw(this.projectionDelta),I=this.getTransformTemplate(),z=I?I(this.latestValues,""):void 0,R=z!==this.prevTransformTemplateValue;_&&this.instance&&(d||Sd(this.latestValues)||R)&&(j(this.instance,z),this.shouldResetTransform=!1,this.scheduleRender())}measure(_=!0){const d=this.measurePageBox();let I=this.removeElementScroll(d);return _&&(I=this.removeTransform(I)),XS(I),{animationId:this.root.animationId,measuredBox:d,layoutBox:I,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:_}=this.options;if(!_)return nr();const d=_.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(YS))){const{scroll:z}=this.root;z&&(Fh(d.x,z.offset.x),Fh(d.y,z.offset.y))}return d}removeElementScroll(_){const d=nr();if(co(d,_),this.scroll?.wasRoot)return d;for(let I=0;I<this.path.length;I++){const z=this.path[I],{scroll:R,options:D}=z;z!==this.root&&R&&D.layoutScroll&&(R.wasRoot&&co(d,_),Fh(d.x,R.offset.x),Fh(d.y,R.offset.y))}return d}applyTransform(_,d=!1){const I=nr();co(I,_);for(let z=0;z<this.path.length;z++){const R=this.path[z];!d&&R.options.layoutScroll&&R.scroll&&R!==R.root&&Oh(I,{x:-R.scroll.offset.x,y:-R.scroll.offset.y}),Sd(R.latestValues)&&Oh(I,R.latestValues)}return Sd(this.latestValues)&&Oh(I,this.latestValues),I}removeTransform(_){const d=nr();co(d,_);for(let I=0;I<this.path.length;I++){const z=this.path[I];if(!z.instance||!Sd(z.latestValues))continue;yx(z.latestValues)&&z.updateSnapshot();const R=nr(),D=z.measurePageBox();co(R,D),ov(d,z.latestValues,z.snapshot?z.snapshot.layoutBox:void 0,R)}return Sd(this.latestValues)&&ov(d,this.latestValues),d}setTargetDelta(_){this.targetDelta=_,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(_){this.options={...this.options,..._,crossfade:_.crossfade!==void 0?_.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==cn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(_=!1){const d=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=d.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=d.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=d.isSharedProjectionDirty);const I=!!this.resumingFrom||this!==d;if(!(_||I&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:R,layoutId:D}=this.options;if(!(!this.layout||!(R||D))){if(this.resolvedRelativeTargetAt=cn.timestamp,!this.targetDelta&&!this.relativeTarget){const O=this.getClosestProjectingParent();O&&O.layout&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),sm(this.relativeTargetOrigin,this.layout.layoutBox,O.layout.layoutBox),co(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=nr(),this.targetWithTransforms=nr()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),iS(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):co(this.target,this.layout.layoutBox),vw(this.target,this.targetDelta)):co(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const O=this.getClosestProjectingParent();O&&!!O.resumingFrom==!!this.resumingFrom&&!O.options.layoutScroll&&O.target&&this.animationProgress!==1?(this.relativeParent=O,this.forceRelativeParentToResolveTarget(),this.relativeTarget=nr(),this.relativeTargetOrigin=nr(),sm(this.relativeTargetOrigin,this.target,O.target),co(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||yx(this.parent.latestValues)||yw(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const _=this.getLead(),d=!!this.resumingFrom||this!==_;let I=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(I=!1),d&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(I=!1),this.resolvedRelativeTargetAt===cn.timestamp&&(I=!1),I)return;const{layout:z,layoutId:R}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(z||R))return;co(this.layoutCorrected,this.layout.layoutBox);const D=this.treeScale.x,O=this.treeScale.y;mk(this.layoutCorrected,this.treeScale,this.path,d),_.layout&&!_.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(_.target=_.layout.layoutBox,_.targetWithTransforms=nr());const{target:ie}=_;if(!ie){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(rv(this.prevProjectionDelta.x,this.projectionDelta.x),rv(this.prevProjectionDelta.y,this.projectionDelta.y)),im(this.projectionDelta,this.layoutCorrected,ie,this.latestValues),(this.treeScale.x!==D||this.treeScale.y!==O||!hv(this.projectionDelta.x,this.prevProjectionDelta.x)||!hv(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",ie))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(_=!0){if(this.options.visualElement?.scheduleRender(),_){const d=this.getStack();d&&d.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vh(),this.projectionDelta=Vh(),this.projectionDeltaWithTransform=Vh()}setAnimationOrigin(_,d=!1){const I=this.snapshot,z=I?I.latestValues:{},R={...this.latestValues},D=Vh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!d;const O=nr(),ie=I?I.source:void 0,Q=this.layout?this.layout.source:void 0,ae=ie!==Q,se=this.getStack(),pe=!se||se.members.length<=1,Pe=!!(ae&&!pe&&this.options.crossfade===!0&&!this.path.some(GS));this.animationProgress=0;let Ie;this.mixTargetDelta=Ze=>{const Je=Ze/1e3;gv(D.x,_.x,Je),gv(D.y,_.y,Je),this.setTargetDelta(D),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sm(O,this.layout.layoutBox,this.relativeParent.layout.layoutBox),qS(this.relativeTarget,this.relativeTargetOrigin,O,Je),Ie&&MS(this.relativeTarget,Ie)&&(this.isProjectionDirty=!1),Ie||(Ie=nr()),co(Ie,this.relativeTarget)),ae&&(this.animationValues=R,kS(R,z,this.latestValues,Je,Pe,pe)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=Je},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(_){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(fu(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ts.update(()=>{Mf.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wh(0)),this.currentAnimation=_S(this.motionValue,[0,1e3],{..._,velocity:0,isSync:!0,onUpdate:d=>{this.mixTargetDelta(d),_.onUpdate&&_.onUpdate(d)},onStop:()=>{},onComplete:()=>{_.onComplete&&_.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const _=this.getStack();_&&_.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(zS),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const _=this.getLead();let{targetWithTransforms:d,target:I,layout:z,latestValues:R}=_;if(!(!d||!I||!z)){if(this!==_&&this.layout&&z&&$w(this.options.animationType,this.layout.layoutBox,z.layoutBox)){I=this.target||nr();const D=Jn(this.layout.layoutBox.x);I.x.min=_.target.x.min,I.x.max=I.x.min+D;const O=Jn(this.layout.layoutBox.y);I.y.min=_.target.y.min,I.y.max=I.y.min+O}co(d,I),Oh(d,R),im(this.projectionDeltaWithTransform,this.layoutCorrected,d,R)}}registerSharedNode(_,d){this.sharedNodes.has(_)||this.sharedNodes.set(_,new AS),this.sharedNodes.get(_).add(d);const z=d.options.initialPromotionConfig;d.promote({transition:z?z.transition:void 0,preserveFollowOpacity:z&&z.shouldPreserveFollowOpacity?z.shouldPreserveFollowOpacity(d):void 0})}isLead(){const _=this.getStack();return _?_.lead===this:!0}getLead(){const{layoutId:_}=this.options;return _?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:_}=this.options;return _?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:_}=this.options;if(_)return this.root.sharedNodes.get(_)}promote({needsReset:_,transition:d,preserveFollowOpacity:I}={}){const z=this.getStack();z&&z.promote(this,I),_&&(this.projectionDelta=void 0,this.needsReset=!0),d&&this.setOptions({transition:d})}relegate(){const _=this.getStack();return _?_.relegate(this):!1}resetSkewAndRotation(){const{visualElement:_}=this.options;if(!_)return;let d=!1;const{latestValues:I}=_;if((I.z||I.rotate||I.rotateX||I.rotateY||I.rotateZ||I.skewX||I.skewY)&&(d=!0),!d)return;const z={};I.z&&Vg("z",_,z,this.animationValues);for(let R=0;R<Og.length;R++)Vg(`rotate${Og[R]}`,_,z,this.animationValues),Vg(`skew${Og[R]}`,_,z,this.animationValues);_.render();for(const R in z)_.setStaticValue(R,z[R]),this.animationValues&&(this.animationValues[R]=z[R]);_.scheduleRender()}applyProjectionStyles(_,d){if(!this.instance||this.isSVG)return;if(!this.isVisible){_.visibility="hidden";return}const I=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,_.visibility="",_.opacity="",_.pointerEvents=Ef(d?.pointerEvents)||"",_.transform=I?I(this.latestValues,""):"none";return}const z=this.getLead();if(!this.projectionDelta||!this.layout||!z.target){this.options.layoutId&&(_.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,_.pointerEvents=Ef(d?.pointerEvents)||""),this.hasProjected&&!Sd(this.latestValues)&&(_.transform=I?I({},""):"none",this.hasProjected=!1);return}_.visibility="";const R=z.animationValues||z.latestValues;this.applyTransformsToTarget();let D=IS(this.projectionDeltaWithTransform,this.treeScale,R);I&&(D=I(R,D)),_.transform=D;const{x:O,y:ie}=this.projectionDelta;_.transformOrigin=`${O.origin*100}% ${ie.origin*100}% 0`,z.animationValues?_.opacity=z===this?R.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:R.opacityExit:_.opacity=z===this?R.opacity!==void 0?R.opacity:"":R.opacityExit!==void 0?R.opacityExit:0;for(const Q in cm){if(R[Q]===void 0)continue;const{correct:ae,applyTo:se,isCSSVariable:pe}=cm[Q],Pe=D==="none"?R[Q]:ae(R[Q],z);if(se){const Ie=se.length;for(let Ze=0;Ze<Ie;Ze++)_[se[Ze]]=Pe}else pe?this.options.visualElement.renderState.vars[Q]=Pe:_[Q]=Pe}this.options.layoutId&&(_.pointerEvents=z===this?Ef(d?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(_=>_.currentAnimation?.stop()),this.root.nodes.forEach(pv),this.root.sharedNodes.clear()}}}function RS(a){a.updateLayout()}function LS(a){const l=a.resumeFrom?.snapshot||a.snapshot;if(a.isLead()&&a.layout&&l&&a.hasListeners("didUpdate")){const{layoutBox:h,measuredBox:x}=a.layout,{animationType:j}=a.options,k=l.source!==a.layout.source;j==="size"?uo(R=>{const D=k?l.measuredBox[R]:l.layoutBox[R],O=Jn(D);D.min=h[R].min,D.max=D.min+O}):$w(j,l.layoutBox,h)&&uo(R=>{const D=k?l.measuredBox[R]:l.layoutBox[R],O=Jn(h[R]);D.max=D.min+O,a.relativeTarget&&!a.currentAnimation&&(a.isProjectionDirty=!0,a.relativeTarget[R].max=a.relativeTarget[R].min+O)});const _=Vh();im(_,h,l.layoutBox);const d=Vh();k?im(d,a.applyTransform(x,!0),l.measuredBox):im(d,h,l.layoutBox);const I=!Bw(_);let z=!1;if(!a.resumeFrom){const R=a.getClosestProjectingParent();if(R&&!R.resumeFrom){const{snapshot:D,layout:O}=R;if(D&&O){const ie=nr();sm(ie,l.layoutBox,D.layoutBox);const Q=nr();sm(Q,h,O.layoutBox),Fw(ie,Q)||(z=!0),R.options.layoutRoot&&(a.relativeTarget=Q,a.relativeTargetOrigin=ie,a.relativeParent=R)}}}a.notifyListeners("didUpdate",{layout:h,snapshot:l,delta:d,layoutDelta:_,hasLayoutChanged:I,hasRelativeLayoutChanged:z})}else if(a.isLead()){const{onExitComplete:h}=a.options;h&&h()}a.options.transition=void 0}function BS(a){a.parent&&(a.isProjecting()||(a.isProjectionDirty=a.parent.isProjectionDirty),a.isSharedProjectionDirty||(a.isSharedProjectionDirty=!!(a.isProjectionDirty||a.parent.isProjectionDirty||a.parent.isSharedProjectionDirty)),a.isTransformDirty||(a.isTransformDirty=a.parent.isTransformDirty))}function FS(a){a.isProjectionDirty=a.isSharedProjectionDirty=a.isTransformDirty=!1}function OS(a){a.clearSnapshot()}function pv(a){a.clearMeasurements()}function mv(a){a.isLayoutDirty=!1}function VS(a){const{visualElement:l}=a.options;l&&l.getProps().onBeforeLayoutMeasure&&l.notify("BeforeLayoutMeasure"),a.resetTransform()}function fv(a){a.finishAnimation(),a.targetDelta=a.relativeTarget=a.target=void 0,a.isProjectionDirty=!0}function $S(a){a.resolveTargetDelta()}function US(a){a.calcProjection()}function HS(a){a.resetSkewAndRotation()}function WS(a){a.removeLeadSnapshot()}function gv(a,l,h){a.translate=Os(l.translate,0,h),a.scale=Os(l.scale,1,h),a.origin=l.origin,a.originPoint=l.originPoint}function xv(a,l,h,x){a.min=Os(l.min,h.min,x),a.max=Os(l.max,h.max,x)}function qS(a,l,h,x){xv(a.x,l.x,h.x,x),xv(a.y,l.y,h.y,x)}function GS(a){return a.animationValues&&a.animationValues.opacityExit!==void 0}const ZS={duration:.45,ease:[.4,0,.1,1]},yv=a=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(a),vv=yv("applewebkit/")&&!yv("chrome/")?Math.round:ho;function _v(a){a.min=vv(a.min),a.max=vv(a.max)}function XS(a){_v(a.x),_v(a.y)}function $w(a,l,h){return a==="position"||a==="preserve-aspect"&&!tS(dv(l),dv(h),.2)}function YS(a){return a!==a.root&&a.scroll?.wasRoot}const JS=Vw({attachResizeListener:(a,l)=>um(a,"resize",l),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),$g={current:void 0},Uw=Vw({measureScroll:a=>({x:a.scrollLeft,y:a.scrollTop}),defaultParent:()=>{if(!$g.current){const a=new JS({});a.mount(window),a.setOptions({layoutScroll:!0}),$g.current=a}return $g.current},resetTransform:(a,l)=>{a.style.transform=l!==void 0?l:"none"},checkIsScrollRoot:a=>window.getComputedStyle(a).position==="fixed"}),KS={pan:{Feature:gS},drag:{Feature:fS,ProjectionNode:Uw,MeasureLayout:Dw}};function wv(a,l,h){const{props:x}=a;a.animationState&&x.whileHover&&a.animationState.setActive("whileHover",h==="Start");const j="onHover"+h,k=x[j];k&&Ts.postRender(()=>k(l,_m(l)))}class QS extends xu{mount(){const{current:l}=this.node;l&&(this.unmount=wN(l,(h,x)=>(wv(this.node,x,"Start"),j=>wv(this.node,j,"End"))))}unmount(){}}class eT extends xu{constructor(){super(...arguments),this.isActive=!1}onFocus(){let l=!1;try{l=this.node.current.matches(":focus-visible")}catch{l=!0}!l||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=xm(um(this.node.current,"focus",()=>this.onFocus()),um(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function bv(a,l,h){const{props:x}=a;if(a.current instanceof HTMLButtonElement&&a.current.disabled)return;a.animationState&&x.whileTap&&a.animationState.setActive("whileTap",h==="Start");const j="onTap"+(h==="End"?"":h),k=x[j];k&&Ts.postRender(()=>k(l,_m(l)))}class tT extends xu{mount(){const{current:l}=this.node;l&&(this.unmount=kN(l,(h,x)=>(bv(this.node,x,"Start"),(j,{success:k})=>bv(this.node,j,k?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const kx=new WeakMap,Ug=new WeakMap,iT=a=>{const l=kx.get(a.target);l&&l(a)},sT=a=>{a.forEach(iT)};function rT({root:a,...l}){const h=a||document;Ug.has(h)||Ug.set(h,{});const x=Ug.get(h),j=JSON.stringify(l);return x[j]||(x[j]=new IntersectionObserver(sT,{root:a,...l})),x[j]}function nT(a,l,h){const x=rT(l);return kx.set(a,h),x.observe(a),()=>{kx.delete(a),x.unobserve(a)}}const aT={some:0,all:1};class oT extends xu{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:l={}}=this.node.getProps(),{root:h,margin:x,amount:j="some",once:k}=l,_={root:h?h.current:void 0,rootMargin:x,threshold:typeof j=="number"?j:aT[j]},d=I=>{const{isIntersecting:z}=I;if(this.isInView===z||(this.isInView=z,k&&!z&&this.hasEnteredView))return;z&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",z);const{onViewportEnter:R,onViewportLeave:D}=this.node.getProps(),O=z?R:D;O&&O(I)};return nT(this.node.current,_,d)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:l,prevProps:h}=this.node;["amount","margin","root"].some(lT(l,h))&&this.startObserver()}unmount(){}}function lT({viewport:a={}},{viewport:l={}}={}){return h=>a[h]!==l[h]}const cT={inView:{Feature:oT},tap:{Feature:tT},focus:{Feature:eT},hover:{Feature:QS}},uT={layout:{ProjectionNode:Uw,MeasureLayout:Dw}},dT={...Xk,...cT,...KS,...uT},re=dk(dT,Nk);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hT=a=>a.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),pT=a=>a.replace(/^([A-Z])|[\s-_]+(\w)/g,(l,h,x)=>x?x.toUpperCase():h.toLowerCase()),jv=a=>{const l=pT(a);return l.charAt(0).toUpperCase()+l.slice(1)},Hw=(...a)=>a.filter((l,h,x)=>!!l&&l.trim()!==""&&x.indexOf(l)===h).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var mT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fT=G.forwardRef(({color:a="currentColor",size:l=24,strokeWidth:h=2,absoluteStrokeWidth:x,className:j="",children:k,iconNode:_,...d},I)=>G.createElement("svg",{ref:I,...mT,width:l,height:l,stroke:a,strokeWidth:x?Number(h)*24/Number(l):h,className:Hw("lucide",j),...d},[..._.map(([z,R])=>G.createElement(z,R)),...Array.isArray(k)?k:[k]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ut=(a,l)=>{const h=G.forwardRef(({className:x,...j},k)=>G.createElement(fT,{ref:k,iconNode:l,className:Hw(`lucide-${hT(jv(a))}`,`lucide-${a}`,x),...j}));return h.displayName=jv(a),h};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gT=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],Ho=Ut("arrow-left",gT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xT=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Kp=Ut("arrow-right",xT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yT=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],vT=Ut("award",yT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"M2 4v16",key:"vw9hq8"}],["path",{d:"M2 8h18a2 2 0 0 1 2 2v10",key:"1dgv2r"}],["path",{d:"M2 17h20",key:"18nfp3"}],["path",{d:"M6 8v9",key:"1yriud"}]],dm=Ut("bed",_T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wT=[["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M19 7V4a1 1 0 0 0-1-1h-2a1 1 0 0 0-1 1v3",key:"3apit1"}],["path",{d:"M20 21a2 2 0 0 0 2-2v-3.851c0-1.39-2-2.962-2-4.829V8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v11a2 2 0 0 0 2 2z",key:"rhpgnw"}],["path",{d:"M 22 16 L 2 16",key:"14lkq7"}],["path",{d:"M4 21a2 2 0 0 1-2-2v-3.851c0-1.39 2-2.962 2-4.829V8a1 1 0 0 1 1-1h4a1 1 0 0 1 1 1v11a2 2 0 0 1-2 2z",key:"104b3k"}],["path",{d:"M9 7V4a1 1 0 0 0-1-1H6a1 1 0 0 0-1 1v3",key:"14fczp"}]],bT=Ut("binoculars",wT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jT=[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]],Hg=Ut("bot",jT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NT=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],kT=Ut("building",NT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ST=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],ds=Ut("calendar",ST);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],Rl=Ut("camera",TT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CT=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],PT=Ut("car",CT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ET=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Xp=Ut("check",ET);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],AT=Ut("chevron-down",MT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sx=Ut("circle-alert",IT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],mu=Ut("circle-check-big",zT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Tc=Ut("clock",DT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],Ww=Ut("coffee",RT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Uh=Ut("compass",LT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],hm=Ut("credit-card",BT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],qw=Ut("dollar-sign",FT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OT=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Wg=Ut("eye-off",OT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],po=Ut("eye",VT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $T=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],UT=Ut("funnel",$T);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],WT=Ut("gift",HT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],$a=Ut("heart",qT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GT=[["path",{d:"M10 22v-6.57",key:"1wmca3"}],["path",{d:"M12 11h.01",key:"z322tv"}],["path",{d:"M12 7h.01",key:"1ivr5q"}],["path",{d:"M14 15.43V22",key:"1q2vjd"}],["path",{d:"M15 16a5 5 0 0 0-6 0",key:"o9wqvi"}],["path",{d:"M16 11h.01",key:"xkw8gn"}],["path",{d:"M16 7h.01",key:"1kdx03"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 7h.01",key:"1vti4s"}],["rect",{x:"4",y:"2",width:"16",height:"20",rx:"2",key:"1uxh74"}]],Tx=Ut("hotel",GT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],tp=Ut("info",ZT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],qg=Ut("lock",XT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]],Gg=Ut("log-in",YT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],Cx=Ut("mail",JT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KT=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yu=Ut("map-pin",KT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],e4=Ut("maximize-2",QT);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],Px=Ut("message-circle",t4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],s4=Ut("minimize-2",i4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=[["path",{d:"M5 12h14",key:"1ays0h"}]],pm=Ut("minus",r4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=[["path",{d:"m8 3 4 8 5-5 5 15H2L8 3z",key:"otkl63"}]],En=Ut("mountain",n4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],o4=Ut("music",a4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l4=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],wm=Ut("navigation",l4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c4=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Nv=Ut("package",c4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u4=[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]],d4=Ut("palette",u4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h4=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Af=Ut("phone",h4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p4=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],mo=Ut("plus",p4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const m4=[["circle",{cx:"6",cy:"19",r:"3",key:"1kj8tv"}],["path",{d:"M9 19h8.5a3.5 3.5 0 0 0 0-7h-11a3.5 3.5 0 0 1 0-7H15",key:"1d8sl"}],["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}]],f4=Ut("route",m4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g4=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],x4=Ut("search",g4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y4=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],v4=Ut("send",y4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _4=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],w4=Ut("settings",_4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b4=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],bm=Ut("share-2",b4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j4=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],N4=Ut("share",j4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k4=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Td=Ut("shield",k4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S4=[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]],T4=Ut("shirt",S4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],jc=Ut("shopping-bag",C4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P4=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],Md=Ut("shopping-cart",P4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E4=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Gw=Ut("sparkles",E4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M4=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Cy=Ut("square-pen",M4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A4=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Xs=Ut("star",A4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I4=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],Ex=Ut("store",I4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],ip=Ut("thermometer",z4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const D4=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Py=Ut("trash-2",D4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R4=[["path",{d:"m17 14 3 3.3a1 1 0 0 1-.7 1.7H4.7a1 1 0 0 1-.7-1.7L7 14h-.3a1 1 0 0 1-.7-1.7L9 9h-.2A1 1 0 0 1 8 7.3L12 3l4 4.3a1 1 0 0 1-.8 1.7H15l3 3.3a1 1 0 0 1-.7 1.7H17Z",key:"cpyugq"}],["path",{d:"M12 22v-3",key:"kmzjlo"}]],Dd=Ut("tree-pine",R4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L4=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],mm=Ut("trending-up",L4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]],Zw=Ut("truck",B4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],kv=Ut("user-check",F4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],Mx=Ut("user-plus",O4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const V4=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Hh=Ut("user",V4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],fo=Ut("users",$4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],Zf=Ut("waves",U4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["path",{d:"M5 12.859a10 10 0 0 1 14 0",key:"1x1e6c"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}]],W4=Ut("wifi",H4);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Xw=Ut("x",q4),Yw={items:[],total:0,itemCount:0},Jw=(a,l)=>{switch(l.type){case"ADD_ITEM":{const h=a.items.find(_=>_.id===l.payload.id);let x;h?x=a.items.map(_=>_.id===l.payload.id?{..._,quantity:_.quantity+1}:_):x=[...a.items,{...l.payload,quantity:1}];const j=x.reduce((_,d)=>_+d.price*d.quantity,0),k=x.reduce((_,d)=>_+d.quantity,0);return{items:x,total:j,itemCount:k}}case"REMOVE_ITEM":{const h=a.items.filter(k=>k.id!==l.payload.id),x=h.reduce((k,_)=>k+_.price*_.quantity,0),j=h.reduce((k,_)=>k+_.quantity,0);return{items:h,total:x,itemCount:j}}case"UPDATE_QUANTITY":{if(l.payload.quantity<=0)return Jw(a,{type:"REMOVE_ITEM",payload:{id:l.payload.id}});const h=a.items.map(k=>k.id===l.payload.id?{...k,quantity:l.payload.quantity}:k),x=h.reduce((k,_)=>k+_.price*_.quantity,0),j=h.reduce((k,_)=>k+_.quantity,0);return{items:h,total:x,itemCount:j}}case"CLEAR_CART":return Yw;default:return a}},Kw=G.createContext(void 0),G4=({children:a})=>{const[l,h]=G.useReducer(Jw,Yw),x=z=>{h({type:"ADD_ITEM",payload:z})},j=z=>{const{quantity:R=1,...D}=z;for(let O=0;O<R;O++)h({type:"ADD_ITEM",payload:D})},k=z=>{h({type:"REMOVE_ITEM",payload:{id:z}})},_=(z,R)=>{h({type:"UPDATE_QUANTITY",payload:{id:z,quantity:R}})},d=()=>{h({type:"CLEAR_CART"})},I=()=>l.total;return i.jsx(Kw.Provider,{value:{state:l,addItem:x,addToCart:j,removeItem:k,updateQuantity:_,clearCart:d,getTotalPrice:I},children:a})},sp=()=>{const a=G.useContext(Kw);if(a===void 0)throw new Error("useCart must be used within a CartProvider");return a},Qw=G.createContext(void 0);function Rd(){const a=G.useContext(Qw);if(a===void 0)throw new Error("useAuth must be used within an AuthProvider");return a}function Z4({children:a}){const[l,h]=G.useState(null),[x,j]=G.useState(!0);G.useEffect(()=>{const R=localStorage.getItem("jharkhand_user");if(R)try{const D=JSON.parse(R);h(D)}catch(D){console.error("Error parsing stored user data:",D),localStorage.removeItem("jharkhand_user")}j(!1)},[]);const z={user:l,isLoading:x,login:async(R,D,O,ie)=>{j(!0),await new Promise(ae=>setTimeout(ae,1500));const Q={id:Math.random().toString(36).substr(2,9),name:R.split("@")[0].replace(/[._]/g," ").replace(/\b\w/g,ae=>ae.toUpperCase()),email:R,userType:O,joinedDate:new Date().toISOString(),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${R}`};O==="guest"?(Q.totalBookings=Math.floor(Math.random()*10)+1,Q.totalSpent=Math.floor(Math.random()*5e4)+5e3,Q.favoriteDestinations=["Netarhat","Hundru Falls","Betla National Park"],Q.location="Ranchi, Jharkhand"):(Q.totalListings=Math.floor(Math.random()*25)+1,Q.totalEarnings=Math.floor(Math.random()*2e5)+1e4,Q.rating=4+Math.random()*1,Q.isVerified=Math.random()>.3,Q.location="Jharkhand, India",Q.hostType=ie||(Math.random()>.5?"vendor":"hotel-owner"),Q.hostType==="vendor"?(Q.storeName=`${Q.name}'s Crafts`,Q.storeDescription="Traditional Jharkhand handicrafts and tribal art"):(Q.propertyName=`${Q.name}'s Lodge`,Q.propertyType="hotel",Q.roomCount=Math.floor(Math.random()*20)+5)),h(Q),localStorage.setItem("jharkhand_user",JSON.stringify(Q)),j(!1)},signup:async R=>{j(!0),await new Promise(O=>setTimeout(O,2e3));const D={id:Math.random().toString(36).substr(2,9),name:`${R.firstName} ${R.lastName}`,email:R.email,phone:R.phone,userType:R.userType,hostType:R.hostType,joinedDate:new Date().toISOString(),avatar:`https://api.dicebear.com/7.x/avataaars/svg?seed=${R.email}`,location:"Ranchi, Jharkhand"};R.userType==="guest"?(D.totalBookings=0,D.totalSpent=0,D.favoriteDestinations=[]):(D.totalListings=0,D.totalEarnings=0,D.rating=0,D.isVerified=!1,R.hostType==="vendor"?(D.storeName=`${R.firstName}'s Store`,D.storeDescription="Traditional crafts and local products"):R.hostType==="hotel-owner"&&(D.propertyName=`${R.firstName}'s Property`,D.propertyType="homestay",D.roomCount=3)),h(D),localStorage.setItem("jharkhand_user",JSON.stringify(D)),j(!1)},logout:()=>{h(null),localStorage.removeItem("jharkhand_user")},updateProfile:R=>{if(l){const D={...l,...R};h(D),localStorage.setItem("jharkhand_user",JSON.stringify(D))}}};return i.jsx(Qw.Provider,{value:z,children:a})}function Sv(a,l){if(typeof a=="function")return a(l);a!=null&&(a.current=l)}function eb(...a){return l=>{let h=!1;const x=a.map(j=>{const k=Sv(j,l);return!h&&typeof k=="function"&&(h=!0),k});if(h)return()=>{for(let j=0;j<x.length;j++){const k=x[j];typeof k=="function"?k():Sv(a[j],null)}}}}function Ld(...a){return G.useCallback(eb(...a),a)}function tb(a){const l=X4(a),h=G.forwardRef((x,j)=>{const{children:k,..._}=x,d=G.Children.toArray(k),I=d.find(J4);if(I){const z=I.props.children,R=d.map(D=>D===I?G.Children.count(z)>1?G.Children.only(null):G.isValidElement(z)?z.props.children:null:D);return i.jsx(l,{..._,ref:j,children:G.isValidElement(z)?G.cloneElement(z,void 0,R):null})}return i.jsx(l,{..._,ref:j,children:k})});return h.displayName=`${a}.Slot`,h}var ib=tb("Slot");function X4(a){const l=G.forwardRef((h,x)=>{const{children:j,...k}=h;if(G.isValidElement(j)){const _=Q4(j),d=K4(k,j.props);return j.type!==G.Fragment&&(d.ref=x?eb(x,_):_),G.cloneElement(j,d)}return G.Children.count(j)>1?G.Children.only(null):null});return l.displayName=`${a}.SlotClone`,l}var Y4=Symbol("radix.slottable");function J4(a){return G.isValidElement(a)&&typeof a.type=="function"&&"__radixId"in a.type&&a.type.__radixId===Y4}function K4(a,l){const h={...l};for(const x in l){const j=a[x],k=l[x];/^on[A-Z]/.test(x)?j&&k?h[x]=(...d)=>{const I=k(...d);return j(...d),I}:j&&(h[x]=j):x==="style"?h[x]={...j,...k}:x==="className"&&(h[x]=[j,k].filter(Boolean).join(" "))}return{...a,...h}}function Q4(a){let l=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,h=l&&"isReactWarning"in l&&l.isReactWarning;return h?a.ref:(l=Object.getOwnPropertyDescriptor(a,"ref")?.get,h=l&&"isReactWarning"in l&&l.isReactWarning,h?a.props.ref:a.props.ref||a.ref)}function sb(a){var l,h,x="";if(typeof a=="string"||typeof a=="number")x+=a;else if(typeof a=="object")if(Array.isArray(a)){var j=a.length;for(l=0;l<j;l++)a[l]&&(h=sb(a[l]))&&(x&&(x+=" "),x+=h)}else for(h in a)a[h]&&(x&&(x+=" "),x+=h);return x}function rb(){for(var a,l,h=0,x="",j=arguments.length;h<j;h++)(a=arguments[h])&&(l=sb(a))&&(x&&(x+=" "),x+=l);return x}const Tv=a=>typeof a=="boolean"?`${a}`:a===0?"0":a,Cv=rb,nb=(a,l)=>h=>{var x;if(l?.variants==null)return Cv(a,h?.class,h?.className);const{variants:j,defaultVariants:k}=l,_=Object.keys(j).map(z=>{const R=h?.[z],D=k?.[z];if(R===null)return null;const O=Tv(R)||Tv(D);return j[z][O]}),d=h&&Object.entries(h).reduce((z,R)=>{let[D,O]=R;return O===void 0||(z[D]=O),z},{}),I=l==null||(x=l.compoundVariants)===null||x===void 0?void 0:x.reduce((z,R)=>{let{class:D,className:O,...ie}=R;return Object.entries(ie).every(Q=>{let[ae,se]=Q;return Array.isArray(se)?se.includes({...k,...d}[ae]):{...k,...d}[ae]===se})?[...z,D,O]:z},[]);return Cv(a,_,I,h?.class,h?.className)},Ey="-",eC=a=>{const l=iC(a),{conflictingClassGroups:h,conflictingClassGroupModifiers:x}=a;return{getClassGroupId:_=>{const d=_.split(Ey);return d[0]===""&&d.length!==1&&d.shift(),ab(d,l)||tC(_)},getConflictingClassGroupIds:(_,d)=>{const I=h[_]||[];return d&&x[_]?[...I,...x[_]]:I}}},ab=(a,l)=>{if(a.length===0)return l.classGroupId;const h=a[0],x=l.nextPart.get(h),j=x?ab(a.slice(1),x):void 0;if(j)return j;if(l.validators.length===0)return;const k=a.join(Ey);return l.validators.find(({validator:_})=>_(k))?.classGroupId},Pv=/^\[(.+)\]$/,tC=a=>{if(Pv.test(a)){const l=Pv.exec(a)[1],h=l?.substring(0,l.indexOf(":"));if(h)return"arbitrary.."+h}},iC=a=>{const{theme:l,classGroups:h}=a,x={nextPart:new Map,validators:[]};for(const j in h)Ax(h[j],x,j,l);return x},Ax=(a,l,h,x)=>{a.forEach(j=>{if(typeof j=="string"){const k=j===""?l:Ev(l,j);k.classGroupId=h;return}if(typeof j=="function"){if(sC(j)){Ax(j(x),l,h,x);return}l.validators.push({validator:j,classGroupId:h});return}Object.entries(j).forEach(([k,_])=>{Ax(_,Ev(l,k),h,x)})})},Ev=(a,l)=>{let h=a;return l.split(Ey).forEach(x=>{h.nextPart.has(x)||h.nextPart.set(x,{nextPart:new Map,validators:[]}),h=h.nextPart.get(x)}),h},sC=a=>a.isThemeGetter,rC=a=>{if(a<1)return{get:()=>{},set:()=>{}};let l=0,h=new Map,x=new Map;const j=(k,_)=>{h.set(k,_),l++,l>a&&(l=0,x=h,h=new Map)};return{get(k){let _=h.get(k);if(_!==void 0)return _;if((_=x.get(k))!==void 0)return j(k,_),_},set(k,_){h.has(k)?h.set(k,_):j(k,_)}}},Ix="!",zx=":",nC=zx.length,aC=a=>{const{prefix:l,experimentalParseClassName:h}=a;let x=j=>{const k=[];let _=0,d=0,I=0,z;for(let Q=0;Q<j.length;Q++){let ae=j[Q];if(_===0&&d===0){if(ae===zx){k.push(j.slice(I,Q)),I=Q+nC;continue}if(ae==="/"){z=Q;continue}}ae==="["?_++:ae==="]"?_--:ae==="("?d++:ae===")"&&d--}const R=k.length===0?j:j.substring(I),D=oC(R),O=D!==R,ie=z&&z>I?z-I:void 0;return{modifiers:k,hasImportantModifier:O,baseClassName:D,maybePostfixModifierPosition:ie}};if(l){const j=l+zx,k=x;x=_=>_.startsWith(j)?k(_.substring(j.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:_,maybePostfixModifierPosition:void 0}}if(h){const j=x;x=k=>h({className:k,parseClassName:j})}return x},oC=a=>a.endsWith(Ix)?a.substring(0,a.length-1):a.startsWith(Ix)?a.substring(1):a,lC=a=>{const l=Object.fromEntries(a.orderSensitiveModifiers.map(x=>[x,!0]));return x=>{if(x.length<=1)return x;const j=[];let k=[];return x.forEach(_=>{_[0]==="["||l[_]?(j.push(...k.sort(),_),k=[]):k.push(_)}),j.push(...k.sort()),j}},cC=a=>({cache:rC(a.cacheSize),parseClassName:aC(a),sortModifiers:lC(a),...eC(a)}),uC=/\s+/,dC=(a,l)=>{const{parseClassName:h,getClassGroupId:x,getConflictingClassGroupIds:j,sortModifiers:k}=l,_=[],d=a.trim().split(uC);let I="";for(let z=d.length-1;z>=0;z-=1){const R=d[z],{isExternal:D,modifiers:O,hasImportantModifier:ie,baseClassName:Q,maybePostfixModifierPosition:ae}=h(R);if(D){I=R+(I.length>0?" "+I:I);continue}let se=!!ae,pe=x(se?Q.substring(0,ae):Q);if(!pe){if(!se){I=R+(I.length>0?" "+I:I);continue}if(pe=x(Q),!pe){I=R+(I.length>0?" "+I:I);continue}se=!1}const Pe=k(O).join(":"),Ie=ie?Pe+Ix:Pe,Ze=Ie+pe;if(_.includes(Ze))continue;_.push(Ze);const Je=j(pe,se);for(let Xe=0;Xe<Je.length;++Xe){const ut=Je[Xe];_.push(Ie+ut)}I=R+(I.length>0?" "+I:I)}return I};function hC(){let a=0,l,h,x="";for(;a<arguments.length;)(l=arguments[a++])&&(h=ob(l))&&(x&&(x+=" "),x+=h);return x}const ob=a=>{if(typeof a=="string")return a;let l,h="";for(let x=0;x<a.length;x++)a[x]&&(l=ob(a[x]))&&(h&&(h+=" "),h+=l);return h};function pC(a,...l){let h,x,j,k=_;function _(I){const z=l.reduce((R,D)=>D(R),a());return h=cC(z),x=h.cache.get,j=h.cache.set,k=d,d(I)}function d(I){const z=x(I);if(z)return z;const R=dC(I,h);return j(I,R),R}return function(){return k(hC.apply(null,arguments))}}const Cr=a=>{const l=h=>h[a]||[];return l.isThemeGetter=!0,l},lb=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,cb=/^\((?:(\w[\w-]*):)?(.+)\)$/i,mC=/^\d+\/\d+$/,fC=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,gC=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,xC=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,yC=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,vC=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Rh=a=>mC.test(a),Ci=a=>!!a&&!Number.isNaN(Number(a)),hu=a=>!!a&&Number.isInteger(Number(a)),Zg=a=>a.endsWith("%")&&Ci(a.slice(0,-1)),vc=a=>fC.test(a),_C=()=>!0,wC=a=>gC.test(a)&&!xC.test(a),ub=()=>!1,bC=a=>yC.test(a),jC=a=>vC.test(a),NC=a=>!Gt(a)&&!Zt(a),kC=a=>rp(a,pb,ub),Gt=a=>lb.test(a),kd=a=>rp(a,mb,wC),Xg=a=>rp(a,EC,Ci),Mv=a=>rp(a,db,ub),SC=a=>rp(a,hb,jC),bf=a=>rp(a,fb,bC),Zt=a=>cb.test(a),Yp=a=>np(a,mb),TC=a=>np(a,MC),Av=a=>np(a,db),CC=a=>np(a,pb),PC=a=>np(a,hb),jf=a=>np(a,fb,!0),rp=(a,l,h)=>{const x=lb.exec(a);return x?x[1]?l(x[1]):h(x[2]):!1},np=(a,l,h=!1)=>{const x=cb.exec(a);return x?x[1]?l(x[1]):h:!1},db=a=>a==="position"||a==="percentage",hb=a=>a==="image"||a==="url",pb=a=>a==="length"||a==="size"||a==="bg-size",mb=a=>a==="length",EC=a=>a==="number",MC=a=>a==="family-name",fb=a=>a==="shadow",AC=()=>{const a=Cr("color"),l=Cr("font"),h=Cr("text"),x=Cr("font-weight"),j=Cr("tracking"),k=Cr("leading"),_=Cr("breakpoint"),d=Cr("container"),I=Cr("spacing"),z=Cr("radius"),R=Cr("shadow"),D=Cr("inset-shadow"),O=Cr("text-shadow"),ie=Cr("drop-shadow"),Q=Cr("blur"),ae=Cr("perspective"),se=Cr("aspect"),pe=Cr("ease"),Pe=Cr("animate"),Ie=()=>["auto","avoid","all","avoid-page","page","left","right","column"],Ze=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],Je=()=>[...Ze(),Zt,Gt],Xe=()=>["auto","hidden","clip","visible","scroll"],ut=()=>["auto","contain","none"],je=()=>[Zt,Gt,I],Ae=()=>[Rh,"full","auto",...je()],He=()=>[hu,"none","subgrid",Zt,Gt],ct=()=>["auto",{span:["full",hu,Zt,Gt]},hu,Zt,Gt],Jt=()=>[hu,"auto",Zt,Gt],Ve=()=>["auto","min","max","fr",Zt,Gt],at=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Tt=()=>["start","end","center","stretch","center-safe","end-safe"],Et=()=>["auto",...je()],gt=()=>[Rh,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...je()],Be=()=>[a,Zt,Gt],Nt=()=>[...Ze(),Av,Mv,{position:[Zt,Gt]}],it=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Se=()=>["auto","cover","contain",CC,kC,{size:[Zt,Gt]}],Ye=()=>[Zg,Yp,kd],ot=()=>["","none","full",z,Zt,Gt],_t=()=>["",Ci,Yp,kd],zt=()=>["solid","dashed","dotted","double"],ti=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ot=()=>[Ci,Zg,Av,Mv],Rt=()=>["","none",Q,Zt,Gt],xi=()=>["none",Ci,Zt,Gt],Bi=()=>["none",Ci,Zt,Gt],Ys=()=>[Ci,Zt,Gt],hs=()=>[Rh,"full",...je()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[vc],breakpoint:[vc],color:[_C],container:[vc],"drop-shadow":[vc],ease:["in","out","in-out"],font:[NC],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[vc],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[vc],shadow:[vc],spacing:["px",Ci],text:[vc],"text-shadow":[vc],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Rh,Gt,Zt,se]}],container:["container"],columns:[{columns:[Ci,Gt,Zt,d]}],"break-after":[{"break-after":Ie()}],"break-before":[{"break-before":Ie()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:Je()}],overflow:[{overflow:Xe()}],"overflow-x":[{"overflow-x":Xe()}],"overflow-y":[{"overflow-y":Xe()}],overscroll:[{overscroll:ut()}],"overscroll-x":[{"overscroll-x":ut()}],"overscroll-y":[{"overscroll-y":ut()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ae()}],"inset-x":[{"inset-x":Ae()}],"inset-y":[{"inset-y":Ae()}],start:[{start:Ae()}],end:[{end:Ae()}],top:[{top:Ae()}],right:[{right:Ae()}],bottom:[{bottom:Ae()}],left:[{left:Ae()}],visibility:["visible","invisible","collapse"],z:[{z:[hu,"auto",Zt,Gt]}],basis:[{basis:[Rh,"full","auto",d,...je()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ci,Rh,"auto","initial","none",Gt]}],grow:[{grow:["",Ci,Zt,Gt]}],shrink:[{shrink:["",Ci,Zt,Gt]}],order:[{order:[hu,"first","last","none",Zt,Gt]}],"grid-cols":[{"grid-cols":He()}],"col-start-end":[{col:ct()}],"col-start":[{"col-start":Jt()}],"col-end":[{"col-end":Jt()}],"grid-rows":[{"grid-rows":He()}],"row-start-end":[{row:ct()}],"row-start":[{"row-start":Jt()}],"row-end":[{"row-end":Jt()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Ve()}],"auto-rows":[{"auto-rows":Ve()}],gap:[{gap:je()}],"gap-x":[{"gap-x":je()}],"gap-y":[{"gap-y":je()}],"justify-content":[{justify:[...at(),"normal"]}],"justify-items":[{"justify-items":[...Tt(),"normal"]}],"justify-self":[{"justify-self":["auto",...Tt()]}],"align-content":[{content:["normal",...at()]}],"align-items":[{items:[...Tt(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Tt(),{baseline:["","last"]}]}],"place-content":[{"place-content":at()}],"place-items":[{"place-items":[...Tt(),"baseline"]}],"place-self":[{"place-self":["auto",...Tt()]}],p:[{p:je()}],px:[{px:je()}],py:[{py:je()}],ps:[{ps:je()}],pe:[{pe:je()}],pt:[{pt:je()}],pr:[{pr:je()}],pb:[{pb:je()}],pl:[{pl:je()}],m:[{m:Et()}],mx:[{mx:Et()}],my:[{my:Et()}],ms:[{ms:Et()}],me:[{me:Et()}],mt:[{mt:Et()}],mr:[{mr:Et()}],mb:[{mb:Et()}],ml:[{ml:Et()}],"space-x":[{"space-x":je()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":je()}],"space-y-reverse":["space-y-reverse"],size:[{size:gt()}],w:[{w:[d,"screen",...gt()]}],"min-w":[{"min-w":[d,"screen","none",...gt()]}],"max-w":[{"max-w":[d,"screen","none","prose",{screen:[_]},...gt()]}],h:[{h:["screen","lh",...gt()]}],"min-h":[{"min-h":["screen","lh","none",...gt()]}],"max-h":[{"max-h":["screen","lh",...gt()]}],"font-size":[{text:["base",h,Yp,kd]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[x,Zt,Xg]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Zg,Gt]}],"font-family":[{font:[TC,Gt,l]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[j,Zt,Gt]}],"line-clamp":[{"line-clamp":[Ci,"none",Zt,Xg]}],leading:[{leading:[k,...je()]}],"list-image":[{"list-image":["none",Zt,Gt]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Zt,Gt]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Be()}],"text-color":[{text:Be()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...zt(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ci,"from-font","auto",Zt,kd]}],"text-decoration-color":[{decoration:Be()}],"underline-offset":[{"underline-offset":[Ci,"auto",Zt,Gt]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:je()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Zt,Gt]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Zt,Gt]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Nt()}],"bg-repeat":[{bg:it()}],"bg-size":[{bg:Se()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},hu,Zt,Gt],radial:["",Zt,Gt],conic:[hu,Zt,Gt]},PC,SC]}],"bg-color":[{bg:Be()}],"gradient-from-pos":[{from:Ye()}],"gradient-via-pos":[{via:Ye()}],"gradient-to-pos":[{to:Ye()}],"gradient-from":[{from:Be()}],"gradient-via":[{via:Be()}],"gradient-to":[{to:Be()}],rounded:[{rounded:ot()}],"rounded-s":[{"rounded-s":ot()}],"rounded-e":[{"rounded-e":ot()}],"rounded-t":[{"rounded-t":ot()}],"rounded-r":[{"rounded-r":ot()}],"rounded-b":[{"rounded-b":ot()}],"rounded-l":[{"rounded-l":ot()}],"rounded-ss":[{"rounded-ss":ot()}],"rounded-se":[{"rounded-se":ot()}],"rounded-ee":[{"rounded-ee":ot()}],"rounded-es":[{"rounded-es":ot()}],"rounded-tl":[{"rounded-tl":ot()}],"rounded-tr":[{"rounded-tr":ot()}],"rounded-br":[{"rounded-br":ot()}],"rounded-bl":[{"rounded-bl":ot()}],"border-w":[{border:_t()}],"border-w-x":[{"border-x":_t()}],"border-w-y":[{"border-y":_t()}],"border-w-s":[{"border-s":_t()}],"border-w-e":[{"border-e":_t()}],"border-w-t":[{"border-t":_t()}],"border-w-r":[{"border-r":_t()}],"border-w-b":[{"border-b":_t()}],"border-w-l":[{"border-l":_t()}],"divide-x":[{"divide-x":_t()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":_t()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...zt(),"hidden","none"]}],"divide-style":[{divide:[...zt(),"hidden","none"]}],"border-color":[{border:Be()}],"border-color-x":[{"border-x":Be()}],"border-color-y":[{"border-y":Be()}],"border-color-s":[{"border-s":Be()}],"border-color-e":[{"border-e":Be()}],"border-color-t":[{"border-t":Be()}],"border-color-r":[{"border-r":Be()}],"border-color-b":[{"border-b":Be()}],"border-color-l":[{"border-l":Be()}],"divide-color":[{divide:Be()}],"outline-style":[{outline:[...zt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ci,Zt,Gt]}],"outline-w":[{outline:["",Ci,Yp,kd]}],"outline-color":[{outline:Be()}],shadow:[{shadow:["","none",R,jf,bf]}],"shadow-color":[{shadow:Be()}],"inset-shadow":[{"inset-shadow":["none",D,jf,bf]}],"inset-shadow-color":[{"inset-shadow":Be()}],"ring-w":[{ring:_t()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Be()}],"ring-offset-w":[{"ring-offset":[Ci,kd]}],"ring-offset-color":[{"ring-offset":Be()}],"inset-ring-w":[{"inset-ring":_t()}],"inset-ring-color":[{"inset-ring":Be()}],"text-shadow":[{"text-shadow":["none",O,jf,bf]}],"text-shadow-color":[{"text-shadow":Be()}],opacity:[{opacity:[Ci,Zt,Gt]}],"mix-blend":[{"mix-blend":[...ti(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":ti()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ci]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ot()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ot()}],"mask-image-linear-from-color":[{"mask-linear-from":Be()}],"mask-image-linear-to-color":[{"mask-linear-to":Be()}],"mask-image-t-from-pos":[{"mask-t-from":Ot()}],"mask-image-t-to-pos":[{"mask-t-to":Ot()}],"mask-image-t-from-color":[{"mask-t-from":Be()}],"mask-image-t-to-color":[{"mask-t-to":Be()}],"mask-image-r-from-pos":[{"mask-r-from":Ot()}],"mask-image-r-to-pos":[{"mask-r-to":Ot()}],"mask-image-r-from-color":[{"mask-r-from":Be()}],"mask-image-r-to-color":[{"mask-r-to":Be()}],"mask-image-b-from-pos":[{"mask-b-from":Ot()}],"mask-image-b-to-pos":[{"mask-b-to":Ot()}],"mask-image-b-from-color":[{"mask-b-from":Be()}],"mask-image-b-to-color":[{"mask-b-to":Be()}],"mask-image-l-from-pos":[{"mask-l-from":Ot()}],"mask-image-l-to-pos":[{"mask-l-to":Ot()}],"mask-image-l-from-color":[{"mask-l-from":Be()}],"mask-image-l-to-color":[{"mask-l-to":Be()}],"mask-image-x-from-pos":[{"mask-x-from":Ot()}],"mask-image-x-to-pos":[{"mask-x-to":Ot()}],"mask-image-x-from-color":[{"mask-x-from":Be()}],"mask-image-x-to-color":[{"mask-x-to":Be()}],"mask-image-y-from-pos":[{"mask-y-from":Ot()}],"mask-image-y-to-pos":[{"mask-y-to":Ot()}],"mask-image-y-from-color":[{"mask-y-from":Be()}],"mask-image-y-to-color":[{"mask-y-to":Be()}],"mask-image-radial":[{"mask-radial":[Zt,Gt]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ot()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ot()}],"mask-image-radial-from-color":[{"mask-radial-from":Be()}],"mask-image-radial-to-color":[{"mask-radial-to":Be()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":Ze()}],"mask-image-conic-pos":[{"mask-conic":[Ci]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ot()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ot()}],"mask-image-conic-from-color":[{"mask-conic-from":Be()}],"mask-image-conic-to-color":[{"mask-conic-to":Be()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Nt()}],"mask-repeat":[{mask:it()}],"mask-size":[{mask:Se()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Zt,Gt]}],filter:[{filter:["","none",Zt,Gt]}],blur:[{blur:Rt()}],brightness:[{brightness:[Ci,Zt,Gt]}],contrast:[{contrast:[Ci,Zt,Gt]}],"drop-shadow":[{"drop-shadow":["","none",ie,jf,bf]}],"drop-shadow-color":[{"drop-shadow":Be()}],grayscale:[{grayscale:["",Ci,Zt,Gt]}],"hue-rotate":[{"hue-rotate":[Ci,Zt,Gt]}],invert:[{invert:["",Ci,Zt,Gt]}],saturate:[{saturate:[Ci,Zt,Gt]}],sepia:[{sepia:["",Ci,Zt,Gt]}],"backdrop-filter":[{"backdrop-filter":["","none",Zt,Gt]}],"backdrop-blur":[{"backdrop-blur":Rt()}],"backdrop-brightness":[{"backdrop-brightness":[Ci,Zt,Gt]}],"backdrop-contrast":[{"backdrop-contrast":[Ci,Zt,Gt]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ci,Zt,Gt]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ci,Zt,Gt]}],"backdrop-invert":[{"backdrop-invert":["",Ci,Zt,Gt]}],"backdrop-opacity":[{"backdrop-opacity":[Ci,Zt,Gt]}],"backdrop-saturate":[{"backdrop-saturate":[Ci,Zt,Gt]}],"backdrop-sepia":[{"backdrop-sepia":["",Ci,Zt,Gt]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":je()}],"border-spacing-x":[{"border-spacing-x":je()}],"border-spacing-y":[{"border-spacing-y":je()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Zt,Gt]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ci,"initial",Zt,Gt]}],ease:[{ease:["linear","initial",pe,Zt,Gt]}],delay:[{delay:[Ci,Zt,Gt]}],animate:[{animate:["none",Pe,Zt,Gt]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[ae,Zt,Gt]}],"perspective-origin":[{"perspective-origin":Je()}],rotate:[{rotate:xi()}],"rotate-x":[{"rotate-x":xi()}],"rotate-y":[{"rotate-y":xi()}],"rotate-z":[{"rotate-z":xi()}],scale:[{scale:Bi()}],"scale-x":[{"scale-x":Bi()}],"scale-y":[{"scale-y":Bi()}],"scale-z":[{"scale-z":Bi()}],"scale-3d":["scale-3d"],skew:[{skew:Ys()}],"skew-x":[{"skew-x":Ys()}],"skew-y":[{"skew-y":Ys()}],transform:[{transform:[Zt,Gt,"","none","gpu","cpu"]}],"transform-origin":[{origin:Je()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:hs()}],"translate-x":[{"translate-x":hs()}],"translate-y":[{"translate-y":hs()}],"translate-z":[{"translate-z":hs()}],"translate-none":["translate-none"],accent:[{accent:Be()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Be()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Zt,Gt]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":je()}],"scroll-mx":[{"scroll-mx":je()}],"scroll-my":[{"scroll-my":je()}],"scroll-ms":[{"scroll-ms":je()}],"scroll-me":[{"scroll-me":je()}],"scroll-mt":[{"scroll-mt":je()}],"scroll-mr":[{"scroll-mr":je()}],"scroll-mb":[{"scroll-mb":je()}],"scroll-ml":[{"scroll-ml":je()}],"scroll-p":[{"scroll-p":je()}],"scroll-px":[{"scroll-px":je()}],"scroll-py":[{"scroll-py":je()}],"scroll-ps":[{"scroll-ps":je()}],"scroll-pe":[{"scroll-pe":je()}],"scroll-pt":[{"scroll-pt":je()}],"scroll-pr":[{"scroll-pr":je()}],"scroll-pb":[{"scroll-pb":je()}],"scroll-pl":[{"scroll-pl":je()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Zt,Gt]}],fill:[{fill:["none",...Be()]}],"stroke-w":[{stroke:[Ci,Yp,kd,Xg]}],stroke:[{stroke:["none",...Be()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},IC=pC(AC);function vu(...a){return IC(rb(a))}const zC=nb("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function vt({className:a,variant:l,size:h,asChild:x=!1,...j}){const k=x?ib:"button";return i.jsx(k,{"data-slot":"button",className:vu(zC({variant:l,size:h,className:a})),...j})}const DC="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function qr(a){const[l,h]=G.useState(!1),x=()=>{h(!0)},{src:j,alt:k,style:_,className:d,...I}=a;return l?i.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${d??""}`,style:_,children:i.jsx("div",{className:"flex items-center justify-center w-full h-full",children:i.jsx("img",{src:DC,alt:"Error loading image",...I,"data-original-url":j})})}):i.jsx("img",{src:j,alt:k,className:d,style:_,...I,onError:x})}const RC=({isOpen:a,onClose:l})=>{const{state:h,updateQuantity:x,removeItem:j,clearCart:k}=sp();return a?i.jsxs("div",{className:"fixed inset-0 z-50 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:l}),i.jsx("div",{className:"absolute right-0 top-0 h-full w-full max-w-md bg-black/90 backdrop-blur-md border-l border-white/20",children:i.jsxs("div",{className:"flex flex-col h-full",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/20",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-10 h-10 glass rounded-xl flex items-center justify-center",children:i.jsx(jc,{className:"w-5 h-5 text-[#18B668]"})}),i.jsxs("div",{children:[i.jsx("h2",{className:"text-xl font-bold text-white",children:"Shopping Cart"}),i.jsxs("p",{className:"text-white/60 text-sm",children:[h.itemCount," items"]})]})]}),i.jsx(vt,{variant:"ghost",size:"sm",onClick:l,className:"text-white/60 hover:text-white hover:bg-white/10",children:i.jsx(Xw,{className:"w-5 h-5"})})]}),i.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:h.items.length===0?i.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center",children:[i.jsx("div",{className:"w-16 h-16 glass rounded-2xl flex items-center justify-center mb-4",children:i.jsx(jc,{className:"w-8 h-8 text-white/40"})}),i.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Your cart is empty"}),i.jsx("p",{className:"text-white/60 mb-6",children:"Start adding some amazing tribal crafts!"}),i.jsx(vt,{onClick:l,className:"bg-[#18B668] hover:bg-[#18B668]/90 text-white",children:"Continue Shopping"})]}):i.jsxs("div",{className:"space-y-4",children:[h.items.map(_=>i.jsxs("div",{className:"glass rounded-2xl p-4",children:[i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-white/10 flex-shrink-0",children:i.jsx(qr,{src:_.image,alt:_.name,className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("h4",{className:"font-medium text-white truncate",children:_.name}),i.jsxs("p",{className:"text-sm text-white/60 truncate",children:["by ",_.artisan]}),i.jsxs("p",{className:"text-lg font-bold text-[#18B668] mt-1",children:["₹",_.price.toLocaleString()]})]}),i.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>j(_.id),className:"text-white/60 hover:text-red-400 hover:bg-red-400/10 flex-shrink-0",children:i.jsx(Py,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"flex items-center justify-between mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vt,{variant:"outline",size:"sm",onClick:()=>x(_.id,_.quantity-1),className:"w-8 h-8 p-0 border-white/20 text-white hover:bg-white/10",children:i.jsx(pm,{className:"w-3 h-3"})}),i.jsx("span",{className:"w-8 text-center text-white font-medium",children:_.quantity}),i.jsx(vt,{variant:"outline",size:"sm",onClick:()=>x(_.id,_.quantity+1),className:"w-8 h-8 p-0 border-white/20 text-white hover:bg-white/10",children:i.jsx(mo,{className:"w-3 h-3"})})]}),i.jsxs("span",{className:"font-bold text-white",children:["₹",(_.price*_.quantity).toLocaleString()]})]})]},_.id)),h.items.length>0&&i.jsx(vt,{variant:"outline",onClick:k,className:"w-full mt-4 border-red-400/30 text-red-400 hover:bg-red-400/10 hover:border-red-400",children:"Clear Cart"})]})}),h.items.length>0&&i.jsx("div",{className:"p-6 border-t border-white/20 bg-black/50",children:i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex justify-between text-white/70",children:[i.jsxs("span",{children:["Subtotal (",h.itemCount," items)"]}),i.jsxs("span",{children:["₹",h.total.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between text-white/70",children:[i.jsx("span",{children:"Shipping"}),i.jsx("span",{children:"₹99"})]}),i.jsx("div",{className:"h-px bg-white/20"}),i.jsxs("div",{className:"flex justify-between text-lg font-bold text-white",children:[i.jsx("span",{children:"Total"}),i.jsxs("span",{children:["₹",(h.total+99).toLocaleString()]})]})]}),i.jsx(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/90 text-white font-semibold py-3 rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-[#18B668]/20",children:"Proceed to Checkout"}),i.jsx("p",{className:"text-xs text-white/50 text-center",children:"Secure checkout • Free returns • 100% authentic"})]})})]})})]}):null};function LC({onOpenAuthModal:a}){const l=xo();un();const[h,x]=G.useState(!1),[j,k]=G.useState(!1),{state:_}=sp(),{user:d,logout:I}=Rd(),z=[{path:"/",label:"Home"},{path:"/destinations",label:"Destinations"},{path:"/culture",label:"Culture"},{path:"/travel-planner",label:"Plan Trip"},{path:"/marketplace",label:"Marketplace"}];return i.jsxs("nav",{className:"fixed top-0 left-0 right-0 z-50 glass backdrop-blur-lg border-b border-white/10",children:[i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs(mi,{to:"/",className:"flex items-center gap-3",children:[i.jsx(re.div,{whileHover:{scale:1.1,rotate:5},className:"w-10 h-10 bg-[#18B668] rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-lg",children:"A"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-bold text-lg",children:"Aaranya Jharkhand"}),i.jsx("div",{className:"text-gray-400 text-xs",children:"Where Forests Meet Heritage"})]})]}),i.jsxs("div",{className:"hidden md:flex items-center gap-6",children:[z.map(R=>i.jsxs(mi,{to:R.path,className:`relative transition-colors duration-300 ${l.pathname===R.path?"text-[#18B668]":"text-gray-300 hover:text-[#18B668]"}`,children:[R.label,l.pathname===R.path&&i.jsx(re.div,{layoutId:"activeTab",className:"absolute -bottom-2 left-0 right-0 h-0.5 bg-[#18B668] rounded-full"})]},R.path)),i.jsx(mi,{to:"/cart",children:i.jsxs(re.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"relative p-2 glass rounded-xl hover:bg-white/10 transition-colors",children:[i.jsx(Md,{className:"w-5 h-5 text-white"}),_.itemCount>0&&i.jsx("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[#18B668] text-white text-xs rounded-full flex items-center justify-center font-bold",children:_.itemCount>9?"9+":_.itemCount})]})}),d?i.jsxs("div",{className:"relative group",children:[i.jsxs(re.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-2 glass rounded-xl hover:bg-white/10 transition-colors flex items-center gap-2",children:[i.jsx(Hh,{className:"w-5 h-5 text-white"}),i.jsx("span",{className:"text-white text-sm hidden md:block",children:d.name}),d.userType==="host"&&i.jsx("span",{className:`text-black text-xs px-2 py-1 rounded-full font-medium hidden md:block ${d.hostType==="vendor"?"bg-[#F59E0B]":"bg-[#0EA5E9]"}`,children:d.hostType==="vendor"?"VENDOR":"HOTEL OWNER"})]}),i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass-premium rounded-xl py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50",children:[i.jsx(mi,{to:d.userType==="host"?"/host-dashboard":"/guest-dashboard",className:"block px-4 py-2 text-white hover:bg-white/10 transition-colors",children:d.userType==="host"?"Host Dashboard":"My Dashboard"}),i.jsx(mi,{to:"/profile",className:"block px-4 py-2 text-white hover:bg-white/10 transition-colors",children:"Edit Profile"}),i.jsx("button",{onClick:I,className:"block w-full text-left px-4 py-2 text-white hover:bg-white/10 transition-colors",children:"Sign Out"})]})]}):i.jsxs("div",{className:"relative group",children:[i.jsxs(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-4 py-2 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-medium rounded-xl hover:shadow-lg hover:shadow-[#18B668]/25 transition-all duration-300 text-sm flex items-center gap-2",children:[i.jsx(Gg,{className:"w-4 h-4"}),i.jsx("span",{children:"Sign In / Join"}),i.jsx("svg",{className:"w-4 h-4 transition-transform group-hover:rotate-180",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),i.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 glass-premium rounded-xl py-2 opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-300 z-50",children:[i.jsx(mi,{to:"/auth?mode=signin",className:"block px-4 py-3 text-white hover:bg-white/10 transition-colors border-b border-white/10",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Gg,{className:"w-4 h-4 text-[#18B668]"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Sign In"}),i.jsx("div",{className:"text-xs text-white/60",children:"Access your account"})]})]})}),i.jsx(mi,{to:"/auth?mode=signup",className:"block px-4 py-3 text-white hover:bg-white/10 transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mx,{className:"w-4 h-4 text-[#F59E0B]"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Join Now"}),i.jsx("div",{className:"text-xs text-white/60",children:"Start your journey"})]})]})})]})]}),i.jsx(mi,{to:"/travel-planner",children:i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-2 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-medium rounded-xl hover:shadow-lg hover:shadow-[#18B668]/25 transition-all duration-300",children:"Plan Trip"})})]}),i.jsx("div",{className:"md:hidden",children:i.jsxs(re.button,{whileTap:{scale:.95},onClick:()=>x(!h),className:"w-8 h-8 flex flex-col justify-center items-center gap-1",children:[i.jsx(re.div,{animate:{rotate:h?45:0,y:h?6:0},className:"w-6 h-0.5 bg-white transition-all duration-300"}),i.jsx(re.div,{animate:{opacity:h?0:1},className:"w-6 h-0.5 bg-white transition-all duration-300"}),i.jsx(re.div,{animate:{rotate:h?-45:0,y:h?-6:0},className:"w-6 h-0.5 bg-white transition-all duration-300"})]})})]}),i.jsx(re.div,{initial:!1,animate:{height:h?"auto":0,opacity:h?1:0},transition:{duration:.3},className:"md:hidden overflow-hidden",children:i.jsxs("div",{className:"pt-4 pb-2 space-y-2",children:[z.map((R,D)=>i.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:h?1:0,x:h?0:-20},transition:{delay:D*.1,duration:.3},children:i.jsx(mi,{to:R.path,onClick:()=>x(!1),className:`block py-2 px-4 rounded-lg transition-colors duration-300 ${l.pathname===R.path?"text-[#18B668] bg-[#18B668]/10":"text-gray-300 hover:text-[#18B668] hover:bg-white/5"}`,children:R.label})},R.path)),i.jsxs(re.div,{initial:{opacity:0,x:-20},animate:{opacity:h?1:0,x:h?0:-20},transition:{delay:z.length*.1,duration:.3},className:"pt-2 space-y-2",children:[i.jsxs(mi,{to:"/cart",onClick:()=>x(!1),className:"flex items-center justify-between w-full py-2 px-4 text-white hover:bg-white/10 rounded-lg transition-colors",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Md,{className:"w-4 h-4"}),i.jsx("span",{children:"Cart"})]}),_.itemCount>0&&i.jsx("span",{className:"w-5 h-5 bg-[#18B668] text-white text-xs rounded-full flex items-center justify-center font-bold",children:_.itemCount>9?"9+":_.itemCount})]}),d?i.jsxs("div",{className:"space-y-2 pt-2 border-t border-white/10",children:[i.jsxs("div",{className:"px-4 py-2",children:[i.jsx("div",{className:"text-white font-medium",children:d.name}),d.userType==="host"&&i.jsx("div",{className:`inline-block text-xs px-2 py-1 rounded-full font-medium mt-1 ${d.hostType==="vendor"?"bg-[#F59E0B] text-black":"bg-[#0EA5E9] text-black"}`,children:d.hostType==="vendor"?"VENDOR":"HOTEL OWNER"})]}),i.jsx(mi,{to:d.userType==="host"?"/host-dashboard":"/guest-dashboard",onClick:()=>x(!1),className:"block py-2 px-4 text-white hover:bg-white/10 rounded-lg transition-colors",children:d.userType==="host"?"Host Dashboard":"My Dashboard"}),i.jsx(mi,{to:"/profile",onClick:()=>x(!1),className:"block py-2 px-4 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Edit Profile"}),i.jsx("button",{onClick:()=>{I(),x(!1)},className:"block w-full text-left py-2 px-4 text-white hover:bg-white/10 rounded-lg transition-colors",children:"Sign Out"})]}):i.jsxs("div",{className:"space-y-2 pt-2 border-t border-white/10",children:[i.jsx(mi,{to:"/auth?mode=signin",onClick:()=>x(!1),className:"block py-3 px-4 text-white hover:bg-white/10 rounded-lg transition-colors border border-white/20",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Gg,{className:"w-4 h-4 text-[#18B668]"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Sign In"}),i.jsx("div",{className:"text-xs text-white/60",children:"Access your account"})]})]})}),i.jsx(mi,{to:"/auth?mode=signup",onClick:()=>x(!1),className:"block py-3 px-4 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-medium rounded-lg transition-colors",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Mx,{className:"w-4 h-4"}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:"Join Now"}),i.jsx("div",{className:"text-xs text-white/60",children:"Start your journey"})]})]})})]}),i.jsx(mi,{to:"/travel-planner",onClick:()=>x(!1),className:"block py-2 px-4 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-medium rounded-lg text-center",children:"Plan Your Trip"})]})]})})]}),i.jsx(RC,{isOpen:j,onClose:()=>k(!1)})]})}const BC=[{name:"Facebook",icon:"📘",color:"from-blue-400 to-blue-600",handle:"@AaranyaJharkhand"},{name:"Instagram",icon:"📸",color:"from-pink-400 to-purple-600",handle:"@AaranyaJharkhand"},{name:"Twitter",icon:"🐦",color:"from-sky-400 to-blue-500",handle:"@AaranyaJharkhand"},{name:"YouTube",icon:"📺",color:"from-red-400 to-red-600",handle:"@AaranyaJharkhand"},{name:"WhatsApp",icon:"💬",color:"from-green-400 to-green-600",handle:"+91 98765 43210"}],FC=[{title:"Destinations",links:[{name:"Netarhat",path:"/destinations"},{name:"Hundru Falls",path:"/destinations"},{name:"Betla National Park",path:"/destinations"},{name:"Deoghar",path:"/destinations"},{name:"Patratu Valley",path:"/destinations"}]},{title:"Experiences",links:[{name:"Cultural Tours",path:"/culture"},{name:"Wildlife Safari",path:"/destinations"},{name:"Adventure Sports",path:"/destinations"},{name:"Spiritual Journey",path:"/culture"},{name:"Photography Tours",path:"/destinations"}]},{title:"Plan Your Trip",links:[{name:"Travel Planner",path:"/travel-planner"},{name:"Best Time to Visit",path:"/destinations"},{name:"Accommodation",path:"/travel-planner"},{name:"Transportation",path:"/travel-planner"},{name:"Travel Tips",path:"/travel-planner"}]},{title:"About",links:[{name:"Our Story",path:"/"},{name:"Community Impact",path:"/culture"},{name:"Marketplace",path:"/marketplace"},{name:"Sustainability",path:"/culture"},{name:"Contact Us",path:"/"}]}];function OC(){return i.jsxs("footer",{className:"relative bg-gradient-to-b from-black to-slate-900 pt-20 pb-8 overflow-hidden",children:[i.jsx("div",{className:"absolute inset-0 opacity-10",children:i.jsxs("svg",{viewBox:"0 0 800 400",className:"w-full h-full",fill:"currentColor",children:[i.jsx("defs",{children:i.jsxs("pattern",{id:"tribalPattern",x:"0",y:"0",width:"100",height:"100",patternUnits:"userSpaceOnUse",children:[i.jsx("path",{d:"M20,20 L40,40 L60,20 L80,40 L80,60 L60,80 L40,60 L20,80 Z",stroke:"currentColor",strokeWidth:"1",fill:"none"}),i.jsx("circle",{cx:"50",cy:"50",r:"5",fill:"currentColor"}),i.jsx("path",{d:"M30,30 L70,30 M30,70 L70,70 M30,30 L30,70 M70,30 L70,70",stroke:"currentColor",strokeWidth:"0.5"})]})}),i.jsx("rect",{width:"100%",height:"100%",fill:"url(#tribalPattern)"})]})}),i.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[i.jsxs("h3",{className:"text-4xl font-bold text-white mb-4",children:["Stay Connected with ",i.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-sky-400 bg-clip-text text-transparent",children:"Aaranya Jharkhand"})]}),i.jsx("p",{className:"text-gray-400 text-lg mb-8 max-w-2xl mx-auto",children:"Get the latest updates on new destinations, cultural events, and exclusive travel offers"}),i.jsxs(re.div,{initial:{opacity:0,scale:.9},whileInView:{opacity:1,scale:1},transition:{delay:.3,duration:.6},viewport:{once:!0},className:"flex flex-col sm:flex-row gap-4 justify-center items-center max-w-md mx-auto",children:[i.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-3 glass-dark rounded-xl text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-colors"}),i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-6 py-3 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl whitespace-nowrap hover:shadow-lg hover:shadow-emerald-500/25 transition-all duration-300",children:"Subscribe ✨"})]})]}),i.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.2},viewport:{once:!0},className:"flex flex-wrap justify-center gap-6 mb-16",children:BC.map((a,l)=>i.jsx(re.div,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{delay:.4+l*.1,duration:.5},viewport:{once:!0},whileHover:{scale:1.1,y:-5},className:"group cursor-pointer",children:i.jsxs("div",{className:`w-16 h-16 bg-gradient-to-r ${a.color} rounded-2xl flex items-center justify-center relative overflow-hidden shadow-lg hover:shadow-xl transition-all duration-300`,children:[i.jsx(re.div,{className:`absolute inset-0 bg-gradient-to-r ${a.color} opacity-0 group-hover:opacity-30 blur-xl transition-opacity duration-300`,style:{filter:"blur(15px)"}}),i.jsx("span",{className:"text-2xl relative z-10",children:a.icon}),i.jsx(re.div,{initial:{opacity:0,y:10},whileHover:{opacity:1,y:0},className:"absolute -bottom-12 left-1/2 transform -translate-x-1/2 glass-dark rounded-lg px-3 py-2 text-xs text-white whitespace-nowrap",children:a.handle})]})},a.name))}),i.jsx(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.4},viewport:{once:!0},className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-12",children:FC.map((a,l)=>i.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.5+l*.1,duration:.6},viewport:{once:!0},children:[i.jsxs("h4",{className:"text-white font-bold text-lg mb-4 relative",children:[a.title,i.jsx(re.div,{initial:{scaleX:0},whileInView:{scaleX:1},transition:{delay:.7+l*.1,duration:.8},viewport:{once:!0},className:"h-0.5 bg-gradient-to-r from-emerald-400 to-transparent mt-2 origin-left"})]}),i.jsx("ul",{className:"space-y-2",children:a.links.map((h,x)=>i.jsx(re.li,{initial:{opacity:0,x:-10},whileInView:{opacity:1,x:0},transition:{delay:.8+l*.1+x*.05,duration:.4},viewport:{once:!0},children:i.jsx(mi,{to:h.path,children:i.jsx(re.span,{whileHover:{x:5,color:"#18B668"},className:"text-gray-400 hover:text-emerald-400 transition-all duration-300 text-sm block",children:h.name})})},h.name))})]},a.title))}),i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.6},viewport:{once:!0},className:"border-t border-white/10 pt-8",children:[i.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx(re.div,{whileHover:{scale:1.1,rotate:5},className:"w-12 h-12 bg-gradient-to-r from-emerald-400 to-sky-400 rounded-xl flex items-center justify-center",children:i.jsx("span",{className:"text-black font-bold text-xl",children:"A"})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-white font-bold text-lg",children:"Aaranya Jharkhand"}),i.jsx("div",{className:"text-gray-400 text-sm",children:"© 2024 All rights reserved"})]})]}),i.jsx("div",{className:"flex gap-6 text-sm",children:["Privacy Policy","Terms of Service","Support"].map((a,l)=>i.jsx(re.a,{href:"#",whileHover:{y:-2,color:"#10B981"},className:"text-gray-400 hover:text-emerald-400 transition-all duration-300",children:a},a))})]}),i.jsx("div",{className:"absolute bottom-4 left-4 opacity-30",children:i.jsx(re.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-8 h-8 border-2 border-emerald-400 rounded-full",children:i.jsx("div",{className:"w-full h-full border-2 border-sky-400 rounded-full rotate-45"})})}),i.jsx("div",{className:"absolute bottom-4 right-4 opacity-30",children:i.jsx(re.div,{animate:{rotate:-360},transition:{duration:15,repeat:1/0,ease:"linear"},className:"w-6 h-6 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full"})})]})]}),i.jsx(re.button,{initial:{opacity:0,scale:0},whileInView:{opacity:1,scale:1},transition:{delay:1,duration:.5},viewport:{once:!0},whileHover:{scale:1.1,y:-2},whileTap:{scale:.9},onClick:()=>window.scrollTo({top:0,behavior:"smooth"}),className:"fixed bottom-8 right-8 w-12 h-12 bg-gradient-to-r from-emerald-400 to-sky-400 rounded-full flex items-center justify-center text-black font-bold shadow-lg hover:shadow-xl z-50 transition-all duration-300",children:"↑"})]})}function Zs({className:a,type:l,...h}){return i.jsx("input",{type:l,"data-slot":"input",className:vu("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",a),...h})}var VC=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ap=VC.reduce((a,l)=>{const h=tb(`Primitive.${l}`),x=G.forwardRef((j,k)=>{const{asChild:_,...d}=j,I=_?h:l;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),i.jsx(I,{...d,ref:k})});return x.displayName=`Primitive.${l}`,{...a,[l]:x}},{}),Dx=globalThis?.document?G.useLayoutEffect:()=>{};function $C(a,l){return G.useReducer((h,x)=>l[h][x]??h,a)}var jm=a=>{const{present:l,children:h}=a,x=UC(l),j=typeof h=="function"?h({present:x.isPresent}):G.Children.only(h),k=Ld(x.ref,HC(j));return typeof h=="function"||x.isPresent?G.cloneElement(j,{ref:k}):null};jm.displayName="Presence";function UC(a){const[l,h]=G.useState(),x=G.useRef(null),j=G.useRef(a),k=G.useRef("none"),_=a?"mounted":"unmounted",[d,I]=$C(_,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return G.useEffect(()=>{const z=Nf(x.current);k.current=d==="mounted"?z:"none"},[d]),Dx(()=>{const z=x.current,R=j.current;if(R!==a){const O=k.current,ie=Nf(z);a?I("MOUNT"):ie==="none"||z?.display==="none"?I("UNMOUNT"):I(R&&O!==ie?"ANIMATION_OUT":"UNMOUNT"),j.current=a}},[a,I]),Dx(()=>{if(l){let z;const R=l.ownerDocument.defaultView??window,D=ie=>{const ae=Nf(x.current).includes(CSS.escape(ie.animationName));if(ie.target===l&&ae&&(I("ANIMATION_END"),!j.current)){const se=l.style.animationFillMode;l.style.animationFillMode="forwards",z=R.setTimeout(()=>{l.style.animationFillMode==="forwards"&&(l.style.animationFillMode=se)})}},O=ie=>{ie.target===l&&(k.current=Nf(x.current))};return l.addEventListener("animationstart",O),l.addEventListener("animationcancel",D),l.addEventListener("animationend",D),()=>{R.clearTimeout(z),l.removeEventListener("animationstart",O),l.removeEventListener("animationcancel",D),l.removeEventListener("animationend",D)}}else I("ANIMATION_END")},[l,I]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:G.useCallback(z=>{x.current=z?getComputedStyle(z):null,h(z)},[])}}function Nf(a){return a?.animationName||"none"}function HC(a){let l=Object.getOwnPropertyDescriptor(a.props,"ref")?.get,h=l&&"isReactWarning"in l&&l.isReactWarning;return h?a.ref:(l=Object.getOwnPropertyDescriptor(a,"ref")?.get,h=l&&"isReactWarning"in l&&l.isReactWarning,h?a.props.ref:a.props.ref||a.ref)}function WC(a,l=[]){let h=[];function x(k,_){const d=G.createContext(_),I=h.length;h=[...h,_];const z=D=>{const{scope:O,children:ie,...Q}=D,ae=O?.[a]?.[I]||d,se=G.useMemo(()=>Q,Object.values(Q));return i.jsx(ae.Provider,{value:se,children:ie})};z.displayName=k+"Provider";function R(D,O){const ie=O?.[a]?.[I]||d,Q=G.useContext(ie);if(Q)return Q;if(_!==void 0)return _;throw new Error(`\`${D}\` must be used within \`${k}\``)}return[z,R]}const j=()=>{const k=h.map(_=>G.createContext(_));return function(d){const I=d?.[a]||k;return G.useMemo(()=>({[`__scope${a}`]:{...d,[a]:I}}),[d,I])}};return j.scopeName=a,[x,qC(j,...l)]}function qC(...a){const l=a[0];if(a.length===1)return l;const h=()=>{const x=a.map(j=>({useScope:j(),scopeName:j.scopeName}));return function(k){const _=x.reduce((d,{useScope:I,scopeName:z})=>{const D=I(k)[`__scope${z}`];return{...d,...D}},{});return G.useMemo(()=>({[`__scope${l.scopeName}`]:_}),[_])}};return h.scopeName=l.scopeName,h}function Cd(a){const l=G.useRef(a);return G.useEffect(()=>{l.current=a}),G.useMemo(()=>(...h)=>l.current?.(...h),[])}var GC=G.createContext(void 0);function ZC(a){const l=G.useContext(GC);return a||l||"ltr"}function XC(a,[l,h]){return Math.min(h,Math.max(l,a))}function zd(a,l,{checkForDefaultPrevented:h=!0}={}){return function(j){if(a?.(j),h===!1||!j.defaultPrevented)return l?.(j)}}function YC(a,l){return G.useReducer((h,x)=>l[h][x]??h,a)}var My="ScrollArea",[gb,nE]=WC(My),[JC,yo]=gb(My),xb=G.forwardRef((a,l)=>{const{__scopeScrollArea:h,type:x="hover",dir:j,scrollHideDelay:k=600,..._}=a,[d,I]=G.useState(null),[z,R]=G.useState(null),[D,O]=G.useState(null),[ie,Q]=G.useState(null),[ae,se]=G.useState(null),[pe,Pe]=G.useState(0),[Ie,Ze]=G.useState(0),[Je,Xe]=G.useState(!1),[ut,je]=G.useState(!1),Ae=Ld(l,ct=>I(ct)),He=ZC(j);return i.jsx(JC,{scope:h,type:x,dir:He,scrollHideDelay:k,scrollArea:d,viewport:z,onViewportChange:R,content:D,onContentChange:O,scrollbarX:ie,onScrollbarXChange:Q,scrollbarXEnabled:Je,onScrollbarXEnabledChange:Xe,scrollbarY:ae,onScrollbarYChange:se,scrollbarYEnabled:ut,onScrollbarYEnabledChange:je,onCornerWidthChange:Pe,onCornerHeightChange:Ze,children:i.jsx(ap.div,{dir:He,..._,ref:Ae,style:{position:"relative","--radix-scroll-area-corner-width":pe+"px","--radix-scroll-area-corner-height":Ie+"px",...a.style}})})});xb.displayName=My;var yb="ScrollAreaViewport",vb=G.forwardRef((a,l)=>{const{__scopeScrollArea:h,children:x,nonce:j,...k}=a,_=yo(yb,h),d=G.useRef(null),I=Ld(l,d,_.onViewportChange);return i.jsxs(i.Fragment,{children:[i.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:j}),i.jsx(ap.div,{"data-radix-scroll-area-viewport":"",...k,ref:I,style:{overflowX:_.scrollbarXEnabled?"scroll":"hidden",overflowY:_.scrollbarYEnabled?"scroll":"hidden",...a.style},children:i.jsx("div",{ref:_.onContentChange,style:{minWidth:"100%",display:"table"},children:x})})]})});vb.displayName=yb;var Ll="ScrollAreaScrollbar",_b=G.forwardRef((a,l)=>{const{forceMount:h,...x}=a,j=yo(Ll,a.__scopeScrollArea),{onScrollbarXEnabledChange:k,onScrollbarYEnabledChange:_}=j,d=a.orientation==="horizontal";return G.useEffect(()=>(d?k(!0):_(!0),()=>{d?k(!1):_(!1)}),[d,k,_]),j.type==="hover"?i.jsx(KC,{...x,ref:l,forceMount:h}):j.type==="scroll"?i.jsx(QC,{...x,ref:l,forceMount:h}):j.type==="auto"?i.jsx(wb,{...x,ref:l,forceMount:h}):j.type==="always"?i.jsx(Ay,{...x,ref:l}):null});_b.displayName=Ll;var KC=G.forwardRef((a,l)=>{const{forceMount:h,...x}=a,j=yo(Ll,a.__scopeScrollArea),[k,_]=G.useState(!1);return G.useEffect(()=>{const d=j.scrollArea;let I=0;if(d){const z=()=>{window.clearTimeout(I),_(!0)},R=()=>{I=window.setTimeout(()=>_(!1),j.scrollHideDelay)};return d.addEventListener("pointerenter",z),d.addEventListener("pointerleave",R),()=>{window.clearTimeout(I),d.removeEventListener("pointerenter",z),d.removeEventListener("pointerleave",R)}}},[j.scrollArea,j.scrollHideDelay]),i.jsx(jm,{present:h||k,children:i.jsx(wb,{"data-state":k?"visible":"hidden",...x,ref:l})})}),QC=G.forwardRef((a,l)=>{const{forceMount:h,...x}=a,j=yo(Ll,a.__scopeScrollArea),k=a.orientation==="horizontal",_=Yf(()=>I("SCROLL_END"),100),[d,I]=YC("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return G.useEffect(()=>{if(d==="idle"){const z=window.setTimeout(()=>I("HIDE"),j.scrollHideDelay);return()=>window.clearTimeout(z)}},[d,j.scrollHideDelay,I]),G.useEffect(()=>{const z=j.viewport,R=k?"scrollLeft":"scrollTop";if(z){let D=z[R];const O=()=>{const ie=z[R];D!==ie&&(I("SCROLL"),_()),D=ie};return z.addEventListener("scroll",O),()=>z.removeEventListener("scroll",O)}},[j.viewport,k,I,_]),i.jsx(jm,{present:h||d!=="hidden",children:i.jsx(Ay,{"data-state":d==="hidden"?"hidden":"visible",...x,ref:l,onPointerEnter:zd(a.onPointerEnter,()=>I("POINTER_ENTER")),onPointerLeave:zd(a.onPointerLeave,()=>I("POINTER_LEAVE"))})})}),wb=G.forwardRef((a,l)=>{const h=yo(Ll,a.__scopeScrollArea),{forceMount:x,...j}=a,[k,_]=G.useState(!1),d=a.orientation==="horizontal",I=Yf(()=>{if(h.viewport){const z=h.viewport.offsetWidth<h.viewport.scrollWidth,R=h.viewport.offsetHeight<h.viewport.scrollHeight;_(d?z:R)}},10);return Gh(h.viewport,I),Gh(h.content,I),i.jsx(jm,{present:x||k,children:i.jsx(Ay,{"data-state":k?"visible":"hidden",...j,ref:l})})}),Ay=G.forwardRef((a,l)=>{const{orientation:h="vertical",...x}=a,j=yo(Ll,a.__scopeScrollArea),k=G.useRef(null),_=G.useRef(0),[d,I]=G.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),z=Sb(d.viewport,d.content),R={...x,sizes:d,onSizesChange:I,hasThumb:z>0&&z<1,onThumbChange:O=>k.current=O,onThumbPointerUp:()=>_.current=0,onThumbPointerDown:O=>_.current=O};function D(O,ie){return n3(O,_.current,d,ie)}return h==="horizontal"?i.jsx(e3,{...R,ref:l,onThumbPositionChange:()=>{if(j.viewport&&k.current){const O=j.viewport.scrollLeft,ie=Iv(O,d,j.dir);k.current.style.transform=`translate3d(${ie}px, 0, 0)`}},onWheelScroll:O=>{j.viewport&&(j.viewport.scrollLeft=O)},onDragScroll:O=>{j.viewport&&(j.viewport.scrollLeft=D(O,j.dir))}}):h==="vertical"?i.jsx(t3,{...R,ref:l,onThumbPositionChange:()=>{if(j.viewport&&k.current){const O=j.viewport.scrollTop,ie=Iv(O,d);k.current.style.transform=`translate3d(0, ${ie}px, 0)`}},onWheelScroll:O=>{j.viewport&&(j.viewport.scrollTop=O)},onDragScroll:O=>{j.viewport&&(j.viewport.scrollTop=D(O))}}):null}),e3=G.forwardRef((a,l)=>{const{sizes:h,onSizesChange:x,...j}=a,k=yo(Ll,a.__scopeScrollArea),[_,d]=G.useState(),I=G.useRef(null),z=Ld(l,I,k.onScrollbarXChange);return G.useEffect(()=>{I.current&&d(getComputedStyle(I.current))},[I]),i.jsx(jb,{"data-orientation":"horizontal",...j,ref:z,sizes:h,style:{bottom:0,left:k.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:k.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Xf(h)+"px",...a.style},onThumbPointerDown:R=>a.onThumbPointerDown(R.x),onDragScroll:R=>a.onDragScroll(R.x),onWheelScroll:(R,D)=>{if(k.viewport){const O=k.viewport.scrollLeft+R.deltaX;a.onWheelScroll(O),Cb(O,D)&&R.preventDefault()}},onResize:()=>{I.current&&k.viewport&&_&&x({content:k.viewport.scrollWidth,viewport:k.viewport.offsetWidth,scrollbar:{size:I.current.clientWidth,paddingStart:Vf(_.paddingLeft),paddingEnd:Vf(_.paddingRight)}})}})}),t3=G.forwardRef((a,l)=>{const{sizes:h,onSizesChange:x,...j}=a,k=yo(Ll,a.__scopeScrollArea),[_,d]=G.useState(),I=G.useRef(null),z=Ld(l,I,k.onScrollbarYChange);return G.useEffect(()=>{I.current&&d(getComputedStyle(I.current))},[I]),i.jsx(jb,{"data-orientation":"vertical",...j,ref:z,sizes:h,style:{top:0,right:k.dir==="ltr"?0:void 0,left:k.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Xf(h)+"px",...a.style},onThumbPointerDown:R=>a.onThumbPointerDown(R.y),onDragScroll:R=>a.onDragScroll(R.y),onWheelScroll:(R,D)=>{if(k.viewport){const O=k.viewport.scrollTop+R.deltaY;a.onWheelScroll(O),Cb(O,D)&&R.preventDefault()}},onResize:()=>{I.current&&k.viewport&&_&&x({content:k.viewport.scrollHeight,viewport:k.viewport.offsetHeight,scrollbar:{size:I.current.clientHeight,paddingStart:Vf(_.paddingTop),paddingEnd:Vf(_.paddingBottom)}})}})}),[i3,bb]=gb(Ll),jb=G.forwardRef((a,l)=>{const{__scopeScrollArea:h,sizes:x,hasThumb:j,onThumbChange:k,onThumbPointerUp:_,onThumbPointerDown:d,onThumbPositionChange:I,onDragScroll:z,onWheelScroll:R,onResize:D,...O}=a,ie=yo(Ll,h),[Q,ae]=G.useState(null),se=Ld(l,Ae=>ae(Ae)),pe=G.useRef(null),Pe=G.useRef(""),Ie=ie.viewport,Ze=x.content-x.viewport,Je=Cd(R),Xe=Cd(I),ut=Yf(D,10);function je(Ae){if(pe.current){const He=Ae.clientX-pe.current.left,ct=Ae.clientY-pe.current.top;z({x:He,y:ct})}}return G.useEffect(()=>{const Ae=He=>{const ct=He.target;Q?.contains(ct)&&Je(He,Ze)};return document.addEventListener("wheel",Ae,{passive:!1}),()=>document.removeEventListener("wheel",Ae,{passive:!1})},[Ie,Q,Ze,Je]),G.useEffect(Xe,[x,Xe]),Gh(Q,ut),Gh(ie.content,ut),i.jsx(i3,{scope:h,scrollbar:Q,hasThumb:j,onThumbChange:Cd(k),onThumbPointerUp:Cd(_),onThumbPositionChange:Xe,onThumbPointerDown:Cd(d),children:i.jsx(ap.div,{...O,ref:se,style:{position:"absolute",...O.style},onPointerDown:zd(a.onPointerDown,Ae=>{Ae.button===0&&(Ae.target.setPointerCapture(Ae.pointerId),pe.current=Q.getBoundingClientRect(),Pe.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",ie.viewport&&(ie.viewport.style.scrollBehavior="auto"),je(Ae))}),onPointerMove:zd(a.onPointerMove,je),onPointerUp:zd(a.onPointerUp,Ae=>{const He=Ae.target;He.hasPointerCapture(Ae.pointerId)&&He.releasePointerCapture(Ae.pointerId),document.body.style.webkitUserSelect=Pe.current,ie.viewport&&(ie.viewport.style.scrollBehavior=""),pe.current=null})})})}),Of="ScrollAreaThumb",Nb=G.forwardRef((a,l)=>{const{forceMount:h,...x}=a,j=bb(Of,a.__scopeScrollArea);return i.jsx(jm,{present:h||j.hasThumb,children:i.jsx(s3,{ref:l,...x})})}),s3=G.forwardRef((a,l)=>{const{__scopeScrollArea:h,style:x,...j}=a,k=yo(Of,h),_=bb(Of,h),{onThumbPositionChange:d}=_,I=Ld(l,D=>_.onThumbChange(D)),z=G.useRef(void 0),R=Yf(()=>{z.current&&(z.current(),z.current=void 0)},100);return G.useEffect(()=>{const D=k.viewport;if(D){const O=()=>{if(R(),!z.current){const ie=a3(D,d);z.current=ie,d()}};return d(),D.addEventListener("scroll",O),()=>D.removeEventListener("scroll",O)}},[k.viewport,R,d]),i.jsx(ap.div,{"data-state":_.hasThumb?"visible":"hidden",...j,ref:I,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...x},onPointerDownCapture:zd(a.onPointerDownCapture,D=>{const ie=D.target.getBoundingClientRect(),Q=D.clientX-ie.left,ae=D.clientY-ie.top;_.onThumbPointerDown({x:Q,y:ae})}),onPointerUp:zd(a.onPointerUp,_.onThumbPointerUp)})});Nb.displayName=Of;var Iy="ScrollAreaCorner",kb=G.forwardRef((a,l)=>{const h=yo(Iy,a.__scopeScrollArea),x=!!(h.scrollbarX&&h.scrollbarY);return h.type!=="scroll"&&x?i.jsx(r3,{...a,ref:l}):null});kb.displayName=Iy;var r3=G.forwardRef((a,l)=>{const{__scopeScrollArea:h,...x}=a,j=yo(Iy,h),[k,_]=G.useState(0),[d,I]=G.useState(0),z=!!(k&&d);return Gh(j.scrollbarX,()=>{const R=j.scrollbarX?.offsetHeight||0;j.onCornerHeightChange(R),I(R)}),Gh(j.scrollbarY,()=>{const R=j.scrollbarY?.offsetWidth||0;j.onCornerWidthChange(R),_(R)}),z?i.jsx(ap.div,{...x,ref:l,style:{width:k,height:d,position:"absolute",right:j.dir==="ltr"?0:void 0,left:j.dir==="rtl"?0:void 0,bottom:0,...a.style}}):null});function Vf(a){return a?parseInt(a,10):0}function Sb(a,l){const h=a/l;return isNaN(h)?0:h}function Xf(a){const l=Sb(a.viewport,a.content),h=a.scrollbar.paddingStart+a.scrollbar.paddingEnd,x=(a.scrollbar.size-h)*l;return Math.max(x,18)}function n3(a,l,h,x="ltr"){const j=Xf(h),k=j/2,_=l||k,d=j-_,I=h.scrollbar.paddingStart+_,z=h.scrollbar.size-h.scrollbar.paddingEnd-d,R=h.content-h.viewport,D=x==="ltr"?[0,R]:[R*-1,0];return Tb([I,z],D)(a)}function Iv(a,l,h="ltr"){const x=Xf(l),j=l.scrollbar.paddingStart+l.scrollbar.paddingEnd,k=l.scrollbar.size-j,_=l.content-l.viewport,d=k-x,I=h==="ltr"?[0,_]:[_*-1,0],z=XC(a,I);return Tb([0,_],[0,d])(z)}function Tb(a,l){return h=>{if(a[0]===a[1]||l[0]===l[1])return l[0];const x=(l[1]-l[0])/(a[1]-a[0]);return l[0]+x*(h-a[0])}}function Cb(a,l){return a>0&&a<l}var a3=(a,l=()=>{})=>{let h={left:a.scrollLeft,top:a.scrollTop},x=0;return(function j(){const k={left:a.scrollLeft,top:a.scrollTop},_=h.left!==k.left,d=h.top!==k.top;(_||d)&&l(),h=k,x=window.requestAnimationFrame(j)})(),()=>window.cancelAnimationFrame(x)};function Yf(a,l){const h=Cd(a),x=G.useRef(0);return G.useEffect(()=>()=>window.clearTimeout(x.current),[]),G.useCallback(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(h,l)},[h,l])}function Gh(a,l){const h=Cd(l);Dx(()=>{let x=0;if(a){const j=new ResizeObserver(()=>{cancelAnimationFrame(x),x=window.requestAnimationFrame(h)});return j.observe(a),()=>{window.cancelAnimationFrame(x),j.unobserve(a)}}},[a,h])}var o3=xb,l3=vb,c3=kb;function u3({className:a,children:l,...h}){return i.jsxs(o3,{"data-slot":"scroll-area",className:vu("relative",a),...h,children:[i.jsx(l3,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:l}),i.jsx(d3,{}),i.jsx(c3,{})]})}function d3({className:a,orientation:l="vertical",...h}){return i.jsx(_b,{"data-slot":"scroll-area-scrollbar",orientation:l,className:vu("flex touch-none p-px transition-colors select-none",l==="vertical"&&"h-full w-2.5 border-l border-l-transparent",l==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",a),...h,children:i.jsx(Nb,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}function h3(a){if(typeof document>"u")return;let l=document.head||document.getElementsByTagName("head")[0],h=document.createElement("style");h.type="text/css",l.appendChild(h),h.styleSheet?h.styleSheet.cssText=a:h.appendChild(document.createTextNode(a))}const p3=a=>{switch(a){case"success":return g3;case"info":return y3;case"warning":return x3;case"error":return v3;default:return null}},m3=Array(12).fill(0),f3=({visible:a,className:l})=>kt.createElement("div",{className:["sonner-loading-wrapper",l].filter(Boolean).join(" "),"data-visible":a},kt.createElement("div",{className:"sonner-spinner"},m3.map((h,x)=>kt.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${x}`})))),g3=kt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},kt.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),x3=kt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},kt.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),y3=kt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},kt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),v3=kt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},kt.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),_3=kt.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},kt.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),kt.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),w3=()=>{const[a,l]=kt.useState(document.hidden);return kt.useEffect(()=>{const h=()=>{l(document.hidden)};return document.addEventListener("visibilitychange",h),()=>window.removeEventListener("visibilitychange",h)},[]),a};let Rx=1;class b3{constructor(){this.subscribe=l=>(this.subscribers.push(l),()=>{const h=this.subscribers.indexOf(l);this.subscribers.splice(h,1)}),this.publish=l=>{this.subscribers.forEach(h=>h(l))},this.addToast=l=>{this.publish(l),this.toasts=[...this.toasts,l]},this.create=l=>{var h;const{message:x,...j}=l,k=typeof l?.id=="number"||((h=l.id)==null?void 0:h.length)>0?l.id:Rx++,_=this.toasts.find(I=>I.id===k),d=l.dismissible===void 0?!0:l.dismissible;return this.dismissedToasts.has(k)&&this.dismissedToasts.delete(k),_?this.toasts=this.toasts.map(I=>I.id===k?(this.publish({...I,...l,id:k,title:x}),{...I,...l,id:k,dismissible:d,title:x}):I):this.addToast({title:x,...j,dismissible:d,id:k}),k},this.dismiss=l=>(l?(this.dismissedToasts.add(l),requestAnimationFrame(()=>this.subscribers.forEach(h=>h({id:l,dismiss:!0})))):this.toasts.forEach(h=>{this.subscribers.forEach(x=>x({id:h.id,dismiss:!0}))}),l),this.message=(l,h)=>this.create({...h,message:l}),this.error=(l,h)=>this.create({...h,message:l,type:"error"}),this.success=(l,h)=>this.create({...h,type:"success",message:l}),this.info=(l,h)=>this.create({...h,type:"info",message:l}),this.warning=(l,h)=>this.create({...h,type:"warning",message:l}),this.loading=(l,h)=>this.create({...h,type:"loading",message:l}),this.promise=(l,h)=>{if(!h)return;let x;h.loading!==void 0&&(x=this.create({...h,promise:l,type:"loading",message:h.loading,description:typeof h.description!="function"?h.description:void 0}));const j=Promise.resolve(l instanceof Function?l():l);let k=x!==void 0,_;const d=j.then(async z=>{if(_=["resolve",z],kt.isValidElement(z))k=!1,this.create({id:x,type:"default",message:z});else if(N3(z)&&!z.ok){k=!1;const D=typeof h.error=="function"?await h.error(`HTTP error! status: ${z.status}`):h.error,O=typeof h.description=="function"?await h.description(`HTTP error! status: ${z.status}`):h.description,Q=typeof D=="object"&&!kt.isValidElement(D)?D:{message:D};this.create({id:x,type:"error",description:O,...Q})}else if(z instanceof Error){k=!1;const D=typeof h.error=="function"?await h.error(z):h.error,O=typeof h.description=="function"?await h.description(z):h.description,Q=typeof D=="object"&&!kt.isValidElement(D)?D:{message:D};this.create({id:x,type:"error",description:O,...Q})}else if(h.success!==void 0){k=!1;const D=typeof h.success=="function"?await h.success(z):h.success,O=typeof h.description=="function"?await h.description(z):h.description,Q=typeof D=="object"&&!kt.isValidElement(D)?D:{message:D};this.create({id:x,type:"success",description:O,...Q})}}).catch(async z=>{if(_=["reject",z],h.error!==void 0){k=!1;const R=typeof h.error=="function"?await h.error(z):h.error,D=typeof h.description=="function"?await h.description(z):h.description,ie=typeof R=="object"&&!kt.isValidElement(R)?R:{message:R};this.create({id:x,type:"error",description:D,...ie})}}).finally(()=>{k&&(this.dismiss(x),x=void 0),h.finally==null||h.finally.call(h)}),I=()=>new Promise((z,R)=>d.then(()=>_[0]==="reject"?R(_[1]):z(_[1])).catch(R));return typeof x!="string"&&typeof x!="number"?{unwrap:I}:Object.assign(x,{unwrap:I})},this.custom=(l,h)=>{const x=h?.id||Rx++;return this.create({jsx:l(x),id:x,...h}),x},this.getActiveToasts=()=>this.toasts.filter(l=>!this.dismissedToasts.has(l.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const da=new b3,j3=(a,l)=>{const h=l?.id||Rx++;return da.addToast({title:a,...l,id:h}),h},N3=a=>a&&typeof a=="object"&&"ok"in a&&typeof a.ok=="boolean"&&"status"in a&&typeof a.status=="number",k3=j3,S3=()=>da.toasts,T3=()=>da.getActiveToasts(),_c=Object.assign(k3,{success:da.success,info:da.info,warning:da.warning,error:da.error,custom:da.custom,message:da.message,promise:da.promise,dismiss:da.dismiss,loading:da.loading},{getHistory:S3,getToasts:T3});h3("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function kf(a){return a.label!==void 0}const C3=3,P3="24px",E3="16px",zv=4e3,M3=356,A3=14,I3=45,z3=200;function Al(...a){return a.filter(Boolean).join(" ")}function D3(a){const[l,h]=a.split("-"),x=[];return l&&x.push(l),h&&x.push(h),x}const R3=a=>{var l,h,x,j,k,_,d,I,z;const{invert:R,toast:D,unstyled:O,interacting:ie,setHeights:Q,visibleToasts:ae,heights:se,index:pe,toasts:Pe,expanded:Ie,removeToast:Ze,defaultRichColors:Je,closeButton:Xe,style:ut,cancelButtonStyle:je,actionButtonStyle:Ae,className:He="",descriptionClassName:ct="",duration:Jt,position:Ve,gap:at,expandByDefault:Tt,classNames:Et,icons:gt,closeButtonAriaLabel:Be="Close toast"}=a,[Nt,it]=kt.useState(null),[Se,Ye]=kt.useState(null),[ot,_t]=kt.useState(!1),[zt,ti]=kt.useState(!1),[Ot,Rt]=kt.useState(!1),[xi,Bi]=kt.useState(!1),[Ys,hs]=kt.useState(!1),[Gr,Pr]=kt.useState(0),[pa,Oe]=kt.useState(0),mr=kt.useRef(D.duration||Jt||zv),ma=kt.useRef(null),hi=kt.useRef(null),Fi=pe===0,dn=pe+1<=ae,ss=D.type,Js=D.dismissible!==!1,fa=D.className||"",fr=D.descriptionClassName||"",Mn=kt.useMemo(()=>se.findIndex(H=>H.toastId===D.id)||0,[se,D.id]),ga=kt.useMemo(()=>{var H;return(H=D.closeButton)!=null?H:Xe},[D.closeButton,Xe]),st=kt.useMemo(()=>D.duration||Jt||zv,[D.duration,Jt]),gr=kt.useRef(0),Xi=kt.useRef(0),Ks=kt.useRef(0),xr=kt.useRef(null),[dt,ui]=Ve.split("-"),Kt=kt.useMemo(()=>se.reduce((H,q,K)=>K>=Mn?H:H+q.height,0),[se,Mn]),Ps=w3(),yr=D.invert||R,ei=ss==="loading";Xi.current=kt.useMemo(()=>Mn*at+Kt,[Mn,Kt]),kt.useEffect(()=>{mr.current=st},[st]),kt.useEffect(()=>{_t(!0)},[]),kt.useEffect(()=>{const H=hi.current;if(H){const q=H.getBoundingClientRect().height;return Oe(q),Q(K=>[{toastId:D.id,height:q,position:D.position},...K]),()=>Q(K=>K.filter(oe=>oe.toastId!==D.id))}},[Q,D.id]),kt.useLayoutEffect(()=>{if(!ot)return;const H=hi.current,q=H.style.height;H.style.height="auto";const K=H.getBoundingClientRect().height;H.style.height=q,Oe(K),Q(oe=>oe.find(_e=>_e.toastId===D.id)?oe.map(_e=>_e.toastId===D.id?{..._e,height:K}:_e):[{toastId:D.id,height:K,position:D.position},...oe])},[ot,D.title,D.description,Q,D.id,D.jsx,D.action,D.cancel]);const xs=kt.useCallback(()=>{ti(!0),Pr(Xi.current),Q(H=>H.filter(q=>q.toastId!==D.id)),setTimeout(()=>{Ze(D)},z3)},[D,Ze,Q,Xi]);kt.useEffect(()=>{if(D.promise&&ss==="loading"||D.duration===1/0||D.type==="loading")return;let H;return Ie||ie||Ps?(()=>{if(Ks.current<gr.current){const oe=new Date().getTime()-gr.current;mr.current=mr.current-oe}Ks.current=new Date().getTime()})():(()=>{mr.current!==1/0&&(gr.current=new Date().getTime(),H=setTimeout(()=>{D.onAutoClose==null||D.onAutoClose.call(D,D),xs()},mr.current))})(),()=>clearTimeout(H)},[Ie,ie,D,ss,Ps,xs]),kt.useEffect(()=>{D.delete&&(xs(),D.onDismiss==null||D.onDismiss.call(D,D))},[xs,D.delete]);function Zr(){var H;if(gt?.loading){var q;return kt.createElement("div",{className:Al(Et?.loader,D==null||(q=D.classNames)==null?void 0:q.loader,"sonner-loader"),"data-visible":ss==="loading"},gt.loading)}return kt.createElement(f3,{className:Al(Et?.loader,D==null||(H=D.classNames)==null?void 0:H.loader),visible:ss==="loading"})}const vr=D.icon||gt?.[ss]||p3(ss);var Vs,he;return kt.createElement("li",{tabIndex:0,ref:hi,className:Al(He,fa,Et?.toast,D==null||(l=D.classNames)==null?void 0:l.toast,Et?.default,Et?.[ss],D==null||(h=D.classNames)==null?void 0:h[ss]),"data-sonner-toast":"","data-rich-colors":(Vs=D.richColors)!=null?Vs:Je,"data-styled":!(D.jsx||D.unstyled||O),"data-mounted":ot,"data-promise":!!D.promise,"data-swiped":Ys,"data-removed":zt,"data-visible":dn,"data-y-position":dt,"data-x-position":ui,"data-index":pe,"data-front":Fi,"data-swiping":Ot,"data-dismissible":Js,"data-type":ss,"data-invert":yr,"data-swipe-out":xi,"data-swipe-direction":Se,"data-expanded":!!(Ie||Tt&&ot),"data-testid":D.testId,style:{"--index":pe,"--toasts-before":pe,"--z-index":Pe.length-pe,"--offset":`${zt?Gr:Xi.current}px`,"--initial-height":Tt?"auto":`${pa}px`,...ut,...D.style},onDragEnd:()=>{Rt(!1),it(null),xr.current=null},onPointerDown:H=>{H.button!==2&&(ei||!Js||(ma.current=new Date,Pr(Xi.current),H.target.setPointerCapture(H.pointerId),H.target.tagName!=="BUTTON"&&(Rt(!0),xr.current={x:H.clientX,y:H.clientY})))},onPointerUp:()=>{var H,q,K;if(xi||!Js)return;xr.current=null;const oe=Number(((H=hi.current)==null?void 0:H.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),ve=Number(((q=hi.current)==null?void 0:q.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),_e=new Date().getTime()-((K=ma.current)==null?void 0:K.getTime()),ke=Nt==="x"?oe:ve,xe=Math.abs(ke)/_e;if(Math.abs(ke)>=I3||xe>.11){Pr(Xi.current),D.onDismiss==null||D.onDismiss.call(D,D),Ye(Nt==="x"?oe>0?"right":"left":ve>0?"down":"up"),xs(),Bi(!0);return}else{var Le,We;(Le=hi.current)==null||Le.style.setProperty("--swipe-amount-x","0px"),(We=hi.current)==null||We.style.setProperty("--swipe-amount-y","0px")}hs(!1),Rt(!1),it(null)},onPointerMove:H=>{var q,K,oe;if(!xr.current||!Js||((q=window.getSelection())==null?void 0:q.toString().length)>0)return;const _e=H.clientY-xr.current.y,ke=H.clientX-xr.current.x;var xe;const Le=(xe=a.swipeDirections)!=null?xe:D3(Ve);!Nt&&(Math.abs(ke)>1||Math.abs(_e)>1)&&it(Math.abs(ke)>Math.abs(_e)?"x":"y");let We={x:0,y:0};const Re=et=>1/(1.5+Math.abs(et)/20);if(Nt==="y"){if(Le.includes("top")||Le.includes("bottom"))if(Le.includes("top")&&_e<0||Le.includes("bottom")&&_e>0)We.y=_e;else{const et=_e*Re(_e);We.y=Math.abs(et)<Math.abs(_e)?et:_e}}else if(Nt==="x"&&(Le.includes("left")||Le.includes("right")))if(Le.includes("left")&&ke<0||Le.includes("right")&&ke>0)We.x=ke;else{const et=ke*Re(ke);We.x=Math.abs(et)<Math.abs(ke)?et:ke}(Math.abs(We.x)>0||Math.abs(We.y)>0)&&hs(!0),(K=hi.current)==null||K.style.setProperty("--swipe-amount-x",`${We.x}px`),(oe=hi.current)==null||oe.style.setProperty("--swipe-amount-y",`${We.y}px`)}},ga&&!D.jsx&&ss!=="loading"?kt.createElement("button",{"aria-label":Be,"data-disabled":ei,"data-close-button":!0,onClick:ei||!Js?()=>{}:()=>{xs(),D.onDismiss==null||D.onDismiss.call(D,D)},className:Al(Et?.closeButton,D==null||(x=D.classNames)==null?void 0:x.closeButton)},(he=gt?.close)!=null?he:_3):null,(ss||D.icon||D.promise)&&D.icon!==null&&(gt?.[ss]!==null||D.icon)?kt.createElement("div",{"data-icon":"",className:Al(Et?.icon,D==null||(j=D.classNames)==null?void 0:j.icon)},D.promise||D.type==="loading"&&!D.icon?D.icon||Zr():null,D.type!=="loading"?vr:null):null,kt.createElement("div",{"data-content":"",className:Al(Et?.content,D==null||(k=D.classNames)==null?void 0:k.content)},kt.createElement("div",{"data-title":"",className:Al(Et?.title,D==null||(_=D.classNames)==null?void 0:_.title)},D.jsx?D.jsx:typeof D.title=="function"?D.title():D.title),D.description?kt.createElement("div",{"data-description":"",className:Al(ct,fr,Et?.description,D==null||(d=D.classNames)==null?void 0:d.description)},typeof D.description=="function"?D.description():D.description):null),kt.isValidElement(D.cancel)?D.cancel:D.cancel&&kf(D.cancel)?kt.createElement("button",{"data-button":!0,"data-cancel":!0,style:D.cancelButtonStyle||je,onClick:H=>{kf(D.cancel)&&Js&&(D.cancel.onClick==null||D.cancel.onClick.call(D.cancel,H),xs())},className:Al(Et?.cancelButton,D==null||(I=D.classNames)==null?void 0:I.cancelButton)},D.cancel.label):null,kt.isValidElement(D.action)?D.action:D.action&&kf(D.action)?kt.createElement("button",{"data-button":!0,"data-action":!0,style:D.actionButtonStyle||Ae,onClick:H=>{kf(D.action)&&(D.action.onClick==null||D.action.onClick.call(D.action,H),!H.defaultPrevented&&xs())},className:Al(Et?.actionButton,D==null||(z=D.classNames)==null?void 0:z.actionButton)},D.action.label):null)};function Dv(){if(typeof window>"u"||typeof document>"u")return"ltr";const a=document.documentElement.getAttribute("dir");return a==="auto"||!a?window.getComputedStyle(document.documentElement).direction:a}function L3(a,l){const h={};return[a,l].forEach((x,j)=>{const k=j===1,_=k?"--mobile-offset":"--offset",d=k?E3:P3;function I(z){["top","right","bottom","left"].forEach(R=>{h[`${_}-${R}`]=typeof z=="number"?`${z}px`:z})}typeof x=="number"||typeof x=="string"?I(x):typeof x=="object"?["top","right","bottom","left"].forEach(z=>{x[z]===void 0?h[`${_}-${z}`]=d:h[`${_}-${z}`]=typeof x[z]=="number"?`${x[z]}px`:x[z]}):I(d)}),h}const B3=kt.forwardRef(function(l,h){const{id:x,invert:j,position:k="bottom-right",hotkey:_=["altKey","KeyT"],expand:d,closeButton:I,className:z,offset:R,mobileOffset:D,theme:O="light",richColors:ie,duration:Q,style:ae,visibleToasts:se=C3,toastOptions:pe,dir:Pe=Dv(),gap:Ie=A3,icons:Ze,containerAriaLabel:Je="Notifications"}=l,[Xe,ut]=kt.useState([]),je=kt.useMemo(()=>x?Xe.filter(ot=>ot.toasterId===x):Xe.filter(ot=>!ot.toasterId),[Xe,x]),Ae=kt.useMemo(()=>Array.from(new Set([k].concat(je.filter(ot=>ot.position).map(ot=>ot.position)))),[je,k]),[He,ct]=kt.useState([]),[Jt,Ve]=kt.useState(!1),[at,Tt]=kt.useState(!1),[Et,gt]=kt.useState(O!=="system"?O:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Be=kt.useRef(null),Nt=_.join("+").replace(/Key/g,"").replace(/Digit/g,""),it=kt.useRef(null),Se=kt.useRef(!1),Ye=kt.useCallback(ot=>{ut(_t=>{var zt;return(zt=_t.find(ti=>ti.id===ot.id))!=null&&zt.delete||da.dismiss(ot.id),_t.filter(({id:ti})=>ti!==ot.id)})},[]);return kt.useEffect(()=>da.subscribe(ot=>{if(ot.dismiss){requestAnimationFrame(()=>{ut(_t=>_t.map(zt=>zt.id===ot.id?{...zt,delete:!0}:zt))});return}setTimeout(()=>{A2.flushSync(()=>{ut(_t=>{const zt=_t.findIndex(ti=>ti.id===ot.id);return zt!==-1?[..._t.slice(0,zt),{..._t[zt],...ot},..._t.slice(zt+1)]:[ot,..._t]})})})}),[Xe]),kt.useEffect(()=>{if(O!=="system"){gt(O);return}if(O==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?gt("dark"):gt("light")),typeof window>"u")return;const ot=window.matchMedia("(prefers-color-scheme: dark)");try{ot.addEventListener("change",({matches:_t})=>{gt(_t?"dark":"light")})}catch{ot.addListener(({matches:zt})=>{try{gt(zt?"dark":"light")}catch(ti){console.error(ti)}})}},[O]),kt.useEffect(()=>{Xe.length<=1&&Ve(!1)},[Xe]),kt.useEffect(()=>{const ot=_t=>{var zt;if(_.every(Rt=>_t[Rt]||_t.code===Rt)){var Ot;Ve(!0),(Ot=Be.current)==null||Ot.focus()}_t.code==="Escape"&&(document.activeElement===Be.current||(zt=Be.current)!=null&&zt.contains(document.activeElement))&&Ve(!1)};return document.addEventListener("keydown",ot),()=>document.removeEventListener("keydown",ot)},[_]),kt.useEffect(()=>{if(Be.current)return()=>{it.current&&(it.current.focus({preventScroll:!0}),it.current=null,Se.current=!1)}},[Be.current]),kt.createElement("section",{ref:h,"aria-label":`${Je} ${Nt}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Ae.map((ot,_t)=>{var zt;const[ti,Ot]=ot.split("-");return je.length?kt.createElement("ol",{key:ot,dir:Pe==="auto"?Dv():Pe,tabIndex:-1,ref:Be,className:z,"data-sonner-toaster":!0,"data-sonner-theme":Et,"data-y-position":ti,"data-x-position":Ot,style:{"--front-toast-height":`${((zt=He[0])==null?void 0:zt.height)||0}px`,"--width":`${M3}px`,"--gap":`${Ie}px`,...ae,...L3(R,D)},onBlur:Rt=>{Se.current&&!Rt.currentTarget.contains(Rt.relatedTarget)&&(Se.current=!1,it.current&&(it.current.focus({preventScroll:!0}),it.current=null))},onFocus:Rt=>{Rt.target instanceof HTMLElement&&Rt.target.dataset.dismissible==="false"||Se.current||(Se.current=!0,it.current=Rt.relatedTarget)},onMouseEnter:()=>Ve(!0),onMouseMove:()=>Ve(!0),onMouseLeave:()=>{at||Ve(!1)},onDragEnd:()=>Ve(!1),onPointerDown:Rt=>{Rt.target instanceof HTMLElement&&Rt.target.dataset.dismissible==="false"||Tt(!0)},onPointerUp:()=>Tt(!1)},je.filter(Rt=>!Rt.position&&_t===0||Rt.position===ot).map((Rt,xi)=>{var Bi,Ys;return kt.createElement(R3,{key:Rt.id,icons:Ze,index:xi,toast:Rt,defaultRichColors:ie,duration:(Bi=pe?.duration)!=null?Bi:Q,className:pe?.className,descriptionClassName:pe?.descriptionClassName,invert:j,visibleToasts:se,closeButton:(Ys=pe?.closeButton)!=null?Ys:I,interacting:at,position:ot,style:pe?.style,unstyled:pe?.unstyled,classNames:pe?.classNames,cancelButtonStyle:pe?.cancelButtonStyle,actionButtonStyle:pe?.actionButtonStyle,closeButtonAriaLabel:pe?.closeButtonAriaLabel,removeToast:Ye,toasts:je.filter(hs=>hs.position==Rt.position),heights:He.filter(hs=>hs.position==Rt.position),setHeights:ct,expandByDefault:d,gap:Ie,expanded:Jt,swipeDirections:l.swipeDirections})})):null}))});function F3({className:a=""}){const[l,h]=G.useState(!1),[x,j]=G.useState(!1),[k,_]=G.useState(!1),[d,I]=G.useState("/chatbot.png"),[z,R]=G.useState([{id:"1",type:"bot",content:"🙏 Namaste! I'm your AI travel companion for Jharkhand. I can help you with destinations, bookings, cultural insights, and local tips. What would you like to explore?",timestamp:new Date,suggestions:["Popular Destinations","Cultural Experiences","Marketplace","Travel Planning"]}]),[D,O]=G.useState(""),[ie,Q]=G.useState(!1),ae=G.useRef(null),se=G.useRef(null),pe=()=>{ae.current?.scrollIntoView({behavior:"smooth"})};G.useEffect(()=>{pe()},[z]),G.useEffect(()=>{const Ae=new Image;Ae.crossOrigin="anonymous",Ae.src="/chatbot.png",Ae.onload=()=>{try{const He=document.createElement("canvas");He.width=Ae.width,He.height=Ae.height;const ct=He.getContext("2d");if(!ct)return;ct.drawImage(Ae,0,0);const Jt=ct.getImageData(0,0,He.width,He.height),Ve=Jt.data;for(let Tt=0;Tt<Ve.length;Tt+=4){const Et=Ve[Tt],gt=Ve[Tt+1],Be=Ve[Tt+2];Et>245&&gt>245&&Be>245&&(Ve[Tt+3]=0)}ct.putImageData(Jt,0,0);const at=He.toDataURL("image/png");at.startsWith("data:image/png")&&I(at)}catch{}}},[]),G.useEffect(()=>{l&&se.current&&se.current.focus()},[l]);const Pe=["Tell me about Netarhat","Best time to visit Jharkhand","Local festivals and culture","Tribal art and handicrafts","Adventure activities","Traditional cuisine","Accommodation options","Transportation guide"],Ie=Ae=>{const He=Ae.toLowerCase();if(He.includes("netarhat")||He.includes("hill station"))return{content:`🏔️ Netarhat is known as the "Queen of Chotanagpur"! It's a beautiful hill station perfect for sunrise/sunset views, trekking, and cool weather. Best visited from October to March. Would you like me to help you plan a trip there?`,suggestions:["Plan Netarhat Trip","Best Hotels in Netarhat","Things to Do","Weather Info"]};if(He.includes("culture")||He.includes("festival")||He.includes("tribal"))return{content:"🎭 Jharkhand has a rich tribal heritage! Major festivals include Sarhul, Karam, and Sohrai. The state is famous for tribal dances like Chhau and Jhumair, and traditional crafts like Dokra art and Paitkar paintings. Want to explore our cultural marketplace?",suggestions:["View Cultural Events","Tribal Art Marketplace","Festival Calendar","Traditional Cuisine"]};if(He.includes("food")||He.includes("cuisine")||He.includes("eat"))return{content:"🍽️ Jharkhand cuisine is delicious! Try Litti-Chokha, Dhuska, Arsa roti, and traditional rice beer (Handia). Local markets offer fresh tribal organic produce. I can recommend the best local restaurants and food experiences!",suggestions:["Food Guide","Restaurant Recommendations","Cooking Classes","Local Markets"]};if(He.includes("book")||He.includes("hotel")||He.includes("stay"))return{content:"🏨 I can help you find perfect accommodations! From luxury resorts to eco-friendly tribal homestays. What's your preference and budget? I'll show you the best options with authentic local experiences.",suggestions:["Luxury Hotels","Eco Homestays","Budget Options","Unique Experiences"]};if(He.includes("travel")||He.includes("plan")||He.includes("itinerary"))return{content:"🗺️ Let me create a personalized itinerary for you! I can suggest destinations based on your interests - adventure, culture, nature, or spirituality. How many days do you have and what interests you most?",suggestions:["3-Day Adventure","5-Day Cultural","7-Day Complete","Custom Planning"]};if(He.includes("shop")||He.includes("buy")||He.includes("market"))return{content:"🛍️ Our marketplace features authentic tribal handicrafts, traditional textiles, dokra art, and local produce. All directly from local artisans and certified eco-friendly. Shall I show you our featured collections?",suggestions:["Handicrafts","Textiles","Art & Jewelry","Local Products"]};if(He.includes("weather")||He.includes("when")||He.includes("time"))return{content:"🌤️ Best time to visit Jharkhand is October to March with pleasant weather. Monsoon (July-Sept) is beautiful but can affect travel. Summer (April-June) is hot but good for hill stations. What season do you prefer?",suggestions:["Winter Travel","Monsoon Beauty","Summer Hill Stations","Festival Seasons"]};if(He.includes("adventure")||He.includes("trek")||He.includes("activity"))return{content:"⛰️ Jharkhand offers amazing adventures! Rock climbing at Netarhat, trekking in Palamau, river rafting, wildlife safaris at Betla National Park, and paragliding. What type of adventure excites you?",suggestions:["Trekking Trails","Wildlife Safari","Water Sports","Rock Climbing"]};const ct=[{content:"🤔 I'd love to help you discover Jharkhand! Can you tell me more about what you're looking for? I'm here to assist with destinations, culture, bookings, and local insights.",suggestions:["Popular Places","Cultural Sites","Adventure Activities","Local Experiences"]},{content:"✨ That's interesting! Let me help you explore Jharkhand better. I can provide information about our beautiful destinations, rich culture, local cuisine, and help you plan your perfect trip.",suggestions:["Plan a Trip","Cultural Guide","Food & Dining","Transportation"]}];return ct[Math.floor(Math.random()*ct.length)]},Ze=()=>{if(!D.trim())return;const Ae={id:Date.now().toString(),type:"user",content:D,timestamp:new Date};R(Jt=>[...Jt,Ae]);const He=D;O(""),Q(!0);const ct=async Jt=>{const Ve=new AbortController,at=setTimeout(()=>Ve.abort(),3e4);try{const Tt=await fetch("https://aranya-new-chatbot.onrender.com/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({msg:Jt}),signal:Ve.signal});if(clearTimeout(at),!Tt.ok)throw new Error(`Server error: ${Tt.status}`);const Et=await Tt.json();if(Et?.response)return Et.response;throw Et?.error?new Error(Et.error||"Unknown server error"):new Error("Invalid server response")}catch(Tt){throw clearTimeout(at),Tt}};(async()=>{try{const Jt=await ct(He),Ve={id:(Date.now()+1).toString(),type:"bot",content:Jt,timestamp:new Date};R(at=>[...at,Ve])}catch(Jt){const Ve=Ie(He),at={id:(Date.now()+1).toString(),type:"bot",content:Jt?.message?`${Ve.content}

(Offline fallback: ${Jt.message})`:Ve.content,timestamp:new Date,suggestions:Ve.suggestions};R(Tt=>[...Tt,at]),_c.error("Chat server unreachable — using local fallback.")}finally{Q(!1)}})()},Je=Ae=>{O(Ae),setTimeout(()=>Ze(),100)},Xe=Ae=>{Ae.key==="Enter"&&Ze()},ut=()=>{j(!x)},je=Ae=>{if(!Ae)return null;const He=[],ct=/\*\*(.+?)\*\*/g;let Jt=0,Ve;for(;(Ve=ct.exec(Ae))!==null;){const Tt=Ve.index;Tt>Jt&&He.push(Ae.slice(Jt,Tt)),He.push(i.jsx("strong",{children:Ve[1]},Tt)),Jt=Tt+Ve[0].length}Jt<Ae.length&&He.push(Ae.slice(Jt));const at=[];return He.forEach((Tt,Et)=>{if(typeof Tt=="string"){const gt=Tt.split(`
`);gt.forEach((Be,Nt)=>{at.push(i.jsxs(kt.Fragment,{children:[Be,Nt<gt.length-1?i.jsx("br",{}):null]},`${Et}-${Nt}`))})}else at.push(kt.cloneElement(Tt,{key:`node-${Et}`}))}),i.jsx("p",{className:"text-sm leading-relaxed",children:at})};return i.jsxs(i.Fragment,{children:[i.jsx(re.div,{className:`fixed bottom-6 right-6 z-50 ${a}`,initial:{scale:0},animate:{scale:1},transition:{delay:1,type:"spring",stiffness:260,damping:20},children:i.jsxs(re.button,{onClick:()=>{h(!0),k||(_c.success("🤖 AI Assistant Activated",{description:"Your personal Jharkhand travel guide is ready to help!",duration:3e3}),_(!0))},className:"relative w-20 h-20 bg-[#18B668] rounded-full shadow-2xl hover:shadow-[0_8px_34px_-4px_rgba(24,182,104,0.65)] transition-all duration-300 group ring-1 ring-white/10",whileHover:{scale:1.1},whileTap:{scale:.95},children:[i.jsx("div",{className:"absolute inset-0 rounded-full bg-[#18B668] animate-ping opacity-25"}),i.jsxs("div",{className:"relative z-10 flex items-center justify-center h-full",children:[i.jsx("img",{src:d,alt:"Chatbot Logo",className:"w-14 h-14 object-contain pointer-events-none select-none drop-shadow-[0_3px_6px_rgba(0,0,0,0.5)]",onError:Ae=>{Ae.currentTarget.style.display="none"}}),i.jsx(Px,{className:"w-7 h-7 text-white hidden"})]}),i.jsxs("div",{className:"absolute bottom-full right-0 mb-2 px-3 py-2 bg-black/90 text-white text-sm rounded-lg opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap backdrop-blur-md",children:["AI Travel Assistant",i.jsx("div",{className:"absolute top-full right-4 border-4 border-transparent border-t-black/90"})]}),i.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-[#F59E0B] rounded-full flex items-center justify-center",children:i.jsx(Gw,{className:"w-3 h-3 text-white"})})]})}),i.jsx(IN,{children:l&&i.jsxs(re.div,{className:"fixed inset-0 z-[9999]",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:[x&&i.jsx("div",{className:"absolute inset-0 bg-black/50 backdrop-blur-sm",onClick:()=>h(!1)}),i.jsxs(re.div,{className:`absolute ${x?"inset-4 md:inset-8":"bottom-6 right-6 w-96 h-[32rem]"} glass-premium rounded-2xl shadow-2xl overflow-hidden pointer-events-auto flex flex-col`,initial:x?{scale:.5,opacity:0}:{scale:0,originX:1,originY:1},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:300,damping:25},children:[i.jsx("div",{className:"bg-gradient-to-r from-[#18B668] to-[#0EA5E9] p-4 text-white sticky top-0 z-30 flex-shrink-0",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsxs("div",{className:"w-10 h-10 bg-[#18B668] rounded-full flex items-center justify-center overflow-hidden shadow-md",children:[i.jsx("img",{src:d,alt:"AI Assistant",className:"w-10 h-10 object-contain pointer-events-none select-none",onError:Ae=>{Ae.currentTarget.style.display="none"}}),i.jsx(Hg,{className:"w-6 h-6 hidden"})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-semibold",children:"AI Travel Assistant"}),i.jsx("p",{className:"text-sm text-white/80",children:"Always here to help"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(vt,{variant:"ghost",size:"sm",onClick:ut,className:"text-white hover:bg-white/20 p-2",children:x?i.jsx(s4,{className:"w-4 h-4"}):i.jsx(e4,{className:"w-4 h-4"})}),i.jsx(vt,{variant:"ghost",size:"sm",onClick:()=>h(!1),className:"text-white hover:bg-white/20 p-2",children:i.jsx(Xw,{className:"w-4 h-4"})})]})]})}),i.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[i.jsx(u3,{className:"flex-1 p-4 chatbot-scroll overflow-auto",children:i.jsxs("div",{className:"space-y-4",children:[z.map(Ae=>i.jsx(re.div,{className:`flex ${Ae.type==="user"?"justify-end":"justify-start"}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:i.jsxs("div",{className:`flex gap-3 max-w-[85%] ${Ae.type==="user"?"flex-row-reverse":""}`,children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center overflow-hidden ${Ae.type==="user"?"bg-[#18B668] text-white":"bg-[#18B668] text-white shadow"}`,children:Ae.type==="user"?i.jsx(Hh,{className:"w-4 h-4"}):i.jsxs(i.Fragment,{children:[i.jsx("img",{src:d,alt:"Bot",className:"w-8 h-8 object-contain pointer-events-none select-none",onError:He=>{He.currentTarget.style.display="none"}}),i.jsx(Hg,{className:"w-4 h-4 hidden"})]})}),i.jsxs("div",{className:`px-4 py-3 rounded-2xl ${Ae.type==="user"?"bg-[#18B668] text-white rounded-br-lg":"glass-dark text-white rounded-bl-lg"}`,children:[je(Ae.content),Ae.suggestions&&i.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:Ae.suggestions.map((He,ct)=>i.jsx("button",{onClick:()=>Je(He),className:"px-3 py-1 text-xs bg-white/10 hover:bg-white/20 rounded-full border border-white/20 hover:border-white/40 transition-all duration-200",children:He},ct))})]})]})},Ae.id)),ie&&i.jsx(re.div,{className:"flex justify-start",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:i.jsxs("div",{className:"flex gap-3 max-w-[85%]",children:[i.jsxs("div",{className:"w-8 h-8 rounded-full bg-[#18B668] text-white flex items-center justify-center overflow-hidden shadow",children:[i.jsx("img",{src:d,alt:"Bot typing",className:"w-8 h-8 object-contain pointer-events-none select-none",onError:Ae=>{Ae.currentTarget.style.display="none"}}),i.jsx(Hg,{className:"w-4 h-4 hidden"})]}),i.jsx("div",{className:"glass-dark text-white px-4 py-3 rounded-2xl rounded-bl-lg",children:i.jsxs("div",{className:"flex gap-1",children:[i.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"0ms"}}),i.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"150ms"}}),i.jsx("div",{className:"w-2 h-2 bg-white/60 rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]})}),i.jsx("div",{ref:ae})]})}),!ie&&z.length<=3&&i.jsxs("div",{className:"px-4 py-2 border-t border-white/10",children:[i.jsx("p",{className:"text-xs text-white/60 mb-2",children:"Quick Questions:"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Pe.slice(0,4).map((Ae,He)=>i.jsx("button",{onClick:()=>Je(Ae),className:"px-2 py-1 text-xs glass-dark text-white/80 hover:text-white rounded-full border border-white/10 hover:border-white/30 transition-all duration-200",children:Ae},He))})]}),i.jsxs("div",{className:"p-4 border-t border-white/10",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx(Zs,{ref:se,value:D,onChange:Ae=>O(Ae.target.value),onKeyPress:Xe,placeholder:"Ask me about Jharkhand...",className:"flex-1 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668]"}),i.jsx(vt,{onClick:Ze,disabled:!D.trim()||ie,className:"bg-[#18B668] hover:bg-[#18B668]/90 text-white p-3",children:i.jsx(v4,{className:"w-4 h-4"})})]}),i.jsx("p",{className:"text-xs text-white/40 mt-2 text-center",children:"Powered by AI • Always learning to serve you better"})]})]})]})]})})]})}const O3=({...a})=>i.jsx(B3,{theme:"dark",className:"toaster group",style:{"--normal-bg":"rgba(0, 0, 0, 0.9)","--normal-text":"#ffffff","--normal-border":"rgba(255, 255, 255, 0.1)","--success-bg":"#18B668","--success-text":"#ffffff","--error-bg":"#dc2626","--error-text":"#ffffff"},position:"top-right",expand:!0,richColors:!0,...a}),Cc=()=>{const a=xo();G.useEffect(()=>{if("scrollRestoration"in window.history){const l=window.history.scrollRestoration;return window.history.scrollRestoration="manual",()=>{window.history.scrollRestoration=l}}},[]),G.useLayoutEffect(()=>{window.scrollTo(0,0)},[a.pathname])},V3=nb("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function ar({className:a,variant:l,asChild:h=!1,...x}){const j=h?ib:"span";return i.jsx(j,{"data-slot":"badge",className:vu(V3({variant:l}),a),...x})}function $3(){Cc();const[a,l]=G.useState(0);G.useEffect(()=>{const k=()=>l(window.scrollY);return window.addEventListener("scroll",k),()=>window.removeEventListener("scroll",k)},[]);const h=[{name:"Netarhat",description:"Queen of Chotanagpur",image:"https://images.unsplash.com/photo-1629977681408-e6e6876645c0?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb3VudGFpbiUyMHN1bnJpc2UlMjBsYW5kc2NhcGV8ZW58MXx8fHwxNzU2NTA1MzQ5fDA&ixlib=rb-4.1.0&q=80&w=1080",rating:4.8,route:"/destinations/netarhat"},{name:"Hundru Falls",description:"320ft Spectacular Waterfall",image:"https://images.unsplash.com/photo-1678914903641-5f59d34a85da?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx3YXRlcmZhbGwlMjBmb3Jlc3QlMjBuYXR1cmUlMjBqaGFya2hhbmR8ZW58MXx8fHwxNzU2NTQyMDU3fDA&ixlib=rb-4.1.0&q=80&w=1080",rating:4.9,route:"/destinations/hundru-falls"},{name:"Betla National Park",description:"Wildlife & Tiger Reserve",image:"https://images.unsplash.com/photo-1734373810483-af9b277b4bed?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxmb3Jlc3QlMjB3aWxkbGlmZSUyMHNhZmFyaXxlbnwxfHx8fDE3NTY1NDI3OTh8MA&ixlib=rb-4.1.0&q=80&w=1080",rating:4.7,route:"/destinations/betla-national-park"}],x=[{title:"Tribal Dance",description:"Traditional Santal & Oraon performances",icon:o4,image:"https://images.unsplash.com/photo-1585563741139-4d488b8291c4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0cmliYWwlMjBjdWx0dXJlJTIwZGFuY2UlMjBpbmRpYXxlbnwxfHx8fDE3NTY1NDIwNTh8MA&ixlib=rb-4.1.0&q=80&w=1080"},{title:"Handloom Weaving",description:"Exquisite traditional textiles",icon:T4,image:"https://images.unsplash.com/photo-1610070322384-4ce29b83db15?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0cmFkaXRpb25hbCUyMGhhbmRsb29tJTIwd2VhdmluZyUyMGluZGlhfGVufDF8fHx8MTc1NjY3MjY0Nnww&ixlib=rb-4.1.0&q=80&w=1080"},{title:"Local Cuisine",description:"Authentic tribal delicacies",icon:Ww,image:"https://images.unsplash.com/photo-1596688382656-a341e7deeeb6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb3VudGFpbiUyMGxhbmRzY2FwZSUyMHNjZW5pYyUyMHZpZXd8ZW58MXx8fHwxNzU2NTU5OTM5fDA&ixlib=rb-4.1.0&q=80&w=1080"}],j=[{category:"Handcrafts",items:"Traditional pottery & wood carvings",artisans:"50+ Local Artisans"},{category:"Textiles",items:"Handwoven sarees & fabrics",artisans:"30+ Weavers"},{category:"Jewelry",items:"Tribal silver ornaments",artisans:"25+ Craftsmen"}];return i.jsxs("div",{className:"min-h-screen overflow-hidden",children:[i.jsxs("section",{className:"relative h-screen overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0",children:[i.jsx(qr,{src:"https://images.unsplash.com/photo-1735567065045-97ba386867ad?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx3YXRlcmZhbGxzJTIwZm9yZXN0JTIwbmF0dXJlJTIwamhhcmtoYW5kfGVufDF8fHx8MTc1NjY3MjU5OXww&ixlib=rb-4.1.0&q=80&w=1080",alt:"Jharkhand Waterfalls",className:"w-full h-full object-cover",style:{transform:`translateY(${a*.5}px)`}}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-black/50 via-black/30 to-black/70"})]}),i.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[i.jsx(re.div,{className:"absolute top-20 left-10 w-16 h-16 opacity-20",animate:{rotate:360,y:[-10,10,-10]},transition:{duration:8,repeat:1/0,ease:"easeInOut"},children:i.jsx("div",{className:"w-full h-full bg-[#F59E0B] rounded-full blur-sm"})}),i.jsx(re.div,{className:"absolute top-40 right-20 w-8 h-8 opacity-30",animate:{x:[-5,5,-5],rotate:180},transition:{duration:6,repeat:1/0,ease:"easeInOut"},children:i.jsx("div",{className:"w-full h-full bg-[#18B668] rounded-full blur-sm"})}),i.jsx(re.div,{className:"absolute bottom-40 left-1/4 w-12 h-12 opacity-25",animate:{y:[-20,20,-20],rotate:-180},transition:{duration:10,repeat:1/0,ease:"easeInOut"},children:i.jsx("div",{className:"w-full h-full bg-[#0EA5E9] rounded-full blur-sm"})}),[...Array(6)].map((k,_)=>i.jsx(re.div,{className:`absolute w-6 h-6 opacity-20 ${_%2===0?"bg-[#18B668]":"bg-[#F59E0B]"} rounded-full blur-sm`,style:{top:`${20+_*15}%`,left:`${10+_*10}%`},animate:{y:[-10,20,-10],x:[-5,10,-5],rotate:[0,180,360]},transition:{duration:8+_,repeat:1/0,ease:"easeInOut",delay:_*.5}},_))]}),i.jsx("div",{className:"relative z-10 flex items-center justify-center h-full px-4",children:i.jsxs("div",{className:"text-center max-w-5xl mx-auto",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,ease:"easeOut"},className:"mb-8",children:[i.jsxs("h1",{className:"text-6xl md:text-8xl lg:text-9xl font-bold mb-6",children:[i.jsx("span",{className:"text-[#18B668]",children:"Discover"}),i.jsx("br",{}),i.jsx("span",{className:"text-white",children:"Jharkhand"})]}),i.jsx(re.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:1},className:"text-xl md:text-2xl text-gray-200 max-w-3xl mx-auto leading-relaxed",children:"Where Nature Meets Culture in Perfect Harmony"})]}),i.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:1,duration:.8},className:"flex flex-col sm:flex-row gap-6 justify-center items-center",children:[i.jsx(mi,{to:"/destinations",children:i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"glass px-8 py-4 rounded-2xl text-white font-medium text-lg backdrop-blur-lg border border-white/20 hover:bg-white/10 transition-all duration-300 animate-pulse-glow",children:i.jsxs("span",{className:"flex items-center gap-3",children:[i.jsx(En,{className:"h-5 w-5"}),"Explore Destinations"]})})}),i.jsx(mi,{to:"/travel-planner",children:i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"glass-dark px-8 py-4 rounded-2xl text-white font-medium text-lg backdrop-blur-lg border border-white/20 hover:bg-white/10 transition-all duration-300",children:i.jsxs("span",{className:"flex items-center gap-3",children:[i.jsx(Uh,{className:"h-5 w-5"}),"Plan Your Trip"]})})})]}),i.jsx(re.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:2,duration:1},className:"absolute bottom-8 left-1/2 transform -translate-x-1/2",children:i.jsx(re.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:i.jsx(re.div,{animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0},className:"w-1 h-3 bg-white/70 rounded-full mt-2"})})})]})})]}),i.jsx("section",{className:"py-20 px-4 bg-gradient-to-b from-black to-slate-900",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Start Your ",i.jsx("span",{className:"text-[#18B668]",children:"Journey"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Choose your path to discover the wonders of Jharkhand"})]}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8",children:[{title:"Destinations",description:"Explore breathtaking landscapes and hidden gems",icon:En,link:"/destinations",color:"#18B668"},{title:"Culture & Heritage",description:"Immerse in rich tribal traditions and art",icon:d4,link:"/culture",color:"#F59E0B"},{title:"Travel Planner",description:"AI-powered personalized trip planning",icon:Uh,link:"/travel-planner",color:"#0EA5E9"},{title:"Artisan Marketplace",description:"Shop authentic handicrafts from local artisans",icon:jc,link:"/marketplace",color:"#8B5CF6"}].map((k,_)=>i.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:_*.1,duration:.6},viewport:{once:!0},children:i.jsx(mi,{to:k.link,children:i.jsxs(re.div,{whileHover:{y:-10,scale:1.02},className:"glass rounded-2xl p-6 text-center group hover:bg-white/10 transition-all duration-300 h-full",children:[i.jsx(re.div,{whileHover:{scale:1.2,rotate:5},className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:k.color},children:i.jsx(k.icon,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"text-white font-bold text-xl mb-3",children:k.title}),i.jsx("p",{className:"text-gray-400 text-sm leading-relaxed",children:k.description}),i.jsx(re.div,{initial:{scaleX:0},whileInView:{scaleX:1},transition:{delay:.5+_*.1,duration:.8},viewport:{once:!0},className:"h-1 mt-4 rounded-full origin-left opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:k.color}})]})})},k.title))})]})}),i.jsx("section",{className:"py-20 px-4 bg-slate-900",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Featured ",i.jsx("span",{className:"text-[#18B668]",children:"Destinations"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Discover the most breathtaking places in Jharkhand"})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:h.map((k,_)=>i.jsx(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:_*.2,duration:.6},viewport:{once:!0},whileHover:{y:-10},className:"glass rounded-2xl overflow-hidden group hover:bg-white/5 transition-all duration-300",children:i.jsxs(mi,{to:k.route,children:[i.jsxs("div",{className:"relative h-64 overflow-hidden",children:[i.jsx(qr,{src:k.image,alt:k.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),i.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1 glass-dark rounded-full px-3 py-1",children:[i.jsx(Xs,{className:"h-4 w-4 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-white text-sm",children:k.rating})]}),i.jsxs("div",{className:"absolute bottom-4 left-4 right-4",children:[i.jsx("h3",{className:"text-white text-2xl font-bold mb-1",children:k.name}),i.jsx("p",{className:"text-gray-200 text-sm",children:k.description})]})]}),i.jsx("div",{className:"p-6",children:i.jsxs(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/80 text-white",children:[i.jsx(Kp,{className:"mr-2 h-4 w-4"}),"Explore Now"]})})]})},k.name))}),i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.6,duration:.6},viewport:{once:!0},className:"text-center mt-12",children:i.jsx(mi,{to:"/destinations",children:i.jsxs(vt,{variant:"outline",size:"lg",className:"border-[#18B668] text-[#18B668] hover:bg-[#18B668] hover:text-white",children:["View All Destinations",i.jsx(Kp,{className:"ml-2 h-4 w-4"})]})})})]})}),i.jsx("section",{className:"py-20 px-4 bg-black",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Rich ",i.jsx("span",{className:"text-[#F59E0B]",children:"Culture"})," & Heritage"]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Experience the vibrant traditions and artistic heritage of Jharkhand's tribal communities"})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:x.map((k,_)=>i.jsxs(re.div,{initial:{opacity:0,x:_%2===0?-30:30},whileInView:{opacity:1,x:0},transition:{delay:_*.2,duration:.6},viewport:{once:!0},className:"glass rounded-2xl overflow-hidden group hover:bg-white/5 transition-all duration-300",children:[i.jsxs("div",{className:"relative h-48 overflow-hidden",children:[i.jsx(qr,{src:k.image,alt:k.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-transparent to-transparent"}),i.jsx("div",{className:"absolute bottom-4 left-4",children:i.jsx(k.icon,{className:"h-8 w-8 text-[#F59E0B] mb-2"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:k.title}),i.jsx("p",{className:"text-gray-300 text-sm",children:k.description})]})]},k.title))}),i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.6,duration:.6},viewport:{once:!0},className:"text-center",children:i.jsx(mi,{to:"/culture",children:i.jsxs(vt,{variant:"outline",size:"lg",className:"border-[#F59E0B] text-[#F59E0B] hover:bg-[#F59E0B] hover:text-white",children:["Explore Culture",i.jsx(Kp,{className:"ml-2 h-4 w-4"})]})})})]})}),i.jsx("section",{className:"py-20 px-4 bg-gradient-to-b from-slate-900 to-black",children:i.jsx("div",{className:"max-w-7xl mx-auto",children:i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsxs(re.div,{initial:{opacity:0,x:-50},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["AI-Powered ",i.jsx("span",{className:"text-[#0EA5E9]",children:"Travel Planner"})]}),i.jsx("p",{className:"text-xl text-gray-300 mb-8 leading-relaxed",children:"Let our intelligent travel planner create the perfect itinerary based on your preferences, interests, and budget."}),i.jsx("div",{className:"space-y-4 mb-8",children:["Personalized recommendations","Real-time weather updates","Local guide connections","Budget optimization"].map((k,_)=>i.jsxs(re.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:_*.1,duration:.5},viewport:{once:!0},className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-2 h-2 bg-[#0EA5E9] rounded-full"}),i.jsx("span",{className:"text-gray-300",children:k})]},k))}),i.jsx(mi,{to:"/travel-planner",children:i.jsxs(vt,{size:"lg",className:"bg-[#0EA5E9] hover:bg-[#0EA5E9]/80 text-white",children:[i.jsx(Uh,{className:"mr-2 h-5 w-5"}),"Start Planning"]})})]}),i.jsx(re.div,{initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.8},viewport:{once:!0},className:"glass rounded-2xl p-8",children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#0EA5E9] rounded-xl flex items-center justify-center",children:i.jsx(fo,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-semibold",children:"Group Size"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"2-4 travelers"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#18B668] rounded-xl flex items-center justify-center",children:i.jsx(ds,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-semibold",children:"Duration"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"5-7 days"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#F59E0B] rounded-xl flex items-center justify-center",children:i.jsx(En,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-white font-semibold",children:"Interests"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Nature & Adventure"})]})]})]})})]})})}),i.jsx("section",{className:"py-20 px-4 bg-black",children:i.jsxs("div",{className:"max-w-7xl mx-auto",children:[i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl md:text-5xl font-bold text-white mb-6",children:["Artisan ",i.jsx("span",{className:"text-[#8B5CF6]",children:"Marketplace"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Support local artisans by purchasing authentic handcrafted items directly from the makers"})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8 mb-12",children:j.map((k,_)=>i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:_*.2,duration:.6},viewport:{once:!0},className:"glass rounded-2xl p-6 text-center hover:bg-white/5 transition-all duration-300",children:[i.jsx("div",{className:"w-16 h-16 bg-[#8B5CF6] rounded-2xl flex items-center justify-center mx-auto mb-4",children:i.jsx(jc,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"text-white text-xl font-bold mb-2",children:k.category}),i.jsx("p",{className:"text-gray-300 text-sm mb-4",children:k.items}),i.jsx(ar,{variant:"outline",className:"border-[#8B5CF6] text-[#8B5CF6]",children:k.artisans})]},k.category))}),i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.6,duration:.6},viewport:{once:!0},className:"text-center",children:i.jsx(mi,{to:"/marketplace",children:i.jsxs(vt,{variant:"outline",size:"lg",className:"border-[#8B5CF6] text-[#8B5CF6] hover:bg-[#8B5CF6] hover:text-white",children:["Visit Marketplace",i.jsx(Kp,{className:"ml-2 h-4 w-4"})]})})})]})})]})}const U3="modulepreload",H3=function(a){return"/"+a},Rv={},W3=function(l,h,x){let j=Promise.resolve();if(h&&h.length>0){let _=function(z){return Promise.all(z.map(R=>Promise.resolve(R).then(D=>({status:"fulfilled",value:D}),D=>({status:"rejected",reason:D}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),I=d?.nonce||d?.getAttribute("nonce");j=_(h.map(z=>{if(z=H3(z),z in Rv)return;Rv[z]=!0;const R=z.endsWith(".css"),D=R?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${z}"]${D}`))return;const O=document.createElement("link");if(O.rel=R?"stylesheet":U3,R||(O.as="script"),O.crossOrigin="",O.href=z,I&&O.setAttribute("nonce",I),document.head.appendChild(O),R)return new Promise((ie,Q)=>{O.addEventListener("load",ie),O.addEventListener("error",()=>Q(new Error(`Unable to preload CSS for ${z}`)))})}))}function k(_){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=_,window.dispatchEvent(d),!d.defaultPrevented)throw _}return j.then(_=>{for(const d of _||[])d.status==="rejected"&&k(d.reason);return l().catch(k)})},q3=G.createContext(null);function G3(a,l){const h=Array.isArray(a)?a[0]:a?a.x:0,x=Array.isArray(a)?a[1]:a?a.y:0,j=Array.isArray(l)?l[0]:l?l.x:0,k=Array.isArray(l)?l[1]:l?l.y:0;return h===j&&x===k}function wc(a,l){if(a===l)return!0;if(!a||!l)return!1;if(Array.isArray(a)){if(!Array.isArray(l)||a.length!==l.length)return!1;for(let h=0;h<a.length;h++)if(!wc(a[h],l[h]))return!1;return!0}else if(Array.isArray(l))return!1;if(typeof a=="object"&&typeof l=="object"){const h=Object.keys(a),x=Object.keys(l);if(h.length!==x.length)return!1;for(const j of h)if(!l.hasOwnProperty(j)||!wc(a[j],l[j]))return!1;return!0}return!1}function Z3(a){const l=a.clone();return l.pixelsToGLUnits=a.pixelsToGLUnits,l}function Lv(a,l){if(!a.getProjection)return;const h=a.getProjection(),x=l.getProjection();wc(h,x)||l.setProjection(h)}function Bv(a){return{longitude:a.center.lng,latitude:a.center.lat,zoom:a.zoom,pitch:a.pitch,bearing:a.bearing,padding:a.padding}}function Fv(a,l){const h=l.viewState||l;let x=!1;if("zoom"in h){const j=a.zoom;a.zoom=h.zoom,x=x||j!==a.zoom}if("bearing"in h){const j=a.bearing;a.bearing=h.bearing,x=x||j!==a.bearing}if("pitch"in h){const j=a.pitch;a.pitch=h.pitch,x=x||j!==a.pitch}if(h.padding&&!a.isPaddingEqual(h.padding)&&(x=!0,a.padding=h.padding),"longitude"in h&&"latitude"in h){const j=a.center;a.center=new j.constructor(h.longitude,h.latitude),x=x||j!==a.center}return x}const X3=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ov(a){if(!a)return null;if(typeof a=="string"||("toJS"in a&&(a=a.toJS()),!a.layers))return a;const l={};for(const x of a.layers)l[x.id]=x;const h=a.layers.map(x=>{let j=null;"interactive"in x&&(j=Object.assign({},x),delete j.interactive);const k=l[x.ref];if(k){j=j||Object.assign({},x),delete j.ref;for(const _ of X3)_ in k&&(j[_]=k[_])}return j||x});return{...a,layers:h}}var Vv={};const $v={version:8,sources:{},layers:[]},Uv={mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",click:"onClick",dblclick:"onDblClick",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseout:"onMouseOut",contextmenu:"onContextMenu",touchstart:"onTouchStart",touchend:"onTouchEnd",touchmove:"onTouchMove",touchcancel:"onTouchCancel"},Yg={movestart:"onMoveStart",move:"onMove",moveend:"onMoveEnd",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd",zoomstart:"onZoomStart",zoom:"onZoom",zoomend:"onZoomEnd",rotatestart:"onRotateStart",rotate:"onRotate",rotateend:"onRotateEnd",pitchstart:"onPitchStart",pitch:"onPitch",pitchend:"onPitchEnd"},Hv={wheel:"onWheel",boxzoomstart:"onBoxZoomStart",boxzoomend:"onBoxZoomEnd",boxzoomcancel:"onBoxZoomCancel",resize:"onResize",load:"onLoad",render:"onRender",idle:"onIdle",remove:"onRemove",data:"onData",styledata:"onStyleData",sourcedata:"onSourceData",error:"onError"},Y3=["minZoom","maxZoom","minPitch","maxPitch","maxBounds","projection","renderWorldCopies"],J3=["scrollZoom","boxZoom","dragRotate","dragPan","keyboard","doubleClickZoom","touchZoomRotate","touchPitch"];class Zh{constructor(l,h,x){this._map=null,this._internalUpdate=!1,this._inRender=!1,this._hoveredFeatures=null,this._deferredEvents={move:!1,zoom:!1,pitch:!1,rotate:!1},this._onEvent=j=>{const k=this.props[Hv[j.type]];k?k(j):j.type==="error"&&console.error(j.error)},this._onPointerEvent=j=>{(j.type==="mousemove"||j.type==="mouseout")&&this._updateHover(j);const k=this.props[Uv[j.type]];k&&(this.props.interactiveLayerIds&&j.type!=="mouseover"&&j.type!=="mouseout"&&(j.features=this._hoveredFeatures||this._queryRenderedFeatures(j.point)),k(j),delete j.features)},this._onCameraEvent=j=>{if(!this._internalUpdate){const k=this.props[Yg[j.type]];k&&k(j)}j.type in this._deferredEvents&&(this._deferredEvents[j.type]=!1)},this._MapClass=l,this.props=h,this._initialize(x)}get map(){return this._map}get transform(){return this._renderTransform}setProps(l){const h=this.props;this.props=l;const x=this._updateSettings(l,h);x&&this._createShadowTransform(this._map);const j=this._updateSize(l),k=this._updateViewState(l,!0);this._updateStyle(l,h),this._updateStyleComponents(l,h),this._updateHandlers(l,h),(x||j||k&&!this._map.isMoving())&&this.redraw()}static reuse(l,h){const x=Zh.savedMaps.pop();if(!x)return null;const j=x.map,k=j.getContainer();for(h.className=k.className;k.childNodes.length>0;)h.appendChild(k.childNodes[0]);j._container=h;const _=j._resizeObserver;_&&(_.disconnect(),_.observe(h)),x.setProps({...l,styleDiffing:!1}),j.resize();const{initialViewState:d}=l;return d&&(d.bounds?j.fitBounds(d.bounds,{...d.fitBoundsOptions,duration:0}):x._updateViewState(d,!1)),j.isStyleLoaded()?j.fire("load"):j.once("styledata",()=>j.fire("load")),j._update(),x}_initialize(l){const{props:h}=this,{mapStyle:x=$v}=h,j={...h,...h.initialViewState,accessToken:h.mapboxAccessToken||K3()||null,container:l,style:Ov(x)},k=j.initialViewState||j.viewState||j;if(Object.assign(j,{center:[k.longitude||0,k.latitude||0],zoom:k.zoom||0,pitch:k.pitch||0,bearing:k.bearing||0}),h.gl){const R=HTMLCanvasElement.prototype.getContext;HTMLCanvasElement.prototype.getContext=()=>(HTMLCanvasElement.prototype.getContext=R,h.gl)}const _=new this._MapClass(j);k.padding&&_.setPadding(k.padding),h.cursor&&(_.getCanvas().style.cursor=h.cursor),this._createShadowTransform(_);const d=_._render;_._render=R=>{this._inRender=!0,d.call(_,R),this._inRender=!1};const I=_._renderTaskQueue.run;_._renderTaskQueue.run=R=>{I.call(_._renderTaskQueue,R),this._onBeforeRepaint()},_.on("render",()=>this._onAfterRepaint());const z=_.fire;_.fire=this._fireEvent.bind(this,z),_.on("resize",()=>{this._renderTransform.resize(_.transform.width,_.transform.height)}),_.on("styledata",()=>{this._updateStyleComponents(this.props,{}),Lv(_.transform,this._renderTransform)}),_.on("sourcedata",()=>this._updateStyleComponents(this.props,{}));for(const R in Uv)_.on(R,this._onPointerEvent);for(const R in Yg)_.on(R,this._onCameraEvent);for(const R in Hv)_.on(R,this._onEvent);this._map=_}recycle(){const h=this.map.getContainer().querySelector("[mapboxgl-children]");h?.remove(),Zh.savedMaps.push(this)}destroy(){this._map.remove()}redraw(){const l=this._map;!this._inRender&&l.style&&(l._frame&&(l._frame.cancel(),l._frame=null),l._render())}_createShadowTransform(l){const h=Z3(l.transform);l.painter.transform=h,this._renderTransform=h}_updateSize(l){const{viewState:h}=l;if(h){const x=this._map;if(h.width!==x.transform.width||h.height!==x.transform.height)return x.resize(),!0}return!1}_updateViewState(l,h){if(this._internalUpdate)return!1;const x=this._map,j=this._renderTransform,{zoom:k,pitch:_,bearing:d}=j,I=x.isMoving();I&&(j.cameraElevationReference="sea");const z=Fv(j,{...Bv(x.transform),...l});if(I&&(j.cameraElevationReference="ground"),z&&h){const R=this._deferredEvents;R.move=!0,R.zoom||(R.zoom=k!==j.zoom),R.rotate||(R.rotate=d!==j.bearing),R.pitch||(R.pitch=_!==j.pitch)}return I||Fv(x.transform,l),z}_updateSettings(l,h){const x=this._map;let j=!1;for(const k of Y3)if(k in l&&!wc(l[k],h[k])){j=!0;const _=x[`set${k[0].toUpperCase()}${k.slice(1)}`];_?.call(x,l[k])}return j}_updateStyle(l,h){if(l.cursor!==h.cursor&&(this._map.getCanvas().style.cursor=l.cursor||""),l.mapStyle!==h.mapStyle){const{mapStyle:x=$v,styleDiffing:j=!0}=l,k={diff:j};return"localIdeographFontFamily"in l&&(k.localIdeographFontFamily=l.localIdeographFontFamily),this._map.setStyle(Ov(x),k),!0}return!1}_updateStyleComponents(l,h){const x=this._map;let j=!1;return x.isStyleLoaded()&&("light"in l&&x.setLight&&!wc(l.light,h.light)&&(j=!0,x.setLight(l.light)),"fog"in l&&x.setFog&&!wc(l.fog,h.fog)&&(j=!0,x.setFog(l.fog)),"terrain"in l&&x.setTerrain&&!wc(l.terrain,h.terrain)&&(!l.terrain||x.getSource(l.terrain.source))&&(j=!0,x.setTerrain(l.terrain))),j}_updateHandlers(l,h){var x,j;const k=this._map;let _=!1;for(const d of J3){const I=(x=l[d])!==null&&x!==void 0?x:!0,z=(j=h[d])!==null&&j!==void 0?j:!0;wc(I,z)||(_=!0,I?k[d].enable(I):k[d].disable())}return _}_queryRenderedFeatures(l){const h=this._map,x=h.transform,{interactiveLayerIds:j=[]}=this.props;try{return h.transform=this._renderTransform,h.queryRenderedFeatures(l,{layers:j.filter(h.getLayer.bind(h))})}catch{return[]}finally{h.transform=x}}_updateHover(l){var h;const{props:x}=this;if(x.interactiveLayerIds&&(x.onMouseMove||x.onMouseEnter||x.onMouseLeave)){const k=l.type,_=((h=this._hoveredFeatures)===null||h===void 0?void 0:h.length)>0,d=this._queryRenderedFeatures(l.point),I=d.length>0;!I&&_&&(l.type="mouseleave",this._onPointerEvent(l)),this._hoveredFeatures=d,I&&!_&&(l.type="mouseenter",this._onPointerEvent(l)),l.type=k}else this._hoveredFeatures=null}_fireEvent(l,h,x){const j=this._map,k=j.transform,_=typeof h=="string"?h:h.type;return _==="move"&&this._updateViewState(this.props,!1),_ in Yg&&(typeof h=="object"&&(h.viewState=Bv(k)),this._map.isMoving())?(j.transform=this._renderTransform,l.call(j,h,x),j.transform=k,j):(l.call(j,h,x),j)}_onBeforeRepaint(){const l=this._map;this._internalUpdate=!0;for(const x in this._deferredEvents)this._deferredEvents[x]&&l.fire(x);this._internalUpdate=!1;const h=this._map.transform;l.transform=this._renderTransform,this._onAfterRepaint=()=>{Lv(this._renderTransform,h),l.transform=h}}}Zh.savedMaps=[];function K3(){let a=null;if(typeof location<"u"){const l=/access_token=([^&\/]*)/.exec(location.search);a=l&&l[1]}try{a=a||Vv.MapboxAccessToken}catch{}try{a=a||Vv.REACT_APP_MAPBOX_ACCESS_TOKEN}catch{}return a}const Q3=["setMaxBounds","setMinZoom","setMaxZoom","setMinPitch","setMaxPitch","setRenderWorldCopies","setProjection","setStyle","addSource","removeSource","addLayer","removeLayer","setLayerZoomRange","setFilter","setPaintProperty","setLayoutProperty","setLight","setTerrain","setFog","remove"];function eP(a){if(!a)return null;const l=a.map,h={getMap:()=>l,getCenter:()=>a.transform.center,getZoom:()=>a.transform.zoom,getBearing:()=>a.transform.bearing,getPitch:()=>a.transform.pitch,getPadding:()=>a.transform.padding,getBounds:()=>a.transform.getBounds(),project:x=>{const j=l.transform;l.transform=a.transform;const k=l.project(x);return l.transform=j,k},unproject:x=>{const j=l.transform;l.transform=a.transform;const k=l.unproject(x);return l.transform=j,k},queryTerrainElevation:(x,j)=>{const k=l.transform;l.transform=a.transform;const _=l.queryTerrainElevation(x,j);return l.transform=k,_},queryRenderedFeatures:(x,j)=>{const k=l.transform;l.transform=a.transform;const _=l.queryRenderedFeatures(x,j);return l.transform=k,_}};for(const x of tP(l))!(x in h)&&!Q3.includes(x)&&(h[x]=l[x].bind(l));return h}function tP(a){const l=new Set;let h=a;for(;h;){for(const x of Object.getOwnPropertyNames(h))x[0]!=="_"&&typeof a[x]=="function"&&x!=="fire"&&x!=="setEventedParent"&&l.add(x);h=Object.getPrototypeOf(h)}return Array.from(l)}const iP=typeof document<"u"?G.useLayoutEffect:G.useEffect,sP=["baseApiUrl","maxParallelImageRequests","workerClass","workerCount","workerUrl"];function rP(a,l){for(const x of sP)x in l&&(a[x]=l[x]);const{RTLTextPlugin:h="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-rtl-text/v0.2.3/mapbox-gl-rtl-text.js"}=l;h&&a.getRTLTextPluginStatus&&a.getRTLTextPluginStatus()==="unavailable"&&a.setRTLTextPlugin(h,x=>{x&&console.error(x)},!0)}const Jf=G.createContext(null);function nP(a,l,h){const x=G.useContext(q3),[j,k]=G.useState(null),_=G.useRef(),{current:d}=G.useRef({mapLib:null,map:null});G.useEffect(()=>{const R=a.mapLib;let D=!0,O;return Promise.resolve(R||h).then(ie=>{if(!D)return;if(!ie)throw new Error("Invalid mapLib");const Q="Map"in ie?ie:ie.default;if(!Q.Map)throw new Error("Invalid mapLib");if(rP(Q,a),!Q.supported||Q.supported(a))a.reuseMaps&&(O=Zh.reuse(a,_.current)),O||(O=new Zh(Q.Map,a,_.current)),d.map=eP(O),d.mapLib=Q,k(O),x?.onMapMount(d.map,a.id);else throw new Error("Map is not supported by this browser")}).catch(ie=>{const{onError:Q}=a;Q?Q({type:"error",target:null,originalEvent:null,error:ie}):console.error(ie)}),()=>{D=!1,O&&(x?.onMapUnmount(a.id),a.reuseMaps?O.recycle():O.destroy())}},[]),iP(()=>{j&&j.setProps(a)}),G.useImperativeHandle(l,()=>d.map,[j]);const I=G.useMemo(()=>({position:"relative",width:"100%",height:"100%",...a.style}),[a.style]),z={height:"100%"};return G.createElement("div",{id:a.id,ref:_,style:I},j&&G.createElement(Jf.Provider,{value:d},G.createElement("div",{"mapboxgl-children":"",style:z},a.children)))}const aP=/box|flex|grid|column|lineHeight|fontWeight|opacity|order|tabSize|zIndex/;function Bd(a,l){if(!a||!l)return;const h=a.style;for(const x in l){const j=l[x];Number.isFinite(j)&&!aP.test(x)?h[x]=`${j}px`:h[x]=j}}function oP(a,l){const{map:h,mapLib:x}=G.useContext(Jf),j=G.useRef({props:a});j.current.props=a;const k=G.useMemo(()=>{let ae=!1;G.Children.forEach(a.children,Pe=>{Pe&&(ae=!0)});const se={...a,element:ae?document.createElement("div"):null},pe=new x.Marker(se);return pe.setLngLat([a.longitude,a.latitude]),pe.getElement().addEventListener("click",Pe=>{var Ie,Ze;(Ze=(Ie=j.current.props).onClick)===null||Ze===void 0||Ze.call(Ie,{type:"click",target:pe,originalEvent:Pe})}),pe.on("dragstart",Pe=>{var Ie,Ze;const Je=Pe;Je.lngLat=k.getLngLat(),(Ze=(Ie=j.current.props).onDragStart)===null||Ze===void 0||Ze.call(Ie,Je)}),pe.on("drag",Pe=>{var Ie,Ze;const Je=Pe;Je.lngLat=k.getLngLat(),(Ze=(Ie=j.current.props).onDrag)===null||Ze===void 0||Ze.call(Ie,Je)}),pe.on("dragend",Pe=>{var Ie,Ze;const Je=Pe;Je.lngLat=k.getLngLat(),(Ze=(Ie=j.current.props).onDragEnd)===null||Ze===void 0||Ze.call(Ie,Je)}),pe},[]);G.useEffect(()=>(k.addTo(h.getMap()),()=>{k.remove()}),[]);const{longitude:_,latitude:d,offset:I,style:z,draggable:R=!1,popup:D=null,rotation:O=0,rotationAlignment:ie="auto",pitchAlignment:Q="auto"}=a;return G.useEffect(()=>{Bd(k.getElement(),z)},[z]),G.useImperativeHandle(l,()=>k,[]),(k.getLngLat().lng!==_||k.getLngLat().lat!==d)&&k.setLngLat([_,d]),I&&!G3(k.getOffset(),I)&&k.setOffset(I),k.isDraggable()!==R&&k.setDraggable(R),k.getRotation()!==O&&k.setRotation(O),k.getRotationAlignment()!==ie&&k.setRotationAlignment(ie),k.getPitchAlignment()!==Q&&k.setPitchAlignment(Q),k.getPopup()!==D&&k.setPopup(D),Gx.createPortal(a.children,k.getElement())}const lP=G.memo(G.forwardRef(oP));function Wv(a){return new Set(a?a.trim().split(/\s+/):[])}function cP(a,l){const{map:h,mapLib:x}=G.useContext(Jf),j=G.useMemo(()=>document.createElement("div"),[]),k=G.useRef({props:a});k.current.props=a;const _=G.useMemo(()=>{const d={...a},I=new x.Popup(d);return I.setLngLat([a.longitude,a.latitude]),I.once("open",z=>{var R,D;(D=(R=k.current.props).onOpen)===null||D===void 0||D.call(R,z)}),I},[]);if(G.useEffect(()=>{const d=I=>{var z,R;(R=(z=k.current.props).onClose)===null||R===void 0||R.call(z,I)};return _.on("close",d),_.setDOMContent(j).addTo(h.getMap()),()=>{_.off("close",d),_.isOpen()&&_.remove()}},[]),G.useEffect(()=>{Bd(_.getElement(),a.style)},[a.style]),G.useImperativeHandle(l,()=>_,[]),_.isOpen()&&((_.getLngLat().lng!==a.longitude||_.getLngLat().lat!==a.latitude)&&_.setLngLat([a.longitude,a.latitude]),a.offset&&!wc(_.options.offset,a.offset)&&_.setOffset(a.offset),(_.options.anchor!==a.anchor||_.options.maxWidth!==a.maxWidth)&&(_.options.anchor=a.anchor,_.setMaxWidth(a.maxWidth)),_.options.className!==a.className)){const d=Wv(_.options.className),I=Wv(a.className);for(const z of d)I.has(z)||_.removeClassName(z);for(const z of I)d.has(z)||_.addClassName(z);_.options.className=a.className}return Gx.createPortal(a.children,j)}const uP=G.memo(G.forwardRef(cP));function Nm(a,l,h,x){const j=G.useContext(Jf),k=G.useMemo(()=>a(j),[]);return G.useEffect(()=>{const _=l,d=null,I=typeof l=="function"?l:null,{map:z}=j;return z.hasControl(k)||(z.addControl(k,_?.position),d&&d(j)),()=>{I&&I(j),z.hasControl(k)&&z.removeControl(k)}},[]),k}function dP(a){const l=Nm(({mapLib:h})=>new h.AttributionControl(a),{position:a.position});return G.useEffect(()=>{Bd(l._container,a.style)},[a.style]),null}G.memo(dP);function hP(a){const l=Nm(({mapLib:h})=>new h.FullscreenControl({container:a.containerId&&document.getElementById(a.containerId)}),{position:a.position});return G.useEffect(()=>{Bd(l._controlContainer,a.style)},[a.style]),null}G.memo(hP);function pP(a,l){const h=G.useRef({props:a}),x=Nm(({mapLib:j})=>{const k=new j.GeolocateControl(a),_=k._setupUI;return k._setupUI=d=>{k._container.hasChildNodes()||_(d)},k.on("geolocate",d=>{var I,z;(z=(I=h.current.props).onGeolocate)===null||z===void 0||z.call(I,d)}),k.on("error",d=>{var I,z;(z=(I=h.current.props).onError)===null||z===void 0||z.call(I,d)}),k.on("outofmaxbounds",d=>{var I,z;(z=(I=h.current.props).onOutOfMaxBounds)===null||z===void 0||z.call(I,d)}),k.on("trackuserlocationstart",d=>{var I,z;(z=(I=h.current.props).onTrackUserLocationStart)===null||z===void 0||z.call(I,d)}),k.on("trackuserlocationend",d=>{var I,z;(z=(I=h.current.props).onTrackUserLocationEnd)===null||z===void 0||z.call(I,d)}),k},{position:a.position});return h.current.props=a,G.useImperativeHandle(l,()=>x,[]),G.useEffect(()=>{Bd(x._container,a.style)},[a.style]),null}G.memo(G.forwardRef(pP));function mP(a){const l=Nm(({mapLib:h})=>new h.NavigationControl(a),{position:a.position});return G.useEffect(()=>{Bd(l._container,a.style)},[a.style]),null}const fP=G.memo(mP);function gP(a){const l=Nm(({mapLib:k})=>new k.ScaleControl(a),{position:a.position}),h=G.useRef(a),x=h.current;h.current=a;const{style:j}=a;return a.maxWidth!==void 0&&a.maxWidth!==x.maxWidth&&(l.options.maxWidth=a.maxWidth),a.unit!==void 0&&a.unit!==x.unit&&l.setUnit(a.unit),G.useEffect(()=>{Bd(l._container,j)},[j]),null}G.memo(gP);const xP=W3(()=>Promise.resolve().then(()=>jP),[]),yP=G.forwardRef(function(l,h){return nP(l,h,xP)}),qv=lP,vP=uP,_P=fP;var If={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v4.7.1/LICENSE.txt
 */var wP=If.exports,Gv;function bP(){return Gv||(Gv=1,(function(a,l){(function(h,x){a.exports=x()})(wP,(function(){var h={},x={};function j(_,d,I){if(x[_]=I,_==="index"){var z="var sharedModule = {}; ("+x.shared+")(sharedModule); ("+x.worker+")(sharedModule);",R={};return x.shared(R),x.index(h,R),typeof window<"u"&&h.setWorkerUrl(window.URL.createObjectURL(new Blob([z],{type:"text/javascript"}))),h}}j("shared",["exports"],(function(_){function d(s,t,r,u){return new(r||(r=Promise))((function(f,w){function b(A){try{C(u.next(A))}catch(F){w(F)}}function S(A){try{C(u.throw(A))}catch(F){w(F)}}function C(A){var F;A.done?f(A.value):(F=A.value,F instanceof r?F:new r((function(V){V(F)}))).then(b,S)}C((u=u.apply(s,t||[])).next())}))}function I(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}typeof SuppressedError=="function"&&SuppressedError;var z=R;function R(s,t){this.x=s,this.y=t}R.prototype={clone:function(){return new R(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,t){return this.clone()._rotateAround(s,t)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var t=s.x-this.x,r=s.y-this.y;return t*t+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,t){return Math.atan2(this.x*t-this.y*s,this.x*s+this.y*t)},_matMult:function(s){var t=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=t,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var t=Math.cos(s),r=Math.sin(s),u=r*this.x+t*this.y;return this.x=t*this.x-r*this.y,this.y=u,this},_rotateAround:function(s,t){var r=Math.cos(s),u=Math.sin(s),f=t.y+u*(this.x-t.x)+r*(this.y-t.y);return this.x=t.x+r*(this.x-t.x)-u*(this.y-t.y),this.y=f,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},R.convert=function(s){return s instanceof R?s:Array.isArray(s)?new R(s[0],s[1]):s};var D=I(z),O=ie;function ie(s,t,r,u){this.cx=3*s,this.bx=3*(r-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=t,this.p2x=r,this.p2y=u}ie.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,t){if(t===void 0&&(t=1e-6),s<0)return 0;if(s>1)return 1;for(var r=s,u=0;u<8;u++){var f=this.sampleCurveX(r)-s;if(Math.abs(f)<t)return r;var w=this.sampleCurveDerivativeX(r);if(Math.abs(w)<1e-6)break;r-=f/w}var b=0,S=1;for(r=s,u=0;u<20&&(f=this.sampleCurveX(r),!(Math.abs(f-s)<t));u++)s>f?b=r:S=r,r=.5*(S-b)+b;return r},solve:function(s,t){return this.sampleCurveY(this.solveCurveX(s,t))}};var Q=I(O);let ae,se;function pe(){return ae==null&&(ae=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),ae}function Pe(){if(se==null&&(se=!1,pe())){const t=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(t){for(let u=0;u<25;u++){const f=4*u;t.fillStyle=`rgb(${f},${f+1},${f+2})`,t.fillRect(u%5,Math.floor(u/5),1,1)}const r=t.getImageData(0,0,5,5).data;for(let u=0;u<100;u++)if(u%4!=3&&r[u]!==u){se=!0;break}}}return se||!1}function Ie(s,t,r,u){const f=new Q(s,t,r,u);return w=>f.solve(w)}const Ze=Ie(.25,.1,.25,1);function Je(s,t,r){return Math.min(r,Math.max(t,s))}function Xe(s,t,r){const u=r-t,f=((s-t)%u+u)%u+t;return f===t?r:f}function ut(s,...t){for(const r of t)for(const u in r)s[u]=r[u];return s}let je=1;function Ae(s,t,r){const u={};for(const f in s)u[f]=t.call(this,s[f],f,s);return u}function He(s,t,r){const u={};for(const f in s)t.call(this,s[f],f,s)&&(u[f]=s[f]);return u}function ct(s){return Array.isArray(s)?s.map(ct):typeof s=="object"&&s?Ae(s,ct):s}const Jt={};function Ve(s){Jt[s]||(typeof console<"u"&&console.warn(s),Jt[s]=!0)}function at(s,t,r){return(r.y-s.y)*(t.x-s.x)>(t.y-s.y)*(r.x-s.x)}function Tt(s){return typeof WorkerGlobalScope<"u"&&s!==void 0&&s instanceof WorkerGlobalScope}let Et=null;function gt(s){return typeof ImageBitmap<"u"&&s instanceof ImageBitmap}const Be="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Nt(s,t,r,u,f){return d(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const w=new VideoFrame(s,{timestamp:0});try{const b=w?.format;if(!b||!b.startsWith("BGR")&&!b.startsWith("RGB"))throw new Error(`Unrecognized format ${b}`);const S=b.startsWith("BGR"),C=new Uint8ClampedArray(u*f*4);if(yield w.copyTo(C,(function(A,F,V,W,Z){const J=4*Math.max(-F,0),te=(Math.max(0,V)-V)*W*4+J,de=4*W,ge=Math.max(0,F),Me=Math.max(0,V);return{rect:{x:ge,y:Me,width:Math.min(A.width,F+W)-ge,height:Math.min(A.height,V+Z)-Me},layout:[{offset:te,stride:de}]}})(s,t,r,u,f)),S)for(let A=0;A<C.length;A+=4){const F=C[A];C[A]=C[A+2],C[A+2]=F}return C}finally{w.close()}}))}let it,Se;const Ye="AbortError";function ot(){return new Error(Ye)}const _t={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function zt(s){return _t.REGISTERED_PROTOCOLS[s.substring(0,s.indexOf("://"))]}const ti="global-dispatcher";class Ot extends Error{constructor(t,r,u,f){super(`AJAXError: ${r} (${t}): ${u}`),this.status=t,this.statusText=r,this.url=u,this.body=f}}const Rt=()=>Tt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,xi=function(s,t){if(/:\/\//.test(s.url)&&!/^https?:|^file:/.test(s.url)){const u=zt(s.url);if(u)return u(s,t);if(Tt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,targetMapId:ti},t)}if(!(/^file:/.test(r=s.url)||/^file:/.test(Rt())&&!/^\w+:/.test(r))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(u,f){return d(this,void 0,void 0,(function*(){const w=new Request(u.url,{method:u.method||"GET",body:u.body,credentials:u.credentials,headers:u.headers,cache:u.cache,referrer:Rt(),signal:f.signal});u.type!=="json"||w.headers.has("Accept")||w.headers.set("Accept","application/json");const b=yield fetch(w);if(!b.ok){const A=yield b.blob();throw new Ot(b.status,b.statusText,u.url,A)}let S;S=u.type==="arrayBuffer"||u.type==="image"?b.arrayBuffer():u.type==="json"?b.json():b.text();const C=yield S;if(f.signal.aborted)throw ot();return{data:C,cacheControl:b.headers.get("Cache-Control"),expires:b.headers.get("Expires")}}))})(s,t);if(Tt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:s,mustQueue:!0,targetMapId:ti},t)}var r;return(function(u,f){return new Promise(((w,b)=>{var S;const C=new XMLHttpRequest;C.open(u.method||"GET",u.url,!0),u.type!=="arrayBuffer"&&u.type!=="image"||(C.responseType="arraybuffer");for(const A in u.headers)C.setRequestHeader(A,u.headers[A]);u.type==="json"&&(C.responseType="text",!((S=u.headers)===null||S===void 0)&&S.Accept||C.setRequestHeader("Accept","application/json")),C.withCredentials=u.credentials==="include",C.onerror=()=>{b(new Error(C.statusText))},C.onload=()=>{if(!f.signal.aborted)if((C.status>=200&&C.status<300||C.status===0)&&C.response!==null){let A=C.response;if(u.type==="json")try{A=JSON.parse(C.response)}catch(F){return void b(F)}w({data:A,cacheControl:C.getResponseHeader("Cache-Control"),expires:C.getResponseHeader("Expires")})}else{const A=new Blob([C.response],{type:C.getResponseHeader("Content-Type")});b(new Ot(C.status,C.statusText,u.url,A))}},f.signal.addEventListener("abort",(()=>{C.abort(),b(ot())})),C.send(u.body)}))})(s,t)};function Bi(s){if(!s||s.indexOf("://")<=0||s.indexOf("data:image/")===0||s.indexOf("blob:")===0)return!0;const t=new URL(s),r=window.location;return t.protocol===r.protocol&&t.host===r.host}function Ys(s,t,r){r[s]&&r[s].indexOf(t)!==-1||(r[s]=r[s]||[],r[s].push(t))}function hs(s,t,r){if(r&&r[s]){const u=r[s].indexOf(t);u!==-1&&r[s].splice(u,1)}}class Gr{constructor(t,r={}){ut(this,r),this.type=t}}class Pr extends Gr{constructor(t,r={}){super("error",ut({error:t},r))}}class pa{on(t,r){return this._listeners=this._listeners||{},Ys(t,r,this._listeners),this}off(t,r){return hs(t,r,this._listeners),hs(t,r,this._oneTimeListeners),this}once(t,r){return r?(this._oneTimeListeners=this._oneTimeListeners||{},Ys(t,r,this._oneTimeListeners),this):new Promise((u=>this.once(t,u)))}fire(t,r){typeof t=="string"&&(t=new Gr(t,r||{}));const u=t.type;if(this.listens(u)){t.target=this;const f=this._listeners&&this._listeners[u]?this._listeners[u].slice():[];for(const S of f)S.call(this,t);const w=this._oneTimeListeners&&this._oneTimeListeners[u]?this._oneTimeListeners[u].slice():[];for(const S of w)hs(u,S,this._oneTimeListeners),S.call(this,t);const b=this._eventedParent;b&&(ut(t,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),b.fire(t))}else t instanceof Pr&&console.error(t.error);return this}listens(t){return this._listeners&&this._listeners[t]&&this._listeners[t].length>0||this._oneTimeListeners&&this._oneTimeListeners[t]&&this._oneTimeListeners[t].length>0||this._eventedParent&&this._eventedParent.listens(t)}setEventedParent(t,r){return this._eventedParent=t,this._eventedParentData=r,this}}var Oe={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"enum",default:"mercator",values:{mercator:{},globe:{}}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const mr=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function ma(s,t){const r={};for(const u in s)u!=="ref"&&(r[u]=s[u]);return mr.forEach((u=>{u in t&&(r[u]=t[u])})),r}function hi(s,t){if(Array.isArray(s)){if(!Array.isArray(t)||s.length!==t.length)return!1;for(let r=0;r<s.length;r++)if(!hi(s[r],t[r]))return!1;return!0}if(typeof s=="object"&&s!==null&&t!==null){if(typeof t!="object"||Object.keys(s).length!==Object.keys(t).length)return!1;for(const r in s)if(!hi(s[r],t[r]))return!1;return!0}return s===t}function Fi(s,t){s.push(t)}function dn(s,t,r){Fi(r,{command:"addSource",args:[s,t[s]]})}function ss(s,t,r){Fi(t,{command:"removeSource",args:[s]}),r[s]=!0}function Js(s,t,r,u){ss(s,r,u),dn(s,t,r)}function fa(s,t,r){let u;for(u in s[r])if(Object.prototype.hasOwnProperty.call(s[r],u)&&u!=="data"&&!hi(s[r][u],t[r][u]))return!1;for(u in t[r])if(Object.prototype.hasOwnProperty.call(t[r],u)&&u!=="data"&&!hi(s[r][u],t[r][u]))return!1;return!0}function fr(s,t,r,u,f,w){s=s||{},t=t||{};for(const b in s)Object.prototype.hasOwnProperty.call(s,b)&&(hi(s[b],t[b])||r.push({command:w,args:[u,b,t[b],f]}));for(const b in t)Object.prototype.hasOwnProperty.call(t,b)&&!Object.prototype.hasOwnProperty.call(s,b)&&(hi(s[b],t[b])||r.push({command:w,args:[u,b,t[b],f]}))}function Mn(s){return s.id}function ga(s,t){return s[t.id]=t,s}class st{constructor(t,r,u,f){this.message=(t?`${t}: `:"")+u,f&&(this.identifier=f),r!=null&&r.__line__&&(this.line=r.__line__)}}function gr(s,...t){for(const r of t)for(const u in r)s[u]=r[u];return s}class Xi extends Error{constructor(t,r){super(r),this.message=r,this.key=t}}class Ks{constructor(t,r=[]){this.parent=t,this.bindings={};for(const[u,f]of r)this.bindings[u]=f}concat(t){return new Ks(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const xr={kind:"null"},dt={kind:"number"},ui={kind:"string"},Kt={kind:"boolean"},Ps={kind:"color"},yr={kind:"object"},ei={kind:"value"},xs={kind:"collator"},Zr={kind:"formatted"},vr={kind:"padding"},Vs={kind:"resolvedImage"},he={kind:"variableAnchorOffsetCollection"};function H(s,t){return{kind:"array",itemType:s,N:t}}function q(s){if(s.kind==="array"){const t=q(s.itemType);return typeof s.N=="number"?`array<${t}, ${s.N}>`:s.itemType.kind==="value"?"array":`array<${t}>`}return s.kind}const K=[xr,dt,ui,Kt,Ps,Zr,yr,H(ei),vr,Vs,he];function oe(s,t){if(t.kind==="error")return null;if(s.kind==="array"){if(t.kind==="array"&&(t.N===0&&t.itemType.kind==="value"||!oe(s.itemType,t.itemType))&&(typeof s.N!="number"||s.N===t.N))return null}else{if(s.kind===t.kind)return null;if(s.kind==="value"){for(const r of K)if(!oe(r,t))return null}}return`Expected ${q(s)} but found ${q(t)} instead.`}function ve(s,t){return t.some((r=>r.kind===s.kind))}function _e(s,t){return t.some((r=>r==="null"?s===null:r==="array"?Array.isArray(s):r==="object"?s&&!Array.isArray(s)&&typeof s=="object":r===typeof s))}function ke(s,t){return s.kind==="array"&&t.kind==="array"?s.itemType.kind===t.itemType.kind&&typeof s.N=="number":s.kind===t.kind}const xe=.96422,Le=.82521,We=4/29,Re=6/29,et=3*Re*Re,Dt=Re*Re*Re,Ht=Math.PI/180,ki=180/Math.PI;function li(s){return(s%=360)<0&&(s+=360),s}function Si([s,t,r,u]){let f,w;const b=ys((.2225045*(s=pi(s))+.7168786*(t=pi(t))+.0606169*(r=pi(r)))/1);s===t&&t===r?f=w=b:(f=ys((.4360747*s+.3850649*t+.1430804*r)/xe),w=ys((.0139322*s+.0971045*t+.7141733*r)/Le));const S=116*b-16;return[S<0?0:S,500*(f-b),200*(b-w),u]}function pi(s){return s<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function ys(s){return s>Dt?Math.pow(s,1/3):s/et+We}function rs([s,t,r,u]){let f=(s+16)/116,w=isNaN(t)?f:f+t/500,b=isNaN(r)?f:f-r/200;return f=1*Ii(f),w=xe*Ii(w),b=Le*Ii(b),[yi(3.1338561*w-1.6168667*f-.4906146*b),yi(-.9787684*w+1.9161415*f+.033454*b),yi(.0719453*w-.2289914*f+1.4052427*b),u]}function yi(s){return(s=s<=.00304?12.92*s:1.055*Math.pow(s,1/2.4)-.055)<0?0:s>1?1:s}function Ii(s){return s>Re?s*s*s:et*(s-We)}function Yi(s){return parseInt(s.padEnd(2,s),16)/255}function Es(s,t){return $s(t?s/100:s,0,1)}function $s(s,t,r){return Math.min(Math.max(t,s),r)}function _r(s){return!s.some(Number.isNaN)}const Go={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};class ai{constructor(t,r,u,f=1,w=!0){this.r=t,this.g=r,this.b=u,this.a=f,w||(this.r*=f,this.g*=f,this.b*=f,f||this.overwriteGetter("rgb",[t,r,u,f]))}static parse(t){if(t instanceof ai)return t;if(typeof t!="string")return;const r=(function(u){if((u=u.toLowerCase().trim())==="transparent")return[0,0,0,0];const f=Go[u];if(f){const[b,S,C]=f;return[b/255,S/255,C/255,1]}if(u.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(u)){const b=u.length<6?1:2;let S=1;return[Yi(u.slice(S,S+=b)),Yi(u.slice(S,S+=b)),Yi(u.slice(S,S+=b)),Yi(u.slice(S,S+b)||"ff")]}if(u.startsWith("rgb")){const b=u.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(b){const[S,C,A,F,V,W,Z,J,te,de,ge,Me]=b,we=[F||" ",Z||" ",de].join("");if(we==="  "||we==="  /"||we===",,"||we===",,,"){const Ee=[A,W,te].join(""),Ue=Ee==="%%%"?100:Ee===""?255:0;if(Ue){const Ke=[$s(+C/Ue,0,1),$s(+V/Ue,0,1),$s(+J/Ue,0,1),ge?Es(+ge,Me):1];if(_r(Ke))return Ke}}return}}const w=u.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(w){const[b,S,C,A,F,V,W,Z,J]=w,te=[C||" ",F||" ",W].join("");if(te==="  "||te==="  /"||te===",,"||te===",,,"){const de=[+S,$s(+A,0,100),$s(+V,0,100),Z?Es(+Z,J):1];if(_r(de))return(function([ge,Me,we,Ee]){function Ue(Ke){const St=(Ke+ge/30)%12,Qt=Me*Math.min(we,1-we);return we-Qt*Math.max(-1,Math.min(St-3,9-St,1))}return ge=li(ge),Me/=100,we/=100,[Ue(0),Ue(8),Ue(4),Ee]})(de)}}})(t);return r?new ai(...r,!1):void 0}get rgb(){const{r:t,g:r,b:u,a:f}=this,w=f||1/0;return this.overwriteGetter("rgb",[t/w,r/w,u/w,f])}get hcl(){return this.overwriteGetter("hcl",(function(t){const[r,u,f,w]=Si(t),b=Math.sqrt(u*u+f*f);return[Math.round(1e4*b)?li(Math.atan2(f,u)*ki):NaN,b,r,w]})(this.rgb))}get lab(){return this.overwriteGetter("lab",Si(this.rgb))}overwriteGetter(t,r){return Object.defineProperty(this,t,{value:r}),r}toString(){const[t,r,u,f]=this.rgb;return`rgba(${[t,r,u].map((w=>Math.round(255*w))).join(",")},${f})`}}ai.black=new ai(0,0,0,1),ai.white=new ai(1,1,1,1),ai.transparent=new ai(0,0,0,0),ai.red=new ai(1,0,0,1);class _u{constructor(t,r,u){this.sensitivity=t?r?"variant":"case":r?"accent":"base",this.locale=u,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,r){return this.collator.compare(t,r)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Bl{constructor(t,r,u,f,w){this.text=t,this.image=r,this.scale=u,this.fontStack=f,this.textColor=w}}class Er{constructor(t){this.sections=t}static fromString(t){return new Er([new Bl(t,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((t=>t.text.length!==0||t.image&&t.image.name.length!==0))}static factory(t){return t instanceof Er?t:Er.fromString(t)}toString(){return this.sections.length===0?"":this.sections.map((t=>t.text)).join("")}}class or{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof or)return t;if(typeof t=="number")return new or([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const r of t)if(typeof r!="number")return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new or(t)}}toString(){return JSON.stringify(this.values)}}const op=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Xr{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof Xr)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let r=0;r<t.length;r+=2){const u=t[r],f=t[r+1];if(typeof u!="string"||!op.has(u)||!Array.isArray(f)||f.length!==2||typeof f[0]!="number"||typeof f[1]!="number")return}return new Xr(t)}}toString(){return JSON.stringify(this.values)}}class lr{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new lr({name:t,available:!1}):null}}function wr(s,t,r,u){return typeof s=="number"&&s>=0&&s<=255&&typeof t=="number"&&t>=0&&t<=255&&typeof r=="number"&&r>=0&&r<=255?u===void 0||typeof u=="number"&&u>=0&&u<=1?null:`Invalid rgba value [${[s,t,r,u].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof u=="number"?[s,t,r,u]:[s,t,r]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vo(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof ai||s instanceof _u||s instanceof Er||s instanceof or||s instanceof Xr||s instanceof lr)return!0;if(Array.isArray(s)){for(const t of s)if(!vo(t))return!1;return!0}if(typeof s=="object"){for(const t in s)if(!vo(s[t]))return!1;return!0}return!1}function Li(s){if(s===null)return xr;if(typeof s=="string")return ui;if(typeof s=="boolean")return Kt;if(typeof s=="number")return dt;if(s instanceof ai)return Ps;if(s instanceof _u)return xs;if(s instanceof Er)return Zr;if(s instanceof or)return vr;if(s instanceof Xr)return he;if(s instanceof lr)return Vs;if(Array.isArray(s)){const t=s.length;let r;for(const u of s){const f=Li(u);if(r){if(r===f)continue;r=ei;break}r=f}return H(r||ei,t)}return yr}function Fl(s){const t=typeof s;return s===null?"":t==="string"||t==="number"||t==="boolean"?String(s):s instanceof ai||s instanceof Er||s instanceof or||s instanceof Xr||s instanceof lr?s.toString():JSON.stringify(s)}class An{constructor(t,r){this.type=t,this.value=r}static parse(t,r){if(t.length!==2)return r.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!vo(t[1]))return r.error("invalid value");const u=t[1];let f=Li(u);const w=r.expectedType;return f.kind!=="array"||f.N!==0||!w||w.kind!=="array"||typeof w.N=="number"&&w.N!==0||(f=w),new An(f,u)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}class vs{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const _o={string:ui,number:dt,boolean:Kt,object:yr};class Mr{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");let u,f=1;const w=t[0];if(w==="array"){let S,C;if(t.length>2){const A=t[1];if(typeof A!="string"||!(A in _o)||A==="object")return r.error('The item type argument of "array" must be one of string, number, boolean',1);S=_o[A],f++}else S=ei;if(t.length>3){if(t[2]!==null&&(typeof t[2]!="number"||t[2]<0||t[2]!==Math.floor(t[2])))return r.error('The length argument to "array" must be a positive integer literal',2);C=t[2],f++}u=H(S,C)}else{if(!_o[w])throw new Error(`Types doesn't contain name = ${w}`);u=_o[w]}const b=[];for(;f<t.length;f++){const S=r.parse(t[f],f,ei);if(!S)return null;b.push(S)}return new Mr(u,b)}evaluate(t){for(let r=0;r<this.args.length;r++){const u=this.args[r].evaluate(t);if(!oe(this.type,Li(u)))return u;if(r===this.args.length-1)throw new vs(`Expected value to be of type ${q(this.type)}, but found ${q(Li(u))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const wo={"to-boolean":Kt,"to-color":Ps,"to-number":dt,"to-string":ui};class Ar{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const u=t[0];if(!wo[u])throw new Error(`Can't parse ${u} as it is not part of the known types`);if((u==="to-boolean"||u==="to-string")&&t.length!==2)return r.error("Expected one argument.");const f=wo[u],w=[];for(let b=1;b<t.length;b++){const S=r.parse(t[b],b,ei);if(!S)return null;w.push(S)}return new Ar(f,w)}evaluate(t){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(t);case"color":{let r,u;for(const f of this.args){if(r=f.evaluate(t),u=null,r instanceof ai)return r;if(typeof r=="string"){const w=t.parseColor(r);if(w)return w}else if(Array.isArray(r)&&(u=r.length<3||r.length>4?`Invalid rbga value ${JSON.stringify(r)}: expected an array containing either three or four numeric values.`:wr(r[0],r[1],r[2],r[3]),!u))return new ai(r[0]/255,r[1]/255,r[2]/255,r[3])}throw new vs(u||`Could not parse color from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"padding":{let r;for(const u of this.args){r=u.evaluate(t);const f=or.parse(r);if(f)return f}throw new vs(`Could not parse padding from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"variableAnchorOffsetCollection":{let r;for(const u of this.args){r=u.evaluate(t);const f=Xr.parse(r);if(f)return f}throw new vs(`Could not parse variableAnchorOffsetCollection from value '${typeof r=="string"?r:JSON.stringify(r)}'`)}case"number":{let r=null;for(const u of this.args){if(r=u.evaluate(t),r===null)return 0;const f=Number(r);if(!isNaN(f))return f}throw new vs(`Could not convert ${JSON.stringify(r)} to number.`)}case"formatted":return Er.fromString(Fl(this.args[0].evaluate(t)));case"resolvedImage":return lr.fromString(Fl(this.args[0].evaluate(t)));default:return Fl(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const lp=["Unknown","Point","LineString","Polygon"];class Pc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?lp[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let r=this._parseColorCache[t];return r||(r=this._parseColorCache[t]=ai.parse(t)),r}}class xa{constructor(t,r,u=[],f,w=new Ks,b=[]){this.registry=t,this.path=u,this.key=u.map((S=>`[${S}]`)).join(""),this.scope=w,this.errors=b,this.expectedType=f,this._isConstant=r}parse(t,r,u,f,w={}){return r?this.concat(r,u,f)._parse(t,w):this._parse(t,w)}_parse(t,r){function u(f,w,b){return b==="assert"?new Mr(w,[f]):b==="coerce"?new Ar(w,[f]):f}if(t!==null&&typeof t!="string"&&typeof t!="boolean"&&typeof t!="number"||(t=["literal",t]),Array.isArray(t)){if(t.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const f=t[0];if(typeof f!="string")return this.error(`Expression name must be a string, but found ${typeof f} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const w=this.registry[f];if(w){let b=w.parse(t,this);if(!b)return null;if(this.expectedType){const S=this.expectedType,C=b.type;if(S.kind!=="string"&&S.kind!=="number"&&S.kind!=="boolean"&&S.kind!=="object"&&S.kind!=="array"||C.kind!=="value")if(S.kind!=="color"&&S.kind!=="formatted"&&S.kind!=="resolvedImage"||C.kind!=="value"&&C.kind!=="string")if(S.kind!=="padding"||C.kind!=="value"&&C.kind!=="number"&&C.kind!=="array")if(S.kind!=="variableAnchorOffsetCollection"||C.kind!=="value"&&C.kind!=="array"){if(this.checkSubtype(S,C))return null}else b=u(b,S,r.typeAnnotation||"coerce");else b=u(b,S,r.typeAnnotation||"coerce");else b=u(b,S,r.typeAnnotation||"coerce");else b=u(b,S,r.typeAnnotation||"assert")}if(!(b instanceof An)&&b.type.kind!=="resolvedImage"&&this._isConstant(b)){const S=new Pc;try{b=new An(b.type,b.evaluate(S))}catch(C){return this.error(C.message),null}}return b}return this.error(`Unknown expression "${f}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(t===void 0?"'undefined' value invalid. Use null instead.":typeof t=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof t} instead.`)}concat(t,r,u){const f=typeof t=="number"?this.path.concat(t):this.path,w=u?this.scope.concat(u):this.scope;return new xa(this.registry,this._isConstant,f,r||null,w,this.errors)}error(t,...r){const u=`${this.key}${r.map((f=>`[${f}]`)).join("")}`;this.errors.push(new Xi(u,t))}checkSubtype(t,r){const u=oe(t,r);return u&&this.error(u),u}}class ya{constructor(t,r){this.type=r.type,this.bindings=[].concat(t),this.result=r}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const r of this.bindings)t(r[1]);t(this.result)}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const u=[];for(let w=1;w<t.length-1;w+=2){const b=t[w];if(typeof b!="string")return r.error(`Expected string, but found ${typeof b} instead.`,w);if(/[^a-zA-Z0-9_]/.test(b))return r.error("Variable names must contain only alphanumeric characters or '_'.",w);const S=r.parse(t[w+1],w+1);if(!S)return null;u.push([b,S])}const f=r.parse(t[t.length-1],t.length-1,r.expectedType,u);return f?new ya(u,f):null}outputDefined(){return this.result.outputDefined()}}class Ti{constructor(t,r){this.type=r.type,this.name=t,this.boundExpression=r}static parse(t,r){if(t.length!==2||typeof t[1]!="string")return r.error("'var' expression requires exactly one string literal argument.");const u=t[1];return r.scope.has(u)?new Ti(u,r.scope.get(u)):r.error(`Unknown variable "${u}". Make sure "${u}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class bo{constructor(t,r,u){this.type=t,this.index=r,this.input=u}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,dt),f=r.parse(t[2],2,H(r.expectedType||ei));return u&&f?new bo(f.type.itemType,u,f):null}evaluate(t){const r=this.index.evaluate(t),u=this.input.evaluate(t);if(r<0)throw new vs(`Array index out of bounds: ${r} < 0.`);if(r>=u.length)throw new vs(`Array index out of bounds: ${r} > ${u.length-1}.`);if(r!==Math.floor(r))throw new vs(`Array index must be an integer, but found ${r} instead.`);return u[r]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class wu{constructor(t,r){this.type=Kt,this.needle=t,this.haystack=r}static parse(t,r){if(t.length!==3)return r.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,ei),f=r.parse(t[2],2,ei);return u&&f?ve(u.type,[Kt,ui,dt,xr,ei])?new wu(u,f):r.error(`Expected first argument to be of type boolean, string, number or null, but found ${q(u.type)} instead`):null}evaluate(t){const r=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!u)return!1;if(!_e(r,["boolean","string","number","null"]))throw new vs(`Expected first argument to be of type boolean, string, number or null, but found ${q(Li(r))} instead.`);if(!_e(u,["string","array"]))throw new vs(`Expected second argument to be of type array or string, but found ${q(Li(u))} instead.`);return u.indexOf(r)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ua{constructor(t,r,u){this.type=dt,this.needle=t,this.haystack=r,this.fromIndex=u}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,ei),f=r.parse(t[2],2,ei);if(!u||!f)return null;if(!ve(u.type,[Kt,ui,dt,xr,ei]))return r.error(`Expected first argument to be of type boolean, string, number or null, but found ${q(u.type)} instead`);if(t.length===4){const w=r.parse(t[3],3,dt);return w?new Ua(u,f,w):null}return new Ua(u,f)}evaluate(t){const r=this.needle.evaluate(t),u=this.haystack.evaluate(t);if(!_e(r,["boolean","string","number","null"]))throw new vs(`Expected first argument to be of type boolean, string, number or null, but found ${q(Li(r))} instead.`);let f;if(this.fromIndex&&(f=this.fromIndex.evaluate(t)),_e(u,["string"])){const w=u.indexOf(r,f);return w===-1?-1:[...u.slice(0,w)].length}if(_e(u,["array"]))return u.indexOf(r,f);throw new vs(`Expected second argument to be of type array or string, but found ${q(Li(u))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class zi{constructor(t,r,u,f,w,b){this.inputType=t,this.type=r,this.input=u,this.cases=f,this.outputs=w,this.otherwise=b}static parse(t,r){if(t.length<5)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return r.error("Expected an even number of arguments.");let u,f;r.expectedType&&r.expectedType.kind!=="value"&&(f=r.expectedType);const w={},b=[];for(let A=2;A<t.length-1;A+=2){let F=t[A];const V=t[A+1];Array.isArray(F)||(F=[F]);const W=r.concat(A);if(F.length===0)return W.error("Expected at least one branch label.");for(const J of F){if(typeof J!="number"&&typeof J!="string")return W.error("Branch labels must be numbers or strings.");if(typeof J=="number"&&Math.abs(J)>Number.MAX_SAFE_INTEGER)return W.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof J=="number"&&Math.floor(J)!==J)return W.error("Numeric branch labels must be integer values.");if(u){if(W.checkSubtype(u,Li(J)))return null}else u=Li(J);if(w[String(J)]!==void 0)return W.error("Branch labels must be unique.");w[String(J)]=b.length}const Z=r.parse(V,A,f);if(!Z)return null;f=f||Z.type,b.push(Z)}const S=r.parse(t[1],1,ei);if(!S)return null;const C=r.parse(t[t.length-1],t.length-1,f);return C?S.type.kind!=="value"&&r.concat(1).checkSubtype(u,S.type)?null:new zi(u,f,S,w,b,C):null}evaluate(t){const r=this.input.evaluate(t);return(Li(r)===this.inputType&&this.outputs[this.cases[r]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Ol{constructor(t,r,u){this.type=t,this.branches=r,this.otherwise=u}static parse(t,r){if(t.length<4)return r.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return r.error("Expected an odd number of arguments.");let u;r.expectedType&&r.expectedType.kind!=="value"&&(u=r.expectedType);const f=[];for(let b=1;b<t.length-1;b+=2){const S=r.parse(t[b],b,Kt);if(!S)return null;const C=r.parse(t[b+1],b+1,u);if(!C)return null;f.push([S,C]),u=u||C.type}const w=r.parse(t[t.length-1],t.length-1,u);if(!w)return null;if(!u)throw new Error("Can't infer output type");return new Ol(u,f,w)}evaluate(t){for(const[r,u]of this.branches)if(r.evaluate(t))return u.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[r,u]of this.branches)t(r),t(u);t(this.otherwise)}outputDefined(){return this.branches.every((([t,r])=>r.outputDefined()))&&this.otherwise.outputDefined()}}class Zo{constructor(t,r,u,f){this.type=t,this.input=r,this.beginIndex=u,this.endIndex=f}static parse(t,r){if(t.length<=2||t.length>=5)return r.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const u=r.parse(t[1],1,ei),f=r.parse(t[2],2,dt);if(!u||!f)return null;if(!ve(u.type,[H(ei),ui,ei]))return r.error(`Expected first argument to be of type array or string, but found ${q(u.type)} instead`);if(t.length===4){const w=r.parse(t[3],3,dt);return w?new Zo(u.type,u,f,w):null}return new Zo(u.type,u,f)}evaluate(t){const r=this.input.evaluate(t),u=this.beginIndex.evaluate(t);let f;if(this.endIndex&&(f=this.endIndex.evaluate(t)),_e(r,["string"]))return[...r].slice(u,f).join("");if(_e(r,["array"]))return r.slice(u,f);throw new vs(`Expected first argument to be of type array or string, but found ${q(Li(r))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Xo(s,t){const r=s.length-1;let u,f,w=0,b=r,S=0;for(;w<=b;)if(S=Math.floor((w+b)/2),u=s[S],f=s[S+1],u<=t){if(S===r||t<f)return S;w=S+1}else{if(!(u>t))throw new vs("Input is not a number.");b=S-1}return 0}class jo{constructor(t,r,u){this.type=t,this.input=r,this.labels=[],this.outputs=[];for(const[f,w]of u)this.labels.push(f),this.outputs.push(w)}static parse(t,r){if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");const u=r.parse(t[1],1,dt);if(!u)return null;const f=[];let w=null;r.expectedType&&r.expectedType.kind!=="value"&&(w=r.expectedType);for(let b=1;b<t.length;b+=2){const S=b===1?-1/0:t[b],C=t[b+1],A=b,F=b+1;if(typeof S!="number")return r.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',A);if(f.length&&f[f.length-1][0]>=S)return r.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',A);const V=r.parse(C,F,w);if(!V)return null;w=w||V.type,f.push([S,V])}return new jo(w,u,f)}evaluate(t){const r=this.labels,u=this.outputs;if(r.length===1)return u[0].evaluate(t);const f=this.input.evaluate(t);if(f<=r[0])return u[0].evaluate(t);const w=r.length;return f>=r[w-1]?u[w-1].evaluate(t):u[Xo(r,f)].evaluate(t)}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function bu(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var Fd=Ec;function Ec(s,t,r,u){this.cx=3*s,this.bx=3*(r-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(u-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=t,this.p2x=r,this.p2y=u}Ec.prototype={sampleCurveX:function(s){return((this.ax*s+this.bx)*s+this.cx)*s},sampleCurveY:function(s){return((this.ay*s+this.by)*s+this.cy)*s},sampleCurveDerivativeX:function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},solveCurveX:function(s,t){if(t===void 0&&(t=1e-6),s<0)return 0;if(s>1)return 1;for(var r=s,u=0;u<8;u++){var f=this.sampleCurveX(r)-s;if(Math.abs(f)<t)return r;var w=this.sampleCurveDerivativeX(r);if(Math.abs(w)<1e-6)break;r-=f/w}var b=0,S=1;for(r=s,u=0;u<20&&(f=this.sampleCurveX(r),!(Math.abs(f-s)<t));u++)s>f?b=r:S=r,r=.5*(S-b)+b;return r},solve:function(s,t){return this.sampleCurveY(this.solveCurveX(s,t))}};var Mc=bu(Fd);function Ir(s,t,r){return s+r*(t-s)}function hn(s,t,r){return s.map(((u,f)=>Ir(u,t[f],r)))}const _s={number:Ir,color:function(s,t,r,u="rgb"){switch(u){case"rgb":{const[f,w,b,S]=hn(s.rgb,t.rgb,r);return new ai(f,w,b,S,!1)}case"hcl":{const[f,w,b,S]=s.hcl,[C,A,F,V]=t.hcl;let W,Z;if(isNaN(f)||isNaN(C))isNaN(f)?isNaN(C)?W=NaN:(W=C,b!==1&&b!==0||(Z=A)):(W=f,F!==1&&F!==0||(Z=w));else{let Me=C-f;C>f&&Me>180?Me-=360:C<f&&f-C>180&&(Me+=360),W=f+r*Me}const[J,te,de,ge]=(function([Me,we,Ee,Ue]){return Me=isNaN(Me)?0:Me*Ht,rs([Ee,Math.cos(Me)*we,Math.sin(Me)*we,Ue])})([W,Z??Ir(w,A,r),Ir(b,F,r),Ir(S,V,r)]);return new ai(J,te,de,ge,!1)}case"lab":{const[f,w,b,S]=rs(hn(s.lab,t.lab,r));return new ai(f,w,b,S,!1)}}},array:hn,padding:function(s,t,r){return new or(hn(s.values,t.values,r))},variableAnchorOffsetCollection:function(s,t,r){const u=s.values,f=t.values;if(u.length!==f.length)throw new vs(`Cannot interpolate values of different length. from: ${s.toString()}, to: ${t.toString()}`);const w=[];for(let b=0;b<u.length;b+=2){if(u[b]!==f[b])throw new vs(`Cannot interpolate values containing mismatched anchors. from[${b}]: ${u[b]}, to[${b}]: ${f[b]}`);w.push(u[b]);const[S,C]=u[b+1],[A,F]=f[b+1];w.push([Ir(S,A,r),Ir(C,F,r)])}return new Xr(w)}};class Us{constructor(t,r,u,f,w){this.type=t,this.operator=r,this.interpolation=u,this.input=f,this.labels=[],this.outputs=[];for(const[b,S]of w)this.labels.push(b),this.outputs.push(S)}static interpolationFactor(t,r,u,f){let w=0;if(t.name==="exponential")w=Ha(r,t.base,u,f);else if(t.name==="linear")w=Ha(r,1,u,f);else if(t.name==="cubic-bezier"){const b=t.controlPoints;w=new Mc(b[0],b[1],b[2],b[3]).solve(Ha(r,1,u,f))}return w}static parse(t,r){let[u,f,w,...b]=t;if(!Array.isArray(f)||f.length===0)return r.error("Expected an interpolation type expression.",1);if(f[0]==="linear")f={name:"linear"};else if(f[0]==="exponential"){const A=f[1];if(typeof A!="number")return r.error("Exponential interpolation requires a numeric base.",1,1);f={name:"exponential",base:A}}else{if(f[0]!=="cubic-bezier")return r.error(`Unknown interpolation type ${String(f[0])}`,1,0);{const A=f.slice(1);if(A.length!==4||A.some((F=>typeof F!="number"||F<0||F>1)))return r.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);f={name:"cubic-bezier",controlPoints:A}}}if(t.length-1<4)return r.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return r.error("Expected an even number of arguments.");if(w=r.parse(w,2,dt),!w)return null;const S=[];let C=null;u==="interpolate-hcl"||u==="interpolate-lab"?C=Ps:r.expectedType&&r.expectedType.kind!=="value"&&(C=r.expectedType);for(let A=0;A<b.length;A+=2){const F=b[A],V=b[A+1],W=A+3,Z=A+4;if(typeof F!="number")return r.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',W);if(S.length&&S[S.length-1][0]>=F)return r.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',W);const J=r.parse(V,Z,C);if(!J)return null;C=C||J.type,S.push([F,J])}return ke(C,dt)||ke(C,Ps)||ke(C,vr)||ke(C,he)||ke(C,H(dt))?new Us(C,u,f,w,S):r.error(`Type ${q(C)} is not interpolatable.`)}evaluate(t){const r=this.labels,u=this.outputs;if(r.length===1)return u[0].evaluate(t);const f=this.input.evaluate(t);if(f<=r[0])return u[0].evaluate(t);const w=r.length;if(f>=r[w-1])return u[w-1].evaluate(t);const b=Xo(r,f),S=Us.interpolationFactor(this.interpolation,f,r[b],r[b+1]),C=u[b].evaluate(t),A=u[b+1].evaluate(t);switch(this.operator){case"interpolate":return _s[this.type.kind](C,A,S);case"interpolate-hcl":return _s.color(C,A,S,"hcl");case"interpolate-lab":return _s.color(C,A,S,"lab")}}eachChild(t){t(this.input);for(const r of this.outputs)t(r)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Ha(s,t,r,u){const f=u-r,w=s-r;return f===0?0:t===1?w/f:(Math.pow(t,w)-1)/(Math.pow(t,f)-1)}class In{constructor(t,r){this.type=t,this.args=r}static parse(t,r){if(t.length<2)return r.error("Expectected at least one argument.");let u=null;const f=r.expectedType;f&&f.kind!=="value"&&(u=f);const w=[];for(const S of t.slice(1)){const C=r.parse(S,1+w.length,u,void 0,{typeAnnotation:"omit"});if(!C)return null;u=u||C.type,w.push(C)}if(!u)throw new Error("No output type");const b=f&&w.some((S=>oe(f,S.type)));return new In(b?ei:u,w)}evaluate(t){let r,u=null,f=0;for(const w of this.args)if(f++,u=w.evaluate(t),u&&u instanceof lr&&!u.available&&(r||(r=u.name),u=null,f===this.args.length&&(u=r)),u!==null)break;return u}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function Ac(s,t){return s==="=="||s==="!="?t.kind==="boolean"||t.kind==="string"||t.kind==="number"||t.kind==="null"||t.kind==="value":t.kind==="string"||t.kind==="number"||t.kind==="value"}function ju(s,t,r,u){return u.compare(t,r)===0}function Qn(s,t,r){const u=s!=="=="&&s!=="!=";return class Pb{constructor(w,b,S){this.type=Kt,this.lhs=w,this.rhs=b,this.collator=S,this.hasUntypedArgument=w.type.kind==="value"||b.type.kind==="value"}static parse(w,b){if(w.length!==3&&w.length!==4)return b.error("Expected two or three arguments.");const S=w[0];let C=b.parse(w[1],1,ei);if(!C)return null;if(!Ac(S,C.type))return b.concat(1).error(`"${S}" comparisons are not supported for type '${q(C.type)}'.`);let A=b.parse(w[2],2,ei);if(!A)return null;if(!Ac(S,A.type))return b.concat(2).error(`"${S}" comparisons are not supported for type '${q(A.type)}'.`);if(C.type.kind!==A.type.kind&&C.type.kind!=="value"&&A.type.kind!=="value")return b.error(`Cannot compare types '${q(C.type)}' and '${q(A.type)}'.`);u&&(C.type.kind==="value"&&A.type.kind!=="value"?C=new Mr(A.type,[C]):C.type.kind!=="value"&&A.type.kind==="value"&&(A=new Mr(C.type,[A])));let F=null;if(w.length===4){if(C.type.kind!=="string"&&A.type.kind!=="string"&&C.type.kind!=="value"&&A.type.kind!=="value")return b.error("Cannot use collator to compare non-string types.");if(F=b.parse(w[3],3,xs),!F)return null}return new Pb(C,A,F)}evaluate(w){const b=this.lhs.evaluate(w),S=this.rhs.evaluate(w);if(u&&this.hasUntypedArgument){const C=Li(b),A=Li(S);if(C.kind!==A.kind||C.kind!=="string"&&C.kind!=="number")throw new vs(`Expected arguments for "${s}" to be (string, string) or (number, number), but found (${C.kind}, ${A.kind}) instead.`)}if(this.collator&&!u&&this.hasUntypedArgument){const C=Li(b),A=Li(S);if(C.kind!=="string"||A.kind!=="string")return t(w,b,S)}return this.collator?r(w,b,S,this.collator.evaluate(w)):t(w,b,S)}eachChild(w){w(this.lhs),w(this.rhs),this.collator&&w(this.collator)}outputDefined(){return!0}}}const cp=Qn("==",(function(s,t,r){return t===r}),ju),Nu=Qn("!=",(function(s,t,r){return t!==r}),(function(s,t,r,u){return!ju(0,t,r,u)})),Vl=Qn("<",(function(s,t,r){return t<r}),(function(s,t,r,u){return u.compare(t,r)<0})),Od=Qn(">",(function(s,t,r){return t>r}),(function(s,t,r,u){return u.compare(t,r)>0})),up=Qn("<=",(function(s,t,r){return t<=r}),(function(s,t,r,u){return u.compare(t,r)<=0})),Yo=Qn(">=",(function(s,t,r){return t>=r}),(function(s,t,r,u){return u.compare(t,r)>=0}));class va{constructor(t,r,u){this.type=xs,this.locale=u,this.caseSensitive=t,this.diacriticSensitive=r}static parse(t,r){if(t.length!==2)return r.error("Expected one argument.");const u=t[1];if(typeof u!="object"||Array.isArray(u))return r.error("Collator options argument must be an object.");const f=r.parse(u["case-sensitive"]!==void 0&&u["case-sensitive"],1,Kt);if(!f)return null;const w=r.parse(u["diacritic-sensitive"]!==void 0&&u["diacritic-sensitive"],1,Kt);if(!w)return null;let b=null;return u.locale&&(b=r.parse(u.locale,1,ui),!b)?null:new va(f,w,b)}evaluate(t){return new _u(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Wa{constructor(t,r,u,f,w){this.type=ui,this.number=t,this.locale=r,this.currency=u,this.minFractionDigits=f,this.maxFractionDigits=w}static parse(t,r){if(t.length!==3)return r.error("Expected two arguments.");const u=r.parse(t[1],1,dt);if(!u)return null;const f=t[2];if(typeof f!="object"||Array.isArray(f))return r.error("NumberFormat options argument must be an object.");let w=null;if(f.locale&&(w=r.parse(f.locale,1,ui),!w))return null;let b=null;if(f.currency&&(b=r.parse(f.currency,1,ui),!b))return null;let S=null;if(f["min-fraction-digits"]&&(S=r.parse(f["min-fraction-digits"],1,dt),!S))return null;let C=null;return f["max-fraction-digits"]&&(C=r.parse(f["max-fraction-digits"],1,dt),!C)?null:new Wa(u,w,b,S,C)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class No{constructor(t){this.type=Zr,this.sections=t}static parse(t,r){if(t.length<2)return r.error("Expected at least one argument.");const u=t[1];if(!Array.isArray(u)&&typeof u=="object")return r.error("First argument must be an image or text section.");const f=[];let w=!1;for(let b=1;b<=t.length-1;++b){const S=t[b];if(w&&typeof S=="object"&&!Array.isArray(S)){w=!1;let C=null;if(S["font-scale"]&&(C=r.parse(S["font-scale"],1,dt),!C))return null;let A=null;if(S["text-font"]&&(A=r.parse(S["text-font"],1,H(ui)),!A))return null;let F=null;if(S["text-color"]&&(F=r.parse(S["text-color"],1,Ps),!F))return null;const V=f[f.length-1];V.scale=C,V.font=A,V.textColor=F}else{const C=r.parse(t[b],1,ei);if(!C)return null;const A=C.type.kind;if(A!=="string"&&A!=="value"&&A!=="null"&&A!=="resolvedImage")return r.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");w=!0,f.push({content:C,scale:null,font:null,textColor:null})}}return new No(f)}evaluate(t){return new Er(this.sections.map((r=>{const u=r.content.evaluate(t);return Li(u)===Vs?new Bl("",u,null,null,null):new Bl(Fl(u),null,r.scale?r.scale.evaluate(t):null,r.font?r.font.evaluate(t).join(","):null,r.textColor?r.textColor.evaluate(t):null)})))}eachChild(t){for(const r of this.sections)t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}outputDefined(){return!1}}class ku{constructor(t){this.type=Vs,this.input=t}static parse(t,r){if(t.length!==2)return r.error("Expected two arguments.");const u=r.parse(t[1],1,ui);return u?new ku(u):r.error("No image name provided.")}evaluate(t){const r=this.input.evaluate(t),u=lr.fromString(r);return u&&t.availableImages&&(u.available=t.availableImages.indexOf(r)>-1),u}eachChild(t){t(this.input)}outputDefined(){return!1}}class Su{constructor(t){this.type=dt,this.input=t}static parse(t,r){if(t.length!==2)return r.error(`Expected 1 argument, but found ${t.length-1} instead.`);const u=r.parse(t[1],1);return u?u.type.kind!=="array"&&u.type.kind!=="string"&&u.type.kind!=="value"?r.error(`Expected argument of type string or array, but found ${q(u.type)} instead.`):new Su(u):null}evaluate(t){const r=this.input.evaluate(t);if(typeof r=="string")return[...r].length;if(Array.isArray(r))return r.length;throw new vs(`Expected value to be of type string or array, but found ${q(Li(r))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const pn=8192;function Ic(s,t){const r=(180+s[0])/360,u=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,f=Math.pow(2,t.z);return[Math.round(r*f*pn),Math.round(u*f*pn)]}function $l(s,t){const r=Math.pow(2,t.z);return[(f=(s[0]/pn+t.x)/r,360*f-180),(u=(s[1]/pn+t.y)/r,360/Math.PI*Math.atan(Math.exp((180-360*u)*Math.PI/180))-90)];var u,f}function qa(s,t){s[0]=Math.min(s[0],t[0]),s[1]=Math.min(s[1],t[1]),s[2]=Math.max(s[2],t[0]),s[3]=Math.max(s[3],t[1])}function br(s,t){return!(s[0]<=t[0]||s[2]>=t[2]||s[1]<=t[1]||s[3]>=t[3])}function Pi(s,t,r){const u=s[0]-t[0],f=s[1]-t[1],w=s[0]-r[0],b=s[1]-r[1];return u*b-w*f==0&&u*w<=0&&f*b<=0}function ko(s,t,r,u){return(f=[u[0]-r[0],u[1]-r[1]])[0]*(w=[t[0]-s[0],t[1]-s[1]])[1]-f[1]*w[0]!=0&&!(!So(s,t,r,u)||!So(r,u,s,t));var f,w}function Vd(s,t,r){for(const u of r)for(let f=0;f<u.length-1;++f)if(ko(s,t,u[f],u[f+1]))return!0;return!1}function _a(s,t,r=!1){let u=!1;for(const S of t)for(let C=0;C<S.length-1;C++){if(Pi(s,S[C],S[C+1]))return r;(w=S[C])[1]>(f=s)[1]!=(b=S[C+1])[1]>f[1]&&f[0]<(b[0]-w[0])*(f[1]-w[1])/(b[1]-w[1])+w[0]&&(u=!u)}var f,w,b;return u}function zc(s,t){for(const r of t)if(_a(s,r))return!0;return!1}function Tu(s,t){for(const r of s)if(!_a(r,t))return!1;for(let r=0;r<s.length-1;++r)if(Vd(s[r],s[r+1],t))return!1;return!0}function Yr(s,t){for(const r of t)if(Tu(s,r))return!0;return!1}function So(s,t,r,u){const f=u[0]-r[0],w=u[1]-r[1],b=(s[0]-r[0])*w-f*(s[1]-r[1]),S=(t[0]-r[0])*w-f*(t[1]-r[1]);return b>0&&S<0||b<0&&S>0}function Ul(s,t,r){const u=[];for(let f=0;f<s.length;f++){const w=[];for(let b=0;b<s[f].length;b++){const S=Ic(s[f][b],r);qa(t,S),w.push(S)}u.push(w)}return u}function Jo(s,t,r){const u=[];for(let f=0;f<s.length;f++){const w=Ul(s[f],t,r);u.push(w)}return u}function $d(s,t,r,u){if(s[0]<r[0]||s[0]>r[2]){const f=.5*u;let w=s[0]-r[0]>f?-u:r[0]-s[0]>f?u:0;w===0&&(w=s[0]-r[2]>f?-u:r[2]-s[0]>f?u:0),s[0]+=w}qa(t,s)}function Dc(s,t,r,u){const f=Math.pow(2,u.z)*pn,w=[u.x*pn,u.y*pn],b=[];for(const S of s)for(const C of S){const A=[C.x+w[0],C.y+w[1]];$d(A,t,r,f),b.push(A)}return b}function Rc(s,t,r,u){const f=Math.pow(2,u.z)*pn,w=[u.x*pn,u.y*pn],b=[];for(const C of s){const A=[];for(const F of C){const V=[F.x+w[0],F.y+w[1]];qa(t,V),A.push(V)}b.push(A)}if(t[2]-t[0]<=f/2){(S=t)[0]=S[1]=1/0,S[2]=S[3]=-1/0;for(const C of b)for(const A of C)$d(A,t,r,f)}var S;return b}class zn{constructor(t,r){this.type=Kt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(vo(t[1])){const u=t[1];if(u.type==="FeatureCollection"){const f=[];for(const w of u.features){const{type:b,coordinates:S}=w.geometry;b==="Polygon"&&f.push(S),b==="MultiPolygon"&&f.push(...S)}if(f.length)return new zn(u,{type:"MultiPolygon",coordinates:f})}else if(u.type==="Feature"){const f=u.geometry.type;if(f==="Polygon"||f==="MultiPolygon")return new zn(u,u.geometry)}else if(u.type==="Polygon"||u.type==="MultiPolygon")return new zn(u,u)}return r.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(r,u){const f=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],b=r.canonicalID();if(u.type==="Polygon"){const S=Ul(u.coordinates,w,b),C=Dc(r.geometry(),f,w,b);if(!br(f,w))return!1;for(const A of C)if(!_a(A,S))return!1}if(u.type==="MultiPolygon"){const S=Jo(u.coordinates,w,b),C=Dc(r.geometry(),f,w,b);if(!br(f,w))return!1;for(const A of C)if(!zc(A,S))return!1}return!0})(t,this.geometries);if(t.geometryType()==="LineString")return(function(r,u){const f=[1/0,1/0,-1/0,-1/0],w=[1/0,1/0,-1/0,-1/0],b=r.canonicalID();if(u.type==="Polygon"){const S=Ul(u.coordinates,w,b),C=Rc(r.geometry(),f,w,b);if(!br(f,w))return!1;for(const A of C)if(!Tu(A,S))return!1}if(u.type==="MultiPolygon"){const S=Jo(u.coordinates,w,b),C=Rc(r.geometry(),f,w,b);if(!br(f,w))return!1;for(const A of C)if(!Yr(A,S))return!1}return!0})(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Hl=class{constructor(s=[],t=((r,u)=>r<u?-1:r>u?1:0)){if(this.data=s,this.length=this.data.length,this.compare=t,this.length>0)for(let r=(this.length>>1)-1;r>=0;r--)this._down(r)}push(s){this.data.push(s),this._up(this.length++)}pop(){if(this.length===0)return;const s=this.data[0],t=this.data.pop();return--this.length>0&&(this.data[0]=t,this._down(0)),s}peek(){return this.data[0]}_up(s){const{data:t,compare:r}=this,u=t[s];for(;s>0;){const f=s-1>>1,w=t[f];if(r(u,w)>=0)break;t[s]=w,s=f}t[s]=u}_down(s){const{data:t,compare:r}=this,u=this.length>>1,f=t[s];for(;s<u;){let w=1+(s<<1);const b=w+1;if(b<this.length&&r(t[b],t[w])<0&&(w=b),r(t[w],f)>=0)break;t[s]=t[w],s=w}t[s]=f}};function Ud(s,t,r,u,f){Hd(s,t,r,u||s.length-1,f||dp)}function Hd(s,t,r,u,f){for(;u>r;){if(u-r>600){var w=u-r+1,b=t-r+1,S=Math.log(w),C=.5*Math.exp(2*S/3),A=.5*Math.sqrt(S*C*(w-C)/w)*(b-w/2<0?-1:1);Hd(s,t,Math.max(r,Math.floor(t-b*C/w+A)),Math.min(u,Math.floor(t+(w-b)*C/w+A)),f)}var F=s[t],V=r,W=u;for(Wl(s,r,t),f(s[u],F)>0&&Wl(s,r,u);V<W;){for(Wl(s,V,W),V++,W--;f(s[V],F)<0;)V++;for(;f(s[W],F)>0;)W--}f(s[r],F)===0?Wl(s,r,W):Wl(s,++W,u),W<=t&&(r=W+1),t<=W&&(u=W-1)}}function Wl(s,t,r){var u=s[t];s[t]=s[r],s[r]=u}function dp(s,t){return s<t?-1:s>t?1:0}function Ko(s,t){if(s.length<=1)return[s];const r=[];let u,f;for(const w of s){const b=pp(w);b!==0&&(w.area=Math.abs(b),f===void 0&&(f=b<0),f===b<0?(u&&r.push(u),u=[w]):u.push(w))}if(u&&r.push(u),t>1)for(let w=0;w<r.length;w++)r[w].length<=t||(Ud(r[w],t,1,r[w].length-1,hp),r[w]=r[w].slice(0,t));return r}function hp(s,t){return t.area-s.area}function pp(s){let t=0;for(let r,u,f=0,w=s.length,b=w-1;f<w;b=f++)r=s[f],u=s[b],t+=(u.x-r.x)*(r.y+u.y);return t}const Wd=1/298.257223563,qd=Wd*(2-Wd),Gd=Math.PI/180;class Lc{constructor(t){const r=6378.137*Gd*1e3,u=Math.cos(t*Gd),f=1/(1-qd*(1-u*u)),w=Math.sqrt(f);this.kx=r*w*u,this.ky=r*w*f*(1-qd)}distance(t,r){const u=this.wrap(t[0]-r[0])*this.kx,f=(t[1]-r[1])*this.ky;return Math.sqrt(u*u+f*f)}pointOnLine(t,r){let u,f,w,b,S=1/0;for(let C=0;C<t.length-1;C++){let A=t[C][0],F=t[C][1],V=this.wrap(t[C+1][0]-A)*this.kx,W=(t[C+1][1]-F)*this.ky,Z=0;V===0&&W===0||(Z=(this.wrap(r[0]-A)*this.kx*V+(r[1]-F)*this.ky*W)/(V*V+W*W),Z>1?(A=t[C+1][0],F=t[C+1][1]):Z>0&&(A+=V/this.kx*Z,F+=W/this.ky*Z)),V=this.wrap(r[0]-A)*this.kx,W=(r[1]-F)*this.ky;const J=V*V+W*W;J<S&&(S=J,u=A,f=F,w=C,b=Z)}return{point:[u,f],index:w,t:Math.max(0,Math.min(1,b))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Zd(s,t){return t[0]-s[0]}function Bc(s){return s[1]-s[0]+1}function wa(s,t){return s[1]>=s[0]&&s[1]<t}function Cu(s,t){if(s[0]>s[1])return[null,null];const r=Bc(s);if(t){if(r===2)return[s,null];const f=Math.floor(r/2);return[[s[0],s[0]+f],[s[0]+f,s[1]]]}if(r===1)return[s,null];const u=Math.floor(r/2)-1;return[[s[0],s[0]+u],[s[0]+u+1,s[1]]]}function ql(s,t){if(!wa(t,s.length))return[1/0,1/0,-1/0,-1/0];const r=[1/0,1/0,-1/0,-1/0];for(let u=t[0];u<=t[1];++u)qa(r,s[u]);return r}function Pu(s){const t=[1/0,1/0,-1/0,-1/0];for(const r of s)for(const u of r)qa(t,u);return t}function Fc(s){return s[0]!==-1/0&&s[1]!==-1/0&&s[2]!==1/0&&s[3]!==1/0}function Eu(s,t,r){if(!Fc(s)||!Fc(t))return NaN;let u=0,f=0;return s[2]<t[0]&&(u=t[0]-s[2]),s[0]>t[2]&&(u=s[0]-t[2]),s[1]>t[3]&&(f=s[1]-t[3]),s[3]<t[1]&&(f=t[1]-s[3]),r.distance([0,0],[u,f])}function Ga(s,t,r){const u=r.pointOnLine(t,s);return r.distance(s,u.point)}function Mu(s,t,r,u,f){const w=Math.min(Ga(s,[r,u],f),Ga(t,[r,u],f)),b=Math.min(Ga(r,[s,t],f),Ga(u,[s,t],f));return Math.min(w,b)}function mp(s,t,r,u,f){if(!wa(t,s.length)||!wa(u,r.length))return 1/0;let w=1/0;for(let b=t[0];b<t[1];++b){const S=s[b],C=s[b+1];for(let A=u[0];A<u[1];++A){const F=r[A],V=r[A+1];if(ko(S,C,F,V))return 0;w=Math.min(w,Mu(S,C,F,V,f))}}return w}function ps(s,t,r,u,f){if(!wa(t,s.length)||!wa(u,r.length))return NaN;let w=1/0;for(let b=t[0];b<=t[1];++b)for(let S=u[0];S<=u[1];++S)if(w=Math.min(w,f.distance(s[b],r[S])),w===0)return w;return w}function fp(s,t,r){if(_a(s,t,!0))return 0;let u=1/0;for(const f of t){const w=f[0],b=f[f.length-1];if(w!==b&&(u=Math.min(u,Ga(s,[b,w],r)),u===0))return u;const S=r.pointOnLine(f,s);if(u=Math.min(u,r.distance(s,S.point)),u===0)return u}return u}function _i(s,t,r,u){if(!wa(t,s.length))return NaN;for(let w=t[0];w<=t[1];++w)if(_a(s[w],r,!0))return 0;let f=1/0;for(let w=t[0];w<t[1];++w){const b=s[w],S=s[w+1];for(const C of r)for(let A=0,F=C.length,V=F-1;A<F;V=A++){const W=C[V],Z=C[A];if(ko(b,S,W,Z))return 0;f=Math.min(f,Mu(b,S,W,Z,u))}}return f}function Oc(s,t){for(const r of s)for(const u of r)if(_a(u,t,!0))return!0;return!1}function Wi(s,t,r,u=1/0){const f=Pu(s),w=Pu(t);if(u!==1/0&&Eu(f,w,r)>=u)return u;if(br(f,w)){if(Oc(s,t))return 0}else if(Oc(t,s))return 0;let b=1/0;for(const S of s)for(let C=0,A=S.length,F=A-1;C<A;F=C++){const V=S[F],W=S[C];for(const Z of t)for(let J=0,te=Z.length,de=te-1;J<te;de=J++){const ge=Z[de],Me=Z[J];if(ko(V,W,ge,Me))return 0;b=Math.min(b,Mu(V,W,ge,Me,r))}}return b}function Di(s,t,r,u,f,w){if(!w)return;const b=Eu(ql(u,w),f,r);b<t&&s.push([b,w,[0,0]])}function Dn(s,t,r,u,f,w,b){if(!w||!b)return;const S=Eu(ql(u,w),ql(f,b),r);S<t&&s.push([S,w,b])}function Gl(s,t,r,u,f=1/0){let w=Math.min(u.distance(s[0],r[0][0]),f);if(w===0)return w;const b=new Hl([[0,[0,s.length-1],[0,0]]],Zd),S=Pu(r);for(;b.length>0;){const C=b.pop();if(C[0]>=w)continue;const A=C[1],F=t?50:100;if(Bc(A)<=F){if(!wa(A,s.length))return NaN;if(t){const V=_i(s,A,r,u);if(isNaN(V)||V===0)return V;w=Math.min(w,V)}else for(let V=A[0];V<=A[1];++V){const W=fp(s[V],r,u);if(w=Math.min(w,W),w===0)return 0}}else{const V=Cu(A,t);Di(b,w,u,s,S,V[0]),Di(b,w,u,s,S,V[1])}}return w}function Qo(s,t,r,u,f,w=1/0){let b=Math.min(w,f.distance(s[0],r[0]));if(b===0)return b;const S=new Hl([[0,[0,s.length-1],[0,r.length-1]]],Zd);for(;S.length>0;){const C=S.pop();if(C[0]>=b)continue;const A=C[1],F=C[2],V=t?50:100,W=u?50:100;if(Bc(A)<=V&&Bc(F)<=W){if(!wa(A,s.length)&&wa(F,r.length))return NaN;let Z;if(t&&u)Z=mp(s,A,r,F,f),b=Math.min(b,Z);else if(t&&!u){const J=s.slice(A[0],A[1]+1);for(let te=F[0];te<=F[1];++te)if(Z=Ga(r[te],J,f),b=Math.min(b,Z),b===0)return b}else if(!t&&u){const J=r.slice(F[0],F[1]+1);for(let te=A[0];te<=A[1];++te)if(Z=Ga(s[te],J,f),b=Math.min(b,Z),b===0)return b}else Z=ps(s,A,r,F,f),b=Math.min(b,Z)}else{const Z=Cu(A,t),J=Cu(F,u);Dn(S,b,f,s,r,Z[0],J[0]),Dn(S,b,f,s,r,Z[0],J[1]),Dn(S,b,f,s,r,Z[1],J[0]),Dn(S,b,f,s,r,Z[1],J[1])}}return b}function Vc(s){return s.type==="MultiPolygon"?s.coordinates.map((t=>({type:"Polygon",coordinates:t}))):s.type==="MultiLineString"?s.coordinates.map((t=>({type:"LineString",coordinates:t}))):s.type==="MultiPoint"?s.coordinates.map((t=>({type:"Point",coordinates:t}))):[s]}class Za{constructor(t,r){this.type=dt,this.geojson=t,this.geometries=r}static parse(t,r){if(t.length!==2)return r.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(vo(t[1])){const u=t[1];if(u.type==="FeatureCollection")return new Za(u,u.features.map((f=>Vc(f.geometry))).flat());if(u.type==="Feature")return new Za(u,Vc(u.geometry));if("type"in u&&"coordinates"in u)return new Za(u,Vc(u))}return r.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(t.geometry()!=null&&t.canonicalID()!=null){if(t.geometryType()==="Point")return(function(r,u){const f=r.geometry(),w=f.flat().map((C=>$l([C.x,C.y],r.canonical)));if(f.length===0)return NaN;const b=new Lc(w[0][1]);let S=1/0;for(const C of u){switch(C.type){case"Point":S=Math.min(S,Qo(w,!1,[C.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Qo(w,!1,C.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,Gl(w,!1,C.coordinates,b,S))}if(S===0)return S}return S})(t,this.geometries);if(t.geometryType()==="LineString")return(function(r,u){const f=r.geometry(),w=f.flat().map((C=>$l([C.x,C.y],r.canonical)));if(f.length===0)return NaN;const b=new Lc(w[0][1]);let S=1/0;for(const C of u){switch(C.type){case"Point":S=Math.min(S,Qo(w,!0,[C.coordinates],!1,b,S));break;case"LineString":S=Math.min(S,Qo(w,!0,C.coordinates,!0,b,S));break;case"Polygon":S=Math.min(S,Gl(w,!0,C.coordinates,b,S))}if(S===0)return S}return S})(t,this.geometries);if(t.geometryType()==="Polygon")return(function(r,u){const f=r.geometry();if(f.length===0||f[0].length===0)return NaN;const w=Ko(f,0).map((C=>C.map((A=>A.map((F=>$l([F.x,F.y],r.canonical))))))),b=new Lc(w[0][0][0][1]);let S=1/0;for(const C of u)for(const A of w){switch(C.type){case"Point":S=Math.min(S,Gl([C.coordinates],!1,A,b,S));break;case"LineString":S=Math.min(S,Gl(C.coordinates,!0,A,b,S));break;case"Polygon":S=Math.min(S,Wi(A,C.coordinates,b,S))}if(S===0)return S}return S})(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const To={"==":cp,"!=":Nu,">":Od,"<":Vl,">=":Yo,"<=":up,array:Mr,at:bo,boolean:Mr,case:Ol,coalesce:In,collator:va,format:No,image:ku,in:wu,"index-of":Ua,interpolate:Us,"interpolate-hcl":Us,"interpolate-lab":Us,length:Su,let:ya,literal:An,match:zi,number:Mr,"number-format":Wa,object:Mr,slice:Zo,step:jo,string:Mr,"to-boolean":Ar,"to-color":Ar,"to-number":Ar,"to-string":Ar,var:Ti,within:zn,distance:Za};class Jr{constructor(t,r,u,f){this.name=t,this.type=r,this._evaluate=u,this.args=f}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,r){const u=t[0],f=Jr.definitions[u];if(!f)return r.error(`Unknown expression "${u}". If you wanted a literal array, use ["literal", [...]].`,0);const w=Array.isArray(f)?f[0]:f.type,b=Array.isArray(f)?[[f[1],f[2]]]:f.overloads,S=b.filter((([A])=>!Array.isArray(A)||A.length===t.length-1));let C=null;for(const[A,F]of S){C=new xa(r.registry,el,r.path,null,r.scope);const V=[];let W=!1;for(let Z=1;Z<t.length;Z++){const J=t[Z],te=Array.isArray(A)?A[Z-1]:A.type,de=C.parse(J,1+V.length,te);if(!de){W=!0;break}V.push(de)}if(!W)if(Array.isArray(A)&&A.length!==V.length)C.error(`Expected ${A.length} arguments, but found ${V.length} instead.`);else{for(let Z=0;Z<V.length;Z++){const J=Array.isArray(A)?A[Z]:A.type,te=V[Z];C.concat(Z+1).checkSubtype(J,te.type)}if(C.errors.length===0)return new Jr(u,w,F,V)}}if(S.length===1)r.errors.push(...C.errors);else{const A=(S.length?S:b).map((([V])=>{return W=V,Array.isArray(W)?`(${W.map(q).join(", ")})`:`(${q(W.type)}...)`;var W})).join(" | "),F=[];for(let V=1;V<t.length;V++){const W=r.parse(t[V],1+F.length);if(!W)return null;F.push(q(W.type))}r.error(`Expected arguments of type ${A}, but found (${F.join(", ")}) instead.`)}return null}static register(t,r){Jr.definitions=r;for(const u in r)t[u]=Jr}}function Xa(s,[t,r,u,f]){t=t.evaluate(s),r=r.evaluate(s),u=u.evaluate(s);const w=f?f.evaluate(s):1,b=wr(t,r,u,w);if(b)throw new vs(b);return new ai(t/255,r/255,u/255,w,!1)}function Au(s,t){return s in t}function Iu(s,t){const r=t[s];return r===void 0?null:r}function Co(s){return{type:s}}function el(s){if(s instanceof Ti)return el(s.boundExpression);if(s instanceof Jr&&s.name==="error"||s instanceof va||s instanceof zn||s instanceof Za)return!1;const t=s instanceof Ar||s instanceof Mr;let r=!0;return s.eachChild((u=>{r=t?r&&el(u):r&&u instanceof An})),!!r&&tl(s)&&ba(s,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function tl(s){if(s instanceof Jr&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof zn||s instanceof Za)return!1;let t=!0;return s.eachChild((r=>{t&&!tl(r)&&(t=!1)})),t}function ea(s){if(s instanceof Jr&&s.name==="feature-state")return!1;let t=!0;return s.eachChild((r=>{t&&!ea(r)&&(t=!1)})),t}function ba(s,t){if(s instanceof Jr&&t.indexOf(s.name)>=0)return!1;let r=!0;return s.eachChild((u=>{r&&!ba(u,t)&&(r=!1)})),r}function $c(s){return{result:"success",value:s}}function ja(s){return{result:"error",value:s}}function il(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function zu(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function Zl(s){return!!s.expression&&s.expression.interpolated}function ji(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function Xl(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Xd(s){return s}function Du(s,t){const r=t.type==="color",u=s.stops&&typeof s.stops[0][0]=="object",f=u||!(u||s.property!==void 0),w=s.type||(Zl(t)?"exponential":"interval");if(r||t.type==="padding"){const F=r?ai.parse:or.parse;(s=gr({},s)).stops&&(s.stops=s.stops.map((V=>[V[0],F(V[1])]))),s.default=F(s.default?s.default:t.default)}if(s.colorSpace&&(b=s.colorSpace)!=="rgb"&&b!=="hcl"&&b!=="lab")throw new Error(`Unknown color space: "${s.colorSpace}"`);var b;let S,C,A;if(w==="exponential")S=Jd;else if(w==="interval")S=Uc;else if(w==="categorical"){S=Yd,C=Object.create(null);for(const F of s.stops)C[F[0]]=F[1];A=typeof s.stops[0][0]}else{if(w!=="identity")throw new Error(`Unknown function type "${w}"`);S=Kd}if(u){const F={},V=[];for(let J=0;J<s.stops.length;J++){const te=s.stops[J],de=te[0].zoom;F[de]===void 0&&(F[de]={zoom:de,type:s.type,property:s.property,default:s.default,stops:[]},V.push(de)),F[de].stops.push([te[0].value,te[1]])}const W=[];for(const J of V)W.push([F[J].zoom,Du(F[J],t)]);const Z={name:"linear"};return{kind:"composite",interpolationType:Z,interpolationFactor:Us.interpolationFactor.bind(void 0,Z),zoomStops:W.map((J=>J[0])),evaluate:({zoom:J},te)=>Jd({stops:W,base:s.base},t,J).evaluate(J,te)}}if(f){const F=w==="exponential"?{name:"exponential",base:s.base!==void 0?s.base:1}:null;return{kind:"camera",interpolationType:F,interpolationFactor:Us.interpolationFactor.bind(void 0,F),zoomStops:s.stops.map((V=>V[0])),evaluate:({zoom:V})=>S(s,t,V,C,A)}}return{kind:"source",evaluate(F,V){const W=V&&V.properties?V.properties[s.property]:void 0;return W===void 0?sl(s.default,t.default):S(s,t,W,C,A)}}}function sl(s,t,r){return s!==void 0?s:t!==void 0?t:r!==void 0?r:void 0}function Yd(s,t,r,u,f){return sl(typeof r===f?u[r]:void 0,s.default,t.default)}function Uc(s,t,r){if(ji(r)!=="number")return sl(s.default,t.default);const u=s.stops.length;if(u===1||r<=s.stops[0][0])return s.stops[0][1];if(r>=s.stops[u-1][0])return s.stops[u-1][1];const f=Xo(s.stops.map((w=>w[0])),r);return s.stops[f][1]}function Jd(s,t,r){const u=s.base!==void 0?s.base:1;if(ji(r)!=="number")return sl(s.default,t.default);const f=s.stops.length;if(f===1||r<=s.stops[0][0])return s.stops[0][1];if(r>=s.stops[f-1][0])return s.stops[f-1][1];const w=Xo(s.stops.map((F=>F[0])),r),b=(function(F,V,W,Z){const J=Z-W,te=F-W;return J===0?0:V===1?te/J:(Math.pow(V,te)-1)/(Math.pow(V,J)-1)})(r,u,s.stops[w][0],s.stops[w+1][0]),S=s.stops[w][1],C=s.stops[w+1][1],A=_s[t.type]||Xd;return typeof S.evaluate=="function"?{evaluate(...F){const V=S.evaluate.apply(void 0,F),W=C.evaluate.apply(void 0,F);if(V!==void 0&&W!==void 0)return A(V,W,b,s.colorSpace)}}:A(S,C,b,s.colorSpace)}function Kd(s,t,r){switch(t.type){case"color":r=ai.parse(r);break;case"formatted":r=Er.fromString(r.toString());break;case"resolvedImage":r=lr.fromString(r.toString());break;case"padding":r=or.parse(r);break;default:ji(r)===t.type||t.type==="enum"&&t.values[r]||(r=void 0)}return sl(r,s.default,t.default)}Jr.register(To,{error:[{kind:"error"},[ui],(s,[t])=>{throw new vs(t.evaluate(s))}],typeof:[ui,[ei],(s,[t])=>q(Li(t.evaluate(s)))],"to-rgba":[H(dt,4),[Ps],(s,[t])=>{const[r,u,f,w]=t.evaluate(s).rgb;return[255*r,255*u,255*f,w]}],rgb:[Ps,[dt,dt,dt],Xa],rgba:[Ps,[dt,dt,dt,dt],Xa],has:{type:Kt,overloads:[[[ui],(s,[t])=>Au(t.evaluate(s),s.properties())],[[ui,yr],(s,[t,r])=>Au(t.evaluate(s),r.evaluate(s))]]},get:{type:ei,overloads:[[[ui],(s,[t])=>Iu(t.evaluate(s),s.properties())],[[ui,yr],(s,[t,r])=>Iu(t.evaluate(s),r.evaluate(s))]]},"feature-state":[ei,[ui],(s,[t])=>Iu(t.evaluate(s),s.featureState||{})],properties:[yr,[],s=>s.properties()],"geometry-type":[ui,[],s=>s.geometryType()],id:[ei,[],s=>s.id()],zoom:[dt,[],s=>s.globals.zoom],"heatmap-density":[dt,[],s=>s.globals.heatmapDensity||0],"line-progress":[dt,[],s=>s.globals.lineProgress||0],accumulated:[ei,[],s=>s.globals.accumulated===void 0?null:s.globals.accumulated],"+":[dt,Co(dt),(s,t)=>{let r=0;for(const u of t)r+=u.evaluate(s);return r}],"*":[dt,Co(dt),(s,t)=>{let r=1;for(const u of t)r*=u.evaluate(s);return r}],"-":{type:dt,overloads:[[[dt,dt],(s,[t,r])=>t.evaluate(s)-r.evaluate(s)],[[dt],(s,[t])=>-t.evaluate(s)]]},"/":[dt,[dt,dt],(s,[t,r])=>t.evaluate(s)/r.evaluate(s)],"%":[dt,[dt,dt],(s,[t,r])=>t.evaluate(s)%r.evaluate(s)],ln2:[dt,[],()=>Math.LN2],pi:[dt,[],()=>Math.PI],e:[dt,[],()=>Math.E],"^":[dt,[dt,dt],(s,[t,r])=>Math.pow(t.evaluate(s),r.evaluate(s))],sqrt:[dt,[dt],(s,[t])=>Math.sqrt(t.evaluate(s))],log10:[dt,[dt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN10],ln:[dt,[dt],(s,[t])=>Math.log(t.evaluate(s))],log2:[dt,[dt],(s,[t])=>Math.log(t.evaluate(s))/Math.LN2],sin:[dt,[dt],(s,[t])=>Math.sin(t.evaluate(s))],cos:[dt,[dt],(s,[t])=>Math.cos(t.evaluate(s))],tan:[dt,[dt],(s,[t])=>Math.tan(t.evaluate(s))],asin:[dt,[dt],(s,[t])=>Math.asin(t.evaluate(s))],acos:[dt,[dt],(s,[t])=>Math.acos(t.evaluate(s))],atan:[dt,[dt],(s,[t])=>Math.atan(t.evaluate(s))],min:[dt,Co(dt),(s,t)=>Math.min(...t.map((r=>r.evaluate(s))))],max:[dt,Co(dt),(s,t)=>Math.max(...t.map((r=>r.evaluate(s))))],abs:[dt,[dt],(s,[t])=>Math.abs(t.evaluate(s))],round:[dt,[dt],(s,[t])=>{const r=t.evaluate(s);return r<0?-Math.round(-r):Math.round(r)}],floor:[dt,[dt],(s,[t])=>Math.floor(t.evaluate(s))],ceil:[dt,[dt],(s,[t])=>Math.ceil(t.evaluate(s))],"filter-==":[Kt,[ui,ei],(s,[t,r])=>s.properties()[t.value]===r.value],"filter-id-==":[Kt,[ei],(s,[t])=>s.id()===t.value],"filter-type-==":[Kt,[ui],(s,[t])=>s.geometryType()===t.value],"filter-<":[Kt,[ui,ei],(s,[t,r])=>{const u=s.properties()[t.value],f=r.value;return typeof u==typeof f&&u<f}],"filter-id-<":[Kt,[ei],(s,[t])=>{const r=s.id(),u=t.value;return typeof r==typeof u&&r<u}],"filter->":[Kt,[ui,ei],(s,[t,r])=>{const u=s.properties()[t.value],f=r.value;return typeof u==typeof f&&u>f}],"filter-id->":[Kt,[ei],(s,[t])=>{const r=s.id(),u=t.value;return typeof r==typeof u&&r>u}],"filter-<=":[Kt,[ui,ei],(s,[t,r])=>{const u=s.properties()[t.value],f=r.value;return typeof u==typeof f&&u<=f}],"filter-id-<=":[Kt,[ei],(s,[t])=>{const r=s.id(),u=t.value;return typeof r==typeof u&&r<=u}],"filter->=":[Kt,[ui,ei],(s,[t,r])=>{const u=s.properties()[t.value],f=r.value;return typeof u==typeof f&&u>=f}],"filter-id->=":[Kt,[ei],(s,[t])=>{const r=s.id(),u=t.value;return typeof r==typeof u&&r>=u}],"filter-has":[Kt,[ei],(s,[t])=>t.value in s.properties()],"filter-has-id":[Kt,[],s=>s.id()!==null&&s.id()!==void 0],"filter-type-in":[Kt,[H(ui)],(s,[t])=>t.value.indexOf(s.geometryType())>=0],"filter-id-in":[Kt,[H(ei)],(s,[t])=>t.value.indexOf(s.id())>=0],"filter-in-small":[Kt,[ui,H(ei)],(s,[t,r])=>r.value.indexOf(s.properties()[t.value])>=0],"filter-in-large":[Kt,[ui,H(ei)],(s,[t,r])=>(function(u,f,w,b){for(;w<=b;){const S=w+b>>1;if(f[S]===u)return!0;f[S]>u?b=S-1:w=S+1}return!1})(s.properties()[t.value],r.value,0,r.value.length-1)],all:{type:Kt,overloads:[[[Kt,Kt],(s,[t,r])=>t.evaluate(s)&&r.evaluate(s)],[Co(Kt),(s,t)=>{for(const r of t)if(!r.evaluate(s))return!1;return!0}]]},any:{type:Kt,overloads:[[[Kt,Kt],(s,[t,r])=>t.evaluate(s)||r.evaluate(s)],[Co(Kt),(s,t)=>{for(const r of t)if(r.evaluate(s))return!0;return!1}]]},"!":[Kt,[Kt],(s,[t])=>!t.evaluate(s)],"is-supported-script":[Kt,[ui],(s,[t])=>{const r=s.globals&&s.globals.isSupportedScript;return!r||r(t.evaluate(s))}],upcase:[ui,[ui],(s,[t])=>t.evaluate(s).toUpperCase()],downcase:[ui,[ui],(s,[t])=>t.evaluate(s).toLowerCase()],concat:[ui,Co(ei),(s,t)=>t.map((r=>Fl(r.evaluate(s)))).join("")],"resolved-locale":[ui,[xs],(s,[t])=>t.evaluate(s).resolvedLocale()]});class zr{constructor(t,r){var u;this.expression=t,this._warningHistory={},this._evaluator=new Pc,this._defaultValue=r?(u=r).type==="color"&&Xl(u.default)?new ai(0,0,0,0):u.type==="color"?ai.parse(u.default)||null:u.type==="padding"?or.parse(u.default)||null:u.type==="variableAnchorOffsetCollection"?Xr.parse(u.default)||null:u.default===void 0?null:u.default:null,this._enumValues=r&&r.type==="enum"?r.values:null}evaluateWithoutErrorHandling(t,r,u,f,w,b){return this._evaluator.globals=t,this._evaluator.feature=r,this._evaluator.featureState=u,this._evaluator.canonical=f,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=b,this.expression.evaluate(this._evaluator)}evaluate(t,r,u,f,w,b){this._evaluator.globals=t,this._evaluator.feature=r||null,this._evaluator.featureState=u||null,this._evaluator.canonical=f,this._evaluator.availableImages=w||null,this._evaluator.formattedSection=b||null;try{const S=this.expression.evaluate(this._evaluator);if(S==null||typeof S=="number"&&S!=S)return this._defaultValue;if(this._enumValues&&!(S in this._enumValues))throw new vs(`Expected value to be one of ${Object.keys(this._enumValues).map((C=>JSON.stringify(C))).join(", ")}, but found ${JSON.stringify(S)} instead.`);return S}catch(S){return this._warningHistory[S.message]||(this._warningHistory[S.message]=!0,typeof console<"u"&&console.warn(S.message)),this._defaultValue}}}function Ya(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in To}function Po(s,t){const r=new xa(To,el,[],t?(function(f){const w={color:Ps,string:ui,number:dt,enum:ui,boolean:Kt,formatted:Zr,padding:vr,resolvedImage:Vs,variableAnchorOffsetCollection:he};return f.type==="array"?H(w[f.value]||ei,f.length):w[f.type]})(t):void 0),u=r.parse(s,void 0,void 0,void 0,t&&t.type==="string"?{typeAnnotation:"coerce"}:void 0);return u?$c(new zr(u,t)):ja(r.errors)}class Eo{constructor(t,r){this.kind=t,this._styleExpression=r,this.isStateDependent=t!=="constant"&&!ea(r.expression)}evaluateWithoutErrorHandling(t,r,u,f,w,b){return this._styleExpression.evaluateWithoutErrorHandling(t,r,u,f,w,b)}evaluate(t,r,u,f,w,b){return this._styleExpression.evaluate(t,r,u,f,w,b)}}class Mo{constructor(t,r,u,f){this.kind=t,this.zoomStops=u,this._styleExpression=r,this.isStateDependent=t!=="camera"&&!ea(r.expression),this.interpolationType=f}evaluateWithoutErrorHandling(t,r,u,f,w,b){return this._styleExpression.evaluateWithoutErrorHandling(t,r,u,f,w,b)}evaluate(t,r,u,f,w,b){return this._styleExpression.evaluate(t,r,u,f,w,b)}interpolationFactor(t,r,u){return this.interpolationType?Us.interpolationFactor(this.interpolationType,t,r,u):0}}function Hc(s,t){const r=Po(s,t);if(r.result==="error")return r;const u=r.value.expression,f=tl(u);if(!f&&!il(t))return ja([new Xi("","data expressions not supported")]);const w=ba(u,["zoom"]);if(!w&&!zu(t))return ja([new Xi("","zoom expressions not supported")]);const b=Yl(u);return b||w?b instanceof Xi?ja([b]):b instanceof Us&&!Zl(t)?ja([new Xi("",'"interpolate" expressions cannot be used with this property')]):$c(b?new Mo(f?"camera":"composite",r.value,b.labels,b instanceof Us?b.interpolation:void 0):new Eo(f?"constant":"source",r.value)):ja([new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class Ja{constructor(t,r){this._parameters=t,this._specification=r,gr(this,Du(this._parameters,this._specification))}static deserialize(t){return new Ja(t._parameters,t._specification)}static serialize(t){return{_parameters:t._parameters,_specification:t._specification}}}function Yl(s){let t=null;if(s instanceof ya)t=Yl(s.result);else if(s instanceof In){for(const r of s.args)if(t=Yl(r),t)break}else(s instanceof jo||s instanceof Us)&&s.input instanceof Jr&&s.input.name==="zoom"&&(t=s);return t instanceof Xi||s.eachChild((r=>{const u=Yl(r);u instanceof Xi?t=u:!t&&u?t=new Xi("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&u&&t!==u&&(t=new Xi("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),t}function Wc(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(const t of s.slice(1))if(!Wc(t)&&typeof t!="boolean")return!1;return!0;default:return!0}}const Na={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Jl(s){if(s==null)return{filter:()=>!0,needGeometry:!1};Wc(s)||(s=Ql(s));const t=Po(s,Na);if(t.result==="error")throw new Error(t.value.map((r=>`${r.key}: ${r.message}`)).join(", "));return{filter:(r,u,f)=>t.value.evaluate(r,u,{},f),needGeometry:qc(s)}}function Kl(s,t){return s<t?-1:s>t?1:0}function qc(s){if(!Array.isArray(s))return!1;if(s[0]==="within"||s[0]==="distance")return!0;for(let t=1;t<s.length;t++)if(qc(s[t]))return!0;return!1}function Ql(s){if(!s)return!0;const t=s[0];return s.length<=1?t!=="any":t==="=="?rl(s[1],s[2],"=="):t==="!="?Qs(rl(s[1],s[2],"==")):t==="<"||t===">"||t==="<="||t===">="?rl(s[1],s[2],t):t==="any"?(r=s.slice(1),["any"].concat(r.map(Ql))):t==="all"?["all"].concat(s.slice(1).map(Ql)):t==="none"?["all"].concat(s.slice(1).map(Ql).map(Qs)):t==="in"?ta(s[1],s.slice(2)):t==="!in"?Qs(ta(s[1],s.slice(2))):t==="has"?Ao(s[1]):t!=="!has"||Qs(Ao(s[1]));var r}function rl(s,t,r){switch(s){case"$type":return[`filter-type-${r}`,t];case"$id":return[`filter-id-${r}`,t];default:return[`filter-${r}`,s,t]}}function ta(s,t){if(t.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",t]];case"$id":return["filter-id-in",["literal",t]];default:return t.length>200&&!t.some((r=>typeof r!=typeof t[0]))?["filter-in-large",s,["literal",t.sort(Kl)]]:["filter-in-small",s,["literal",t]]}}function Ao(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Qs(s){return["!",s]}function ia(s){const t=typeof s;if(t==="number"||t==="boolean"||t==="string"||s==null)return JSON.stringify(s);if(Array.isArray(s)){let f="[";for(const w of s)f+=`${ia(w)},`;return`${f}]`}const r=Object.keys(s).sort();let u="{";for(let f=0;f<r.length;f++)u+=`${JSON.stringify(r[f])}:${ia(s[r[f]])},`;return`${u}}`}function Ru(s){let t="";for(const r of mr)t+=`/${ia(s[r])}`;return t}function Lu(s){const t=s.value;return t?[new st(s.key,t,"constants have been deprecated as of v8")]:[]}function ls(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function mn(s){if(Array.isArray(s))return s.map(mn);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){const t={};for(const r in s)t[r]=mn(s[r]);return t}return ls(s)}function Dr(s){const t=s.key,r=s.value,u=s.valueSpec||{},f=s.objectElementValidators||{},w=s.style,b=s.styleSpec,S=s.validateSpec;let C=[];const A=ji(r);if(A!=="object")return[new st(t,r,`object expected, ${A} found`)];for(const F in r){const V=F.split(".")[0],W=u[V]||u["*"];let Z;if(f[V])Z=f[V];else if(u[V])Z=S;else if(f["*"])Z=f["*"];else{if(!u["*"]){C.push(new st(t,r[F],`unknown property "${F}"`));continue}Z=S}C=C.concat(Z({key:(t&&`${t}.`)+F,value:r[F],valueSpec:W,style:w,styleSpec:b,object:r,objectKey:F,validateSpec:S},r))}for(const F in u)f[F]||u[F].required&&u[F].default===void 0&&r[F]===void 0&&C.push(new st(t,r,`missing required property "${F}"`));return C}function nl(s){const t=s.value,r=s.valueSpec,u=s.style,f=s.styleSpec,w=s.key,b=s.arrayElementValidator||s.validateSpec;if(ji(t)!=="array")return[new st(w,t,`array expected, ${ji(t)} found`)];if(r.length&&t.length!==r.length)return[new st(w,t,`array length ${r.length} expected, length ${t.length} found`)];if(r["min-length"]&&t.length<r["min-length"])return[new st(w,t,`array length at least ${r["min-length"]} expected, length ${t.length} found`)];let S={type:r.value,values:r.values};f.$version<7&&(S.function=r.function),ji(r.value)==="object"&&(S=r.value);let C=[];for(let A=0;A<t.length;A++)C=C.concat(b({array:t,arrayIndex:A,value:t[A],valueSpec:S,validateSpec:s.validateSpec,style:u,styleSpec:f,key:`${w}[${A}]`}));return C}function sa(s){const t=s.key,r=s.value,u=s.valueSpec;let f=ji(r);return f==="number"&&r!=r&&(f="NaN"),f!=="number"?[new st(t,r,`number expected, ${f} found`)]:"minimum"in u&&r<u.minimum?[new st(t,r,`${r} is less than the minimum value ${u.minimum}`)]:"maximum"in u&&r>u.maximum?[new st(t,r,`${r} is greater than the maximum value ${u.maximum}`)]:[]}function al(s){const t=s.valueSpec,r=ls(s.value.type);let u,f,w,b={};const S=r!=="categorical"&&s.value.property===void 0,C=!S,A=ji(s.value.stops)==="array"&&ji(s.value.stops[0])==="array"&&ji(s.value.stops[0][0])==="object",F=Dr({key:s.key,value:s.value,valueSpec:s.styleSpec.function,validateSpec:s.validateSpec,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Z){if(r==="identity")return[new st(Z.key,Z.value,'identity function may not have a "stops" property')];let J=[];const te=Z.value;return J=J.concat(nl({key:Z.key,value:te,valueSpec:Z.valueSpec,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,arrayElementValidator:V})),ji(te)==="array"&&te.length===0&&J.push(new st(Z.key,te,"array must have at least one stop")),J},default:function(Z){return Z.validateSpec({key:Z.key,value:Z.value,valueSpec:t,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec})}}});return r==="identity"&&S&&F.push(new st(s.key,s.value,'missing required property "property"')),r==="identity"||s.value.stops||F.push(new st(s.key,s.value,'missing required property "stops"')),r==="exponential"&&s.valueSpec.expression&&!Zl(s.valueSpec)&&F.push(new st(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(C&&!il(s.valueSpec)?F.push(new st(s.key,s.value,"property functions not supported")):S&&!zu(s.valueSpec)&&F.push(new st(s.key,s.value,"zoom functions not supported"))),r!=="categorical"&&!A||s.value.property!==void 0||F.push(new st(s.key,s.value,'"property" property is required')),F;function V(Z){let J=[];const te=Z.value,de=Z.key;if(ji(te)!=="array")return[new st(de,te,`array expected, ${ji(te)} found`)];if(te.length!==2)return[new st(de,te,`array length 2 expected, length ${te.length} found`)];if(A){if(ji(te[0])!=="object")return[new st(de,te,`object expected, ${ji(te[0])} found`)];if(te[0].zoom===void 0)return[new st(de,te,"object stop key must have zoom")];if(te[0].value===void 0)return[new st(de,te,"object stop key must have value")];if(w&&w>ls(te[0].zoom))return[new st(de,te[0].zoom,"stop zoom values must appear in ascending order")];ls(te[0].zoom)!==w&&(w=ls(te[0].zoom),f=void 0,b={}),J=J.concat(Dr({key:`${de}[0]`,value:te[0],valueSpec:{zoom:{}},validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec,objectElementValidators:{zoom:sa,value:W}}))}else J=J.concat(W({key:`${de}[0]`,value:te[0],validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec},te));return Ya(mn(te[1]))?J.concat([new st(`${de}[1]`,te[1],"expressions are not allowed in function stops.")]):J.concat(Z.validateSpec({key:`${de}[1]`,value:te[1],valueSpec:t,validateSpec:Z.validateSpec,style:Z.style,styleSpec:Z.styleSpec}))}function W(Z,J){const te=ji(Z.value),de=ls(Z.value),ge=Z.value!==null?Z.value:J;if(u){if(te!==u)return[new st(Z.key,ge,`${te} stop domain type must match previous stop domain type ${u}`)]}else u=te;if(te!=="number"&&te!=="string"&&te!=="boolean")return[new st(Z.key,ge,"stop domain value must be a number, string, or boolean")];if(te!=="number"&&r!=="categorical"){let Me=`number expected, ${te} found`;return il(t)&&r===void 0&&(Me+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new st(Z.key,ge,Me)]}return r!=="categorical"||te!=="number"||isFinite(de)&&Math.floor(de)===de?r!=="categorical"&&te==="number"&&f!==void 0&&de<f?[new st(Z.key,ge,"stop domain values must appear in ascending order")]:(f=de,r==="categorical"&&de in b?[new st(Z.key,ge,"stop domain values must be unique")]:(b[de]=!0,[])):[new st(Z.key,ge,`integer expected, found ${de}`)]}}function Ka(s){const t=(s.expressionContext==="property"?Hc:Po)(mn(s.value),s.valueSpec);if(t.result==="error")return t.value.map((u=>new st(`${s.key}${u.key}`,s.value,u.message)));const r=t.value.expression||t.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!r.outputDefined())return[new st(s.key,s.value,`Invalid data expression for "${s.propertyKey}". Output values must be contained as literals within the expression.`)];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!ea(r))return[new st(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!ea(r))return[new st(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!ba(r,["zoom","feature-state"]))return[new st(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!tl(r))return[new st(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function ka(s){const t=s.key,r=s.value,u=s.valueSpec,f=[];return Array.isArray(u.values)?u.values.indexOf(ls(r))===-1&&f.push(new st(t,r,`expected one of [${u.values.join(", ")}], ${JSON.stringify(r)} found`)):Object.keys(u.values).indexOf(ls(r))===-1&&f.push(new st(t,r,`expected one of [${Object.keys(u.values).join(", ")}], ${JSON.stringify(r)} found`)),f}function Bu(s){return Wc(mn(s.value))?Ka(gr({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qa(s)}function Qa(s){const t=s.value,r=s.key;if(ji(t)!=="array")return[new st(r,t,`array expected, ${ji(t)} found`)];const u=s.styleSpec;let f,w=[];if(t.length<1)return[new st(r,t,"filter array must have at least 1 element")];switch(w=w.concat(ka({key:`${r}[0]`,value:t[0],valueSpec:u.filter_operator,style:s.style,styleSpec:s.styleSpec})),ls(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&ls(t[1])==="$type"&&w.push(new st(r,t,`"$type" cannot be use with operator "${t[0]}"`));case"==":case"!=":t.length!==3&&w.push(new st(r,t,`filter array for operator "${t[0]}" must have 3 elements`));case"in":case"!in":t.length>=2&&(f=ji(t[1]),f!=="string"&&w.push(new st(`${r}[1]`,t[1],`string expected, ${f} found`)));for(let b=2;b<t.length;b++)f=ji(t[b]),ls(t[1])==="$type"?w=w.concat(ka({key:`${r}[${b}]`,value:t[b],valueSpec:u.geometry_type,style:s.style,styleSpec:s.styleSpec})):f!=="string"&&f!=="number"&&f!=="boolean"&&w.push(new st(`${r}[${b}]`,t[b],`string, number, or boolean expected, ${f} found`));break;case"any":case"all":case"none":for(let b=1;b<t.length;b++)w=w.concat(Qa({key:`${r}[${b}]`,value:t[b],style:s.style,styleSpec:s.styleSpec}));break;case"has":case"!has":f=ji(t[1]),t.length!==2?w.push(new st(r,t,`filter array for "${t[0]}" operator must have 2 elements`)):f!=="string"&&w.push(new st(`${r}[1]`,t[1],`string expected, ${f} found`))}return w}function Fu(s,t){const r=s.key,u=s.validateSpec,f=s.style,w=s.styleSpec,b=s.value,S=s.objectKey,C=w[`${t}_${s.layerType}`];if(!C)return[];const A=S.match(/^(.*)-transition$/);if(t==="paint"&&A&&C[A[1]]&&C[A[1]].transition)return u({key:r,value:b,valueSpec:w.transition,style:f,styleSpec:w});const F=s.valueSpec||C[S];if(!F)return[new st(r,b,`unknown property "${S}"`)];let V;if(ji(b)==="string"&&il(F)&&!F.tokens&&(V=/^{([^}]+)}$/.exec(b)))return[new st(r,b,`"${S}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const W=[];return s.layerType==="symbol"&&(S==="text-field"&&f&&!f.glyphs&&W.push(new st(r,b,'use of "text-field" requires a style "glyphs" property')),S==="text-font"&&Xl(mn(b))&&ls(b.type)==="identity"&&W.push(new st(r,b,'"text-font" does not support identity functions'))),W.concat(u({key:s.key,value:b,valueSpec:F,style:f,styleSpec:w,expressionContext:"property",propertyType:t,propertyKey:S}))}function ec(s){return Fu(s,"paint")}function Gc(s){return Fu(s,"layout")}function qi(s){let t=[];const r=s.value,u=s.key,f=s.style,w=s.styleSpec;r.type||r.ref||t.push(new st(u,r,'either "type" or "ref" is required'));let b=ls(r.type);const S=ls(r.ref);if(r.id){const C=ls(r.id);for(let A=0;A<s.arrayIndex;A++){const F=f.layers[A];ls(F.id)===C&&t.push(new st(u,r.id,`duplicate layer id "${r.id}", previously used at line ${F.id.__line__}`))}}if("ref"in r){let C;["type","source","source-layer","filter","layout"].forEach((A=>{A in r&&t.push(new st(u,r[A],`"${A}" is prohibited for ref layers`))})),f.layers.forEach((A=>{ls(A.id)===S&&(C=A)})),C?C.ref?t.push(new st(u,r.ref,"ref cannot reference another ref layer")):b=ls(C.type):t.push(new st(u,r.ref,`ref layer "${S}" not found`))}else if(b!=="background")if(r.source){const C=f.sources&&f.sources[r.source],A=C&&ls(C.type);C?A==="vector"&&b==="raster"?t.push(new st(u,r.source,`layer "${r.id}" requires a raster source`)):A!=="raster-dem"&&b==="hillshade"?t.push(new st(u,r.source,`layer "${r.id}" requires a raster-dem source`)):A==="raster"&&b!=="raster"?t.push(new st(u,r.source,`layer "${r.id}" requires a vector source`)):A!=="vector"||r["source-layer"]?A==="raster-dem"&&b!=="hillshade"?t.push(new st(u,r.source,"raster-dem source can only be used with layer type 'hillshade'.")):b!=="line"||!r.paint||!r.paint["line-gradient"]||A==="geojson"&&C.lineMetrics||t.push(new st(u,r,`layer "${r.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):t.push(new st(u,r,`layer "${r.id}" must specify a "source-layer"`)):t.push(new st(u,r.source,`source "${r.source}" not found`))}else t.push(new st(u,r,'missing required property "source"'));return t=t.concat(Dr({key:u,value:r,valueSpec:w.layer,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,objectElementValidators:{"*":()=>[],type:()=>s.validateSpec({key:`${u}.type`,value:r.type,valueSpec:w.layer.type,style:s.style,styleSpec:s.styleSpec,validateSpec:s.validateSpec,object:r,objectKey:"type"}),filter:Bu,layout:C=>Dr({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":A=>Gc(gr({layerType:b},A))}}),paint:C=>Dr({layer:r,key:C.key,value:C.value,style:C.style,styleSpec:C.styleSpec,validateSpec:C.validateSpec,objectElementValidators:{"*":A=>ec(gr({layerType:b},A))}})}})),t}function Sa(s){const t=s.value,r=s.key,u=ji(t);return u!=="string"?[new st(r,t,`string expected, ${u} found`)]:[]}const Io={promoteId:function({key:s,value:t}){if(ji(t)==="string")return Sa({key:s,value:t});{const r=[];for(const u in t)r.push(...Sa({key:`${s}.${u}`,value:t[u]}));return r}}};function Ta(s){const t=s.value,r=s.key,u=s.styleSpec,f=s.style,w=s.validateSpec;if(!t.type)return[new st(r,t,'"type" is required')];const b=ls(t.type);let S;switch(b){case"vector":case"raster":return S=Dr({key:r,value:t,valueSpec:u[`source_${b.replace("-","_")}`],style:s.style,styleSpec:u,objectElementValidators:Io,validateSpec:w}),S;case"raster-dem":return S=(function(C){var A;const F=(A=C.sourceName)!==null&&A!==void 0?A:"",V=C.value,W=C.styleSpec,Z=W.source_raster_dem,J=C.style;let te=[];const de=ji(V);if(V===void 0)return te;if(de!=="object")return te.push(new st("source_raster_dem",V,`object expected, ${de} found`)),te;const ge=ls(V.encoding)==="custom",Me=["redFactor","greenFactor","blueFactor","baseShift"],we=C.value.encoding?`"${C.value.encoding}"`:"Default";for(const Ee in V)!ge&&Me.includes(Ee)?te.push(new st(Ee,V[Ee],`In "${F}": "${Ee}" is only valid when "encoding" is set to "custom". ${we} encoding found`)):Z[Ee]?te=te.concat(C.validateSpec({key:Ee,value:V[Ee],valueSpec:Z[Ee],validateSpec:C.validateSpec,style:J,styleSpec:W})):te.push(new st(Ee,V[Ee],`unknown property "${Ee}"`));return te})({sourceName:r,value:t,style:s.style,styleSpec:u,validateSpec:w}),S;case"geojson":if(S=Dr({key:r,value:t,valueSpec:u.source_geojson,style:f,styleSpec:u,validateSpec:w,objectElementValidators:Io}),t.cluster)for(const C in t.clusterProperties){const[A,F]=t.clusterProperties[C],V=typeof A=="string"?[A,["accumulated"],["get",C]]:A;S.push(...Ka({key:`${r}.${C}.map`,value:F,expressionContext:"cluster-map"})),S.push(...Ka({key:`${r}.${C}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return S;case"video":return Dr({key:r,value:t,valueSpec:u.source_video,style:f,validateSpec:w,styleSpec:u});case"image":return Dr({key:r,value:t,valueSpec:u.source_image,style:f,validateSpec:w,styleSpec:u});case"canvas":return[new st(r,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ka({key:`${r}.type`,value:t.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Zc(s){const t=s.value,r=s.styleSpec,u=r.light,f=s.style;let w=[];const b=ji(t);if(t===void 0)return w;if(b!=="object")return w=w.concat([new st("light",t,`object expected, ${b} found`)]),w;for(const S in t){const C=S.match(/^(.*)-transition$/);w=w.concat(C&&u[C[1]]&&u[C[1]].transition?s.validateSpec({key:S,value:t[S],valueSpec:r.transition,validateSpec:s.validateSpec,style:f,styleSpec:r}):u[S]?s.validateSpec({key:S,value:t[S],valueSpec:u[S],validateSpec:s.validateSpec,style:f,styleSpec:r}):[new st(S,t[S],`unknown property "${S}"`)])}return w}function tc(s){const t=s.value,r=s.styleSpec,u=r.sky,f=s.style,w=ji(t);if(t===void 0)return[];if(w!=="object")return[new st("sky",t,`object expected, ${w} found`)];let b=[];for(const S in t)b=b.concat(u[S]?s.validateSpec({key:S,value:t[S],valueSpec:u[S],style:f,styleSpec:r}):[new st(S,t[S],`unknown property "${S}"`)]);return b}function zo(s){const t=s.value,r=s.styleSpec,u=r.terrain,f=s.style;let w=[];const b=ji(t);if(t===void 0)return w;if(b!=="object")return w=w.concat([new st("terrain",t,`object expected, ${b} found`)]),w;for(const S in t)w=w.concat(u[S]?s.validateSpec({key:S,value:t[S],valueSpec:u[S],validateSpec:s.validateSpec,style:f,styleSpec:r}):[new st(S,t[S],`unknown property "${S}"`)]);return w}function ol(s){let t=[];const r=s.value,u=s.key;if(Array.isArray(r)){const f=[],w=[];for(const b in r)r[b].id&&f.includes(r[b].id)&&t.push(new st(u,r,`all the sprites' ids must be unique, but ${r[b].id} is duplicated`)),f.push(r[b].id),r[b].url&&w.includes(r[b].url)&&t.push(new st(u,r,`all the sprites' URLs must be unique, but ${r[b].url} is duplicated`)),w.push(r[b].url),t=t.concat(Dr({key:`${u}[${b}]`,value:r[b],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:s.validateSpec}));return t}return Sa({key:u,value:r})}const Ca={"*":()=>[],array:nl,boolean:function(s){const t=s.value,r=s.key,u=ji(t);return u!=="boolean"?[new st(r,t,`boolean expected, ${u} found`)]:[]},number:sa,color:function(s){const t=s.key,r=s.value,u=ji(r);return u!=="string"?[new st(t,r,`color expected, ${u} found`)]:ai.parse(String(r))?[]:[new st(t,r,`color expected, "${r}" found`)]},constants:Lu,enum:ka,filter:Bu,function:al,layer:qi,object:Dr,source:Ta,light:Zc,sky:tc,terrain:zo,projection:function(s){const t=s.value,r=s.styleSpec,u=r.projection,f=s.style,w=ji(t);if(t===void 0)return[];if(w!=="object")return[new st("projection",t,`object expected, ${w} found`)];let b=[];for(const S in t)b=b.concat(u[S]?s.validateSpec({key:S,value:t[S],valueSpec:u[S],style:f,styleSpec:r}):[new st(S,t[S],`unknown property "${S}"`)]);return b},string:Sa,formatted:function(s){return Sa(s).length===0?[]:Ka(s)},resolvedImage:function(s){return Sa(s).length===0?[]:Ka(s)},padding:function(s){const t=s.key,r=s.value;if(ji(r)==="array"){if(r.length<1||r.length>4)return[new st(t,r,`padding requires 1 to 4 values; ${r.length} values found`)];const u={type:"number"};let f=[];for(let w=0;w<r.length;w++)f=f.concat(s.validateSpec({key:`${t}[${w}]`,value:r[w],validateSpec:s.validateSpec,valueSpec:u}));return f}return sa({key:t,value:r,valueSpec:{}})},variableAnchorOffsetCollection:function(s){const t=s.key,r=s.value,u=ji(r),f=s.styleSpec;if(u!=="array"||r.length<1||r.length%2!=0)return[new st(t,r,"variableAnchorOffsetCollection requires a non-empty array of even length")];let w=[];for(let b=0;b<r.length;b+=2)w=w.concat(ka({key:`${t}[${b}]`,value:r[b],valueSpec:f.layout_symbol["text-anchor"]})),w=w.concat(nl({key:`${t}[${b+1}]`,value:r[b+1],valueSpec:{length:2,value:"number"},validateSpec:s.validateSpec,style:s.style,styleSpec:f}));return w},sprite:ol};function ll(s){const t=s.value,r=s.valueSpec,u=s.styleSpec;return s.validateSpec=ll,r.expression&&Xl(ls(t))?al(s):r.expression&&Ya(mn(t))?Ka(s):r.type&&Ca[r.type]?Ca[r.type](s):Dr(gr({},s,{valueSpec:r.type?u[r.type]:r}))}function Qd(s){const t=s.value,r=s.key,u=Sa(s);return u.length||(t.indexOf("{fontstack}")===-1&&u.push(new st(r,t,'"glyphs" url must include a "{fontstack}" token')),t.indexOf("{range}")===-1&&u.push(new st(r,t,'"glyphs" url must include a "{range}" token'))),u}function fn(s,t=Oe){let r=[];return r=r.concat(ll({key:"",value:s,valueSpec:t.$root,styleSpec:t,style:s,validateSpec:ll,objectElementValidators:{glyphs:Qd,"*":()=>[]}})),s.constants&&(r=r.concat(Lu({key:"constants",value:s.constants}))),cl(r)}function Rn(s){return function(t){return s({...t,validateSpec:ll})}}function cl(s){return[].concat(s).sort(((t,r)=>t.line-r.line))}function Rr(s){return function(...t){return cl(s.apply(this,t))}}fn.source=Rr(Rn(Ta)),fn.sprite=Rr(Rn(ol)),fn.glyphs=Rr(Rn(Qd)),fn.light=Rr(Rn(Zc)),fn.sky=Rr(Rn(tc)),fn.terrain=Rr(Rn(zo)),fn.layer=Rr(Rn(qi)),fn.filter=Rr(Rn(Bu)),fn.paintProperty=Rr(Rn(ec)),fn.layoutProperty=Rr(Rn(Gc));const Pa=fn,Ou=Pa.light,Vu=Pa.sky,Xc=Pa.paintProperty,eh=Pa.layoutProperty;function Yc(s,t){let r=!1;if(t&&t.length)for(const u of t)s.fire(new Pr(new Error(u.message))),r=!0;return r}class ul{constructor(t,r,u){const f=this.cells=[];if(t instanceof ArrayBuffer){this.arrayBuffer=t;const b=new Int32Array(this.arrayBuffer);t=b[0],this.d=(r=b[1])+2*(u=b[2]);for(let C=0;C<this.d*this.d;C++){const A=b[3+C],F=b[3+C+1];f.push(A===F?null:b.subarray(A,F))}const S=b[3+f.length+1];this.keys=b.subarray(b[3+f.length],S),this.bboxes=b.subarray(S),this.insert=this._insertReadonly}else{this.d=r+2*u;for(let b=0;b<this.d*this.d;b++)f.push([]);this.keys=[],this.bboxes=[]}this.n=r,this.extent=t,this.padding=u,this.scale=r/t,this.uid=0;const w=u/r*t;this.min=-w,this.max=t+w}insert(t,r,u,f,w){this._forEachCell(r,u,f,w,this._insertCell,this.uid++,void 0,void 0),this.keys.push(t),this.bboxes.push(r),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(w)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(t,r,u,f,w,b){this.cells[w].push(b)}query(t,r,u,f,w){const b=this.min,S=this.max;if(t<=b&&r<=b&&S<=u&&S<=f&&!w)return Array.prototype.slice.call(this.keys);{const C=[];return this._forEachCell(t,r,u,f,this._queryCell,C,{},w),C}}_queryCell(t,r,u,f,w,b,S,C){const A=this.cells[w];if(A!==null){const F=this.keys,V=this.bboxes;for(let W=0;W<A.length;W++){const Z=A[W];if(S[Z]===void 0){const J=4*Z;(C?C(V[J+0],V[J+1],V[J+2],V[J+3]):t<=V[J+2]&&r<=V[J+3]&&u>=V[J+0]&&f>=V[J+1])?(S[Z]=!0,b.push(F[Z])):S[Z]=!1}}}}_forEachCell(t,r,u,f,w,b,S,C){const A=this._convertToCellCoord(t),F=this._convertToCellCoord(r),V=this._convertToCellCoord(u),W=this._convertToCellCoord(f);for(let Z=A;Z<=V;Z++)for(let J=F;J<=W;J++){const te=this.d*J+Z;if((!C||C(this._convertFromCellCoord(Z),this._convertFromCellCoord(J),this._convertFromCellCoord(Z+1),this._convertFromCellCoord(J+1)))&&w.call(this,t,r,u,f,te,b,S,C))return}}_convertFromCellCoord(t){return(t-this.padding)/this.scale}_convertToCellCoord(t){return Math.max(0,Math.min(this.d-1,Math.floor(t*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const t=this.cells,r=3+this.cells.length+1+1;let u=0;for(let b=0;b<this.cells.length;b++)u+=this.cells[b].length;const f=new Int32Array(r+u+this.keys.length+this.bboxes.length);f[0]=this.extent,f[1]=this.n,f[2]=this.padding;let w=r;for(let b=0;b<t.length;b++){const S=t[b];f[3+b]=w,f.set(S,w),w+=S.length}return f[3+t.length]=w,f.set(this.keys,w),w+=this.keys.length,f[3+t.length+1]=w,f.set(this.bboxes,w),w+=this.bboxes.length,f.buffer}static serialize(t,r){const u=t.toArrayBuffer();return r&&r.push(u),{buffer:u}}static deserialize(t){return new ul(t.buffer)}}const gn={};function Ct(s,t,r={}){if(gn[s])throw new Error(`${s} is already registered.`);Object.defineProperty(t,"_classRegistryKey",{value:s,writeable:!1}),gn[s]={klass:t,omit:r.omit||[],shallow:r.shallow||[]}}Ct("Object",Object),Ct("TransferableGridIndex",ul),Ct("Color",ai),Ct("Error",Error),Ct("AJAXError",Ot),Ct("ResolvedImage",lr),Ct("StylePropertyFunction",Ja),Ct("StyleExpression",zr,{omit:["_evaluator"]}),Ct("ZoomDependentExpression",Mo),Ct("ZoomConstantExpression",Eo),Ct("CompoundExpression",Jr,{omit:["_evaluate"]});for(const s in To)To[s]._classRegistryKey||Ct(`Expression_${s}`,To[s]);function Ln(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function Jc(s){return s.$name||s.constructor._classRegistryKey}function Do(s){return!(function(t){if(t===null||typeof t!="object")return!1;const r=Jc(t);return!(!r||r==="Object")})(s)&&(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||s instanceof Blob||s instanceof Error||Ln(s)||gt(s)||ArrayBuffer.isView(s)||s instanceof ImageData)}function jr(s,t){if(Do(s))return(Ln(s)||gt(s))&&t&&t.push(s),ArrayBuffer.isView(s)&&t&&t.push(s.buffer),s instanceof ImageData&&t&&t.push(s.data.buffer),s;if(Array.isArray(s)){const w=[];for(const b of s)w.push(jr(b,t));return w}if(typeof s!="object")throw new Error("can't serialize object of type "+typeof s);const r=Jc(s);if(!r)throw new Error(`can't serialize object of unregistered class ${s.constructor.name}`);if(!gn[r])throw new Error(`${r} is not registered.`);const{klass:u}=gn[r],f=u.serialize?u.serialize(s,t):{};if(u.serialize){if(t&&f===t[t.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const w in s){if(!s.hasOwnProperty(w)||gn[r].omit.indexOf(w)>=0)continue;const b=s[w];f[w]=gn[r].shallow.indexOf(w)>=0?b:jr(b,t)}s instanceof Error&&(f.message=s.message)}if(f.$name)throw new Error("$name property is reserved for worker serialization logic.");return r!=="Object"&&(f.$name=r),f}function ra(s){if(Do(s))return s;if(Array.isArray(s))return s.map(ra);if(typeof s!="object")throw new Error("can't deserialize object of type "+typeof s);const t=Jc(s)||"Object";if(!gn[t])throw new Error(`can't deserialize unregistered class ${t}`);const{klass:r}=gn[t];if(!r)throw new Error(`can't deserialize unregistered class ${t}`);if(r.deserialize)return r.deserialize(s);const u=Object.create(r.prototype);for(const f of Object.keys(s)){if(f==="$name")continue;const w=s[f];u[f]=gn[t].shallow.indexOf(f)>=0?w:ra(w)}return u}class Bn{constructor(){this.first=!0}update(t,r){const u=Math.floor(t);return this.first?(this.first=!1,this.lastIntegerZoom=u,this.lastIntegerZoomTime=0,this.lastZoom=t,this.lastFloorZoom=u,!0):(this.lastFloorZoom>u?(this.lastIntegerZoom=u+1,this.lastIntegerZoomTime=r):this.lastFloorZoom<u&&(this.lastIntegerZoom=u,this.lastIntegerZoomTime=r),t!==this.lastZoom&&(this.lastZoom=t,this.lastFloorZoom=u,!0))}}const wi={"Latin-1 Supplement":s=>s>=128&&s<=255,"Hangul Jamo":s=>s>=4352&&s<=4607,Khmer:s=>s>=6016&&s<=6143,"General Punctuation":s=>s>=8192&&s<=8303,"Letterlike Symbols":s=>s>=8448&&s<=8527,"Number Forms":s=>s>=8528&&s<=8591,"Miscellaneous Technical":s=>s>=8960&&s<=9215,"Control Pictures":s=>s>=9216&&s<=9279,"Optical Character Recognition":s=>s>=9280&&s<=9311,"Enclosed Alphanumerics":s=>s>=9312&&s<=9471,"Geometric Shapes":s=>s>=9632&&s<=9727,"Miscellaneous Symbols":s=>s>=9728&&s<=9983,"Miscellaneous Symbols and Arrows":s=>s>=11008&&s<=11263,"Ideographic Description Characters":s=>s>=12272&&s<=12287,"CJK Symbols and Punctuation":s=>s>=12288&&s<=12351,Katakana:s=>s>=12448&&s<=12543,Kanbun:s=>s>=12688&&s<=12703,"CJK Strokes":s=>s>=12736&&s<=12783,"Enclosed CJK Letters and Months":s=>s>=12800&&s<=13055,"CJK Compatibility":s=>s>=13056&&s<=13311,"Yijing Hexagram Symbols":s=>s>=19904&&s<=19967,"Private Use Area":s=>s>=57344&&s<=63743,"Vertical Forms":s=>s>=65040&&s<=65055,"CJK Compatibility Forms":s=>s>=65072&&s<=65103,"Small Form Variants":s=>s>=65104&&s<=65135,"Halfwidth and Fullwidth Forms":s=>s>=65280&&s<=65519};function $u(s){for(const t of s)if(rc(t.charCodeAt(0)))return!0;return!1}function gp(s){for(const t of s)if(!Fn(t.charCodeAt(0)))return!1;return!0}function Ea(s){const t=s.map((r=>{try{return new RegExp(`\\p{sc=${r}}`,"u").source}catch{return null}})).filter((r=>r));return new RegExp(t.join("|"),"u")}const ic=Ea(["Arab","Dupl","Mong","Ougr","Syrc"]);function Fn(s){return!ic.test(String.fromCodePoint(s))}const sc=Ea(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function rc(s){return!(s!==746&&s!==747&&(s<4352||!(wi["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||wi["CJK Compatibility"](s)||wi["CJK Strokes"](s)||!(!wi["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||wi["Enclosed CJK Letters and Months"](s)||wi["Ideographic Description Characters"](s)||wi.Kanbun(s)||wi.Katakana(s)&&s!==12540||!(!wi["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!wi["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||wi["Vertical Forms"](s)||wi["Yijing Hexagram Symbols"](s)||/\p{sc=Cans}/u.test(String.fromCodePoint(s))||/\p{sc=Hang}/u.test(String.fromCodePoint(s))||sc.test(String.fromCodePoint(s)))))}function Ro(s){return!(rc(s)||(function(t){return!!(wi["Latin-1 Supplement"](t)&&(t===167||t===169||t===174||t===177||t===188||t===189||t===190||t===215||t===247)||wi["General Punctuation"](t)&&(t===8214||t===8224||t===8225||t===8240||t===8241||t===8251||t===8252||t===8258||t===8263||t===8264||t===8265||t===8273)||wi["Letterlike Symbols"](t)||wi["Number Forms"](t)||wi["Miscellaneous Technical"](t)&&(t>=8960&&t<=8967||t>=8972&&t<=8991||t>=8996&&t<=9e3||t===9003||t>=9085&&t<=9114||t>=9150&&t<=9165||t===9167||t>=9169&&t<=9179||t>=9186&&t<=9215)||wi["Control Pictures"](t)&&t!==9251||wi["Optical Character Recognition"](t)||wi["Enclosed Alphanumerics"](t)||wi["Geometric Shapes"](t)||wi["Miscellaneous Symbols"](t)&&!(t>=9754&&t<=9759)||wi["Miscellaneous Symbols and Arrows"](t)&&(t>=11026&&t<=11055||t>=11088&&t<=11097||t>=11192&&t<=11243)||wi["CJK Symbols and Punctuation"](t)||wi.Katakana(t)||wi["Private Use Area"](t)||wi["CJK Compatibility Forms"](t)||wi["Small Form Variants"](t)||wi["Halfwidth and Fullwidth Forms"](t)||t===8734||t===8756||t===8757||t>=9984&&t<=10087||t>=10102&&t<=10131||t===65532||t===65533)})(s))}const eo=Ea(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Gi(s){return eo.test(String.fromCodePoint(s))}function Ji(s,t){return!(!t&&Gi(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||wi.Khmer(s))}function to(s){for(const t of s)if(Gi(t.charCodeAt(0)))return!0;return!1}const Vi=new class{constructor(){this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null}setState(s){this.pluginStatus=s.pluginStatus,this.pluginURL=s.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(s){this.applyArabicShaping=s.applyArabicShaping,this.processBidirectionalText=s.processBidirectionalText,this.processStyledBidirectionalText=s.processStyledBidirectionalText}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getPluginURL(){return this.pluginURL}getRTLTextPluginStatus(){return this.pluginStatus}};class bi{constructor(t,r){this.zoom=t,r?(this.now=r.now,this.fadeDuration=r.fadeDuration,this.zoomHistory=r.zoomHistory,this.transition=r.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Bn,this.transition={})}isSupportedScript(t){return(function(r,u){for(const f of r)if(!Ji(f.charCodeAt(0),u))return!1;return!0})(t,Vi.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const t=this.zoom,r=t-Math.floor(t),u=this.crossFadingFactor();return t>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:r+(1-r)*u}:{fromScale:.5,toScale:1,t:1-(1-u)*r}}}class xn{constructor(t,r){this.property=t,this.value=r,this.expression=(function(u,f){if(Xl(u))return new Ja(u,f);if(Ya(u)){const w=Hc(u,f);if(w.result==="error")throw new Error(w.value.map((b=>`${b.key}: ${b.message}`)).join(", "));return w.value}{let w=u;return f.type==="color"&&typeof u=="string"?w=ai.parse(u):f.type!=="padding"||typeof u!="number"&&!Array.isArray(u)?f.type==="variableAnchorOffsetCollection"&&Array.isArray(u)&&(w=Xr.parse(u)):w=or.parse(u),{kind:"constant",evaluate:()=>w}}})(r===void 0?t.specification.default:r,t.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(t,r,u){return this.property.possiblyEvaluate(this,t,r,u)}}class Ma{constructor(t){this.property=t,this.value=new xn(t,void 0)}transitioned(t,r){return new nc(this.property,this.value,r,ut({},t.transition,this.transition),t.now)}untransitioned(){return new nc(this.property,this.value,null,{},0)}}class er{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitionablePropertyValues)}getValue(t){return ct(this._values[t].value.value)}setValue(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ma(this._values[t].property)),this._values[t].value=new xn(this._values[t].property,r===null?void 0:ct(r))}getTransition(t){return ct(this._values[t].transition)}setTransition(t,r){Object.prototype.hasOwnProperty.call(this._values,t)||(this._values[t]=new Ma(this._values[t].property)),this._values[t].transition=ct(r)||void 0}serialize(){const t={};for(const r of Object.keys(this._values)){const u=this.getValue(r);u!==void 0&&(t[r]=u);const f=this.getTransition(r);f!==void 0&&(t[`${r}-transition`]=f)}return t}transitioned(t,r){const u=new dl(this._properties);for(const f of Object.keys(this._values))u._values[f]=this._values[f].transitioned(t,r._values[f]);return u}untransitioned(){const t=new dl(this._properties);for(const r of Object.keys(this._values))t._values[r]=this._values[r].untransitioned();return t}}class nc{constructor(t,r,u,f,w){this.property=t,this.value=r,this.begin=w+f.delay||0,this.end=this.begin+f.duration||0,t.specification.transition&&(f.delay||f.duration)&&(this.prior=u)}possiblyEvaluate(t,r,u){const f=t.now||0,w=this.value.possiblyEvaluate(t,r,u),b=this.prior;if(b){if(f>this.end)return this.prior=null,w;if(this.value.isDataDriven())return this.prior=null,w;if(f<this.begin)return b.possiblyEvaluate(t,r,u);{const S=(f-this.begin)/(this.end-this.begin);return this.property.interpolate(b.possiblyEvaluate(t,r,u),w,(function(C){if(C<=0)return 0;if(C>=1)return 1;const A=C*C,F=A*C;return 4*(C<.5?F:3*(C-A)+F-.75)})(S))}}return w}}class dl{constructor(t){this._properties=t,this._values=Object.create(t.defaultTransitioningPropertyValues)}possiblyEvaluate(t,r,u){const f=new pl(this._properties);for(const w of Object.keys(this._values))f._values[w]=this._values[w].possiblyEvaluate(t,r,u);return f}hasTransition(){for(const t of Object.keys(this._values))if(this._values[t].prior)return!0;return!1}}class hl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPropertyValues)}hasValue(t){return this._values[t].value!==void 0}getValue(t){return ct(this._values[t].value)}setValue(t,r){this._values[t]=new xn(this._values[t].property,r===null?void 0:ct(r))}serialize(){const t={};for(const r of Object.keys(this._values)){const u=this.getValue(r);u!==void 0&&(t[r]=u)}return t}possiblyEvaluate(t,r,u){const f=new pl(this._properties);for(const w of Object.keys(this._values))f._values[w]=this._values[w].possiblyEvaluate(t,r,u);return f}}class Kr{constructor(t,r,u){this.property=t,this.value=r,this.parameters=u}isConstant(){return this.value.kind==="constant"}constantOr(t){return this.value.kind==="constant"?this.value.value:t}evaluate(t,r,u,f){return this.property.evaluate(this.value,this.parameters,t,r,u,f)}}class pl{constructor(t){this._properties=t,this._values=Object.create(t.defaultPossiblyEvaluatedValues)}get(t){return this._values[t]}}class Pt{constructor(t){this.specification=t}possiblyEvaluate(t,r){if(t.isDataDriven())throw new Error("Value should not be data driven");return t.expression.evaluate(r)}interpolate(t,r,u){const f=_s[this.specification.type];return f?f(t,r,u):t}}class qt{constructor(t,r){this.specification=t,this.overrides=r}possiblyEvaluate(t,r,u,f){return new Kr(this,t.expression.kind==="constant"||t.expression.kind==="camera"?{kind:"constant",value:t.expression.evaluate(r,null,{},u,f)}:t.expression,r)}interpolate(t,r,u){if(t.value.kind!=="constant"||r.value.kind!=="constant")return t;if(t.value.value===void 0||r.value.value===void 0)return new Kr(this,{kind:"constant",value:void 0},t.parameters);const f=_s[this.specification.type];if(f){const w=f(t.value.value,r.value.value,u);return new Kr(this,{kind:"constant",value:w},t.parameters)}return t}evaluate(t,r,u,f,w,b){return t.kind==="constant"?t.value:t.evaluate(r,u,f,w,b)}}class ml extends qt{possiblyEvaluate(t,r,u,f){if(t.value===void 0)return new Kr(this,{kind:"constant",value:void 0},r);if(t.expression.kind==="constant"){const w=t.expression.evaluate(r,null,{},u,f),b=t.property.specification.type==="resolvedImage"&&typeof w!="string"?w.name:w,S=this._calculate(b,b,b,r);return new Kr(this,{kind:"constant",value:S},r)}if(t.expression.kind==="camera"){const w=this._calculate(t.expression.evaluate({zoom:r.zoom-1}),t.expression.evaluate({zoom:r.zoom}),t.expression.evaluate({zoom:r.zoom+1}),r);return new Kr(this,{kind:"constant",value:w},r)}return new Kr(this,t.expression,r)}evaluate(t,r,u,f,w,b){if(t.kind==="source"){const S=t.evaluate(r,u,f,w,b);return this._calculate(S,S,S,r)}return t.kind==="composite"?this._calculate(t.evaluate({zoom:Math.floor(r.zoom)-1},u,f),t.evaluate({zoom:Math.floor(r.zoom)},u,f),t.evaluate({zoom:Math.floor(r.zoom)+1},u,f),r):t.value}_calculate(t,r,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:u,to:r}}interpolate(t){return t}}class ac{constructor(t){this.specification=t}possiblyEvaluate(t,r,u,f){if(t.value!==void 0){if(t.expression.kind==="constant"){const w=t.expression.evaluate(r,null,{},u,f);return this._calculate(w,w,w,r)}return this._calculate(t.expression.evaluate(new bi(Math.floor(r.zoom-1),r)),t.expression.evaluate(new bi(Math.floor(r.zoom),r)),t.expression.evaluate(new bi(Math.floor(r.zoom+1),r)),r)}}_calculate(t,r,u,f){return f.zoom>f.zoomHistory.lastIntegerZoom?{from:t,to:r}:{from:u,to:r}}interpolate(t){return t}}class Uu{constructor(t){this.specification=t}possiblyEvaluate(t,r,u,f){return!!t.expression.evaluate(r,null,{},u,f)}interpolate(){return!1}}class v{constructor(t){this.properties=t,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const r in t){const u=t[r];u.specification.overridable&&this.overridableProperties.push(r);const f=this.defaultPropertyValues[r]=new xn(u,void 0),w=this.defaultTransitionablePropertyValues[r]=new Ma(u);this.defaultTransitioningPropertyValues[r]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[r]=f.possiblyEvaluate({})}}}Ct("DataDrivenProperty",qt),Ct("DataConstantProperty",Pt),Ct("CrossFadedDataDrivenProperty",ml),Ct("CrossFadedProperty",ac),Ct("ColorRampProperty",Uu);const e="-transition";class o extends pa{constructor(t,r){if(super(),this.id=t.id,this.type=t.type,this._featureFilter={filter:()=>!0,needGeometry:!1},t.type!=="custom"&&(this.metadata=t.metadata,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,t.type!=="background"&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),r.layout&&(this._unevaluatedLayout=new hl(r.layout)),r.paint)){this._transitionablePaint=new er(r.paint);for(const u in t.paint)this.setPaintProperty(u,t.paint[u],{validate:!1});for(const u in t.layout)this.setLayoutProperty(u,t.layout[u],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new pl(r.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(t){return t==="visibility"?this.visibility:this._unevaluatedLayout.getValue(t)}setLayoutProperty(t,r,u={}){r!=null&&this._validate(eh,`layers.${this.id}.layout.${t}`,t,r,u)||(t!=="visibility"?this._unevaluatedLayout.setValue(t,r):this.visibility=r)}getPaintProperty(t){return t.endsWith(e)?this._transitionablePaint.getTransition(t.slice(0,-11)):this._transitionablePaint.getValue(t)}setPaintProperty(t,r,u={}){if(r!=null&&this._validate(Xc,`layers.${this.id}.paint.${t}`,t,r,u))return!1;if(t.endsWith(e))return this._transitionablePaint.setTransition(t.slice(0,-11),r||void 0),!1;{const f=this._transitionablePaint._values[t],w=f.property.specification["property-type"]==="cross-faded-data-driven",b=f.value.isDataDriven(),S=f.value;this._transitionablePaint.setValue(t,r),this._handleSpecialPaintPropertyUpdate(t);const C=this._transitionablePaint._values[t].value;return C.isDataDriven()||b||w||this._handleOverridablePaintPropertyUpdate(t,S,C)}}_handleSpecialPaintPropertyUpdate(t){}_handleOverridablePaintPropertyUpdate(t,r,u){return!1}isHidden(t){return!!(this.minzoom&&t<this.minzoom)||!!(this.maxzoom&&t>=this.maxzoom)||this.visibility==="none"}updateTransitions(t){this._transitioningPaint=this._transitionablePaint.transitioned(t,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(t,r){t.getCrossfadeParameters&&(this._crossfadeParameters=t.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(t,void 0,r)),this.paint=this._transitioningPaint.possiblyEvaluate(t,void 0,r)}serialize(){const t={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(t.layout=t.layout||{},t.layout.visibility=this.visibility),He(t,((r,u)=>!(r===void 0||u==="layout"&&!Object.keys(r).length||u==="paint"&&!Object.keys(r).length)))}_validate(t,r,u,f,w={}){return(!w||w.validate!==!1)&&Yc(this,t.call(Pa,{key:r,layerType:this.type,objectKey:u,value:f,styleSpec:Oe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const t in this.paint._values){const r=this.paint.get(t);if(r instanceof Kr&&il(r.property.specification)&&(r.value.kind==="source"||r.value.kind==="composite")&&r.value.isStateDependent)return!0}return!1}}const p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class m{constructor(t,r){this._structArray=t,this._pos1=r*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class y{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(t,r){return t._trim(),r&&(t.isTransferred=!0,r.push(t.arrayBuffer)),{length:t.length,arrayBuffer:t.arrayBuffer}}static deserialize(t){const r=Object.create(this.prototype);return r.arrayBuffer=t.arrayBuffer,r.length=t.length,r.capacity=t.arrayBuffer.byteLength/r.bytesPerElement,r._refreshViews(),r}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(t){this.reserve(t),this.length=t}reserve(t){if(t>this.capacity){this.capacity=Math.max(t,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const r=this.uint8;this._refreshViews(),r&&this.uint8.set(r)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function T(s,t=1){let r=0,u=0;return{members:s.map((f=>{const w=p[f.type].BYTES_PER_ELEMENT,b=r=P(r,Math.max(t,w)),S=f.components||1;return u=Math.max(u,w),r+=w*S,{name:f.name,type:f.type,components:S,offset:b}})),size:P(r,Math.max(u,t)),alignment:t}}function P(s,t){return Math.ceil(s/t)*t}class M extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r){const u=this.length;return this.resize(u+1),this.emplace(u,t,r)}emplace(t,r,u){const f=2*t;return this.int16[f+0]=r,this.int16[f+1]=u,t}}M.prototype.bytesPerElement=4,Ct("StructArrayLayout2i4",M);class B extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,u)}emplace(t,r,u,f){const w=3*t;return this.int16[w+0]=r,this.int16[w+1]=u,this.int16[w+2]=f,t}}B.prototype.bytesPerElement=6,Ct("StructArrayLayout3i6",B);class $ extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,u,f){const w=this.length;return this.resize(w+1),this.emplace(w,t,r,u,f)}emplace(t,r,u,f,w){const b=4*t;return this.int16[b+0]=r,this.int16[b+1]=u,this.int16[b+2]=f,this.int16[b+3]=w,t}}$.prototype.bytesPerElement=8,Ct("StructArrayLayout4i8",$);class U extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,r,u,f,w,b)}emplace(t,r,u,f,w,b,S){const C=6*t;return this.int16[C+0]=r,this.int16[C+1]=u,this.int16[C+2]=f,this.int16[C+3]=w,this.int16[C+4]=b,this.int16[C+5]=S,t}}U.prototype.bytesPerElement=12,Ct("StructArrayLayout2i4i12",U);class X extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,r,u,f,w,b)}emplace(t,r,u,f,w,b,S){const C=4*t,A=8*t;return this.int16[C+0]=r,this.int16[C+1]=u,this.uint8[A+4]=f,this.uint8[A+5]=w,this.uint8[A+6]=b,this.uint8[A+7]=S,t}}X.prototype.bytesPerElement=8,Ct("StructArrayLayout2i4ub8",X);class ee extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r){const u=this.length;return this.resize(u+1),this.emplace(u,t,r)}emplace(t,r,u){const f=2*t;return this.float32[f+0]=r,this.float32[f+1]=u,t}}ee.prototype.bytesPerElement=8,Ct("StructArrayLayout2f8",ee);class ne extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b,S,C,A,F){const V=this.length;return this.resize(V+1),this.emplace(V,t,r,u,f,w,b,S,C,A,F)}emplace(t,r,u,f,w,b,S,C,A,F,V){const W=10*t;return this.uint16[W+0]=r,this.uint16[W+1]=u,this.uint16[W+2]=f,this.uint16[W+3]=w,this.uint16[W+4]=b,this.uint16[W+5]=S,this.uint16[W+6]=C,this.uint16[W+7]=A,this.uint16[W+8]=F,this.uint16[W+9]=V,t}}ne.prototype.bytesPerElement=20,Ct("StructArrayLayout10ui20",ne);class le extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b,S,C,A,F,V,W){const Z=this.length;return this.resize(Z+1),this.emplace(Z,t,r,u,f,w,b,S,C,A,F,V,W)}emplace(t,r,u,f,w,b,S,C,A,F,V,W,Z){const J=12*t;return this.int16[J+0]=r,this.int16[J+1]=u,this.int16[J+2]=f,this.int16[J+3]=w,this.uint16[J+4]=b,this.uint16[J+5]=S,this.uint16[J+6]=C,this.uint16[J+7]=A,this.int16[J+8]=F,this.int16[J+9]=V,this.int16[J+10]=W,this.int16[J+11]=Z,t}}le.prototype.bytesPerElement=24,Ct("StructArrayLayout4i4ui4i24",le);class ue extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,u)}emplace(t,r,u,f){const w=3*t;return this.float32[w+0]=r,this.float32[w+1]=u,this.float32[w+2]=f,t}}ue.prototype.bytesPerElement=12,Ct("StructArrayLayout3f12",ue);class me extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint32[1*t+0]=r,t}}me.prototype.bytesPerElement=4,Ct("StructArrayLayout1ul4",me);class ye extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b,S,C,A){const F=this.length;return this.resize(F+1),this.emplace(F,t,r,u,f,w,b,S,C,A)}emplace(t,r,u,f,w,b,S,C,A,F){const V=10*t,W=5*t;return this.int16[V+0]=r,this.int16[V+1]=u,this.int16[V+2]=f,this.int16[V+3]=w,this.int16[V+4]=b,this.int16[V+5]=S,this.uint32[W+3]=C,this.uint16[V+8]=A,this.uint16[V+9]=F,t}}ye.prototype.bytesPerElement=20,Ct("StructArrayLayout6i1ul2ui20",ye);class ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,r,u,f,w,b)}emplace(t,r,u,f,w,b,S){const C=6*t;return this.int16[C+0]=r,this.int16[C+1]=u,this.int16[C+2]=f,this.int16[C+3]=w,this.int16[C+4]=b,this.int16[C+5]=S,t}}ce.prototype.bytesPerElement=12,Ct("StructArrayLayout2i2i2i12",ce);class Ne extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w){const b=this.length;return this.resize(b+1),this.emplace(b,t,r,u,f,w)}emplace(t,r,u,f,w,b){const S=4*t,C=8*t;return this.float32[S+0]=r,this.float32[S+1]=u,this.float32[S+2]=f,this.int16[C+6]=w,this.int16[C+7]=b,t}}Ne.prototype.bytesPerElement=16,Ct("StructArrayLayout2f1f2i16",Ne);class Ce extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b){const S=this.length;return this.resize(S+1),this.emplace(S,t,r,u,f,w,b)}emplace(t,r,u,f,w,b,S){const C=16*t,A=4*t,F=8*t;return this.uint8[C+0]=r,this.uint8[C+1]=u,this.float32[A+1]=f,this.float32[A+2]=w,this.int16[F+6]=b,this.int16[F+7]=S,t}}Ce.prototype.bytesPerElement=16,Ct("StructArrayLayout2ub2f2i16",Ce);class ze extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,u)}emplace(t,r,u,f){const w=3*t;return this.uint16[w+0]=r,this.uint16[w+1]=u,this.uint16[w+2]=f,t}}ze.prototype.bytesPerElement=6,Ct("StructArrayLayout3ui6",ze);class Ge extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b,S,C,A,F,V,W,Z,J,te,de,ge){const Me=this.length;return this.resize(Me+1),this.emplace(Me,t,r,u,f,w,b,S,C,A,F,V,W,Z,J,te,de,ge)}emplace(t,r,u,f,w,b,S,C,A,F,V,W,Z,J,te,de,ge,Me){const we=24*t,Ee=12*t,Ue=48*t;return this.int16[we+0]=r,this.int16[we+1]=u,this.uint16[we+2]=f,this.uint16[we+3]=w,this.uint32[Ee+2]=b,this.uint32[Ee+3]=S,this.uint32[Ee+4]=C,this.uint16[we+10]=A,this.uint16[we+11]=F,this.uint16[we+12]=V,this.float32[Ee+7]=W,this.float32[Ee+8]=Z,this.uint8[Ue+36]=J,this.uint8[Ue+37]=te,this.uint8[Ue+38]=de,this.uint32[Ee+10]=ge,this.int16[we+22]=Me,t}}Ge.prototype.bytesPerElement=48,Ct("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ge);class rt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,u,f,w,b,S,C,A,F,V,W,Z,J,te,de,ge,Me,we,Ee,Ue,Ke,St,Qt,jt,yt,Ft,It){const Mt=this.length;return this.resize(Mt+1),this.emplace(Mt,t,r,u,f,w,b,S,C,A,F,V,W,Z,J,te,de,ge,Me,we,Ee,Ue,Ke,St,Qt,jt,yt,Ft,It)}emplace(t,r,u,f,w,b,S,C,A,F,V,W,Z,J,te,de,ge,Me,we,Ee,Ue,Ke,St,Qt,jt,yt,Ft,It,Mt){const qe=32*t,$t=16*t;return this.int16[qe+0]=r,this.int16[qe+1]=u,this.int16[qe+2]=f,this.int16[qe+3]=w,this.int16[qe+4]=b,this.int16[qe+5]=S,this.int16[qe+6]=C,this.int16[qe+7]=A,this.uint16[qe+8]=F,this.uint16[qe+9]=V,this.uint16[qe+10]=W,this.uint16[qe+11]=Z,this.uint16[qe+12]=J,this.uint16[qe+13]=te,this.uint16[qe+14]=de,this.uint16[qe+15]=ge,this.uint16[qe+16]=Me,this.uint16[qe+17]=we,this.uint16[qe+18]=Ee,this.uint16[qe+19]=Ue,this.uint16[qe+20]=Ke,this.uint16[qe+21]=St,this.uint16[qe+22]=Qt,this.uint32[$t+12]=jt,this.float32[$t+13]=yt,this.float32[$t+14]=Ft,this.uint16[qe+30]=It,this.uint16[qe+31]=Mt,t}}rt.prototype.bytesPerElement=64,Ct("StructArrayLayout8i15ui1ul2f2ui64",rt);class ht extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.float32[1*t+0]=r,t}}ht.prototype.bytesPerElement=4,Ct("StructArrayLayout1f4",ht);class wt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,u)}emplace(t,r,u,f){const w=3*t;return this.uint16[6*t+0]=r,this.float32[w+1]=u,this.float32[w+2]=f,t}}wt.prototype.bytesPerElement=12,Ct("StructArrayLayout1ui2f12",wt);class pt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r,u){const f=this.length;return this.resize(f+1),this.emplace(f,t,r,u)}emplace(t,r,u,f){const w=4*t;return this.uint32[2*t+0]=r,this.uint16[w+2]=u,this.uint16[w+3]=f,t}}pt.prototype.bytesPerElement=8,Ct("StructArrayLayout1ul2ui8",pt);class lt extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t,r){const u=this.length;return this.resize(u+1),this.emplace(u,t,r)}emplace(t,r,u){const f=2*t;return this.uint16[f+0]=r,this.uint16[f+1]=u,t}}lt.prototype.bytesPerElement=4,Ct("StructArrayLayout2ui4",lt);class At extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(t){const r=this.length;return this.resize(r+1),this.emplace(r,t)}emplace(t,r){return this.uint16[1*t+0]=r,t}}At.prototype.bytesPerElement=2,Ct("StructArrayLayout1ui2",At);class si extends y{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(t,r,u,f){const w=this.length;return this.resize(w+1),this.emplace(w,t,r,u,f)}emplace(t,r,u,f,w){const b=4*t;return this.float32[b+0]=r,this.float32[b+1]=u,this.float32[b+2]=f,this.float32[b+3]=w,t}}si.prototype.bytesPerElement=16,Ct("StructArrayLayout4f16",si);class mt extends m{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new D(this.anchorPointX,this.anchorPointY)}}mt.prototype.size=20;class xt extends ye{get(t){return new mt(this,t)}}Ct("CollisionBoxArray",xt);class ii extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(t){this._structArray.uint8[this._pos1+37]=t}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(t){this._structArray.uint8[this._pos1+38]=t}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(t){this._structArray.uint32[this._pos4+10]=t}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}ii.prototype.size=48;class Oi extends Ge{get(t){return new ii(this,t)}}Ct("PlacedSymbolArray",Oi);class ci extends m{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(t){this._structArray.uint32[this._pos4+12]=t}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ci.prototype.size=64;class fi extends rt{get(t){return new ci(this,t)}}Ct("SymbolInstanceArray",fi);class $i extends ht{getoffsetX(t){return this.float32[1*t+0]}}Ct("GlyphOffsetArray",$i);class Hs extends B{getx(t){return this.int16[3*t+0]}gety(t){return this.int16[3*t+1]}gettileUnitDistanceFromAnchor(t){return this.int16[3*t+2]}}Ct("SymbolLineVertexArray",Hs);class Qr extends m{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Qr.prototype.size=12;class Ui extends wt{get(t){return new Qr(this,t)}}Ct("TextAnchorOffsetArray",Ui);class Ms extends m{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ms.prototype.size=8;class Ki extends pt{get(t){return new Ms(this,t)}}Ct("FeatureIndexArray",Ki);class ms extends M{}class tr extends M{}class On extends M{}class Lr extends U{}class Vn extends X{}class io extends ee{}class en extends ne{}class yn extends le{}class na extends ue{}class Nr extends me{}class tn extends ce{}class $n extends Ce{}class vn extends ze{}class ws extends lt{}const es=T([{name:"a_pos",components:2,type:"Int16"}],4),{members:ir}=es;class vi{constructor(t=[]){this.segments=t}prepareSegment(t,r,u,f){let w=this.segments[this.segments.length-1];return t>vi.MAX_VERTEX_ARRAY_LENGTH&&Ve(`Max vertices per segment is ${vi.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${t}`),(!w||w.vertexLength+t>vi.MAX_VERTEX_ARRAY_LENGTH||w.sortKey!==f)&&(w={vertexOffset:r.length,primitiveOffset:u.length,vertexLength:0,primitiveLength:0},f!==void 0&&(w.sortKey=f),this.segments.push(w)),w}get(){return this.segments}destroy(){for(const t of this.segments)for(const r in t.vaos)t.vaos[r].destroy()}static simpleSegment(t,r,u,f){return new vi([{vertexOffset:t,primitiveOffset:r,vertexLength:u,primitiveLength:f,vaos:{},sortKey:0}])}}function sn(s,t){return 256*(s=Je(Math.floor(s),0,255))+Je(Math.floor(t),0,255)}vi.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Ct("SegmentVector",vi);const so=T([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Un={exports:{}},Hu={exports:{}};Hu.exports=function(s,t){var r,u,f,w,b,S,C,A;for(u=s.length-(r=3&s.length),f=t,b=3432918353,S=461845907,A=0;A<u;)C=255&s.charCodeAt(A)|(255&s.charCodeAt(++A))<<8|(255&s.charCodeAt(++A))<<16|(255&s.charCodeAt(++A))<<24,++A,f=27492+(65535&(w=5*(65535&(f=(f^=C=(65535&(C=(C=(65535&C)*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295)<<13|f>>>19))+((5*(f>>>16)&65535)<<16)&4294967295))+((58964+(w>>>16)&65535)<<16);switch(C=0,r){case 3:C^=(255&s.charCodeAt(A+2))<<16;case 2:C^=(255&s.charCodeAt(A+1))<<8;case 1:f^=C=(65535&(C=(C=(65535&(C^=255&s.charCodeAt(A)))*b+(((C>>>16)*b&65535)<<16)&4294967295)<<15|C>>>17))*S+(((C>>>16)*S&65535)<<16)&4294967295}return f^=s.length,f=2246822507*(65535&(f^=f>>>16))+((2246822507*(f>>>16)&65535)<<16)&4294967295,f=3266489909*(65535&(f^=f>>>13))+((3266489909*(f>>>16)&65535)<<16)&4294967295,(f^=f>>>16)>>>0};var Wu=Hu.exports,ns={exports:{}};ns.exports=function(s,t){for(var r,u=s.length,f=t^u,w=0;u>=4;)r=1540483477*(65535&(r=255&s.charCodeAt(w)|(255&s.charCodeAt(++w))<<8|(255&s.charCodeAt(++w))<<16|(255&s.charCodeAt(++w))<<24))+((1540483477*(r>>>16)&65535)<<16),f=1540483477*(65535&f)+((1540483477*(f>>>16)&65535)<<16)^(r=1540483477*(65535&(r^=r>>>24))+((1540483477*(r>>>16)&65535)<<16)),u-=4,++w;switch(u){case 3:f^=(255&s.charCodeAt(w+2))<<16;case 2:f^=(255&s.charCodeAt(w+1))<<8;case 1:f=1540483477*(65535&(f^=255&s.charCodeAt(w)))+((1540483477*(f>>>16)&65535)<<16)}return f=1540483477*(65535&(f^=f>>>13))+((1540483477*(f>>>16)&65535)<<16),(f^=f>>>15)>>>0};var Hn=Wu,Kc=ns.exports;Un.exports=Hn,Un.exports.murmur3=Hn,Un.exports.murmur2=Kc;var fl=I(Un.exports);class ro{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(t,r,u,f){this.ids.push(gl(t)),this.positions.push(r,u,f)}getPositions(t){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const r=gl(t);let u=0,f=this.ids.length-1;for(;u<f;){const b=u+f>>1;this.ids[b]>=r?f=b:u=b+1}const w=[];for(;this.ids[u]===r;)w.push({index:this.positions[3*u],start:this.positions[3*u+1],end:this.positions[3*u+2]}),u++;return w}static serialize(t,r){const u=new Float64Array(t.ids),f=new Uint32Array(t.positions);return aa(u,f,0,u.length-1),r&&r.push(u.buffer,f.buffer),{ids:u,positions:f}}static deserialize(t){const r=new ro;return r.ids=t.ids,r.positions=t.positions,r.indexed=!0,r}}function gl(s){const t=+s;return!isNaN(t)&&t<=Number.MAX_SAFE_INTEGER?t:fl(String(s))}function aa(s,t,r,u){for(;r<u;){const f=s[r+u>>1];let w=r-1,b=u+1;for(;;){do w++;while(s[w]<f);do b--;while(s[b]>f);if(w>=b)break;Hi(s,w,b),Hi(t,3*w,3*b),Hi(t,3*w+1,3*b+1),Hi(t,3*w+2,3*b+2)}b-r<u-b?(aa(s,t,r,b),r=b+1):(aa(s,t,b+1,u),u=b)}}function Hi(s,t,r){const u=s[t];s[t]=s[r],s[r]=u}Ct("FeaturePositionMap",ro);class cs{constructor(t,r){this.gl=t.gl,this.location=r}}class As extends cs{constructor(t,r){super(t,r),this.current=0}set(t){this.current!==t&&(this.current=t,this.gl.uniform1f(this.location,t))}}class qu extends cs{constructor(t,r){super(t,r),this.current=[0,0,0,0]}set(t){t[0]===this.current[0]&&t[1]===this.current[1]&&t[2]===this.current[2]&&t[3]===this.current[3]||(this.current=t,this.gl.uniform4f(this.location,t[0],t[1],t[2],t[3]))}}class Qc extends cs{constructor(t,r){super(t,r),this.current=ai.transparent}set(t){t.r===this.current.r&&t.g===this.current.g&&t.b===this.current.b&&t.a===this.current.a||(this.current=t,this.gl.uniform4f(this.location,t.r,t.g,t.b,t.a))}}const Gu=new Float32Array(16);function xp(s){return[sn(255*s.r,255*s.g),sn(255*s.b,255*s.a)]}class Ws{constructor(t,r,u){this.value=t,this.uniformNames=r.map((f=>`u_${f}`)),this.type=u}setUniform(t,r,u){t.set(u.constantOr(this.value))}getBinding(t,r,u){return this.type==="color"?new Qc(t,r):new As(t,r)}}class xl{constructor(t,r){this.uniformNames=r.map((u=>`u_${u}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(t,r){this.pixelRatioFrom=r.pixelRatio,this.pixelRatioTo=t.pixelRatio,this.patternFrom=r.tlbr,this.patternTo=t.tlbr}setUniform(t,r,u,f){const w=f==="u_pattern_to"?this.patternTo:f==="u_pattern_from"?this.patternFrom:f==="u_pixel_ratio_to"?this.pixelRatioTo:f==="u_pixel_ratio_from"?this.pixelRatioFrom:null;w&&t.set(w)}getBinding(t,r,u){return u.substr(0,9)==="u_pattern"?new qu(t,r):new As(t,r)}}class Aa{constructor(t,r,u,f){this.expression=t,this.type=u,this.maxValue=0,this.paintVertexAttributes=r.map((w=>({name:`a_${w}`,type:"Float32",components:u==="color"?2:1,offset:0}))),this.paintVertexArray=new f}populatePaintArray(t,r,u,f,w){const b=this.paintVertexArray.length,S=this.expression.evaluate(new bi(0),r,{},f,[],w);this.paintVertexArray.resize(t),this._setPaintValue(b,t,S)}updatePaintArray(t,r,u,f){const w=this.expression.evaluate({zoom:0},u,f);this._setPaintValue(t,r,w)}_setPaintValue(t,r,u){if(this.type==="color"){const f=xp(u);for(let w=t;w<r;w++)this.paintVertexArray.emplace(w,f[0],f[1])}else{for(let f=t;f<r;f++)this.paintVertexArray.emplace(f,u);this.maxValue=Math.max(this.maxValue,Math.abs(u))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Wn{constructor(t,r,u,f,w,b){this.expression=t,this.uniformNames=r.map((S=>`u_${S}_t`)),this.type=u,this.useIntegerZoom=f,this.zoom=w,this.maxValue=0,this.paintVertexAttributes=r.map((S=>({name:`a_${S}`,type:"Float32",components:u==="color"?4:2,offset:0}))),this.paintVertexArray=new b}populatePaintArray(t,r,u,f,w){const b=this.expression.evaluate(new bi(this.zoom),r,{},f,[],w),S=this.expression.evaluate(new bi(this.zoom+1),r,{},f,[],w),C=this.paintVertexArray.length;this.paintVertexArray.resize(t),this._setPaintValue(C,t,b,S)}updatePaintArray(t,r,u,f){const w=this.expression.evaluate({zoom:this.zoom},u,f),b=this.expression.evaluate({zoom:this.zoom+1},u,f);this._setPaintValue(t,r,w,b)}_setPaintValue(t,r,u,f){if(this.type==="color"){const w=xp(u),b=xp(f);for(let S=t;S<r;S++)this.paintVertexArray.emplace(S,w[0],w[1],b[0],b[1])}else{for(let w=t;w<r;w++)this.paintVertexArray.emplace(w,u,f);this.maxValue=Math.max(this.maxValue,Math.abs(u),Math.abs(f))}}upload(t){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=t.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(t,r){const u=this.useIntegerZoom?Math.floor(r.zoom):r.zoom,f=Je(this.expression.interpolationFactor(u,this.zoom,this.zoom+1),0,1);t.set(f)}getBinding(t,r,u){return new As(t,r)}}class kr{constructor(t,r,u,f,w,b){this.expression=t,this.type=r,this.useIntegerZoom=u,this.zoom=f,this.layerId=b,this.zoomInPaintVertexArray=new w,this.zoomOutPaintVertexArray=new w}populatePaintArray(t,r,u){const f=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(t),this.zoomOutPaintVertexArray.resize(t),this._setPaintValues(f,t,r.patterns&&r.patterns[this.layerId],u)}updatePaintArray(t,r,u,f,w){this._setPaintValues(t,r,u.patterns&&u.patterns[this.layerId],w)}_setPaintValues(t,r,u,f){if(!f||!u)return;const{min:w,mid:b,max:S}=u,C=f[w],A=f[b],F=f[S];if(C&&A&&F)for(let V=t;V<r;V++)this.zoomInPaintVertexArray.emplace(V,A.tl[0],A.tl[1],A.br[0],A.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],A.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,A.tl[0],A.tl[1],A.br[0],A.br[1],F.tl[0],F.tl[1],F.br[0],F.br[1],A.pixelRatio,F.pixelRatio)}upload(t){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=t.createVertexBuffer(this.zoomInPaintVertexArray,so.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=t.createVertexBuffer(this.zoomOutPaintVertexArray,so.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class qn{constructor(t,r,u){this.binders={},this._buffers=[];const f=[];for(const w in t.paint._values){if(!u(w))continue;const b=t.paint.get(w);if(!(b instanceof Kr&&il(b.property.specification)))continue;const S=yp(w,t.type),C=b.value,A=b.property.specification.type,F=b.property.useIntegerZoom,V=b.property.specification["property-type"],W=V==="cross-faded"||V==="cross-faded-data-driven";if(C.kind==="constant")this.binders[w]=W?new xl(C.value,S):new Ws(C.value,S,A),f.push(`/u_${w}`);else if(C.kind==="source"||W){const Z=th(w,A,"source");this.binders[w]=W?new kr(C,A,F,r,Z,t.id):new Aa(C,S,A,Z),f.push(`/a_${w}`)}else{const Z=th(w,A,"composite");this.binders[w]=new Wn(C,S,A,F,r,Z),f.push(`/z_${w}`)}}this.cacheKey=f.sort().join("")}getMaxValue(t){const r=this.binders[t];return r instanceof Aa||r instanceof Wn?r.maxValue:0}populatePaintArrays(t,r,u,f,w){for(const b in this.binders){const S=this.binders[b];(S instanceof Aa||S instanceof Wn||S instanceof kr)&&S.populatePaintArray(t,r,u,f,w)}}setConstantPatternPositions(t,r){for(const u in this.binders){const f=this.binders[u];f instanceof xl&&f.setConstantPatternPositions(t,r)}}updatePaintArrays(t,r,u,f,w){let b=!1;for(const S in t){const C=r.getPositions(S);for(const A of C){const F=u.feature(A.index);for(const V in this.binders){const W=this.binders[V];if((W instanceof Aa||W instanceof Wn||W instanceof kr)&&W.expression.isStateDependent===!0){const Z=f.paint.get(V);W.expression=Z.value,W.updatePaintArray(A.start,A.end,F,t[S],w),b=!0}}}}return b}defines(){const t=[];for(const r in this.binders){const u=this.binders[r];(u instanceof Ws||u instanceof xl)&&t.push(...u.uniformNames.map((f=>`#define HAS_UNIFORM_${f}`)))}return t}getBinderAttributes(){const t=[];for(const r in this.binders){const u=this.binders[r];if(u instanceof Aa||u instanceof Wn)for(let f=0;f<u.paintVertexAttributes.length;f++)t.push(u.paintVertexAttributes[f].name);else if(u instanceof kr)for(let f=0;f<so.members.length;f++)t.push(so.members[f].name)}return t}getBinderUniforms(){const t=[];for(const r in this.binders){const u=this.binders[r];if(u instanceof Ws||u instanceof xl||u instanceof Wn)for(const f of u.uniformNames)t.push(f)}return t}getPaintVertexBuffers(){return this._buffers}getUniforms(t,r){const u=[];for(const f in this.binders){const w=this.binders[f];if(w instanceof Ws||w instanceof xl||w instanceof Wn){for(const b of w.uniformNames)if(r[b]){const S=w.getBinding(t,r[b],b);u.push({name:b,property:f,binding:S})}}}return u}setUniforms(t,r,u,f){for(const{name:w,property:b,binding:S}of r)this.binders[b].setUniform(S,f,u.get(b),w)}updatePaintBuffers(t){this._buffers=[];for(const r in this.binders){const u=this.binders[r];if(t&&u instanceof kr){const f=t.fromScale===2?u.zoomInPaintVertexBuffer:u.zoomOutPaintVertexBuffer;f&&this._buffers.push(f)}else(u instanceof Aa||u instanceof Wn)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(t){for(const r in this.binders){const u=this.binders[r];(u instanceof Aa||u instanceof Wn||u instanceof kr)&&u.upload(t)}this.updatePaintBuffers()}destroy(){for(const t in this.binders){const r=this.binders[t];(r instanceof Aa||r instanceof Wn||r instanceof kr)&&r.destroy()}}}class Ia{constructor(t,r,u=(()=>!0)){this.programConfigurations={};for(const f of t)this.programConfigurations[f.id]=new qn(f,r,u);this.needsUpload=!1,this._featureMap=new ro,this._bufferOffset=0}populatePaintArrays(t,r,u,f,w,b){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(t,r,f,w,b);r.id!==void 0&&this._featureMap.add(r.id,u,this._bufferOffset,t),this._bufferOffset=t,this.needsUpload=!0}updatePaintArrays(t,r,u,f){for(const w of u)this.needsUpload=this.programConfigurations[w.id].updatePaintArrays(t,this._featureMap,r,w,f)||this.needsUpload}get(t){return this.programConfigurations[t]}upload(t){if(this.needsUpload){for(const r in this.programConfigurations)this.programConfigurations[r].upload(t);this.needsUpload=!1}}destroy(){for(const t in this.programConfigurations)this.programConfigurations[t].destroy()}}function yp(s,t){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(`${t}-`,"").replace(/-/g,"_")]}function th(s,t,r){const u={color:{source:ee,composite:si},number:{source:ht,composite:ee}},f=(function(w){return{"line-pattern":{source:en,composite:en},"fill-pattern":{source:en,composite:en},"fill-extrusion-pattern":{source:en,composite:en}}[w]})(s);return f&&f[r]||u[t][r]}Ct("ConstantBinder",Ws),Ct("CrossFadedConstantBinder",xl),Ct("SourceExpressionBinder",Aa),Ct("CrossFadedCompositeBinder",kr),Ct("CompositeExpressionBinder",Wn),Ct("ProgramConfiguration",qn,{omit:["_buffers"]}),Ct("ProgramConfigurationSet",Ia);const bs=8192,ih=Math.pow(2,14)-1,vp=-ih-1;function yl(s){const t=bs/s.extent,r=s.loadGeometry();for(let u=0;u<r.length;u++){const f=r[u];for(let w=0;w<f.length;w++){const b=f[w],S=Math.round(b.x*t),C=Math.round(b.y*t);b.x=Je(S,vp,ih),b.y=Je(C,vp,ih),(S<b.x||S>b.x+1||C<b.y||C>b.y+1)&&Ve("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return r}function vl(s,t){return{type:s.type,id:s.id,properties:s.properties,geometry:t?yl(s):[]}}function Zu(s,t,r,u,f){s.emplaceBack(2*t+(u+1)/2,2*r+(f+1)/2)}class sh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new tr,this.indexArray=new vn,this.segments=new vi,this.programConfigurations=new Ia(t.layers,t.zoom),this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,u){const f=this.layers[0],w=[];let b=null,S=!1;f.type==="circle"&&(b=f.layout.get("circle-sort-key"),S=!b.isConstant());for(const{feature:C,id:A,index:F,sourceLayerIndex:V}of t){const W=this.layers[0]._featureFilter.needGeometry,Z=vl(C,W);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),Z,u))continue;const J=S?b.evaluate(Z,{},u):void 0,te={id:A,properties:C.properties,type:C.type,sourceLayerIndex:V,index:F,geometry:W?Z.geometry:yl(C),patterns:{},sortKey:J};w.push(te)}S&&w.sort(((C,A)=>C.sortKey-A.sortKey));for(const C of w){const{geometry:A,index:F,sourceLayerIndex:V}=C,W=t[F].feature;this.addFeature(C,A,F,u),r.featureIndex.insert(W,A,F,V,this.index)}}update(t,r,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,ir),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(t,r,u,f){for(const w of r)for(const b of w){const S=b.x,C=b.y;if(S<0||S>=bs||C<0||C>=bs)continue;const A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,t.sortKey),F=A.vertexLength;Zu(this.layoutVertexArray,S,C,-1,-1),Zu(this.layoutVertexArray,S,C,1,-1),Zu(this.layoutVertexArray,S,C,1,1),Zu(this.layoutVertexArray,S,C,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+3,F+2),A.vertexLength+=4,A.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,{},f)}}function _p(s,t){for(let r=0;r<s.length;r++)if(oc(t,s[r]))return!0;for(let r=0;r<t.length;r++)if(oc(s,t[r]))return!0;return!!eu(s,t)}function Xu(s,t,r){return!!oc(s,t)||!!Yu(t,s,r)}function wp(s,t){if(s.length===1)return jp(t,s[0]);for(let r=0;r<t.length;r++){const u=t[r];for(let f=0;f<u.length;f++)if(oc(s,u[f]))return!0}for(let r=0;r<s.length;r++)if(jp(t,s[r]))return!0;for(let r=0;r<t.length;r++)if(eu(s,t[r]))return!0;return!1}function rh(s,t,r){if(s.length>1){if(eu(s,t))return!0;for(let u=0;u<t.length;u++)if(Yu(t[u],s,r))return!0}for(let u=0;u<s.length;u++)if(Yu(s[u],t,r))return!0;return!1}function eu(s,t){if(s.length===0||t.length===0)return!1;for(let r=0;r<s.length-1;r++){const u=s[r],f=s[r+1];for(let w=0;w<t.length-1;w++)if(km(u,f,t[w],t[w+1]))return!0}return!1}function km(s,t,r,u){return at(s,r,u)!==at(t,r,u)&&at(s,t,r)!==at(s,t,u)}function Yu(s,t,r){const u=r*r;if(t.length===1)return s.distSqr(t[0])<u;for(let f=1;f<t.length;f++)if(bp(s,t[f-1],t[f])<u)return!0;return!1}function bp(s,t,r){const u=t.distSqr(r);if(u===0)return s.distSqr(t);const f=((s.x-t.x)*(r.x-t.x)+(s.y-t.y)*(r.y-t.y))/u;return s.distSqr(f<0?t:f>1?r:r.sub(t)._mult(f)._add(t))}function jp(s,t){let r,u,f,w=!1;for(let b=0;b<s.length;b++){r=s[b];for(let S=0,C=r.length-1;S<r.length;C=S++)u=r[S],f=r[C],u.y>t.y!=f.y>t.y&&t.x<(f.x-u.x)*(t.y-u.y)/(f.y-u.y)+u.x&&(w=!w)}return w}function oc(s,t){let r=!1;for(let u=0,f=s.length-1;u<s.length;f=u++){const w=s[u],b=s[f];w.y>t.y!=b.y>t.y&&t.x<(b.x-w.x)*(t.y-w.y)/(b.y-w.y)+w.x&&(r=!r)}return r}function Sm(s,t,r){const u=r[0],f=r[2];if(s.x<u.x&&t.x<u.x||s.x>f.x&&t.x>f.x||s.y<u.y&&t.y<u.y||s.y>f.y&&t.y>f.y)return!1;const w=at(s,t,r[0]);return w!==at(s,t,r[1])||w!==at(s,t,r[2])||w!==at(s,t,r[3])}function lc(s,t,r){const u=t.paint.get(s).value;return u.kind==="constant"?u.value:r.programConfigurations.get(t.id).getMaxValue(s)}function Ju(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Ku(s,t,r,u,f){if(!t[0]&&!t[1])return s;const w=D.convert(t)._mult(f);r==="viewport"&&w._rotate(-u);const b=[];for(let S=0;S<s.length;S++)b.push(s[S].sub(w));return b}let Np,Tm;Ct("CircleBucket",sh,{omit:["layers"]});var Cm={get paint(){return Tm=Tm||new v({"circle-radius":new qt(Oe.paint_circle["circle-radius"]),"circle-color":new qt(Oe.paint_circle["circle-color"]),"circle-blur":new qt(Oe.paint_circle["circle-blur"]),"circle-opacity":new qt(Oe.paint_circle["circle-opacity"]),"circle-translate":new Pt(Oe.paint_circle["circle-translate"]),"circle-translate-anchor":new Pt(Oe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pt(Oe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pt(Oe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new qt(Oe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new qt(Oe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new qt(Oe.paint_circle["circle-stroke-opacity"])})},get layout(){return Np=Np||new v({"circle-sort-key":new qt(Oe.layout_circle["circle-sort-key"])})}},Br=1e-6,tu=typeof Float32Array<"u"?Float32Array:Array;function nh(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function kp(s,t,r){var u=t[0],f=t[1],w=t[2],b=t[3],S=t[4],C=t[5],A=t[6],F=t[7],V=t[8],W=t[9],Z=t[10],J=t[11],te=t[12],de=t[13],ge=t[14],Me=t[15],we=r[0],Ee=r[1],Ue=r[2],Ke=r[3];return s[0]=we*u+Ee*S+Ue*V+Ke*te,s[1]=we*f+Ee*C+Ue*W+Ke*de,s[2]=we*w+Ee*A+Ue*Z+Ke*ge,s[3]=we*b+Ee*F+Ue*J+Ke*Me,s[4]=(we=r[4])*u+(Ee=r[5])*S+(Ue=r[6])*V+(Ke=r[7])*te,s[5]=we*f+Ee*C+Ue*W+Ke*de,s[6]=we*w+Ee*A+Ue*Z+Ke*ge,s[7]=we*b+Ee*F+Ue*J+Ke*Me,s[8]=(we=r[8])*u+(Ee=r[9])*S+(Ue=r[10])*V+(Ke=r[11])*te,s[9]=we*f+Ee*C+Ue*W+Ke*de,s[10]=we*w+Ee*A+Ue*Z+Ke*ge,s[11]=we*b+Ee*F+Ue*J+Ke*Me,s[12]=(we=r[12])*u+(Ee=r[13])*S+(Ue=r[14])*V+(Ke=r[15])*te,s[13]=we*f+Ee*C+Ue*W+Ke*de,s[14]=we*w+Ee*A+Ue*Z+Ke*ge,s[15]=we*b+Ee*F+Ue*J+Ke*Me,s}Math.hypot||(Math.hypot=function(){for(var s=0,t=arguments.length;t--;)s+=arguments[t]*arguments[t];return Math.sqrt(s)});var iu,ah=kp;function oh(s,t,r){var u=t[0],f=t[1],w=t[2],b=t[3];return s[0]=r[0]*u+r[4]*f+r[8]*w+r[12]*b,s[1]=r[1]*u+r[5]*f+r[9]*w+r[13]*b,s[2]=r[2]*u+r[6]*f+r[10]*w+r[14]*b,s[3]=r[3]*u+r[7]*f+r[11]*w+r[15]*b,s}iu=new tu(4),tu!=Float32Array&&(iu[0]=0,iu[1]=0,iu[2]=0,iu[3]=0);class Kf extends o{constructor(t){super(t,Cm)}createBucket(t){return new sh(t)}queryRadius(t){const r=t;return lc("circle-radius",this,r)+lc("circle-stroke-width",this,r)+Ju(this.paint.get("circle-translate"))}queryIntersectsFeature(t,r,u,f,w,b,S,C){const A=Ku(t,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),b.angle,S),F=this.paint.get("circle-radius").evaluate(r,u)+this.paint.get("circle-stroke-width").evaluate(r,u),V=this.paint.get("circle-pitch-alignment")==="map",W=V?A:(function(J,te){return J.map((de=>Pm(de,te)))})(A,C),Z=V?F*S:F;for(const J of f)for(const te of J){const de=V?te:Pm(te,C);let ge=Z;const Me=oh([],[te.x,te.y,0,1],C);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?ge*=Me[3]/b.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(ge*=b.cameraToCenterDistance/Me[3]),Xu(W,de,ge))return!0}return!1}}function Pm(s,t){const r=oh([],[s.x,s.y,0,1],t);return new D(r[0]/r[3],r[1]/r[3])}class oa extends sh{}let lh;Ct("HeatmapBucket",oa,{omit:["layers"]});var ch={get paint(){return lh=lh||new v({"heatmap-radius":new qt(Oe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new qt(Oe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pt(Oe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Uu(Oe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pt(Oe.paint_heatmap["heatmap-opacity"])})}};function uh(s,{width:t,height:r},u,f){if(f){if(f instanceof Uint8ClampedArray)f=new Uint8Array(f.buffer);else if(f.length!==t*r*u)throw new RangeError(`mismatched image size. expected: ${f.length} but got: ${t*r*u}`)}else f=new Uint8Array(t*r*u);return s.width=t,s.height=r,s.data=f,s}function Sp(s,{width:t,height:r},u){if(t===s.width&&r===s.height)return;const f=uh({},{width:t,height:r},u);dh(s,f,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,t),height:Math.min(s.height,r)},u),s.width=t,s.height=r,s.data=f.data}function dh(s,t,r,u,f,w){if(f.width===0||f.height===0)return t;if(f.width>s.width||f.height>s.height||r.x>s.width-f.width||r.y>s.height-f.height)throw new RangeError("out of range source coordinates for image copy");if(f.width>t.width||f.height>t.height||u.x>t.width-f.width||u.y>t.height-f.height)throw new RangeError("out of range destination coordinates for image copy");const b=s.data,S=t.data;if(b===S)throw new Error("srcData equals dstData, so image is already copied");for(let C=0;C<f.height;C++){const A=((r.y+C)*s.width+r.x)*w,F=((u.y+C)*t.width+u.x)*w;for(let V=0;V<f.width*w;V++)S[F+V]=b[A+V]}return t}class cc{constructor(t,r){uh(this,t,1,r)}resize(t){Sp(this,t,1)}clone(){return new cc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,u,f,w){dh(t,r,u,f,w,1)}}class cr{constructor(t,r){uh(this,t,4,r)}resize(t){Sp(this,t,4)}replace(t,r){r?this.data.set(t):this.data=t instanceof Uint8ClampedArray?new Uint8Array(t.buffer):t}clone(){return new cr({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(t,r,u,f,w){dh(t,r,u,f,w,4)}}function hh(s){const t={},r=s.resolution||256,u=s.clips?s.clips.length:1,f=s.image||new cr({width:r,height:u});if(Math.log(r)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${r}`);const w=(b,S,C)=>{t[s.evaluationKey]=C;const A=s.expression.evaluate(t);f.data[b+S+0]=Math.floor(255*A.r/A.a),f.data[b+S+1]=Math.floor(255*A.g/A.a),f.data[b+S+2]=Math.floor(255*A.b/A.a),f.data[b+S+3]=Math.floor(255*A.a)};if(s.clips)for(let b=0,S=0;b<u;++b,S+=4*r)for(let C=0,A=0;C<r;C++,A+=4){const F=C/(r-1),{start:V,end:W}=s.clips[b];w(S,A,V*(1-F)+W*F)}else for(let b=0,S=0;b<r;b++,S+=4)w(0,S,b/(r-1));return f}Ct("AlphaImage",cc),Ct("RGBAImage",cr);const Qu="big-fb";class Qf extends o{createBucket(t){return new oa(t)}constructor(t){super(t,ch),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(t){t==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=hh({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Qu)&&this.heatmapFbos.delete(Qu)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let Tp;var Em={get paint(){return Tp=Tp||new v({"hillshade-illumination-direction":new Pt(Oe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pt(Oe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pt(Oe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pt(Oe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pt(Oe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pt(Oe.paint_hillshade["hillshade-accent-color"])})}};class Mm extends o{constructor(t){super(t,Em)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const Am=T([{name:"a_pos",components:2,type:"Int16"}],4),{members:Im}=Am;function zm(s,t,r=2){const u=t&&t.length,f=u?t[0]*r:s.length;let w=rn(s,0,f,r,!0);const b=[];if(!w||w.next===w.prev)return b;let S,C,A;if(u&&(w=(function(F,V,W,Z){const J=[];for(let te=0,de=V.length;te<de;te++){const ge=rn(F,V[te]*Z,te<de-1?V[te+1]*Z:F.length,Z,!1);ge===ge.next&&(ge.steiner=!0),J.push(Om(ge))}J.sort(Cp);for(let te=0;te<J.length;te++)W=Fm(J[te],W);return W})(s,t,w,r)),s.length>80*r){S=1/0,C=1/0;let F=-1/0,V=-1/0;for(let W=r;W<f;W+=r){const Z=s[W],J=s[W+1];Z<S&&(S=Z),J<C&&(C=J),Z>F&&(F=Z),J>V&&(V=J)}A=Math.max(F-S,V-C),A=A!==0?32767/A:0}return su(w,b,r,S,C,A,0),b}function rn(s,t,r,u,f){let w;if(f===(function(b,S,C,A){let F=0;for(let V=S,W=C-A;V<C;V+=A)F+=(b[W]-b[V])*(b[V+1]+b[W+1]),W=V;return F})(s,t,r,u)>0)for(let b=t;b<r;b+=u)w=id(b/u|0,s[b],s[b+1],w);else for(let b=r-u;b>=t;b-=u)w=id(b/u|0,s[b],s[b+1],w);return w&&ru(w,w.next)&&(Gn(w),w=w.next),w}function Is(s,t){if(!s)return s;t||(t=s);let r,u=s;do if(r=!1,u.steiner||!ru(u,u.next)&&fs(u.prev,u,u.next)!==0)u=u.next;else{if(Gn(u),u=t=u.prev,u===u.next)break;r=!0}while(r||u!==t);return t}function su(s,t,r,u,f,w,b){if(!s)return;!b&&w&&(function(C,A,F,V){let W=C;do W.z===0&&(W.z=ph(W.x,W.y,A,F,V)),W.prevZ=W.prev,W.nextZ=W.next,W=W.next;while(W!==C);W.prevZ.nextZ=null,W.prevZ=null,(function(Z){let J,te=1;do{let de,ge=Z;Z=null;let Me=null;for(J=0;ge;){J++;let we=ge,Ee=0;for(let Ke=0;Ke<te&&(Ee++,we=we.nextZ,we);Ke++);let Ue=te;for(;Ee>0||Ue>0&&we;)Ee!==0&&(Ue===0||!we||ge.z<=we.z)?(de=ge,ge=ge.nextZ,Ee--):(de=we,we=we.nextZ,Ue--),Me?Me.nextZ=de:Z=de,de.prevZ=Me,Me=de;ge=we}Me.nextZ=null,te*=2}while(J>1)})(W)})(s,u,f,w);let S=s;for(;s.prev!==s.next;){const C=s.prev,A=s.next;if(w?Rm(s,u,f,w):Dm(s))t.push(C.i,s.i,A.i),Gn(s),s=A.next,S=A.next;else if((s=A)===S){b?b===1?su(s=Lm(Is(s),t),t,r,u,f,w,2):b===2&&Bm(s,t,r,u,f,w):su(Is(s),t,r,u,f,w,1);break}}}function Dm(s){const t=s.prev,r=s,u=s.next;if(fs(t,r,u)>=0)return!1;const f=t.x,w=r.x,b=u.x,S=t.y,C=r.y,A=u.y,F=f<w?f<b?f:b:w<b?w:b,V=S<C?S<A?S:A:C<A?C:A,W=f>w?f>b?f:b:w>b?w:b,Z=S>C?S>A?S:A:C>A?C:A;let J=u.next;for(;J!==t;){if(J.x>=F&&J.x<=W&&J.y>=V&&J.y<=Z&&_l(f,S,w,C,b,A,J.x,J.y)&&fs(J.prev,J,J.next)>=0)return!1;J=J.next}return!0}function Rm(s,t,r,u){const f=s.prev,w=s,b=s.next;if(fs(f,w,b)>=0)return!1;const S=f.x,C=w.x,A=b.x,F=f.y,V=w.y,W=b.y,Z=S<C?S<A?S:A:C<A?C:A,J=F<V?F<W?F:W:V<W?V:W,te=S>C?S>A?S:A:C>A?C:A,de=F>V?F>W?F:W:V>W?V:W,ge=ph(Z,J,t,r,u),Me=ph(te,de,t,r,u);let we=s.prevZ,Ee=s.nextZ;for(;we&&we.z>=ge&&Ee&&Ee.z<=Me;){if(we.x>=Z&&we.x<=te&&we.y>=J&&we.y<=de&&we!==f&&we!==b&&_l(S,F,C,V,A,W,we.x,we.y)&&fs(we.prev,we,we.next)>=0||(we=we.prevZ,Ee.x>=Z&&Ee.x<=te&&Ee.y>=J&&Ee.y<=de&&Ee!==f&&Ee!==b&&_l(S,F,C,V,A,W,Ee.x,Ee.y)&&fs(Ee.prev,Ee,Ee.next)>=0))return!1;Ee=Ee.nextZ}for(;we&&we.z>=ge;){if(we.x>=Z&&we.x<=te&&we.y>=J&&we.y<=de&&we!==f&&we!==b&&_l(S,F,C,V,A,W,we.x,we.y)&&fs(we.prev,we,we.next)>=0)return!1;we=we.prevZ}for(;Ee&&Ee.z<=Me;){if(Ee.x>=Z&&Ee.x<=te&&Ee.y>=J&&Ee.y<=de&&Ee!==f&&Ee!==b&&_l(S,F,C,V,A,W,Ee.x,Ee.y)&&fs(Ee.prev,Ee,Ee.next)>=0)return!1;Ee=Ee.nextZ}return!0}function Lm(s,t){let r=s;do{const u=r.prev,f=r.next.next;!ru(u,f)&&ed(u,r,r.next,f)&&uc(u,f)&&uc(f,u)&&(t.push(u.i,r.i,f.i),Gn(r),Gn(r.next),r=s=f),r=r.next}while(r!==s);return Is(r)}function Bm(s,t,r,u,f,w){let b=s;do{let S=b.next.next;for(;S!==b.prev;){if(b.i!==S.i&&Ep(b,S)){let C=Mp(b,S);return b=Is(b,b.next),C=Is(C,C.next),su(b,t,r,u,f,w,0),void su(C,t,r,u,f,w,0)}S=S.next}b=b.next}while(b!==s)}function Cp(s,t){return s.x-t.x}function Fm(s,t){const r=(function(f,w){let b=w;const S=f.x,C=f.y;let A,F=-1/0;do{if(C<=b.y&&C>=b.next.y&&b.next.y!==b.y){const te=b.x+(C-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(te<=S&&te>F&&(F=te,A=b.x<b.next.x?b:b.next,te===S))return A}b=b.next}while(b!==w);if(!A)return null;const V=A,W=A.x,Z=A.y;let J=1/0;b=A;do{if(S>=b.x&&b.x>=W&&S!==b.x&&_l(C<Z?S:F,C,W,Z,C<Z?F:S,C,b.x,b.y)){const te=Math.abs(C-b.y)/(S-b.x);uc(b,f)&&(te<J||te===J&&(b.x>A.x||b.x===A.x&&Pp(A,b)))&&(A=b,J=te)}b=b.next}while(b!==V);return A})(s,t);if(!r)return t;const u=Mp(r,s);return Is(u,u.next),Is(r,r.next)}function Pp(s,t){return fs(s.prev,s,t.prev)<0&&fs(t.next,s,s.next)<0}function ph(s,t,r,u,f){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=(s-r)*f|0)|s<<8))|s<<4))|s<<2))|s<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-u)*f|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Om(s){let t=s,r=s;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==s);return r}function _l(s,t,r,u,f,w,b,S){return(f-b)*(t-S)>=(s-b)*(w-S)&&(s-b)*(u-S)>=(r-b)*(t-S)&&(r-b)*(w-S)>=(f-b)*(u-S)}function Ep(s,t){return s.next.i!==t.i&&s.prev.i!==t.i&&!(function(r,u){let f=r;do{if(f.i!==r.i&&f.next.i!==r.i&&f.i!==u.i&&f.next.i!==u.i&&ed(f,f.next,r,u))return!0;f=f.next}while(f!==r);return!1})(s,t)&&(uc(s,t)&&uc(t,s)&&(function(r,u){let f=r,w=!1;const b=(r.x+u.x)/2,S=(r.y+u.y)/2;do f.y>S!=f.next.y>S&&f.next.y!==f.y&&b<(f.next.x-f.x)*(S-f.y)/(f.next.y-f.y)+f.x&&(w=!w),f=f.next;while(f!==r);return w})(s,t)&&(fs(s.prev,s,t.prev)||fs(s,t.prev,t))||ru(s,t)&&fs(s.prev,s,s.next)>0&&fs(t.prev,t,t.next)>0)}function fs(s,t,r){return(t.y-s.y)*(r.x-t.x)-(t.x-s.x)*(r.y-t.y)}function ru(s,t){return s.x===t.x&&s.y===t.y}function ed(s,t,r,u){const f=td(fs(s,t,r)),w=td(fs(s,t,u)),b=td(fs(r,u,s)),S=td(fs(r,u,t));return f!==w&&b!==S||!(f!==0||!mh(s,r,t))||!(w!==0||!mh(s,u,t))||!(b!==0||!mh(r,s,u))||!(S!==0||!mh(r,t,u))}function mh(s,t,r){return t.x<=Math.max(s.x,r.x)&&t.x>=Math.min(s.x,r.x)&&t.y<=Math.max(s.y,r.y)&&t.y>=Math.min(s.y,r.y)}function td(s){return s>0?1:s<0?-1:0}function uc(s,t){return fs(s.prev,s,s.next)<0?fs(s,t,s.next)>=0&&fs(s,s.prev,t)>=0:fs(s,t,s.prev)<0||fs(s,s.next,t)<0}function Mp(s,t){const r=Ap(s.i,s.x,s.y),u=Ap(t.i,t.x,t.y),f=s.next,w=t.prev;return s.next=t,t.prev=s,r.next=f,f.prev=r,u.next=r,r.prev=u,w.next=u,u.prev=w,u}function id(s,t,r,u){const f=Ap(s,t,r);return u?(f.next=u.next,f.prev=u,u.next.prev=f,u.next=f):(f.prev=f,f.next=f),f}function Gn(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Ap(s,t,r){return{i:s,x:t,y:r,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function fh(s,t,r){const u=r.patternDependencies;let f=!1;for(const w of t){const b=w.paint.get(`${s}-pattern`);b.isConstant()||(f=!0);const S=b.constantOr(null);S&&(f=!0,u[S.to]=!0,u[S.from]=!0)}return f}function sd(s,t,r,u,f){const w=f.patternDependencies;for(const b of t){const S=b.paint.get(`${s}-pattern`).value;if(S.kind!=="constant"){let C=S.evaluate({zoom:u-1},r,{},f.availableImages),A=S.evaluate({zoom:u},r,{},f.availableImages),F=S.evaluate({zoom:u+1},r,{},f.availableImages);C=C&&C.name?C.name:C,A=A&&A.name?A.name:A,F=F&&F.name?F.name:F,w[C]=!0,w[A]=!0,w[F]=!0,r.patterns[b.id]={min:C,mid:A,max:F}}}return r}class gh{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new On,this.indexArray=new vn,this.indexArray2=new ws,this.programConfigurations=new Ia(t.layers,t.zoom),this.segments=new vi,this.segments2=new vi,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,u){this.hasPattern=fh("fill",this.layers,r);const f=this.layers[0].layout.get("fill-sort-key"),w=!f.isConstant(),b=[];for(const{feature:S,id:C,index:A,sourceLayerIndex:F}of t){const V=this.layers[0]._featureFilter.needGeometry,W=vl(S,V);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),W,u))continue;const Z=w?f.evaluate(W,{},u,r.availableImages):void 0,J={id:C,properties:S.properties,type:S.type,sourceLayerIndex:F,index:A,geometry:V?W.geometry:yl(S),patterns:{},sortKey:Z};b.push(J)}w&&b.sort(((S,C)=>S.sortKey-C.sortKey));for(const S of b){const{geometry:C,index:A,sourceLayerIndex:F}=S;if(this.hasPattern){const V=sd("fill",this.layers,S,this.zoom,r);this.patternFeatures.push(V)}else this.addFeature(S,C,A,u,{});r.featureIndex.insert(t[A].feature,C,A,F,this.index)}}update(t,r,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,u)}addFeatures(t,r,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,r,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Im),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.indexBuffer2=t.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(t,r,u,f,w){for(const b of Ko(r,500)){let S=0;for(const Z of b)S+=Z.length;const C=this.segments.prepareSegment(S,this.layoutVertexArray,this.indexArray),A=C.vertexLength,F=[],V=[];for(const Z of b){if(Z.length===0)continue;Z!==b[0]&&V.push(F.length/2);const J=this.segments2.prepareSegment(Z.length,this.layoutVertexArray,this.indexArray2),te=J.vertexLength;this.layoutVertexArray.emplaceBack(Z[0].x,Z[0].y),this.indexArray2.emplaceBack(te+Z.length-1,te),F.push(Z[0].x),F.push(Z[0].y);for(let de=1;de<Z.length;de++)this.layoutVertexArray.emplaceBack(Z[de].x,Z[de].y),this.indexArray2.emplaceBack(te+de-1,te+de),F.push(Z[de].x),F.push(Z[de].y);J.vertexLength+=Z.length,J.primitiveLength+=Z.length}const W=zm(F,V);for(let Z=0;Z<W.length;Z+=3)this.indexArray.emplaceBack(A+W[Z],A+W[Z+1],A+W[Z+2]);C.vertexLength+=S,C.primitiveLength+=W.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,f)}}let Ip,nu;Ct("FillBucket",gh,{omit:["layers","patternFeatures"]});var Fr={get paint(){return nu=nu||new v({"fill-antialias":new Pt(Oe.paint_fill["fill-antialias"]),"fill-opacity":new qt(Oe.paint_fill["fill-opacity"]),"fill-color":new qt(Oe.paint_fill["fill-color"]),"fill-outline-color":new qt(Oe.paint_fill["fill-outline-color"]),"fill-translate":new Pt(Oe.paint_fill["fill-translate"]),"fill-translate-anchor":new Pt(Oe.paint_fill["fill-translate-anchor"]),"fill-pattern":new ml(Oe.paint_fill["fill-pattern"])})},get layout(){return Ip=Ip||new v({"fill-sort-key":new qt(Oe.layout_fill["fill-sort-key"])})}};class eg extends o{constructor(t){super(t,Fr)}recalculate(t,r){super.recalculate(t,r);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(t){return new gh(t)}queryRadius(){return Ju(this.paint.get("fill-translate"))}queryIntersectsFeature(t,r,u,f,w,b,S){return wp(Ku(t,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),b.angle,S),f)}isTileClipped(){return!0}}const tg=T([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),xh=T([{name:"a_centroid",components:2,type:"Int16"}],4),{members:Or}=tg;var wl={},Vt=z,dc=bl;function bl(s,t,r,u,f){this.properties={},this.extent=r,this.type=0,this._pbf=s,this._geometry=-1,this._keys=u,this._values=f,s.readFields(Vm,this,t)}function Vm(s,t,r){s==1?t.id=r.readVarint():s==2?(function(u,f){for(var w=u.readVarint()+u.pos;u.pos<w;){var b=f._keys[u.readVarint()],S=f._values[u.readVarint()];f.properties[b]=S}})(r,t):s==3?t.type=r.readVarint():s==4&&(t._geometry=r.pos)}function ig(s){for(var t,r,u=0,f=0,w=s.length,b=w-1;f<w;b=f++)u+=((r=s[b]).x-(t=s[f]).x)*(t.y+r.y);return u}bl.types=["Unknown","Point","LineString","Polygon"],bl.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var t,r=s.readVarint()+s.pos,u=1,f=0,w=0,b=0,S=[];s.pos<r;){if(f<=0){var C=s.readVarint();u=7&C,f=C>>3}if(f--,u===1||u===2)w+=s.readSVarint(),b+=s.readSVarint(),u===1&&(t&&S.push(t),t=[]),t.push(new Vt(w,b));else{if(u!==7)throw new Error("unknown command "+u);t&&t.push(t[0].clone())}}return t&&S.push(t),S},bl.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var t=s.readVarint()+s.pos,r=1,u=0,f=0,w=0,b=1/0,S=-1/0,C=1/0,A=-1/0;s.pos<t;){if(u<=0){var F=s.readVarint();r=7&F,u=F>>3}if(u--,r===1||r===2)(f+=s.readSVarint())<b&&(b=f),f>S&&(S=f),(w+=s.readSVarint())<C&&(C=w),w>A&&(A=w);else if(r!==7)throw new Error("unknown command "+r)}return[b,C,S,A]},bl.prototype.toGeoJSON=function(s,t,r){var u,f,w=this.extent*Math.pow(2,r),b=this.extent*s,S=this.extent*t,C=this.loadGeometry(),A=bl.types[this.type];function F(Z){for(var J=0;J<Z.length;J++){var te=Z[J];Z[J]=[360*(te.x+b)/w-180,360/Math.PI*Math.atan(Math.exp((180-360*(te.y+S)/w)*Math.PI/180))-90]}}switch(this.type){case 1:var V=[];for(u=0;u<C.length;u++)V[u]=C[u][0];F(C=V);break;case 2:for(u=0;u<C.length;u++)F(C[u]);break;case 3:for(C=(function(Z){var J=Z.length;if(J<=1)return[Z];for(var te,de,ge=[],Me=0;Me<J;Me++){var we=ig(Z[Me]);we!==0&&(de===void 0&&(de=we<0),de===we<0?(te&&ge.push(te),te=[Z[Me]]):te.push(Z[Me]))}return te&&ge.push(te),ge})(C),u=0;u<C.length;u++)for(f=0;f<C[u].length;f++)F(C[u][f])}C.length===1?C=C[0]:A="Multi"+A;var W={type:"Feature",geometry:{type:A,coordinates:C},properties:this.properties};return"id"in this&&(W.id=this.id),W};var rd=dc,nd=yh;function yh(s,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields($m,this,t),this.length=this._features.length}function $m(s,t,r){s===15?t.version=r.readVarint():s===1?t.name=r.readString():s===5?t.extent=r.readVarint():s===2?t._features.push(r.pos):s===3?t._keys.push(r.readString()):s===4&&t._values.push((function(u){for(var f=null,w=u.readVarint()+u.pos;u.pos<w;){var b=u.readVarint()>>3;f=b===1?u.readString():b===2?u.readFloat():b===3?u.readDouble():b===4?u.readVarint64():b===5?u.readVarint():b===6?u.readSVarint():b===7?u.readBoolean():null}return f})(r))}yh.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var t=this._pbf.readVarint()+this._pbf.pos;return new rd(this._pbf,t,this.extent,this._keys,this._values)};var Um=nd;function Hm(s,t,r){if(s===3){var u=new Um(r,r.readVarint()+r.pos);u.length&&(t[u.name]=u)}}wl.VectorTile=function(s,t){this.layers=s.readFields(Hm,{},t)},wl.VectorTileFeature=dc,wl.VectorTileLayer=nd;const zp=wl.VectorTileFeature.types,ad=Math.pow(2,13);function zs(s,t,r,u,f,w,b,S){s.emplaceBack(t,r,2*Math.floor(u*ad)+b,f*ad*2,w*ad*2,Math.round(S))}class Zn{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.layoutVertexArray=new Lr,this.centroidVertexArray=new ms,this.indexArray=new vn,this.programConfigurations=new Ia(t.layers,t.zoom),this.segments=new vi,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,u){this.features=[],this.hasPattern=fh("fill-extrusion",this.layers,r);for(const{feature:f,id:w,index:b,sourceLayerIndex:S}of t){const C=this.layers[0]._featureFilter.needGeometry,A=vl(f,C);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),A,u))continue;const F={id:w,sourceLayerIndex:S,index:b,geometry:C?A.geometry:yl(f),properties:f.properties,type:f.type,patterns:{}};this.hasPattern?this.features.push(sd("fill-extrusion",this.layers,F,this.zoom,r)):this.addFeature(F,F.geometry,b,u,{}),r.featureIndex.insert(f,F.geometry,b,S,this.index,!0)}}addFeatures(t,r,u){for(const f of this.features){const{geometry:w}=f;this.addFeature(f,w,f.index,r,u)}}update(t,r,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,u)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Or),this.centroidVertexBuffer=t.createVertexBuffer(this.centroidVertexArray,xh.members,!0),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(t,r,u,f,w){for(const b of Ko(r,500)){const S={x:0,y:0,vertexCount:0};let C=0;for(const J of b)C+=J.length;let A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray);for(const J of b){if(J.length===0||Wm(J))continue;let te=0;for(let de=0;de<J.length;de++){const ge=J[de];if(de>=1){const Me=J[de-1];if(!jl(ge,Me)){A.vertexLength+4>vi.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const we=ge.sub(Me)._perp()._unit(),Ee=Me.dist(ge);te+Ee>32768&&(te=0),zs(this.layoutVertexArray,ge.x,ge.y,we.x,we.y,0,0,te),zs(this.layoutVertexArray,ge.x,ge.y,we.x,we.y,0,1,te),S.x+=2*ge.x,S.y+=2*ge.y,S.vertexCount+=2,te+=Ee,zs(this.layoutVertexArray,Me.x,Me.y,we.x,we.y,0,0,te),zs(this.layoutVertexArray,Me.x,Me.y,we.x,we.y,0,1,te),S.x+=2*Me.x,S.y+=2*Me.y,S.vertexCount+=2;const Ue=A.vertexLength;this.indexArray.emplaceBack(Ue,Ue+2,Ue+1),this.indexArray.emplaceBack(Ue+1,Ue+2,Ue+3),A.vertexLength+=4,A.primitiveLength+=2}}}}if(A.vertexLength+C>vi.MAX_VERTEX_ARRAY_LENGTH&&(A=this.segments.prepareSegment(C,this.layoutVertexArray,this.indexArray)),zp[t.type]!=="Polygon")continue;const F=[],V=[],W=A.vertexLength;for(const J of b)if(J.length!==0){J!==b[0]&&V.push(F.length/2);for(let te=0;te<J.length;te++){const de=J[te];zs(this.layoutVertexArray,de.x,de.y,0,0,1,1,0),S.x+=de.x,S.y+=de.y,S.vertexCount+=1,F.push(de.x),F.push(de.y)}}const Z=zm(F,V);for(let J=0;J<Z.length;J+=3)this.indexArray.emplaceBack(W+Z[J],W+Z[J+2],W+Z[J+1]);A.primitiveLength+=Z.length/3,A.vertexLength+=C;for(let J=0;J<S.vertexCount;J++){const te=Math.floor(S.x/S.vertexCount),de=Math.floor(S.y/S.vertexCount);this.centroidVertexArray.emplaceBack(te,de)}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,f)}}function jl(s,t){return s.x===t.x&&(s.x<0||s.x>bs)||s.y===t.y&&(s.y<0||s.y>bs)}function Wm(s){return s.every((t=>t.x<0))||s.every((t=>t.x>bs))||s.every((t=>t.y<0))||s.every((t=>t.y>bs))}let Dp;Ct("FillExtrusionBucket",Zn,{omit:["layers","features"]});var za={get paint(){return Dp=Dp||new v({"fill-extrusion-opacity":new Pt(Oe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new qt(Oe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pt(Oe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pt(Oe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ml(Oe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new qt(Oe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new qt(Oe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pt(Oe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class qm extends o{constructor(t){super(t,za)}createBucket(t){return new Zn(t)}queryRadius(){return Ju(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(t,r,u,f,w,b,S,C){const A=Ku(t,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),b.angle,S),F=this.paint.get("fill-extrusion-height").evaluate(r,u),V=this.paint.get("fill-extrusion-base").evaluate(r,u),W=(function(J,te,de,ge){const Me=[];for(const we of J){const Ee=[we.x,we.y,0,1];oh(Ee,Ee,te),Me.push(new D(Ee[0]/Ee[3],Ee[1]/Ee[3]))}return Me})(A,C),Z=(function(J,te,de,ge){const Me=[],we=[],Ee=ge[8]*te,Ue=ge[9]*te,Ke=ge[10]*te,St=ge[11]*te,Qt=ge[8]*de,jt=ge[9]*de,yt=ge[10]*de,Ft=ge[11]*de;for(const It of J){const Mt=[],qe=[];for(const $t of It){const Bt=$t.x,oi=$t.y,Qi=ge[0]*Bt+ge[4]*oi+ge[12],Zi=ge[1]*Bt+ge[5]*oi+ge[13],ur=ge[2]*Bt+ge[6]*oi+ge[14],oo=ge[3]*Bt+ge[7]*oi+ge[15],Ur=ur+Ke,dr=oo+St,kn=Qi+Qt,Sn=Zi+jt,Tn=ur+yt,ks=oo+Ft,hr=new D((Qi+Ee)/dr,(Zi+Ue)/dr);hr.z=Ur/dr,Mt.push(hr);const on=new D(kn/ks,Sn/ks);on.z=Tn/ks,qe.push(on)}Me.push(Mt),we.push(qe)}return[Me,we]})(f,V,F,C);return(function(J,te,de){let ge=1/0;wp(de,te)&&(ge=Gm(de,te[0]));for(let Me=0;Me<te.length;Me++){const we=te[Me],Ee=J[Me];for(let Ue=0;Ue<we.length-1;Ue++){const Ke=we[Ue],St=[Ke,we[Ue+1],Ee[Ue+1],Ee[Ue],Ke];_p(de,St)&&(ge=Math.min(ge,Gm(de,St)))}}return ge!==1/0&&ge})(Z[0],Z[1],W)}}function _n(s,t){return s.x*t.x+s.y*t.y}function Gm(s,t){if(s.length===1){let r=0;const u=t[r++];let f;for(;!f||u.equals(f);)if(f=t[r++],!f)return 1/0;for(;r<t.length;r++){const w=t[r],b=s[0],S=f.sub(u),C=w.sub(u),A=b.sub(u),F=_n(S,S),V=_n(S,C),W=_n(C,C),Z=_n(A,S),J=_n(A,C),te=F*W-V*V,de=(W*Z-V*J)/te,ge=(F*J-V*Z)/te,Me=u.z*(1-de-ge)+f.z*de+w.z*ge;if(isFinite(Me))return Me}return 1/0}{let r=1/0;for(const u of t)r=Math.min(r,u.z);return r}}const Zm=T([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Xm}=Zm,Ym=T([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Jm}=Ym,sg=wl.VectorTileFeature.types,vh=Math.cos(Math.PI/180*37.5),_h=Math.pow(2,14)/.5;class wn{constructor(t){this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((r=>r.id)),this.index=t.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((r=>{this.gradients[r.id]={}})),this.layoutVertexArray=new Vn,this.layoutVertexArray2=new io,this.indexArray=new vn,this.programConfigurations=new Ia(t.layers,t.zoom),this.segments=new vi,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((r=>r.isStateDependent())).map((r=>r.id))}populate(t,r,u){this.hasPattern=fh("line",this.layers,r);const f=this.layers[0].layout.get("line-sort-key"),w=!f.isConstant(),b=[];for(const{feature:S,id:C,index:A,sourceLayerIndex:F}of t){const V=this.layers[0]._featureFilter.needGeometry,W=vl(S,V);if(!this.layers[0]._featureFilter.filter(new bi(this.zoom),W,u))continue;const Z=w?f.evaluate(W,{},u):void 0,J={id:C,properties:S.properties,type:S.type,sourceLayerIndex:F,index:A,geometry:V?W.geometry:yl(S),patterns:{},sortKey:Z};b.push(J)}w&&b.sort(((S,C)=>S.sortKey-C.sortKey));for(const S of b){const{geometry:C,index:A,sourceLayerIndex:F}=S;if(this.hasPattern){const V=sd("line",this.layers,S,this.zoom,r);this.patternFeatures.push(V)}else this.addFeature(S,C,A,u,{});r.featureIndex.insert(t[A].feature,C,A,F,this.index)}}update(t,r,u){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(t,r,this.stateDependentLayers,u)}addFeatures(t,r,u){for(const f of this.patternFeatures)this.addFeature(f,f.geometry,f.index,r,u)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(t){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=t.createVertexBuffer(this.layoutVertexArray2,Jm)),this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,Xm),this.indexBuffer=t.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(t),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(t){if(t.properties&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(t.properties,"mapbox_clip_end"))return{start:+t.properties.mapbox_clip_start,end:+t.properties.mapbox_clip_end}}addFeature(t,r,u,f,w){const b=this.layers[0].layout,S=b.get("line-join").evaluate(t,{}),C=b.get("line-cap"),A=b.get("line-miter-limit"),F=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(t);for(const V of r)this.addLine(V,t,S,C,A,F);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t,u,w,f)}addLine(t,r,u,f,w,b){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ge=0;ge<t.length-1;ge++)this.totalDistance+=t[ge].dist(t[ge+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const S=sg[r.type]==="Polygon";let C=t.length;for(;C>=2&&t[C-1].equals(t[C-2]);)C--;let A=0;for(;A<C-1&&t[A].equals(t[A+1]);)A++;if(C<(S?3:2))return;u==="bevel"&&(w=1.05);const F=this.overscaling<=16?15*bs/(512*this.overscaling):0,V=this.segments.prepareSegment(10*C,this.layoutVertexArray,this.indexArray);let W,Z,J,te,de;this.e1=this.e2=-1,S&&(W=t[C-2],de=t[A].sub(W)._unit()._perp());for(let ge=A;ge<C;ge++){if(J=ge===C-1?S?t[A+1]:void 0:t[ge+1],J&&t[ge].equals(J))continue;de&&(te=de),W&&(Z=W),W=t[ge],de=J?J.sub(W)._unit()._perp():te,te=te||de;let Me=te.add(de);Me.x===0&&Me.y===0||Me._unit();const we=te.x*de.x+te.y*de.y,Ee=Me.x*de.x+Me.y*de.y,Ue=Ee!==0?1/Ee:1/0,Ke=2*Math.sqrt(2-2*Ee),St=Ee<vh&&Z&&J,Qt=te.x*de.y-te.y*de.x>0;if(St&&ge>A){const Ft=W.dist(Z);if(Ft>2*F){const It=W.sub(W.sub(Z)._mult(F/Ft)._round());this.updateDistance(Z,It),this.addCurrentVertex(It,te,0,0,V),Z=It}}const jt=Z&&J;let yt=jt?u:S?"butt":f;if(jt&&yt==="round"&&(Ue<b?yt="miter":Ue<=2&&(yt="fakeround")),yt==="miter"&&Ue>w&&(yt="bevel"),yt==="bevel"&&(Ue>2&&(yt="flipbevel"),Ue<w&&(yt="miter")),Z&&this.updateDistance(Z,W),yt==="miter")Me._mult(Ue),this.addCurrentVertex(W,Me,0,0,V);else if(yt==="flipbevel"){if(Ue>100)Me=de.mult(-1);else{const Ft=Ue*te.add(de).mag()/te.sub(de).mag();Me._perp()._mult(Ft*(Qt?-1:1))}this.addCurrentVertex(W,Me,0,0,V),this.addCurrentVertex(W,Me.mult(-1),0,0,V)}else if(yt==="bevel"||yt==="fakeround"){const Ft=-Math.sqrt(Ue*Ue-1),It=Qt?Ft:0,Mt=Qt?0:Ft;if(Z&&this.addCurrentVertex(W,te,It,Mt,V),yt==="fakeround"){const qe=Math.round(180*Ke/Math.PI/20);for(let $t=1;$t<qe;$t++){let Bt=$t/qe;if(Bt!==.5){const Qi=Bt-.5;Bt+=Bt*Qi*(Bt-1)*((1.0904+we*(we*(3.55645-1.43519*we)-3.2452))*Qi*Qi+(.848013+we*(.215638*we-1.06021)))}const oi=de.sub(te)._mult(Bt)._add(te)._unit()._mult(Qt?-1:1);this.addHalfVertex(W,oi.x,oi.y,!1,Qt,0,V)}}J&&this.addCurrentVertex(W,de,-It,-Mt,V)}else if(yt==="butt")this.addCurrentVertex(W,Me,0,0,V);else if(yt==="square"){const Ft=Z?1:-1;this.addCurrentVertex(W,Me,Ft,Ft,V)}else yt==="round"&&(Z&&(this.addCurrentVertex(W,te,0,0,V),this.addCurrentVertex(W,te,1,1,V,!0)),J&&(this.addCurrentVertex(W,de,-1,-1,V,!0),this.addCurrentVertex(W,de,0,0,V)));if(St&&ge<C-1){const Ft=W.dist(J);if(Ft>2*F){const It=W.add(J.sub(W)._mult(F/Ft)._round());this.updateDistance(W,It),this.addCurrentVertex(It,de,0,0,V),W=It}}}}addCurrentVertex(t,r,u,f,w,b=!1){const S=r.y*f-r.x,C=-r.y-r.x*f;this.addHalfVertex(t,r.x+r.y*u,r.y-r.x*u,b,!1,u,w),this.addHalfVertex(t,S,C,b,!0,-f,w),this.distance>_h/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(t,r,u,f,w,b))}addHalfVertex({x:t,y:r},u,f,w,b,S,C){const A=.5*(this.lineClips?this.scaledDistance*(_h-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((t<<1)+(w?1:0),(r<<1)+(b?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(S===0?0:S<0?-1:1)|(63&A)<<2,A>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const F=C.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,F),C.primitiveLength++),b?this.e2=F:this.e1=F}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(t,r){this.distance+=t.dist(r),this.updateScaledDistance()}}let Mi,sr;Ct("LineBucket",wn,{omit:["layers","patternFeatures"]});var Ds={get paint(){return sr=sr||new v({"line-opacity":new qt(Oe.paint_line["line-opacity"]),"line-color":new qt(Oe.paint_line["line-color"]),"line-translate":new Pt(Oe.paint_line["line-translate"]),"line-translate-anchor":new Pt(Oe.paint_line["line-translate-anchor"]),"line-width":new qt(Oe.paint_line["line-width"]),"line-gap-width":new qt(Oe.paint_line["line-gap-width"]),"line-offset":new qt(Oe.paint_line["line-offset"]),"line-blur":new qt(Oe.paint_line["line-blur"]),"line-dasharray":new ac(Oe.paint_line["line-dasharray"]),"line-pattern":new ml(Oe.paint_line["line-pattern"]),"line-gradient":new Uu(Oe.paint_line["line-gradient"])})},get layout(){return Mi=Mi||new v({"line-cap":new Pt(Oe.layout_line["line-cap"]),"line-join":new qt(Oe.layout_line["line-join"]),"line-miter-limit":new Pt(Oe.layout_line["line-miter-limit"]),"line-round-limit":new Pt(Oe.layout_line["line-round-limit"]),"line-sort-key":new qt(Oe.layout_line["line-sort-key"])})}};class Sr extends qt{possiblyEvaluate(t,r){return r=new bi(Math.floor(r.zoom),{now:r.now,fadeDuration:r.fadeDuration,zoomHistory:r.zoomHistory,transition:r.transition}),super.possiblyEvaluate(t,r)}evaluate(t,r,u,f){return r=ut({},r,{zoom:Math.floor(r.zoom)}),super.evaluate(t,r,u,f)}}let Vr;class au extends o{constructor(t){super(t,Ds),this.gradientVersion=0,Vr||(Vr=new Sr(Ds.paint.properties["line-width"].specification),Vr.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(t){if(t==="line-gradient"){const r=this.gradientExpression();this.stepInterpolant=!!(function(u){return u._styleExpression!==void 0})(r)&&r._styleExpression.expression instanceof jo,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(t,r){super.recalculate(t,r),this.paint._values["line-floorwidth"]=Vr.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)}createBucket(t){return new wn(t)}queryRadius(t){const r=t,u=qs(lc("line-width",this,r),lc("line-gap-width",this,r)),f=lc("line-offset",this,r);return u/2+Math.abs(f)+Ju(this.paint.get("line-translate"))}queryIntersectsFeature(t,r,u,f,w,b,S){const C=Ku(t,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),b.angle,S),A=S/2*qs(this.paint.get("line-width").evaluate(r,u),this.paint.get("line-gap-width").evaluate(r,u)),F=this.paint.get("line-offset").evaluate(r,u);return F&&(f=(function(V,W){const Z=[];for(let J=0;J<V.length;J++){const te=V[J],de=[];for(let ge=0;ge<te.length;ge++){const Me=te[ge-1],we=te[ge],Ee=te[ge+1],Ue=ge===0?new D(0,0):we.sub(Me)._unit()._perp(),Ke=ge===te.length-1?new D(0,0):Ee.sub(we)._unit()._perp(),St=Ue._add(Ke)._unit(),Qt=St.x*Ke.x+St.y*Ke.y;Qt!==0&&St._mult(1/Qt),de.push(St._mult(W)._add(we))}Z.push(de)}return Z})(f,F*S)),(function(V,W,Z){for(let J=0;J<W.length;J++){const te=W[J];if(V.length>=3){for(let de=0;de<te.length;de++)if(oc(V,te[de]))return!0}if(rh(V,te,Z))return!0}return!1})(C,f,A)}isTileClipped(){return!0}}function qs(s,t){return t>0?t+2*s:s}const od=T([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),hc=T([{name:"a_projected_pos",components:3,type:"Float32"}],4);T([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wh=T([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);T([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bh=T([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),ld=T([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function bn(s,t,r){return s.sections.forEach((u=>{u.text=(function(f,w,b){const S=w.layout.get("text-transform").evaluate(b,{});return S==="uppercase"?f=f.toLocaleUpperCase():S==="lowercase"&&(f=f.toLocaleLowerCase()),Vi.applyArabicShaping&&(f=Vi.applyArabicShaping(f)),f})(u.text,t,r)})),s}T([{name:"triangle",components:3,type:"Uint16"}]),T([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),T([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),T([{type:"Float32",name:"offsetX"}]),T([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),T([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const pc={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"};var as=24,no=Ni,cd=function(s,t,r,u,f){var w,b,S=8*f-u-1,C=(1<<S)-1,A=C>>1,F=-7,V=f-1,W=-1,Z=s[t+V];for(V+=W,w=Z&(1<<-F)-1,Z>>=-F,F+=S;F>0;w=256*w+s[t+V],V+=W,F-=8);for(b=w&(1<<-F)-1,w>>=-F,F+=u;F>0;b=256*b+s[t+V],V+=W,F-=8);if(w===0)w=1-A;else{if(w===C)return b?NaN:1/0*(Z?-1:1);b+=Math.pow(2,u),w-=A}return(Z?-1:1)*b*Math.pow(2,w-u)},jh=function(s,t,r,u,f,w){var b,S,C,A=8*w-f-1,F=(1<<A)-1,V=F>>1,W=f===23?Math.pow(2,-24)-Math.pow(2,-77):0,Z=0,J=1,te=t<0||t===0&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(S=isNaN(t)?1:0,b=F):(b=Math.floor(Math.log(t)/Math.LN2),t*(C=Math.pow(2,-b))<1&&(b--,C*=2),(t+=b+V>=1?W/C:W*Math.pow(2,1-V))*C>=2&&(b++,C/=2),b+V>=F?(S=0,b=F):b+V>=1?(S=(t*C-1)*Math.pow(2,f),b+=V):(S=t*Math.pow(2,V-1)*Math.pow(2,f),b=0));f>=8;s[r+Z]=255&S,Z+=J,S/=256,f-=8);for(b=b<<f|S,A+=f;A>0;s[r+Z]=255&b,Z+=J,b/=256,A-=8);s[r+Z-J]|=128*te};function Ni(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Ni.Varint=0,Ni.Fixed64=1,Ni.Bytes=2,Ni.Fixed32=5;var ou=4294967296,Lo=1/ou,ud=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function Xn(s){return s.type===Ni.Bytes?s.readVarint()+s.pos:s.pos+1}function Nl(s,t,r){return r?4294967296*t+(s>>>0):4294967296*(t>>>0)+(s>>>0)}function dd(s,t,r){var u=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.floor(Math.log(t)/(7*Math.LN2));r.realloc(u);for(var f=r.pos-1;f>=s;f--)r.buf[f+u]=r.buf[f]}function Nh(s,t){for(var r=0;r<s.length;r++)t.writeVarint(s[r])}function nn(s,t){for(var r=0;r<s.length;r++)t.writeSVarint(s[r])}function kl(s,t){for(var r=0;r<s.length;r++)t.writeFloat(s[r])}function Da(s,t){for(var r=0;r<s.length;r++)t.writeDouble(s[r])}function jn(s,t){for(var r=0;r<s.length;r++)t.writeBoolean(s[r])}function Km(s,t){for(var r=0;r<s.length;r++)t.writeFixed32(s[r])}function Rp(s,t){for(var r=0;r<s.length;r++)t.writeSFixed32(s[r])}function Lp(s,t){for(var r=0;r<s.length;r++)t.writeFixed64(s[r])}function rg(s,t){for(var r=0;r<s.length;r++)t.writeSFixed64(s[r])}function Ra(s,t){return(s[t]|s[t+1]<<8|s[t+2]<<16)+16777216*s[t+3]}function mc(s,t,r){s[r]=t,s[r+1]=t>>>8,s[r+2]=t>>>16,s[r+3]=t>>>24}function kh(s,t){return(s[t]|s[t+1]<<8|s[t+2]<<16)+(s[t+3]<<24)}Ni.prototype={destroy:function(){this.buf=null},readFields:function(s,t,r){for(r=r||this.length;this.pos<r;){var u=this.readVarint(),f=u>>3,w=this.pos;this.type=7&u,s(f,t,this),this.pos===w&&this.skip(u)}return t},readMessage:function(s,t){return this.readFields(s,t,this.readVarint()+this.pos)},readFixed32:function(){var s=Ra(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=kh(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=Ra(this.buf,this.pos)+Ra(this.buf,this.pos+4)*ou;return this.pos+=8,s},readSFixed64:function(){var s=Ra(this.buf,this.pos)+kh(this.buf,this.pos+4)*ou;return this.pos+=8,s},readFloat:function(){var s=cd(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=cd(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var t,r,u=this.buf;return t=127&(r=u[this.pos++]),r<128?t:(t|=(127&(r=u[this.pos++]))<<7,r<128?t:(t|=(127&(r=u[this.pos++]))<<14,r<128?t:(t|=(127&(r=u[this.pos++]))<<21,r<128?t:(function(f,w,b){var S,C,A=b.buf;if(S=(112&(C=A[b.pos++]))>>4,C<128||(S|=(127&(C=A[b.pos++]))<<3,C<128)||(S|=(127&(C=A[b.pos++]))<<10,C<128)||(S|=(127&(C=A[b.pos++]))<<17,C<128)||(S|=(127&(C=A[b.pos++]))<<24,C<128)||(S|=(1&(C=A[b.pos++]))<<31,C<128))return Nl(f,S,w);throw new Error("Expected varint not more than 10 bytes")})(t|=(15&(r=u[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,t=this.pos;return this.pos=s,s-t>=12&&ud?(function(r,u,f){return ud.decode(r.subarray(u,f))})(this.buf,t,s):(function(r,u,f){for(var w="",b=u;b<f;){var S,C,A,F=r[b],V=null,W=F>239?4:F>223?3:F>191?2:1;if(b+W>f)break;W===1?F<128&&(V=F):W===2?(192&(S=r[b+1]))==128&&(V=(31&F)<<6|63&S)<=127&&(V=null):W===3?(C=r[b+2],(192&(S=r[b+1]))==128&&(192&C)==128&&((V=(15&F)<<12|(63&S)<<6|63&C)<=2047||V>=55296&&V<=57343)&&(V=null)):W===4&&(C=r[b+2],A=r[b+3],(192&(S=r[b+1]))==128&&(192&C)==128&&(192&A)==128&&((V=(15&F)<<18|(63&S)<<12|(63&C)<<6|63&A)<=65535||V>=1114112)&&(V=null)),V===null?(V=65533,W=1):V>65535&&(V-=65536,w+=String.fromCharCode(V>>>10&1023|55296),V=56320|1023&V),w+=String.fromCharCode(V),b+=W}return w})(this.buf,t,s)},readBytes:function(){var s=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,s);return this.pos=s,t},readPackedVarint:function(s,t){if(this.type!==Ni.Bytes)return s.push(this.readVarint(t));var r=Xn(this);for(s=s||[];this.pos<r;)s.push(this.readVarint(t));return s},readPackedSVarint:function(s){if(this.type!==Ni.Bytes)return s.push(this.readSVarint());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Ni.Bytes)return s.push(this.readBoolean());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Ni.Bytes)return s.push(this.readFloat());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Ni.Bytes)return s.push(this.readDouble());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Ni.Bytes)return s.push(this.readFixed32());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Ni.Bytes)return s.push(this.readSFixed32());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Ni.Bytes)return s.push(this.readFixed64());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Ni.Bytes)return s.push(this.readSFixed64());var t=Xn(this);for(s=s||[];this.pos<t;)s.push(this.readSFixed64());return s},skip:function(s){var t=7&s;if(t===Ni.Varint)for(;this.buf[this.pos++]>127;);else if(t===Ni.Bytes)this.pos=this.readVarint()+this.pos;else if(t===Ni.Fixed32)this.pos+=4;else{if(t!==Ni.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(s,t){this.writeVarint(s<<3|t)},realloc:function(s){for(var t=this.length||16;t<this.pos+s;)t*=2;if(t!==this.length){var r=new Uint8Array(t);r.set(this.buf),this.buf=r,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),mc(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),mc(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),mc(this.buf,-1&s,this.pos),mc(this.buf,Math.floor(s*Lo),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),mc(this.buf,-1&s,this.pos),mc(this.buf,Math.floor(s*Lo),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?(function(t,r){var u,f;if(t>=0?(u=t%4294967296|0,f=t/4294967296|0):(f=~(-t/4294967296),4294967295^(u=~(-t%4294967296))?u=u+1|0:(u=0,f=f+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");r.realloc(10),(function(w,b,S){S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,w>>>=7,S.buf[S.pos++]=127&w|128,S.buf[S.pos]=127&(w>>>=7)})(u,0,r),(function(w,b){var S=(7&w)<<4;b.buf[b.pos++]|=S|((w>>>=3)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w|((w>>>=7)?128:0),w&&(b.buf[b.pos++]=127&w)))))})(f,r)})(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var t=this.pos;this.pos=(function(u,f,w){for(var b,S,C=0;C<f.length;C++){if((b=f.charCodeAt(C))>55295&&b<57344){if(!S){b>56319||C+1===f.length?(u[w++]=239,u[w++]=191,u[w++]=189):S=b;continue}if(b<56320){u[w++]=239,u[w++]=191,u[w++]=189,S=b;continue}b=S-55296<<10|b-56320|65536,S=null}else S&&(u[w++]=239,u[w++]=191,u[w++]=189,S=null);b<128?u[w++]=b:(b<2048?u[w++]=b>>6|192:(b<65536?u[w++]=b>>12|224:(u[w++]=b>>18|240,u[w++]=b>>12&63|128),u[w++]=b>>6&63|128),u[w++]=63&b|128)}return w})(this.buf,s,this.pos);var r=this.pos-t;r>=128&&dd(t,r,this),this.pos=t-1,this.writeVarint(r),this.pos+=r},writeFloat:function(s){this.realloc(4),jh(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),jh(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var t=s.length;this.writeVarint(t),this.realloc(t);for(var r=0;r<t;r++)this.buf[this.pos++]=s[r]},writeRawMessage:function(s,t){this.pos++;var r=this.pos;s(t,this);var u=this.pos-r;u>=128&&dd(r,u,this),this.pos=r-1,this.writeVarint(u),this.pos+=u},writeMessage:function(s,t,r){this.writeTag(s,Ni.Bytes),this.writeRawMessage(t,r)},writePackedVarint:function(s,t){t.length&&this.writeMessage(s,Nh,t)},writePackedSVarint:function(s,t){t.length&&this.writeMessage(s,nn,t)},writePackedBoolean:function(s,t){t.length&&this.writeMessage(s,jn,t)},writePackedFloat:function(s,t){t.length&&this.writeMessage(s,kl,t)},writePackedDouble:function(s,t){t.length&&this.writeMessage(s,Da,t)},writePackedFixed32:function(s,t){t.length&&this.writeMessage(s,Km,t)},writePackedSFixed32:function(s,t){t.length&&this.writeMessage(s,Rp,t)},writePackedFixed64:function(s,t){t.length&&this.writeMessage(s,Lp,t)},writePackedSFixed64:function(s,t){t.length&&this.writeMessage(s,rg,t)},writeBytesField:function(s,t){this.writeTag(s,Ni.Bytes),this.writeBytes(t)},writeFixed32Field:function(s,t){this.writeTag(s,Ni.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(s,t){this.writeTag(s,Ni.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(s,t){this.writeTag(s,Ni.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(s,t){this.writeTag(s,Ni.Fixed64),this.writeSFixed64(t)},writeVarintField:function(s,t){this.writeTag(s,Ni.Varint),this.writeVarint(t)},writeSVarintField:function(s,t){this.writeTag(s,Ni.Varint),this.writeSVarint(t)},writeStringField:function(s,t){this.writeTag(s,Ni.Bytes),this.writeString(t)},writeFloatField:function(s,t){this.writeTag(s,Ni.Fixed32),this.writeFloat(t)},writeDoubleField:function(s,t){this.writeTag(s,Ni.Fixed64),this.writeDouble(t)},writeBooleanField:function(s,t){this.writeVarintField(s,!!t)}};var Bo=I(no);const hd=3;function fc(s,t,r){s===1&&r.readMessage(Qm,t)}function Qm(s,t,r){if(s===3){const{id:u,bitmap:f,width:w,height:b,left:S,top:C,advance:A}=r.readMessage(ef,{});t.push({id:u,bitmap:new cc({width:w+2*hd,height:b+2*hd},f),metrics:{width:w,height:b,left:S,top:C,advance:A}})}}function ef(s,t,r){s===1?t.id=r.readVarint():s===2?t.bitmap=r.readBytes():s===3?t.width=r.readVarint():s===4?t.height=r.readVarint():s===5?t.left=r.readSVarint():s===6?t.top=r.readSVarint():s===7&&(t.advance=r.readVarint())}const Sh=hd;function pd(s){let t=0,r=0;for(const b of s)t+=b.w*b.h,r=Math.max(r,b.w);s.sort(((b,S)=>S.h-b.h));const u=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(t/.95)),r),h:1/0}];let f=0,w=0;for(const b of s)for(let S=u.length-1;S>=0;S--){const C=u[S];if(!(b.w>C.w||b.h>C.h)){if(b.x=C.x,b.y=C.y,w=Math.max(w,b.y+b.h),f=Math.max(f,b.x+b.w),b.w===C.w&&b.h===C.h){const A=u.pop();S<u.length&&(u[S]=A)}else b.h===C.h?(C.x+=b.w,C.w-=b.w):b.w===C.w?(C.y+=b.h,C.h-=b.h):(u.push({x:C.x+b.w,y:C.y,w:C.w-b.w,h:b.h}),C.y+=b.h,C.h-=b.h);break}}return{w:f,h:w,fill:t/(f*w)||0}}const an=1;class Bp{constructor(t,{pixelRatio:r,version:u,stretchX:f,stretchY:w,content:b,textFitWidth:S,textFitHeight:C}){this.paddedRect=t,this.pixelRatio=r,this.stretchX=f,this.stretchY=w,this.content=b,this.version=u,this.textFitWidth=S,this.textFitHeight=C}get tl(){return[this.paddedRect.x+an,this.paddedRect.y+an]}get br(){return[this.paddedRect.x+this.paddedRect.w-an,this.paddedRect.y+this.paddedRect.h-an]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*an)/this.pixelRatio,(this.paddedRect.h-2*an)/this.pixelRatio]}}class Fp{constructor(t,r){const u={},f={};this.haveRenderCallbacks=[];const w=[];this.addImages(t,u,w),this.addImages(r,f,w);const{w:b,h:S}=pd(w),C=new cr({width:b||1,height:S||1});for(const A in t){const F=t[A],V=u[A].paddedRect;cr.copy(F.data,C,{x:0,y:0},{x:V.x+an,y:V.y+an},F.data)}for(const A in r){const F=r[A],V=f[A].paddedRect,W=V.x+an,Z=V.y+an,J=F.data.width,te=F.data.height;cr.copy(F.data,C,{x:0,y:0},{x:W,y:Z},F.data),cr.copy(F.data,C,{x:0,y:te-1},{x:W,y:Z-1},{width:J,height:1}),cr.copy(F.data,C,{x:0,y:0},{x:W,y:Z+te},{width:J,height:1}),cr.copy(F.data,C,{x:J-1,y:0},{x:W-1,y:Z},{width:1,height:te}),cr.copy(F.data,C,{x:0,y:0},{x:W+J,y:Z},{width:1,height:te})}this.image=C,this.iconPositions=u,this.patternPositions=f}addImages(t,r,u){for(const f in t){const w=t[f],b={x:0,y:0,w:w.data.width+2*an,h:w.data.height+2*an};u.push(b),r[f]=new Bp(b,w),w.hasRenderCallback&&this.haveRenderCallbacks.push(f)}}patchUpdatedImages(t,r){t.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const u in t.updatedImages)this.patchUpdatedImage(this.iconPositions[u],t.getImage(u),r),this.patchUpdatedImage(this.patternPositions[u],t.getImage(u),r)}patchUpdatedImage(t,r,u){if(!t||!r||t.version===r.version)return;t.version=r.version;const[f,w]=t.tl;u.update(r.data,void 0,{x:f,y:w})}}var Fo;Ct("ImagePosition",Bp),Ct("ImageAtlas",Fp),_.ah=void 0,(Fo=_.ah||(_.ah={}))[Fo.none=0]="none",Fo[Fo.horizontal=1]="horizontal",Fo[Fo.vertical=2]="vertical",Fo[Fo.horizontalOnly=3]="horizontalOnly";const La=-17;class md{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(t,r){const u=new md;return u.scale=t||1,u.fontStack=r,u}static forImage(t){const r=new md;return r.imageName=t,r}}class Ba{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(t,r){const u=new Ba;for(let f=0;f<t.sections.length;f++){const w=t.sections[f];w.image?u.addImageSection(w):u.addTextSection(w,r)}return u}length(){return this.text.length}getSection(t){return this.sections[this.sectionIndex[t]]}getSectionIndex(t){return this.sectionIndex[t]}getCharCode(t){return this.text.charCodeAt(t)}verticalizePunctuation(){this.text=(function(t){let r="";for(let u=0;u<t.length;u++){const f=t.charCodeAt(u+1)||null,w=t.charCodeAt(u-1)||null;r+=f&&Ro(f)&&!pc[t[u+1]]||w&&Ro(w)&&!pc[t[u-1]]||!pc[t[u]]?t[u]:pc[t[u]]}return r})(this.text)}trim(){let t=0;for(let u=0;u<this.text.length&&us[this.text.charCodeAt(u)];u++)t++;let r=this.text.length;for(let u=this.text.length-1;u>=0&&u>=t&&us[this.text.charCodeAt(u)];u--)r--;this.text=this.text.substring(t,r),this.sectionIndex=this.sectionIndex.slice(t,r)}substring(t,r){const u=new Ba;return u.text=this.text.substring(t,r),u.sectionIndex=this.sectionIndex.slice(t,r),u.sections=this.sections,u}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((t,r)=>Math.max(t,this.sections[r].scale)),0)}addTextSection(t,r){this.text+=t.text,this.sections.push(md.forText(t.scale,t.fontStack||r));const u=this.sections.length-1;for(let f=0;f<t.text.length;++f)this.sectionIndex.push(u)}addImageSection(t){const r=t.image?t.image.name:"";if(r.length===0)return void Ve("Can't add FormattedSection with an empty image.");const u=this.getNextImageSectionCharCode();u?(this.text+=String.fromCharCode(u),this.sections.push(md.forImage(r)),this.sectionIndex.push(this.sections.length-1)):Ve("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function fd(s,t,r,u,f,w,b,S,C,A,F,V,W,Z,J){const te=Ba.fromFeature(s,f);let de;V===_.ah.vertical&&te.verticalizePunctuation();const{processBidirectionalText:ge,processStyledBidirectionalText:Me}=Vi;if(ge&&te.sections.length===1){de=[];const Ue=ge(te.toString(),Nn(te,A,w,t,u,Z));for(const Ke of Ue){const St=new Ba;St.text=Ke,St.sections=te.sections;for(let Qt=0;Qt<Ke.length;Qt++)St.sectionIndex.push(0);de.push(St)}}else if(Me){de=[];const Ue=Me(te.text,te.sectionIndex,Nn(te,A,w,t,u,Z));for(const Ke of Ue){const St=new Ba;St.text=Ke[0],St.sectionIndex=Ke[1],St.sections=te.sections,de.push(St)}}else de=(function(Ue,Ke){const St=[],Qt=Ue.text;let jt=0;for(const yt of Ke)St.push(Ue.substring(jt,yt)),jt=yt;return jt<Qt.length&&St.push(Ue.substring(jt,Qt.length)),St})(te,Nn(te,A,w,t,u,Z));const we=[],Ee={positionedLines:we,text:te.toString(),top:F[1],bottom:F[1],left:F[0],right:F[0],writingMode:V,iconsInText:!1,verticalizable:!1};return(function(Ue,Ke,St,Qt,jt,yt,Ft,It,Mt,qe,$t,Bt){let oi=0,Qi=La,Zi=0,ur=0;const oo=It==="right"?1:It==="left"?0:.5;let Ur=0;for(const ks of jt){ks.trim();const hr=ks.getMaxScale(),on=(hr-1)*as,Hr={positionedGlyphs:[],lineOffset:0};Ue.positionedLines[Ur]=Hr;const Cn=Hr.positionedGlyphs;let Wr=0;if(!ks.length()){Qi+=yt,++Ur;continue}for(let Yn=0;Yn<ks.length();Yn++){const Ai=ks.getSection(Yn),ts=ks.getSectionIndex(Yn),os=ks.getCharCode(Yn);let ca=0,js=null,Dh=null,Pl=null,El=as;const lo=!(Mt===_.ah.horizontal||!$t&&!rc(os)||$t&&(us[os]||(dr=os,/\p{sc=Arab}/u.test(String.fromCodePoint(dr)))));if(Ai.imageName){const Oa=Qt[Ai.imageName];if(!Oa)continue;Pl=Ai.imageName,Ue.iconsInText=Ue.iconsInText||!0,Dh=Oa.paddedRect;const Tr=Oa.displaySize;Ai.scale=Ai.scale*as/Bt,js={width:Tr[0],height:Tr[1],left:an,top:-Sh,advance:lo?Tr[1]:Tr[0]},ca=on+(as-Tr[1]*Ai.scale),El=js.advance;const xc=lo?Tr[0]*Ai.scale-as*hr:Tr[1]*Ai.scale-as*hr;xc>0&&xc>Wr&&(Wr=xc)}else{const Oa=St[Ai.fontStack],Tr=Oa&&Oa[os];if(Tr&&Tr.rect)Dh=Tr.rect,js=Tr.metrics;else{const xc=Ke[Ai.fontStack],Wp=xc&&xc[os];if(!Wp)continue;js=Wp.metrics}ca=(hr-Ai.scale)*as}lo?(Ue.verticalizable=!0,Cn.push({glyph:os,imageName:Pl,x:oi,y:Qi+ca,vertical:lo,scale:Ai.scale,fontStack:Ai.fontStack,sectionIndex:ts,metrics:js,rect:Dh}),oi+=El*Ai.scale+qe):(Cn.push({glyph:os,imageName:Pl,x:oi,y:Qi+ca,vertical:lo,scale:Ai.scale,fontStack:Ai.fontStack,sectionIndex:ts,metrics:js,rect:Dh}),oi+=js.advance*Ai.scale+qe)}Cn.length!==0&&(Zi=Math.max(oi-qe,Zi),ag(Cn,0,Cn.length-1,oo,Wr)),oi=0;const Fa=yt*hr+Wr;Hr.lineOffset=Math.max(Wr,on),Qi+=Fa,ur=Math.max(Fa,ur),++Ur}var dr;const kn=Qi-La,{horizontalAlign:Sn,verticalAlign:Tn}=gd(Ft);(function(ks,hr,on,Hr,Cn,Wr,Fa,Yn,Ai){const ts=(hr-on)*Cn;let os=0;os=Wr!==Fa?-Yn*Hr-La:(-Hr*Ai+.5)*Fa;for(const ca of ks)for(const js of ca.positionedGlyphs)js.x+=ts,js.y+=os})(Ue.positionedLines,oo,Sn,Tn,Zi,ur,yt,kn,jt.length),Ue.top+=-Tn*kn,Ue.bottom=Ue.top+kn,Ue.left+=-Sn*Zi,Ue.right=Ue.left+Zi})(Ee,t,r,u,de,b,S,C,V,A,W,J),!(function(Ue){for(const Ke of Ue)if(Ke.positionedGlyphs.length!==0)return!1;return!0})(we)&&Ee}const us={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ng={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},tf={40:!0};function sf(s,t,r,u,f,w){if(t.imageName){const b=u[t.imageName];return b?b.displaySize[0]*t.scale*as/w+f:0}{const b=r[t.fontStack],S=b&&b[s];return S?S.metrics.advance*t.scale+f:0}}function rf(s,t,r,u){const f=Math.pow(s-t,2);return u?s<t?f/2:2*f:f+Math.abs(r)*r}function nf(s,t,r){let u=0;return s===10&&(u-=1e4),r&&(u+=150),s!==40&&s!==65288||(u+=50),t!==41&&t!==65289||(u+=50),u}function Op(s,t,r,u,f,w){let b=null,S=rf(t,r,f,w);for(const C of u){const A=rf(t-C.x,r,f,w)+C.badness;A<=S&&(b=C,S=A)}return{index:s,x:t,priorBreak:b,badness:S}}function af(s){return s?af(s.priorBreak).concat(s.index):[]}function Nn(s,t,r,u,f,w){if(!s)return[];const b=[],S=(function(V,W,Z,J,te,de){let ge=0;for(let Me=0;Me<V.length();Me++){const we=V.getSection(Me);ge+=sf(V.getCharCode(Me),we,J,te,W,de)}return ge/Math.max(1,Math.ceil(ge/Z))})(s,t,r,u,f,w),C=s.text.indexOf("​")>=0;let A=0;for(let V=0;V<s.length();V++){const W=s.getSection(V),Z=s.getCharCode(V);if(us[Z]||(A+=sf(Z,W,u,f,t,w)),V<s.length()-1){const J=!((F=Z)<11904)&&(!!wi["CJK Compatibility Forms"](F)||!!wi["CJK Compatibility"](F)||!!wi["CJK Strokes"](F)||!!wi["CJK Symbols and Punctuation"](F)||!!wi["Enclosed CJK Letters and Months"](F)||!!wi["Halfwidth and Fullwidth Forms"](F)||!!wi["Ideographic Description Characters"](F)||!!wi["Vertical Forms"](F)||sc.test(String.fromCodePoint(F)));(ng[Z]||J||W.imageName||V!==s.length()-2&&tf[s.getCharCode(V+1)])&&b.push(Op(V+1,A,S,b,nf(Z,s.getCharCode(V+1),J&&C),!1))}}var F;return af(Op(s.length(),A,S,b,0,!0))}function gd(s){let t=.5,r=.5;switch(s){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":r=1;break;case"top":case"top-right":case"top-left":r=0}return{horizontalAlign:t,verticalAlign:r}}function ag(s,t,r,u,f){if(!u&&!f)return;const w=s[r],b=(s[r].x+w.metrics.advance*w.scale)*u;for(let S=t;S<=r;S++)s[S].x-=b,s[S].y+=f}function Sl(s,t,r){const{horizontalAlign:u,verticalAlign:f}=gd(r),w=t[0]-s.displaySize[0]*u,b=t[1]-s.displaySize[1]*f;return{image:s,top:b,bottom:b+s.displaySize[1],left:w,right:w+s.displaySize[0]}}function xd(s){var t,r;let u=s.left,f=s.top,w=s.right-u,b=s.bottom-f;const S=(t=s.image.textFitWidth)!==null&&t!==void 0?t:"stretchOrShrink",C=(r=s.image.textFitHeight)!==null&&r!==void 0?r:"stretchOrShrink",A=(s.image.content[2]-s.image.content[0])/(s.image.content[3]-s.image.content[1]);if(C==="proportional"){if(S==="stretchOnly"&&w/b<A||S==="proportional"){const F=Math.ceil(b*A);u*=F/w,w=F}}else if(S==="proportional"&&C==="stretchOnly"&&A!==0&&w/b>A){const F=Math.ceil(w/A);f*=F/b,b=F}return{x1:u,y1:f,x2:u+w,y2:f+b}}function Tl(s,t,r,u,f,w){const b=s.image;let S;if(b.content){const de=b.content,ge=b.pixelRatio||1;S=[de[0]/ge,de[1]/ge,b.displaySize[0]-de[2]/ge,b.displaySize[1]-de[3]/ge]}const C=t.left*w,A=t.right*w;let F,V,W,Z;r==="width"||r==="both"?(Z=f[0]+C-u[3],V=f[0]+A+u[1]):(Z=f[0]+(C+A-b.displaySize[0])/2,V=Z+b.displaySize[0]);const J=t.top*w,te=t.bottom*w;return r==="height"||r==="both"?(F=f[1]+J-u[0],W=f[1]+te+u[2]):(F=f[1]+(J+te-b.displaySize[1])/2,W=F+b.displaySize[1]),{image:b,top:F,right:V,bottom:W,left:Z,collisionPadding:S}}const Cl=255,la=128,ao=Cl*la;function of(s,t){const{expression:r}=t;if(r.kind==="constant")return{kind:"constant",layoutSize:r.evaluate(new bi(s+1))};if(r.kind==="source")return{kind:"source"};{const{zoomStops:u,interpolationType:f}=r;let w=0;for(;w<u.length&&u[w]<=s;)w++;w=Math.max(0,w-1);let b=w;for(;b<u.length&&u[b]<s+1;)b++;b=Math.min(u.length-1,b);const S=u[w],C=u[b];return r.kind==="composite"?{kind:"composite",minZoom:S,maxZoom:C,interpolationType:f}:{kind:"camera",minZoom:S,maxZoom:C,minSize:r.evaluate(new bi(S)),maxSize:r.evaluate(new bi(C)),interpolationType:f}}}function yd(s,t,r){let u="never";const f=s.get(t);return f?u=f:s.get(r)&&(u="always"),u}const og=wl.VectorTileFeature.types,lf=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vd(s,t,r,u,f,w,b,S,C,A,F,V,W){const Z=S?Math.min(ao,Math.round(S[0])):0,J=S?Math.min(ao,Math.round(S[1])):0;s.emplaceBack(t,r,Math.round(32*u),Math.round(32*f),w,b,(Z<<1)+(C?1:0),J,16*A,16*F,256*V,256*W)}function lu(s,t,r){s.emplaceBack(t.x,t.y,r),s.emplaceBack(t.x,t.y,r),s.emplaceBack(t.x,t.y,r),s.emplaceBack(t.x,t.y,r)}function Th(s){for(const t of s.sections)if(to(t.text))return!0;return!1}class Ch{constructor(t){this.layoutVertexArray=new yn,this.indexArray=new vn,this.programConfigurations=t,this.segments=new vi,this.dynamicLayoutVertexArray=new na,this.opacityVertexArray=new Nr,this.hasVisibleVertices=!1,this.placedSymbolArray=new Oi}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(t,r,u,f){this.isEmpty()||(u&&(this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,od.members),this.indexBuffer=t.createIndexBuffer(this.indexArray,r),this.dynamicLayoutVertexBuffer=t.createVertexBuffer(this.dynamicLayoutVertexArray,hc.members,!0),this.opacityVertexBuffer=t.createVertexBuffer(this.opacityVertexArray,lf,!0),this.opacityVertexBuffer.itemSize=1),(u||f)&&this.programConfigurations.upload(t))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}Ct("SymbolBuffers",Ch);class _d{constructor(t,r,u){this.layoutVertexArray=new t,this.layoutAttributes=r,this.indexArray=new u,this.segments=new vi,this.collisionVertexArray=new $n}upload(t){this.layoutVertexBuffer=t.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=t.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=t.createVertexBuffer(this.collisionVertexArray,wh.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}Ct("CollisionBuffers",_d);class cu{constructor(t){this.collisionBoxArray=t.collisionBoxArray,this.zoom=t.zoom,this.overscaling=t.overscaling,this.layers=t.layers,this.layerIds=this.layers.map((b=>b.id)),this.index=t.index,this.pixelRatio=t.pixelRatio,this.sourceLayerIndex=t.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=nh([]),this.placementViewportMatrix=nh([]);const r=this.layers[0]._unevaluatedLayout._values;this.textSizeData=of(this.zoom,r["text-size"]),this.iconSizeData=of(this.zoom,r["icon-size"]);const u=this.layers[0].layout,f=u.get("symbol-sort-key"),w=u.get("symbol-z-order");this.canOverlap=yd(u,"text-overlap","text-allow-overlap")!=="never"||yd(u,"icon-overlap","icon-allow-overlap")!=="never"||u.get("text-ignore-placement")||u.get("icon-ignore-placement"),this.sortFeaturesByKey=w!=="viewport-y"&&!f.isConstant(),this.sortFeaturesByY=(w==="viewport-y"||w==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,u.get("symbol-placement")==="point"&&(this.writingModes=u.get("text-writing-mode").map((b=>_.ah[b]))),this.stateDependentLayerIds=this.layers.filter((b=>b.isStateDependent())).map((b=>b.id)),this.sourceID=t.sourceID}createArrays(){this.text=new Ch(new Ia(this.layers,this.zoom,(t=>/^text/.test(t)))),this.icon=new Ch(new Ia(this.layers,this.zoom,(t=>/^icon/.test(t)))),this.glyphOffsetArray=new $i,this.lineVertexArray=new Hs,this.symbolInstances=new fi,this.textAnchorOffsets=new Ui}calculateGlyphDependencies(t,r,u,f,w){for(let b=0;b<t.length;b++)if(r[t.charCodeAt(b)]=!0,(u||f)&&w){const S=pc[t.charAt(b)];S&&(r[S.charCodeAt(0)]=!0)}}populate(t,r,u){const f=this.layers[0],w=f.layout,b=w.get("text-font"),S=w.get("text-field"),C=w.get("icon-image"),A=(S.value.kind!=="constant"||S.value.value instanceof Er&&!S.value.value.isEmpty()||S.value.value.toString().length>0)&&(b.value.kind!=="constant"||b.value.value.length>0),F=C.value.kind!=="constant"||!!C.value.value||Object.keys(C.parameters).length>0,V=w.get("symbol-sort-key");if(this.features=[],!A&&!F)return;const W=r.iconDependencies,Z=r.glyphDependencies,J=r.availableImages,te=new bi(this.zoom);for(const{feature:de,id:ge,index:Me,sourceLayerIndex:we}of t){const Ee=f._featureFilter.needGeometry,Ue=vl(de,Ee);if(!f._featureFilter.filter(te,Ue,u))continue;let Ke,St;if(Ee||(Ue.geometry=yl(de)),A){const jt=f.getValueAndResolveTokens("text-field",Ue,u,J),yt=Er.factory(jt),Ft=this.hasRTLText=this.hasRTLText||Th(yt);(!Ft||Vi.getRTLTextPluginStatus()==="unavailable"||Ft&&Vi.isParsed())&&(Ke=bn(yt,f,Ue))}if(F){const jt=f.getValueAndResolveTokens("icon-image",Ue,u,J);St=jt instanceof lr?jt:lr.fromString(jt)}if(!Ke&&!St)continue;const Qt=this.sortFeaturesByKey?V.evaluate(Ue,{},u):void 0;if(this.features.push({id:ge,text:Ke,icon:St,index:Me,sourceLayerIndex:we,geometry:Ue.geometry,properties:de.properties,type:og[de.type],sortKey:Qt}),St&&(W[St.name]=!0),Ke){const jt=b.evaluate(Ue,{},u).join(","),yt=w.get("text-rotation-alignment")!=="viewport"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(_.ah.vertical)>=0;for(const Ft of Ke.sections)if(Ft.image)W[Ft.image.name]=!0;else{const It=$u(Ke.toString()),Mt=Ft.fontStack||jt,qe=Z[Mt]=Z[Mt]||{};this.calculateGlyphDependencies(Ft.text,qe,yt,this.allowVerticalPlacement,It)}}}w.get("symbol-placement")==="line"&&(this.features=(function(de){const ge={},Me={},we=[];let Ee=0;function Ue(jt){we.push(de[jt]),Ee++}function Ke(jt,yt,Ft){const It=Me[jt];return delete Me[jt],Me[yt]=It,we[It].geometry[0].pop(),we[It].geometry[0]=we[It].geometry[0].concat(Ft[0]),It}function St(jt,yt,Ft){const It=ge[yt];return delete ge[yt],ge[jt]=It,we[It].geometry[0].shift(),we[It].geometry[0]=Ft[0].concat(we[It].geometry[0]),It}function Qt(jt,yt,Ft){const It=Ft?yt[0][yt[0].length-1]:yt[0][0];return`${jt}:${It.x}:${It.y}`}for(let jt=0;jt<de.length;jt++){const yt=de[jt],Ft=yt.geometry,It=yt.text?yt.text.toString():null;if(!It){Ue(jt);continue}const Mt=Qt(It,Ft),qe=Qt(It,Ft,!0);if(Mt in Me&&qe in ge&&Me[Mt]!==ge[qe]){const $t=St(Mt,qe,Ft),Bt=Ke(Mt,qe,we[$t].geometry);delete ge[Mt],delete Me[qe],Me[Qt(It,we[Bt].geometry,!0)]=Bt,we[$t].geometry=null}else Mt in Me?Ke(Mt,qe,Ft):qe in ge?St(Mt,qe,Ft):(Ue(jt),ge[Mt]=Ee-1,Me[qe]=Ee-1)}return we.filter((jt=>jt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((de,ge)=>de.sortKey-ge.sortKey))}update(t,r,u){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(t,r,this.layers,u),this.icon.programConfigurations.updatePaintArrays(t,r,this.layers,u))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(t){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(t),this.iconCollisionBox.upload(t)),this.text.upload(t,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(t,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(t,r){const u=this.lineVertexArray.length;if(t.segment!==void 0){let f=t.dist(r[t.segment+1]),w=t.dist(r[t.segment]);const b={};for(let S=t.segment+1;S<r.length;S++)b[S]={x:r[S].x,y:r[S].y,tileUnitDistanceFromAnchor:f},S<r.length-1&&(f+=r[S+1].dist(r[S]));for(let S=t.segment||0;S>=0;S--)b[S]={x:r[S].x,y:r[S].y,tileUnitDistanceFromAnchor:w},S>0&&(w+=r[S-1].dist(r[S]));for(let S=0;S<r.length;S++){const C=b[S];this.lineVertexArray.emplaceBack(C.x,C.y,C.tileUnitDistanceFromAnchor)}}return{lineStartIndex:u,lineLength:this.lineVertexArray.length-u}}addSymbols(t,r,u,f,w,b,S,C,A,F,V,W){const Z=t.indexArray,J=t.layoutVertexArray,te=t.segments.prepareSegment(4*r.length,J,Z,this.canOverlap?b.sortKey:void 0),de=this.glyphOffsetArray.length,ge=te.vertexLength,Me=this.allowVerticalPlacement&&S===_.ah.vertical?Math.PI/2:0,we=b.text&&b.text.sections;for(let Ee=0;Ee<r.length;Ee++){const{tl:Ue,tr:Ke,bl:St,br:Qt,tex:jt,pixelOffsetTL:yt,pixelOffsetBR:Ft,minFontScaleX:It,minFontScaleY:Mt,glyphOffset:qe,isSDF:$t,sectionIndex:Bt}=r[Ee],oi=te.vertexLength,Qi=qe[1];vd(J,C.x,C.y,Ue.x,Qi+Ue.y,jt.x,jt.y,u,$t,yt.x,yt.y,It,Mt),vd(J,C.x,C.y,Ke.x,Qi+Ke.y,jt.x+jt.w,jt.y,u,$t,Ft.x,yt.y,It,Mt),vd(J,C.x,C.y,St.x,Qi+St.y,jt.x,jt.y+jt.h,u,$t,yt.x,Ft.y,It,Mt),vd(J,C.x,C.y,Qt.x,Qi+Qt.y,jt.x+jt.w,jt.y+jt.h,u,$t,Ft.x,Ft.y,It,Mt),lu(t.dynamicLayoutVertexArray,C,Me),Z.emplaceBack(oi,oi+1,oi+2),Z.emplaceBack(oi+1,oi+2,oi+3),te.vertexLength+=4,te.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(qe[0]),Ee!==r.length-1&&Bt===r[Ee+1].sectionIndex||t.programConfigurations.populatePaintArrays(J.length,b,b.index,{},W,we&&we[Bt])}t.placedSymbolArray.emplaceBack(C.x,C.y,de,this.glyphOffsetArray.length-de,ge,A,F,C.segment,u?u[0]:0,u?u[1]:0,f[0],f[1],S,0,!1,0,V)}_addCollisionDebugVertex(t,r,u,f,w,b){return r.emplaceBack(0,0),t.emplaceBack(u.x,u.y,f,w,Math.round(b.x),Math.round(b.y))}addCollisionDebugVertices(t,r,u,f,w,b,S){const C=w.segments.prepareSegment(4,w.layoutVertexArray,w.indexArray),A=C.vertexLength,F=w.layoutVertexArray,V=w.collisionVertexArray,W=S.anchorX,Z=S.anchorY;this._addCollisionDebugVertex(F,V,b,W,Z,new D(t,r)),this._addCollisionDebugVertex(F,V,b,W,Z,new D(u,r)),this._addCollisionDebugVertex(F,V,b,W,Z,new D(u,f)),this._addCollisionDebugVertex(F,V,b,W,Z,new D(t,f)),C.vertexLength+=4;const J=w.indexArray;J.emplaceBack(A,A+1),J.emplaceBack(A+1,A+2),J.emplaceBack(A+2,A+3),J.emplaceBack(A+3,A),C.primitiveLength+=4}addDebugCollisionBoxes(t,r,u,f){for(let w=t;w<r;w++){const b=this.collisionBoxArray.get(w);this.addCollisionDebugVertices(b.x1,b.y1,b.x2,b.y2,f?this.textCollisionBox:this.iconCollisionBox,b.anchorPoint,u)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new _d(tn,bh.members,ws),this.iconCollisionBox=new _d(tn,bh.members,ws);for(let t=0;t<this.symbolInstances.length;t++){const r=this.symbolInstances.get(t);this.addDebugCollisionBoxes(r.textBoxStartIndex,r.textBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.verticalTextBoxStartIndex,r.verticalTextBoxEndIndex,r,!0),this.addDebugCollisionBoxes(r.iconBoxStartIndex,r.iconBoxEndIndex,r,!1),this.addDebugCollisionBoxes(r.verticalIconBoxStartIndex,r.verticalIconBoxEndIndex,r,!1)}}_deserializeCollisionBoxesForSymbol(t,r,u,f,w,b,S,C,A){const F={};for(let V=r;V<u;V++){const W=t.get(V);F.textBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.textFeatureIndex=W.featureIndex;break}for(let V=f;V<w;V++){const W=t.get(V);F.verticalTextBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.verticalTextFeatureIndex=W.featureIndex;break}for(let V=b;V<S;V++){const W=t.get(V);F.iconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.iconFeatureIndex=W.featureIndex;break}for(let V=C;V<A;V++){const W=t.get(V);F.verticalIconBox={x1:W.x1,y1:W.y1,x2:W.x2,y2:W.y2,anchorPointX:W.anchorPointX,anchorPointY:W.anchorPointY},F.verticalIconFeatureIndex=W.featureIndex;break}return F}deserializeCollisionBoxes(t){this.collisionArrays=[];for(let r=0;r<this.symbolInstances.length;r++){const u=this.symbolInstances.get(r);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(t,u.textBoxStartIndex,u.textBoxEndIndex,u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u.iconBoxStartIndex,u.iconBoxEndIndex,u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(t,r){const u=t.placedSymbolArray.get(r),f=u.vertexStartIndex+4*u.numGlyphs;for(let w=u.vertexStartIndex;w<f;w+=4)t.indexArray.emplaceBack(w,w+1,w+2),t.indexArray.emplaceBack(w+1,w+2,w+3)}getSortedSymbolIndexes(t){if(this.sortedAngle===t&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const r=Math.sin(t),u=Math.cos(t),f=[],w=[],b=[];for(let S=0;S<this.symbolInstances.length;++S){b.push(S);const C=this.symbolInstances.get(S);f.push(0|Math.round(r*C.anchorX+u*C.anchorY)),w.push(C.featureIndex)}return b.sort(((S,C)=>f[S]-f[C]||w[C]-w[S])),b}addToSortKeyRanges(t,r){const u=this.sortKeyRanges[this.sortKeyRanges.length-1];u&&u.sortKey===r?u.symbolInstanceEnd=t+1:this.sortKeyRanges.push({sortKey:r,symbolInstanceStart:t,symbolInstanceEnd:t+1})}sortFeatures(t){if(this.sortFeaturesByY&&this.sortedAngle!==t&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(t),this.sortedAngle=t,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const r of this.symbolInstanceIndexes){const u=this.symbolInstances.get(r);this.featureSortOrder.push(u.featureIndex),[u.rightJustifiedTextSymbolIndex,u.centerJustifiedTextSymbolIndex,u.leftJustifiedTextSymbolIndex].forEach(((f,w,b)=>{f>=0&&b.indexOf(f)===w&&this.addIndicesForPlacedSymbol(this.text,f)})),u.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,u.verticalPlacedTextSymbolIndex),u.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.placedIconSymbolIndex),u.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,u.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Vp,Ph;Ct("SymbolBucket",cu,{omit:["layers","collisionBoxArray","features","compareText"]}),cu.MAX_GLYPHS=65535,cu.addDynamicAttributes=lu;var uu={get paint(){return Ph=Ph||new v({"icon-opacity":new qt(Oe.paint_symbol["icon-opacity"]),"icon-color":new qt(Oe.paint_symbol["icon-color"]),"icon-halo-color":new qt(Oe.paint_symbol["icon-halo-color"]),"icon-halo-width":new qt(Oe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new qt(Oe.paint_symbol["icon-halo-blur"]),"icon-translate":new Pt(Oe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pt(Oe.paint_symbol["icon-translate-anchor"]),"text-opacity":new qt(Oe.paint_symbol["text-opacity"]),"text-color":new qt(Oe.paint_symbol["text-color"],{runtimeType:Ps,getOverride:s=>s.textColor,hasOverride:s=>!!s.textColor}),"text-halo-color":new qt(Oe.paint_symbol["text-halo-color"]),"text-halo-width":new qt(Oe.paint_symbol["text-halo-width"]),"text-halo-blur":new qt(Oe.paint_symbol["text-halo-blur"]),"text-translate":new Pt(Oe.paint_symbol["text-translate"]),"text-translate-anchor":new Pt(Oe.paint_symbol["text-translate-anchor"])})},get layout(){return Vp=Vp||new v({"symbol-placement":new Pt(Oe.layout_symbol["symbol-placement"]),"symbol-spacing":new Pt(Oe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pt(Oe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new qt(Oe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pt(Oe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pt(Oe.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Pt(Oe.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Pt(Oe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pt(Oe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pt(Oe.layout_symbol["icon-rotation-alignment"]),"icon-size":new qt(Oe.layout_symbol["icon-size"]),"icon-text-fit":new Pt(Oe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pt(Oe.layout_symbol["icon-text-fit-padding"]),"icon-image":new qt(Oe.layout_symbol["icon-image"]),"icon-rotate":new qt(Oe.layout_symbol["icon-rotate"]),"icon-padding":new qt(Oe.layout_symbol["icon-padding"]),"icon-keep-upright":new Pt(Oe.layout_symbol["icon-keep-upright"]),"icon-offset":new qt(Oe.layout_symbol["icon-offset"]),"icon-anchor":new qt(Oe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pt(Oe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pt(Oe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pt(Oe.layout_symbol["text-rotation-alignment"]),"text-field":new qt(Oe.layout_symbol["text-field"]),"text-font":new qt(Oe.layout_symbol["text-font"]),"text-size":new qt(Oe.layout_symbol["text-size"]),"text-max-width":new qt(Oe.layout_symbol["text-max-width"]),"text-line-height":new Pt(Oe.layout_symbol["text-line-height"]),"text-letter-spacing":new qt(Oe.layout_symbol["text-letter-spacing"]),"text-justify":new qt(Oe.layout_symbol["text-justify"]),"text-radial-offset":new qt(Oe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pt(Oe.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new qt(Oe.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new qt(Oe.layout_symbol["text-anchor"]),"text-max-angle":new Pt(Oe.layout_symbol["text-max-angle"]),"text-writing-mode":new Pt(Oe.layout_symbol["text-writing-mode"]),"text-rotate":new qt(Oe.layout_symbol["text-rotate"]),"text-padding":new Pt(Oe.layout_symbol["text-padding"]),"text-keep-upright":new Pt(Oe.layout_symbol["text-keep-upright"]),"text-transform":new qt(Oe.layout_symbol["text-transform"]),"text-offset":new qt(Oe.layout_symbol["text-offset"]),"text-allow-overlap":new Pt(Oe.layout_symbol["text-allow-overlap"]),"text-overlap":new Pt(Oe.layout_symbol["text-overlap"]),"text-ignore-placement":new Pt(Oe.layout_symbol["text-ignore-placement"]),"text-optional":new Pt(Oe.layout_symbol["text-optional"])})}};class Eh{constructor(t){if(t.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=t.property.overrides?t.property.overrides.runtimeType:xr,this.defaultValue=t}evaluate(t){if(t.formattedSection){const r=this.defaultValue.property.overrides;if(r&&r.hasOverride(t.formattedSection))return r.getOverride(t.formattedSection)}return t.feature&&t.featureState?this.defaultValue.evaluate(t.feature,t.featureState):this.defaultValue.property.specification.default}eachChild(t){this.defaultValue.isConstant()||t(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Ct("FormatSectionOverride",Eh,{omit:["defaultValue"]});class gc extends o{constructor(t){super(t,uu)}recalculate(t,r){if(super.recalculate(t,r),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const u=this.layout.get("text-writing-mode");if(u){const f=[];for(const w of u)f.indexOf(w)<0&&f.push(w);this.layout._values["text-writing-mode"]=f}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(t,r,u,f){const w=this.layout.get(t).evaluate(r,{},u,f),b=this._unevaluatedLayout._values[t];return b.isDataDriven()||Ya(b.value)||!w?w:(function(S,C){return C.replace(/{([^{}]+)}/g,((A,F)=>S&&F in S?String(S[F]):""))})(r.properties,w)}createBucket(t){return new cu(t)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const t of uu.paint.overridableProperties){if(!gc.hasPaintOverride(this.layout,t))continue;const r=this.paint.get(t),u=new Eh(r),f=new zr(u,r.property.specification);let w=null;w=r.value.kind==="constant"||r.value.kind==="source"?new Eo("source",f):new Mo("composite",f,r.value.zoomStops),this.paint._values[t]=new Kr(r.property,w,r.parameters)}}_handleOverridablePaintPropertyUpdate(t,r,u){return!(!this.layout||r.isDataDriven()||u.isDataDriven())&&gc.hasPaintOverride(this.layout,t)}static hasPaintOverride(t,r){const u=t.get("text-field"),f=uu.paint.properties[r];let w=!1;const b=S=>{for(const C of S)if(f.overrides&&f.overrides.hasOverride(C))return void(w=!0)};if(u.value.kind==="constant"&&u.value.value instanceof Er)b(u.value.value.sections);else if(u.value.kind==="source"){const S=A=>{w||(A instanceof An&&Li(A.value)===Zr?b(A.value.sections):A instanceof No?b(A.sections):A.eachChild(S))},C=u.value;C._styleExpression&&S(C._styleExpression.expression)}return w}}let $p;var lg={get paint(){return $p=$p||new v({"background-color":new Pt(Oe.paint_background["background-color"]),"background-pattern":new ac(Oe.paint_background["background-pattern"]),"background-opacity":new Pt(Oe.paint_background["background-opacity"])})}};class Mh extends o{constructor(t){super(t,lg)}}let cf;var wd={get paint(){return cf=cf||new v({"raster-opacity":new Pt(Oe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pt(Oe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pt(Oe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pt(Oe.paint_raster["raster-brightness-max"]),"raster-saturation":new Pt(Oe.paint_raster["raster-saturation"]),"raster-contrast":new Pt(Oe.paint_raster["raster-contrast"]),"raster-resampling":new Pt(Oe.paint_raster["raster-resampling"]),"raster-fade-duration":new Pt(Oe.paint_raster["raster-fade-duration"])})}};class cg extends o{constructor(t){super(t,wd)}}class Ah extends o{constructor(t){super(t,{}),this.onAdd=r=>{this.implementation.onAdd&&this.implementation.onAdd(r,r.painter.context.gl)},this.onRemove=r=>{this.implementation.onRemove&&this.implementation.onRemove(r,r.painter.context.gl)},this.implementation=t}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class n{constructor(t){this._methodToThrottle=t,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const c=63710088e-1;class g{constructor(t,r){if(isNaN(t)||isNaN(r))throw new Error(`Invalid LngLat object: (${t}, ${r})`);if(this.lng=+t,this.lat=+r,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new g(Xe(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(t){const r=Math.PI/180,u=this.lat*r,f=t.lat*r,w=Math.sin(u)*Math.sin(f)+Math.cos(u)*Math.cos(f)*Math.cos((t.lng-this.lng)*r);return c*Math.acos(Math.min(w,1))}static convert(t){if(t instanceof g)return t;if(Array.isArray(t)&&(t.length===2||t.length===3))return new g(Number(t[0]),Number(t[1]));if(!Array.isArray(t)&&typeof t=="object"&&t!==null)return new g(Number("lng"in t?t.lng:t.lon),Number(t.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const N=2*Math.PI*c;function E(s){return N*Math.cos(s*Math.PI/180)}function L(s){return(180+s)/360}function Y(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function fe(s,t){return s/E(t)}function be(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}class $e{constructor(t,r,u=0){this.x=+t,this.y=+r,this.z=+u}static fromLngLat(t,r=0){const u=g.convert(t);return new $e(L(u.lng),Y(u.lat),fe(r,u.lat))}toLngLat(){return new g(360*this.x-180,be(this.y))}toAltitude(){return this.z*E(be(this.y))}meterInMercatorCoordinateUnits(){return 1/N*(t=be(this.y),1/Math.cos(t*Math.PI/180));var t}}function tt(s,t,r){var u=2*Math.PI*6378137/256/Math.pow(2,r);return[s*u-2*Math.PI*6378137/2,t*u-2*Math.PI*6378137/2]}class nt{constructor(t,r,u){if(!(function(f,w,b){return!(f<0||f>25||b<0||b>=Math.pow(2,f)||w<0||w>=Math.pow(2,f))})(t,r,u))throw new Error(`x=${r}, y=${u}, z=${t} outside of bounds. 0<=x<${Math.pow(2,t)}, 0<=y<${Math.pow(2,t)} 0<=z<=25 `);this.z=t,this.x=r,this.y=u,this.key=Lt(0,t,t,r,u)}equals(t){return this.z===t.z&&this.x===t.x&&this.y===t.y}url(t,r,u){const f=(b=this.y,S=this.z,C=tt(256*(w=this.x),256*(b=Math.pow(2,S)-b-1),S),A=tt(256*(w+1),256*(b+1),S),C[0]+","+C[1]+","+A[0]+","+A[1]);var w,b,S,C,A;const F=(function(V,W,Z){let J,te="";for(let de=V;de>0;de--)J=1<<de-1,te+=(W&J?1:0)+(Z&J?2:0);return te})(this.z,this.x,this.y);return t[(this.x+this.y)%t.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,r>1?"@2x":"").replace(/{quadkey}/g,F).replace(/{bbox-epsg-3857}/g,f)}isChildOf(t){const r=this.z-t.z;return r>0&&t.x===this.x>>r&&t.y===this.y>>r}getTilePoint(t){const r=Math.pow(2,this.z);return new D((t.x*r-this.x)*bs,(t.y*r-this.y)*bs)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Qe{constructor(t,r){this.wrap=t,this.canonical=r,this.key=Lt(t,r.z,r.z,r.x,r.y)}}class bt{constructor(t,r,u,f,w){if(t<u)throw new Error(`overscaledZ should be >= z; overscaledZ = ${t}; z = ${u}`);this.overscaledZ=t,this.wrap=r,this.canonical=new nt(u,+f,+w),this.key=Lt(r,t,u,f,w)}clone(){return new bt(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(t){return this.overscaledZ===t.overscaledZ&&this.wrap===t.wrap&&this.canonical.equals(t.canonical)}scaledTo(t){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const r=this.canonical.z-t;return t>this.canonical.z?new bt(t,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new bt(t,this.wrap,t,this.canonical.x>>r,this.canonical.y>>r)}calculateScaledKey(t,r){if(t>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${t}; overscaledZ = ${this.overscaledZ}`);const u=this.canonical.z-t;return t>this.canonical.z?Lt(this.wrap*+r,t,this.canonical.z,this.canonical.x,this.canonical.y):Lt(this.wrap*+r,t,t,this.canonical.x>>u,this.canonical.y>>u)}isChildOf(t){if(t.wrap!==this.wrap)return!1;const r=this.canonical.z-t.canonical.z;return t.overscaledZ===0||t.overscaledZ<this.overscaledZ&&t.canonical.x===this.canonical.x>>r&&t.canonical.y===this.canonical.y>>r}children(t){if(this.overscaledZ>=t)return[new bt(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const r=this.canonical.z+1,u=2*this.canonical.x,f=2*this.canonical.y;return[new bt(r,this.wrap,r,u,f),new bt(r,this.wrap,r,u+1,f),new bt(r,this.wrap,r,u,f+1),new bt(r,this.wrap,r,u+1,f+1)]}isLessThan(t){return this.wrap<t.wrap||!(this.wrap>t.wrap)&&(this.overscaledZ<t.overscaledZ||!(this.overscaledZ>t.overscaledZ)&&(this.canonical.x<t.canonical.x||!(this.canonical.x>t.canonical.x)&&this.canonical.y<t.canonical.y))}wrapped(){return new bt(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(t){return new bt(this.overscaledZ,t,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Qe(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(t){return this.canonical.getTilePoint(new $e(t.x-this.wrap,t.y))}}function Lt(s,t,r,u,f){(s*=2)<0&&(s=-1*s-1);const w=1<<r;return(w*w*s+w*f+u).toString(36)+r.toString(36)+t.toString(36)}Ct("CanonicalTileID",nt),Ct("OverscaledTileID",bt,{omit:["posMatrix"]});class Wt{constructor(t,r,u,f=1,w=1,b=1,S=0){if(this.uid=t,r.height!==r.width)throw new RangeError("DEM tiles must be square");if(u&&!["mapbox","terrarium","custom"].includes(u))return void Ve(`"${u}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=r.height;const C=this.dim=r.height-2;switch(this.data=new Uint32Array(r.data.buffer),u){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=f,this.greenFactor=w,this.blueFactor=b,this.baseShift=S;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let A=0;A<C;A++)this.data[this._idx(-1,A)]=this.data[this._idx(0,A)],this.data[this._idx(C,A)]=this.data[this._idx(C-1,A)],this.data[this._idx(A,-1)]=this.data[this._idx(A,0)],this.data[this._idx(A,C)]=this.data[this._idx(A,C-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(C,-1)]=this.data[this._idx(C-1,0)],this.data[this._idx(-1,C)]=this.data[this._idx(0,C-1)],this.data[this._idx(C,C)]=this.data[this._idx(C-1,C-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let A=0;A<C;A++)for(let F=0;F<C;F++){const V=this.get(A,F);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(t,r){const u=new Uint8Array(this.data.buffer),f=4*this._idx(t,r);return this.unpack(u[f],u[f+1],u[f+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(t,r){if(t<-1||t>=this.dim+1||r<-1||r>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(r+1)*this.stride+(t+1)}unpack(t,r,u){return t*this.redFactor+r*this.greenFactor+u*this.blueFactor-this.baseShift}getPixels(){return new cr({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(t,r,u){if(this.dim!==t.dim)throw new Error("dem dimension mismatch");let f=r*this.dim,w=r*this.dim+this.dim,b=u*this.dim,S=u*this.dim+this.dim;switch(r){case-1:f=w-1;break;case 1:w=f+1}switch(u){case-1:b=S-1;break;case 1:S=b+1}const C=-r*this.dim,A=-u*this.dim;for(let F=b;F<S;F++)for(let V=f;V<w;V++)this.data[this._idx(V,F)]=t.data[this._idx(V+C,F+A)]}}Ct("DEMData",Wt);class Ns{constructor(t){this._stringToNumber={},this._numberToString=[];for(let r=0;r<t.length;r++){const u=t[r];this._stringToNumber[u]=r,this._numberToString[r]=u}}encode(t){return this._stringToNumber[t]}decode(t){if(t>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${t} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[t]}}class De{constructor(t,r,u,f,w){this.type="Feature",this._vectorTileFeature=t,t._z=r,t._x=u,t._y=f,this.properties=t.properties,this.id=w}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(t){this._geometry=t}toJSON(){const t={geometry:this.geometry};for(const r in this)r!=="_geometry"&&r!=="_vectorTileFeature"&&(t[r]=this[r]);return t}}class Te{constructor(t,r){this.tileID=t,this.x=t.canonical.x,this.y=t.canonical.y,this.z=t.canonical.z,this.grid=new ul(bs,16,0),this.grid3D=new ul(bs,16,0),this.featureIndexArray=new Ki,this.promoteId=r}insert(t,r,u,f,w,b){const S=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(u,f,w);const C=b?this.grid3D:this.grid;for(let A=0;A<r.length;A++){const F=r[A],V=[1/0,1/0,-1/0,-1/0];for(let W=0;W<F.length;W++){const Z=F[W];V[0]=Math.min(V[0],Z.x),V[1]=Math.min(V[1],Z.y),V[2]=Math.max(V[2],Z.x),V[3]=Math.max(V[3],Z.y)}V[0]<bs&&V[1]<bs&&V[2]>=0&&V[3]>=0&&C.insert(S,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new wl.VectorTile(new Bo(this.rawTileData)).layers,this.sourceLayerCoder=new Ns(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(t,r,u,f){this.loadVTLayers();const w=t.params||{},b=bs/t.tileSize/t.scale,S=Jl(w.filter),C=t.queryGeometry,A=t.queryPadding*b,F=ft(C),V=this.grid.query(F.minX-A,F.minY-A,F.maxX+A,F.maxY+A),W=ft(t.cameraQueryGeometry),Z=this.grid3D.query(W.minX-A,W.minY-A,W.maxX+A,W.maxY+A,((de,ge,Me,we)=>(function(Ee,Ue,Ke,St,Qt){for(const yt of Ee)if(Ue<=yt.x&&Ke<=yt.y&&St>=yt.x&&Qt>=yt.y)return!0;const jt=[new D(Ue,Ke),new D(Ue,Qt),new D(St,Qt),new D(St,Ke)];if(Ee.length>2){for(const yt of jt)if(oc(Ee,yt))return!0}for(let yt=0;yt<Ee.length-1;yt++)if(Sm(Ee[yt],Ee[yt+1],jt))return!0;return!1})(t.cameraQueryGeometry,de-A,ge-A,Me+A,we+A)));for(const de of Z)V.push(de);V.sort(Xt);const J={};let te;for(let de=0;de<V.length;de++){const ge=V[de];if(ge===te)continue;te=ge;const Me=this.featureIndexArray.get(ge);let we=null;this.loadMatchingFeature(J,Me.bucketIndex,Me.sourceLayerIndex,Me.featureIndex,S,w.layers,w.availableImages,r,u,f,((Ee,Ue,Ke)=>(we||(we=yl(Ee)),Ue.queryIntersectsFeature(C,Ee,Ke,we,this.z,t.transform,b,t.pixelPosMatrix))))}return J}loadMatchingFeature(t,r,u,f,w,b,S,C,A,F,V){const W=this.bucketLayerIDs[r];if(b&&!(function(de,ge){for(let Me=0;Me<de.length;Me++)if(ge.indexOf(de[Me])>=0)return!0;return!1})(b,W))return;const Z=this.sourceLayerCoder.decode(u),J=this.vtLayers[Z].feature(f);if(w.needGeometry){const de=vl(J,!0);if(!w.filter(new bi(this.tileID.overscaledZ),de,this.tileID.canonical))return}else if(!w.filter(new bi(this.tileID.overscaledZ),J))return;const te=this.getId(J,Z);for(let de=0;de<W.length;de++){const ge=W[de];if(b&&b.indexOf(ge)<0)continue;const Me=C[ge];if(!Me)continue;let we={};te&&F&&(we=F.getState(Me.sourceLayer||"_geojsonTileLayer",te));const Ee=ut({},A[ge]);Ee.paint=Fe(Ee.paint,Me.paint,J,we,S),Ee.layout=Fe(Ee.layout,Me.layout,J,we,S);const Ue=!V||V(J,Me,we);if(!Ue)continue;const Ke=new De(J,this.z,this.x,this.y,te);Ke.layer=Ee;let St=t[ge];St===void 0&&(St=t[ge]=[]),St.push({featureIndex:f,feature:Ke,intersectionZ:Ue})}}lookupSymbolFeatures(t,r,u,f,w,b,S,C){const A={};this.loadVTLayers();const F=Jl(w);for(const V of t)this.loadMatchingFeature(A,u,f,V,F,b,S,C,r);return A}hasLayer(t){for(const r of this.bucketLayerIDs)for(const u of r)if(t===u)return!0;return!1}getId(t,r){let u=t.id;return this.promoteId&&(u=t.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[r]],typeof u=="boolean"&&(u=Number(u))),u}}function Fe(s,t,r,u,f){return Ae(s,((w,b)=>{const S=t instanceof pl?t.get(b):null;return S&&S.evaluate?S.evaluate(r,u,f):S}))}function ft(s){let t=1/0,r=1/0,u=-1/0,f=-1/0;for(const w of s)t=Math.min(t,w.x),r=Math.min(r,w.y),u=Math.max(u,w.x),f=Math.max(f,w.y);return{minX:t,minY:r,maxX:u,maxY:f}}function Xt(s,t){return t-s}function ri(s,t,r,u,f){const w=[];for(let b=0;b<s.length;b++){const S=s[b];let C;for(let A=0;A<S.length-1;A++){let F=S[A],V=S[A+1];F.x<t&&V.x<t||(F.x<t?F=new D(t,F.y+(t-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x<t&&(V=new D(t,F.y+(t-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y<r&&V.y<r||(F.y<r?F=new D(F.x+(r-F.y)/(V.y-F.y)*(V.x-F.x),r)._round():V.y<r&&(V=new D(F.x+(r-F.y)/(V.y-F.y)*(V.x-F.x),r)._round()),F.x>=u&&V.x>=u||(F.x>=u?F=new D(u,F.y+(u-F.x)/(V.x-F.x)*(V.y-F.y))._round():V.x>=u&&(V=new D(u,F.y+(u-F.x)/(V.x-F.x)*(V.y-F.y))._round()),F.y>=f&&V.y>=f||(F.y>=f?F=new D(F.x+(f-F.y)/(V.y-F.y)*(V.x-F.x),f)._round():V.y>=f&&(V=new D(F.x+(f-F.y)/(V.y-F.y)*(V.x-F.x),f)._round()),C&&F.equals(C[C.length-1])||(C=[F],w.push(C)),C.push(V)))))}}return w}Ct("FeatureIndex",Te,{omit:["rawTileData","sourceLayerCoder"]});class Yt extends D{constructor(t,r,u,f){super(t,r),this.angle=u,f!==void 0&&(this.segment=f)}clone(){return new Yt(this.x,this.y,this.angle,this.segment)}}function di(s,t,r,u,f){if(t.segment===void 0||r===0)return!0;let w=t,b=t.segment+1,S=0;for(;S>-r/2;){if(b--,b<0)return!1;S-=s[b].dist(w),w=s[b]}S+=s[b].dist(s[b+1]),b++;const C=[];let A=0;for(;S<r/2;){const F=s[b],V=s[b+1];if(!V)return!1;let W=s[b-1].angleTo(F)-F.angleTo(V);for(W=Math.abs((W+3*Math.PI)%(2*Math.PI)-Math.PI),C.push({distance:S,angleDelta:W}),A+=W;S-C[0].distance>u;)A-=C.shift().angleDelta;if(A>f)return!1;b++,S+=F.dist(V)}return!0}function rr(s){let t=0;for(let r=0;r<s.length-1;r++)t+=s[r].dist(s[r+1]);return t}function Ri(s,t,r){return s?.6*t*r:0}function Oo(s,t){return Math.max(s?s.right-s.left:0,t?t.right-t.left:0)}function ug(s,t,r,u,f,w){const b=Ri(r,f,w),S=Oo(r,u)*w;let C=0;const A=rr(s)/2;for(let F=0;F<s.length-1;F++){const V=s[F],W=s[F+1],Z=V.dist(W);if(C+Z>A){const J=(A-C)/Z,te=_s.number(V.x,W.x,J),de=_s.number(V.y,W.y,J),ge=new Yt(te,de,W.angleTo(V),F);return ge._round(),!b||di(s,ge,S,b,t)?ge:void 0}C+=Z}}function zb(s,t,r,u,f,w,b,S,C){const A=Ri(u,w,b),F=Oo(u,f),V=F*b,W=s[0].x===0||s[0].x===C||s[0].y===0||s[0].y===C;return t-V<t/4&&(t=V+t/4),Dy(s,W?t/2*S%t:(F/2+2*w)*b*S%t,t,A,r,V,W,!1,C)}function Dy(s,t,r,u,f,w,b,S,C){const A=w/2,F=rr(s);let V=0,W=t-r,Z=[];for(let J=0;J<s.length-1;J++){const te=s[J],de=s[J+1],ge=te.dist(de),Me=de.angleTo(te);for(;W+r<V+ge;){W+=r;const we=(W-V)/ge,Ee=_s.number(te.x,de.x,we),Ue=_s.number(te.y,de.y,we);if(Ee>=0&&Ee<C&&Ue>=0&&Ue<C&&W-A>=0&&W+A<=F){const Ke=new Yt(Ee,Ue,Me,J);Ke._round(),u&&!di(s,Ke,w,u,f)||Z.push(Ke)}}V+=ge}return S||Z.length||b||(Z=Dy(s,V/2,r,u,f,w,b,!0,C)),Z}Ct("Anchor",Yt);const Ih=an;function Ry(s,t,r,u){const f=[],w=s.image,b=w.pixelRatio,S=w.paddedRect.w-2*Ih,C=w.paddedRect.h-2*Ih;let A={x1:s.left,y1:s.top,x2:s.right,y2:s.bottom};const F=w.stretchX||[[0,S]],V=w.stretchY||[[0,C]],W=(qe,$t)=>qe+$t[1]-$t[0],Z=F.reduce(W,0),J=V.reduce(W,0),te=S-Z,de=C-J;let ge=0,Me=Z,we=0,Ee=J,Ue=0,Ke=te,St=0,Qt=de;if(w.content&&u){const qe=w.content,$t=qe[2]-qe[0],Bt=qe[3]-qe[1];(w.textFitWidth||w.textFitHeight)&&(A=xd(s)),ge=uf(F,0,qe[0]),we=uf(V,0,qe[1]),Me=uf(F,qe[0],qe[2]),Ee=uf(V,qe[1],qe[3]),Ue=qe[0]-ge,St=qe[1]-we,Ke=$t-Me,Qt=Bt-Ee}const jt=A.x1,yt=A.y1,Ft=A.x2-jt,It=A.y2-yt,Mt=(qe,$t,Bt,oi)=>{const Qi=df(qe.stretch-ge,Me,Ft,jt),Zi=hf(qe.fixed-Ue,Ke,qe.stretch,Z),ur=df($t.stretch-we,Ee,It,yt),oo=hf($t.fixed-St,Qt,$t.stretch,J),Ur=df(Bt.stretch-ge,Me,Ft,jt),dr=hf(Bt.fixed-Ue,Ke,Bt.stretch,Z),kn=df(oi.stretch-we,Ee,It,yt),Sn=hf(oi.fixed-St,Qt,oi.stretch,J),Tn=new D(Qi,ur),ks=new D(Ur,ur),hr=new D(Ur,kn),on=new D(Qi,kn),Hr=new D(Zi/b,oo/b),Cn=new D(dr/b,Sn/b),Wr=t*Math.PI/180;if(Wr){const Ai=Math.sin(Wr),ts=Math.cos(Wr),os=[ts,-Ai,Ai,ts];Tn._matMult(os),ks._matMult(os),on._matMult(os),hr._matMult(os)}const Fa=qe.stretch+qe.fixed,Yn=$t.stretch+$t.fixed;return{tl:Tn,tr:ks,bl:on,br:hr,tex:{x:w.paddedRect.x+Ih+Fa,y:w.paddedRect.y+Ih+Yn,w:Bt.stretch+Bt.fixed-Fa,h:oi.stretch+oi.fixed-Yn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hr,pixelOffsetBR:Cn,minFontScaleX:Ke/b/Ft,minFontScaleY:Qt/b/It,isSDF:r}};if(u&&(w.stretchX||w.stretchY)){const qe=Ly(F,te,Z),$t=Ly(V,de,J);for(let Bt=0;Bt<qe.length-1;Bt++){const oi=qe[Bt],Qi=qe[Bt+1];for(let Zi=0;Zi<$t.length-1;Zi++)f.push(Mt(oi,$t[Zi],Qi,$t[Zi+1]))}}else f.push(Mt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:S+1},{fixed:0,stretch:C+1}));return f}function uf(s,t,r){let u=0;for(const f of s)u+=Math.max(t,Math.min(r,f[1]))-Math.max(t,Math.min(r,f[0]));return u}function Ly(s,t,r){const u=[{fixed:-Ih,stretch:0}];for(const[f,w]of s){const b=u[u.length-1];u.push({fixed:f-b.stretch,stretch:b.stretch}),u.push({fixed:f-b.stretch,stretch:b.stretch+(w-f)})}return u.push({fixed:t+Ih,stretch:r}),u}function df(s,t,r,u){return s/t*r+u}function hf(s,t,r,u){return s-t*r/u}class pf{constructor(t,r,u,f,w,b,S,C,A,F){var V;if(this.boxStartIndex=t.length,A){let W=b.top,Z=b.bottom;const J=b.collisionPadding;J&&(W-=J[1],Z+=J[3]);let te=Z-W;te>0&&(te=Math.max(10,te),this.circleDiameter=te)}else{const W=!((V=b.image)===null||V===void 0)&&V.content&&(b.image.textFitWidth||b.image.textFitHeight)?xd(b):{x1:b.left,y1:b.top,x2:b.right,y2:b.bottom};W.y1=W.y1*S-C[0],W.y2=W.y2*S+C[2],W.x1=W.x1*S-C[3],W.x2=W.x2*S+C[1];const Z=b.collisionPadding;if(Z&&(W.x1-=Z[0]*S,W.y1-=Z[1]*S,W.x2+=Z[2]*S,W.y2+=Z[3]*S),F){const J=new D(W.x1,W.y1),te=new D(W.x2,W.y1),de=new D(W.x1,W.y2),ge=new D(W.x2,W.y2),Me=F*Math.PI/180;J._rotate(Me),te._rotate(Me),de._rotate(Me),ge._rotate(Me),W.x1=Math.min(J.x,te.x,de.x,ge.x),W.x2=Math.max(J.x,te.x,de.x,ge.x),W.y1=Math.min(J.y,te.y,de.y,ge.y),W.y2=Math.max(J.y,te.y,de.y,ge.y)}t.emplaceBack(r.x,r.y,W.x1,W.y1,W.x2,W.y2,u,f,w)}this.boxEndIndex=t.length}}class Db{constructor(t=[],r=((u,f)=>u<f?-1:u>f?1:0)){if(this.data=t,this.length=this.data.length,this.compare=r,this.length>0)for(let u=(this.length>>1)-1;u>=0;u--)this._down(u)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(this.length===0)return;const t=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:r,compare:u}=this,f=r[t];for(;t>0;){const w=t-1>>1,b=r[w];if(u(f,b)>=0)break;r[t]=b,t=w}r[t]=f}_down(t){const{data:r,compare:u}=this,f=this.length>>1,w=r[t];for(;t<f;){let b=1+(t<<1);const S=b+1;if(S<this.length&&u(r[S],r[b])<0&&(b=S),u(r[b],w)>=0)break;r[t]=r[b],t=b}r[t]=w}}function Rb(s,t=1,r=!1){let u=1/0,f=1/0,w=-1/0,b=-1/0;const S=s[0];for(let Z=0;Z<S.length;Z++){const J=S[Z];(!Z||J.x<u)&&(u=J.x),(!Z||J.y<f)&&(f=J.y),(!Z||J.x>w)&&(w=J.x),(!Z||J.y>b)&&(b=J.y)}const C=Math.min(w-u,b-f);let A=C/2;const F=new Db([],Lb);if(C===0)return new D(u,f);for(let Z=u;Z<w;Z+=C)for(let J=f;J<b;J+=C)F.push(new zh(Z+A,J+A,A,s));let V=(function(Z){let J=0,te=0,de=0;const ge=Z[0];for(let Me=0,we=ge.length,Ee=we-1;Me<we;Ee=Me++){const Ue=ge[Me],Ke=ge[Ee],St=Ue.x*Ke.y-Ke.x*Ue.y;te+=(Ue.x+Ke.x)*St,de+=(Ue.y+Ke.y)*St,J+=3*St}return new zh(te/J,de/J,0,Z)})(s),W=F.length;for(;F.length;){const Z=F.pop();(Z.d>V.d||!V.d)&&(V=Z,r&&console.log("found best %d after %d probes",Math.round(1e4*Z.d)/1e4,W)),Z.max-V.d<=t||(A=Z.h/2,F.push(new zh(Z.p.x-A,Z.p.y-A,A,s)),F.push(new zh(Z.p.x+A,Z.p.y-A,A,s)),F.push(new zh(Z.p.x-A,Z.p.y+A,A,s)),F.push(new zh(Z.p.x+A,Z.p.y+A,A,s)),W+=4)}return r&&(console.log(`num probes: ${W}`),console.log(`best distance: ${V.d}`)),V.p}function Lb(s,t){return t.max-s.max}function zh(s,t,r,u){this.p=new D(s,t),this.h=r,this.d=(function(f,w){let b=!1,S=1/0;for(let C=0;C<w.length;C++){const A=w[C];for(let F=0,V=A.length,W=V-1;F<V;W=F++){const Z=A[F],J=A[W];Z.y>f.y!=J.y>f.y&&f.x<(J.x-Z.x)*(f.y-Z.y)/(J.y-Z.y)+Z.x&&(b=!b),S=Math.min(S,bp(f,Z,J))}}return(b?1:-1)*Math.sqrt(S)})(this.p,u),this.max=this.d+this.h*Math.SQRT2}var $r;_.aq=void 0,($r=_.aq||(_.aq={}))[$r.center=1]="center",$r[$r.left=2]="left",$r[$r.right=3]="right",$r[$r.top=4]="top",$r[$r.bottom=5]="bottom",$r[$r["top-left"]=6]="top-left",$r[$r["top-right"]=7]="top-right",$r[$r["bottom-left"]=8]="bottom-left",$r[$r["bottom-right"]=9]="bottom-right";const du=7,dg=Number.POSITIVE_INFINITY;function By(s,t){return t[1]!==dg?(function(r,u,f){let w=0,b=0;switch(u=Math.abs(u),f=Math.abs(f),r){case"top-right":case"top-left":case"top":b=f-du;break;case"bottom-right":case"bottom-left":case"bottom":b=-f+du}switch(r){case"top-right":case"bottom-right":case"right":w=-u;break;case"top-left":case"bottom-left":case"left":w=u}return[w,b]})(s,t[0],t[1]):(function(r,u){let f=0,w=0;u<0&&(u=0);const b=u/Math.SQRT2;switch(r){case"top-right":case"top-left":w=b-du;break;case"bottom-right":case"bottom-left":w=-b+du;break;case"bottom":w=-u+du;break;case"top":w=u-du}switch(r){case"top-right":case"bottom-right":f=-b;break;case"top-left":case"bottom-left":f=b;break;case"left":f=u;break;case"right":f=-u}return[f,w]})(s,t[0])}function Fy(s,t,r){var u;const f=s.layout,w=(u=f.get("text-variable-anchor-offset"))===null||u===void 0?void 0:u.evaluate(t,{},r);if(w){const S=w.values,C=[];for(let A=0;A<S.length;A+=2){const F=C[A]=S[A],V=S[A+1].map((W=>W*as));F.startsWith("top")?V[1]-=du:F.startsWith("bottom")&&(V[1]+=du),C[A+1]=V}return new Xr(C)}const b=f.get("text-variable-anchor");if(b){let S;S=s._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[f.get("text-radial-offset").evaluate(t,{},r)*as,dg]:f.get("text-offset").evaluate(t,{},r).map((A=>A*as));const C=[];for(const A of b)C.push(A,By(A,S));return new Xr(C)}return null}function hg(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Bb(s,t,r,u,f,w,b,S,C,A,F){let V=w.textMaxSize.evaluate(t,{});V===void 0&&(V=b);const W=s.layers[0].layout,Z=W.get("icon-offset").evaluate(t,{},F),J=Vy(r.horizontal),te=b/24,de=s.tilePixelRatio*te,ge=s.tilePixelRatio*V/24,Me=s.tilePixelRatio*S,we=s.tilePixelRatio*W.get("symbol-spacing"),Ee=W.get("text-padding")*s.tilePixelRatio,Ue=(function(qe,$t,Bt,oi=1){const Qi=qe.get("icon-padding").evaluate($t,{},Bt),Zi=Qi&&Qi.values;return[Zi[0]*oi,Zi[1]*oi,Zi[2]*oi,Zi[3]*oi]})(W,t,F,s.tilePixelRatio),Ke=W.get("text-max-angle")/180*Math.PI,St=W.get("text-rotation-alignment")!=="viewport"&&W.get("symbol-placement")!=="point",Qt=W.get("icon-rotation-alignment")==="map"&&W.get("symbol-placement")!=="point",jt=W.get("symbol-placement"),yt=we/2,Ft=W.get("icon-text-fit");let It;u&&Ft!=="none"&&(s.allowVerticalPlacement&&r.vertical&&(It=Tl(u,r.vertical,Ft,W.get("icon-text-fit-padding"),Z,te)),J&&(u=Tl(u,J,Ft,W.get("icon-text-fit-padding"),Z,te)));const Mt=(qe,$t)=>{$t.x<0||$t.x>=bs||$t.y<0||$t.y>=bs||(function(Bt,oi,Qi,Zi,ur,oo,Ur,dr,kn,Sn,Tn,ks,hr,on,Hr,Cn,Wr,Fa,Yn,Ai,ts,os,ca,js,Dh){const Pl=Bt.addToLineVertexArray(oi,Qi);let El,lo,Oa,Tr,xc=0,Wp=0,Wy=0,qy=0,_g=-1,wg=-1;const yc={};let Gy=fl("");if(Bt.allowVerticalPlacement&&Zi.vertical){const ln=dr.layout.get("text-rotate").evaluate(ts,{},js)+90;Oa=new pf(kn,oi,Sn,Tn,ks,Zi.vertical,hr,on,Hr,ln),Ur&&(Tr=new pf(kn,oi,Sn,Tn,ks,Ur,Wr,Fa,Hr,ln))}if(ur){const ln=dr.layout.get("icon-rotate").evaluate(ts,{}),Va=dr.layout.get("icon-text-fit")!=="none",bd=Ry(ur,ln,ca,Va),$o=Ur?Ry(Ur,ln,ca,Va):void 0;lo=new pf(kn,oi,Sn,Tn,ks,ur,Wr,Fa,!1,ln),xc=4*bd.length;const jd=Bt.iconSizeData;let Ml=null;jd.kind==="source"?(Ml=[la*dr.layout.get("icon-size").evaluate(ts,{})],Ml[0]>ao&&Ve(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${Cl}. Reduce your "icon-size".`)):jd.kind==="composite"&&(Ml=[la*os.compositeIconSizes[0].evaluate(ts,{},js),la*os.compositeIconSizes[1].evaluate(ts,{},js)],(Ml[0]>ao||Ml[1]>ao)&&Ve(`${Bt.layerIds[0]}: Value for "icon-size" is >= ${Cl}. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,bd,Ml,Ai,Yn,ts,_.ah.none,oi,Pl.lineStartIndex,Pl.lineLength,-1,js),_g=Bt.icon.placedSymbolArray.length-1,$o&&(Wp=4*$o.length,Bt.addSymbols(Bt.icon,$o,Ml,Ai,Yn,ts,_.ah.vertical,oi,Pl.lineStartIndex,Pl.lineLength,-1,js),wg=Bt.icon.placedSymbolArray.length-1)}const Zy=Object.keys(Zi.horizontal);for(const ln of Zy){const Va=Zi.horizontal[ln];if(!El){Gy=fl(Va.text);const $o=dr.layout.get("text-rotate").evaluate(ts,{},js);El=new pf(kn,oi,Sn,Tn,ks,Va,hr,on,Hr,$o)}const bd=Va.positionedLines.length===1;if(Wy+=Oy(Bt,oi,Va,oo,dr,Hr,ts,Cn,Pl,Zi.vertical?_.ah.horizontal:_.ah.horizontalOnly,bd?Zy:[ln],yc,_g,os,js),bd)break}Zi.vertical&&(qy+=Oy(Bt,oi,Zi.vertical,oo,dr,Hr,ts,Cn,Pl,_.ah.vertical,["vertical"],yc,wg,os,js));const Vb=El?El.boxStartIndex:Bt.collisionBoxArray.length,$b=El?El.boxEndIndex:Bt.collisionBoxArray.length,Ub=Oa?Oa.boxStartIndex:Bt.collisionBoxArray.length,Hb=Oa?Oa.boxEndIndex:Bt.collisionBoxArray.length,Wb=lo?lo.boxStartIndex:Bt.collisionBoxArray.length,qb=lo?lo.boxEndIndex:Bt.collisionBoxArray.length,Gb=Tr?Tr.boxStartIndex:Bt.collisionBoxArray.length,Zb=Tr?Tr.boxEndIndex:Bt.collisionBoxArray.length;let Vo=-1;const ff=(ln,Va)=>ln&&ln.circleDiameter?Math.max(ln.circleDiameter,Va):Va;Vo=ff(El,Vo),Vo=ff(Oa,Vo),Vo=ff(lo,Vo),Vo=ff(Tr,Vo);const Xy=Vo>-1?1:0;Xy&&(Vo*=Dh/as),Bt.glyphOffsetArray.length>=cu.MAX_GLYPHS&&Ve("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),ts.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,ts.sortKey);const Xb=Fy(dr,ts,js),[Yb,Jb]=(function(ln,Va){const bd=ln.length,$o=Va?.values;if($o?.length>0)for(let jd=0;jd<$o.length;jd+=2){const Ml=$o[jd+1];ln.emplaceBack(_.aq[$o[jd]],Ml[0],Ml[1])}return[bd,ln.length]})(Bt.textAnchorOffsets,Xb);Bt.symbolInstances.emplaceBack(oi.x,oi.y,yc.right>=0?yc.right:-1,yc.center>=0?yc.center:-1,yc.left>=0?yc.left:-1,yc.vertical||-1,_g,wg,Gy,Vb,$b,Ub,Hb,Wb,qb,Gb,Zb,Sn,Wy,qy,xc,Wp,Xy,0,hr,Vo,Yb,Jb)})(s,$t,qe,r,u,f,It,s.layers[0],s.collisionBoxArray,t.index,t.sourceLayerIndex,s.index,de,[Ee,Ee,Ee,Ee],St,C,Me,Ue,Qt,Z,t,w,A,F,b)};if(jt==="line")for(const qe of ri(t.geometry,0,0,bs,bs)){const $t=zb(qe,we,Ke,r.vertical||J,u,24,ge,s.overscaling,bs);for(const Bt of $t)J&&Fb(s,J.text,yt,Bt)||Mt(qe,Bt)}else if(jt==="line-center"){for(const qe of t.geometry)if(qe.length>1){const $t=ug(qe,Ke,r.vertical||J,u,24,ge);$t&&Mt(qe,$t)}}else if(t.type==="Polygon")for(const qe of Ko(t.geometry,0)){const $t=Rb(qe,16);Mt(qe[0],new Yt($t.x,$t.y,0))}else if(t.type==="LineString")for(const qe of t.geometry)Mt(qe,new Yt(qe[0].x,qe[0].y,0));else if(t.type==="Point")for(const qe of t.geometry)for(const $t of qe)Mt([$t],new Yt($t.x,$t.y,0))}function Oy(s,t,r,u,f,w,b,S,C,A,F,V,W,Z,J){const te=(function(Me,we,Ee,Ue,Ke,St,Qt,jt){const yt=Ue.layout.get("text-rotate").evaluate(St,{})*Math.PI/180,Ft=[];for(const It of we.positionedLines)for(const Mt of It.positionedGlyphs){if(!Mt.rect)continue;const qe=Mt.rect||{};let $t=Sh+1,Bt=!0,oi=1,Qi=0;const Zi=(Ke||jt)&&Mt.vertical,ur=Mt.metrics.advance*Mt.scale/2;if(jt&&we.verticalizable&&(Qi=It.lineOffset/2-(Mt.imageName?-(as-Mt.metrics.width*Mt.scale)/2:(Mt.scale-1)*as)),Mt.imageName){const Ai=Qt[Mt.imageName];Bt=Ai.sdf,oi=Ai.pixelRatio,$t=an/oi}const oo=Ke?[Mt.x+ur,Mt.y]:[0,0];let Ur=Ke?[0,0]:[Mt.x+ur+Ee[0],Mt.y+Ee[1]-Qi],dr=[0,0];Zi&&(dr=Ur,Ur=[0,0]);const kn=Mt.metrics.isDoubleResolution?2:1,Sn=(Mt.metrics.left-$t)*Mt.scale-ur+Ur[0],Tn=(-Mt.metrics.top-$t)*Mt.scale+Ur[1],ks=Sn+qe.w/kn*Mt.scale/oi,hr=Tn+qe.h/kn*Mt.scale/oi,on=new D(Sn,Tn),Hr=new D(ks,Tn),Cn=new D(Sn,hr),Wr=new D(ks,hr);if(Zi){const Ai=new D(-ur,ur-La),ts=-Math.PI/2,os=as/2-ur,ca=new D(5-La-os,-(Mt.imageName?os:0)),js=new D(...dr);on._rotateAround(ts,Ai)._add(ca)._add(js),Hr._rotateAround(ts,Ai)._add(ca)._add(js),Cn._rotateAround(ts,Ai)._add(ca)._add(js),Wr._rotateAround(ts,Ai)._add(ca)._add(js)}if(yt){const Ai=Math.sin(yt),ts=Math.cos(yt),os=[ts,-Ai,Ai,ts];on._matMult(os),Hr._matMult(os),Cn._matMult(os),Wr._matMult(os)}const Fa=new D(0,0),Yn=new D(0,0);Ft.push({tl:on,tr:Hr,bl:Cn,br:Wr,tex:qe,writingMode:we.writingMode,glyphOffset:oo,sectionIndex:Mt.sectionIndex,isSDF:Bt,pixelOffsetTL:Fa,pixelOffsetBR:Yn,minFontScaleX:0,minFontScaleY:0})}return Ft})(0,r,S,f,w,b,u,s.allowVerticalPlacement),de=s.textSizeData;let ge=null;de.kind==="source"?(ge=[la*f.layout.get("text-size").evaluate(b,{})],ge[0]>ao&&Ve(`${s.layerIds[0]}: Value for "text-size" is >= ${Cl}. Reduce your "text-size".`)):de.kind==="composite"&&(ge=[la*Z.compositeTextSizes[0].evaluate(b,{},J),la*Z.compositeTextSizes[1].evaluate(b,{},J)],(ge[0]>ao||ge[1]>ao)&&Ve(`${s.layerIds[0]}: Value for "text-size" is >= ${Cl}. Reduce your "text-size".`)),s.addSymbols(s.text,te,ge,S,w,b,A,t,C.lineStartIndex,C.lineLength,W,J);for(const Me of F)V[Me]=s.text.placedSymbolArray.length-1;return 4*te.length}function Vy(s){for(const t in s)return s[t];return null}function Fb(s,t,r,u){const f=s.compareText;if(t in f){const w=f[t];for(let b=w.length-1;b>=0;b--)if(u.dist(w[b])<r)return!0}else f[t]=[];return f[t].push(u),!1}const $y=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class pg{static from(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[r,u]=new Uint8Array(t,0,2);if(r!==219)throw new Error("Data does not appear to be in a KDBush format.");const f=u>>4;if(f!==1)throw new Error(`Got v${f} data when expected v1.`);const w=$y[15&u];if(!w)throw new Error("Unrecognized array type.");const[b]=new Uint16Array(t,2,1),[S]=new Uint32Array(t,4,1);return new pg(S,b,w,t)}constructor(t,r=64,u=Float64Array,f){if(isNaN(t)||t<0)throw new Error(`Unpexpected numItems value: ${t}.`);this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=u,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;const w=$y.indexOf(this.ArrayType),b=2*t*this.ArrayType.BYTES_PER_ELEMENT,S=t*this.IndexArrayType.BYTES_PER_ELEMENT,C=(8-S%8)%8;if(w<0)throw new Error(`Unexpected typed array class: ${u}.`);f&&f instanceof ArrayBuffer?(this.data=f,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+S+C,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+b+S+C),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+S+C,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+w]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}add(t,r){const u=this._pos>>1;return this.ids[u]=u,this.coords[this._pos++]=t,this.coords[this._pos++]=r,u}finish(){const t=this._pos>>1;if(t!==this.numItems)throw new Error(`Added ${t} items when expected ${this.numItems}.`);return mg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,r,u,f){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:w,coords:b,nodeSize:S}=this,C=[0,w.length-1,0],A=[];for(;C.length;){const F=C.pop()||0,V=C.pop()||0,W=C.pop()||0;if(V-W<=S){for(let de=W;de<=V;de++){const ge=b[2*de],Me=b[2*de+1];ge>=t&&ge<=u&&Me>=r&&Me<=f&&A.push(w[de])}continue}const Z=W+V>>1,J=b[2*Z],te=b[2*Z+1];J>=t&&J<=u&&te>=r&&te<=f&&A.push(w[Z]),(F===0?t<=J:r<=te)&&(C.push(W),C.push(Z-1),C.push(1-F)),(F===0?u>=J:f>=te)&&(C.push(Z+1),C.push(V),C.push(1-F))}return A}within(t,r,u){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:f,coords:w,nodeSize:b}=this,S=[0,f.length-1,0],C=[],A=u*u;for(;S.length;){const F=S.pop()||0,V=S.pop()||0,W=S.pop()||0;if(V-W<=b){for(let de=W;de<=V;de++)Hy(w[2*de],w[2*de+1],t,r)<=A&&C.push(f[de]);continue}const Z=W+V>>1,J=w[2*Z],te=w[2*Z+1];Hy(J,te,t,r)<=A&&C.push(f[Z]),(F===0?t-u<=J:r-u<=te)&&(S.push(W),S.push(Z-1),S.push(1-F)),(F===0?t+u>=J:r+u>=te)&&(S.push(Z+1),S.push(V),S.push(1-F))}return C}}function mg(s,t,r,u,f,w){if(f-u<=r)return;const b=u+f>>1;Uy(s,t,b,u,f,w),mg(s,t,r,u,b-1,1-w),mg(s,t,r,b+1,f,1-w)}function Uy(s,t,r,u,f,w){for(;f>u;){if(f-u>600){const A=f-u+1,F=r-u+1,V=Math.log(A),W=.5*Math.exp(2*V/3),Z=.5*Math.sqrt(V*W*(A-W)/A)*(F-A/2<0?-1:1);Uy(s,t,r,Math.max(u,Math.floor(r-F*W/A+Z)),Math.min(f,Math.floor(r+(A-F)*W/A+Z)),w)}const b=t[2*r+w];let S=u,C=f;for(Up(s,t,u,r),t[2*f+w]>b&&Up(s,t,u,f);S<C;){for(Up(s,t,S,C),S++,C--;t[2*S+w]<b;)S++;for(;t[2*C+w]>b;)C--}t[2*u+w]===b?Up(s,t,u,C):(C++,Up(s,t,C,f)),C<=r&&(u=C+1),r<=C&&(f=C-1)}}function Up(s,t,r,u){fg(s,r,u),fg(t,2*r,2*u),fg(t,2*r+1,2*u+1)}function fg(s,t,r){const u=s[t];s[t]=s[r],s[r]=u}function Hy(s,t,r,u){const f=s-r,w=t-u;return f*f+w*w}var gg;_.bg=void 0,(gg=_.bg||(_.bg={})).create="create",gg.load="load",gg.fullLoad="fullLoad";let mf=null,Hp=[];const xg=1e3/60,yg="loadTime",vg="fullLoadTime",Ob={mark(s){performance.mark(s)},frame(s){const t=s;mf!=null&&Hp.push(t-mf),mf=t},clearMetrics(){mf=null,Hp=[],performance.clearMeasures(yg),performance.clearMeasures(vg);for(const s in _.bg)performance.clearMarks(_.bg[s])},getPerformanceMetrics(){performance.measure(yg,_.bg.create,_.bg.load),performance.measure(vg,_.bg.create,_.bg.fullLoad);const s=performance.getEntriesByName(yg)[0].duration,t=performance.getEntriesByName(vg)[0].duration,r=Hp.length,u=1/(Hp.reduce(((w,b)=>w+b),0)/r/1e3),f=Hp.filter((w=>w>xg)).reduce(((w,b)=>w+(b-xg)/xg),0);return{loadTime:s,fullLoadTime:t,fps:u,percentDroppedFrames:f/(r+f)*100,totalFrames:r}}};_.$=class extends ${},_.A=tu,_.B=Vu,_.C=function(s){if(Et==null){const t=s.navigator?s.navigator.userAgent:null;Et=!!s.safari||!(!t||!(/\b(iPad|iPhone|iPod)\b/.test(t)||t.match("Safari")&&!t.match("Chrome")))}return Et},_.D=Pt,_.E=pa,_.F=class{constructor(s,t){this.target=s,this.mapId=t,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new n((()=>this.process())),this.subscription=(function(r,u,f,w){return r.addEventListener(u,f,!1),{unsubscribe:()=>{r.removeEventListener(u,f,!1)}}})(this.target,"message",(r=>this.receive(r))),this.globalScope=Tt(self)?s:window}registerMessageHandler(s,t){this.messageHandlers[s]=t}sendAsync(s,t){return new Promise(((r,u)=>{const f=Math.round(1e18*Math.random()).toString(36).substring(0,10);this.resolveRejects[f]={resolve:r,reject:u},t&&t.signal.addEventListener("abort",(()=>{delete this.resolveRejects[f];const S={id:f,type:"<cancel>",origin:location.origin,targetMapId:s.targetMapId,sourceMapId:this.mapId};this.target.postMessage(S)}),{once:!0});const w=[],b=Object.assign(Object.assign({},s),{id:f,sourceMapId:this.mapId,origin:location.origin,data:jr(s.data,w)});this.target.postMessage(b,{transfer:w})}))}receive(s){const t=s.data,r=t.id;if(!(t.origin!=="file://"&&location.origin!=="file://"&&t.origin!=="resource://android"&&location.origin!=="resource://android"&&t.origin!==location.origin||t.targetMapId&&this.mapId!==t.targetMapId)){if(t.type==="<cancel>"){delete this.tasks[r];const u=this.abortControllers[r];return delete this.abortControllers[r],void(u&&u.abort())}if(Tt(self)||t.mustQueue)return this.tasks[r]=t,this.taskQueue.push(r),void this.invoker.trigger();this.processTask(r,t)}}process(){if(this.taskQueue.length===0)return;const s=this.taskQueue.shift(),t=this.tasks[s];delete this.tasks[s],this.taskQueue.length>0&&this.invoker.trigger(),t&&this.processTask(s,t)}processTask(s,t){return d(this,void 0,void 0,(function*(){if(t.type==="<response>"){const f=this.resolveRejects[s];return delete this.resolveRejects[s],f?void(t.error?f.reject(ra(t.error)):f.resolve(ra(t.data))):void 0}if(!this.messageHandlers[t.type])return void this.completeTask(s,new Error(`Could not find a registered handler for ${t.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const r=ra(t.data),u=new AbortController;this.abortControllers[s]=u;try{const f=yield this.messageHandlers[t.type](t.sourceMapId,r,u);this.completeTask(s,null,f)}catch(f){this.completeTask(s,f)}}))}completeTask(s,t,r){const u=[];delete this.abortControllers[s];const f={id:s,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:t?jr(t):null,data:jr(r,u)};this.target.postMessage(f,{transfer:u})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},_.G=ti,_.H=function(){var s=new tu(16);return tu!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},_.I=Bp,_.J=function(s,t,r){var u,f,w,b,S,C,A,F,V,W,Z,J,te=r[0],de=r[1],ge=r[2];return t===s?(s[12]=t[0]*te+t[4]*de+t[8]*ge+t[12],s[13]=t[1]*te+t[5]*de+t[9]*ge+t[13],s[14]=t[2]*te+t[6]*de+t[10]*ge+t[14],s[15]=t[3]*te+t[7]*de+t[11]*ge+t[15]):(f=t[1],w=t[2],b=t[3],S=t[4],C=t[5],A=t[6],F=t[7],V=t[8],W=t[9],Z=t[10],J=t[11],s[0]=u=t[0],s[1]=f,s[2]=w,s[3]=b,s[4]=S,s[5]=C,s[6]=A,s[7]=F,s[8]=V,s[9]=W,s[10]=Z,s[11]=J,s[12]=u*te+S*de+V*ge+t[12],s[13]=f*te+C*de+W*ge+t[13],s[14]=w*te+A*de+Z*ge+t[14],s[15]=b*te+F*de+J*ge+t[15]),s},_.K=function(s,t,r){var u=r[0],f=r[1],w=r[2];return s[0]=t[0]*u,s[1]=t[1]*u,s[2]=t[2]*u,s[3]=t[3]*u,s[4]=t[4]*f,s[5]=t[5]*f,s[6]=t[6]*f,s[7]=t[7]*f,s[8]=t[8]*w,s[9]=t[9]*w,s[10]=t[10]*w,s[11]=t[11]*w,s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},_.L=kp,_.M=function(s,t){const r={};for(let u=0;u<t.length;u++){const f=t[u];f in s&&(r[f]=s[f])}return r},_.N=g,_.O=L,_.P=D,_.Q=Y,_.R=cr,_.S=bt,_.T=er,_.U=pe,_.V=Pe,_.W=Nt,_.X=bs,_.Y=T,_.Z=$e,_._=d,_.a=_t,_.a$=function(s,t){var r=s[0],u=s[1],f=s[2],w=s[3],b=s[4],S=s[5],C=s[6],A=s[7],F=s[8],V=s[9],W=s[10],Z=s[11],J=s[12],te=s[13],de=s[14],ge=s[15],Me=t[0],we=t[1],Ee=t[2],Ue=t[3],Ke=t[4],St=t[5],Qt=t[6],jt=t[7],yt=t[8],Ft=t[9],It=t[10],Mt=t[11],qe=t[12],$t=t[13],Bt=t[14],oi=t[15];return Math.abs(r-Me)<=Br*Math.max(1,Math.abs(r),Math.abs(Me))&&Math.abs(u-we)<=Br*Math.max(1,Math.abs(u),Math.abs(we))&&Math.abs(f-Ee)<=Br*Math.max(1,Math.abs(f),Math.abs(Ee))&&Math.abs(w-Ue)<=Br*Math.max(1,Math.abs(w),Math.abs(Ue))&&Math.abs(b-Ke)<=Br*Math.max(1,Math.abs(b),Math.abs(Ke))&&Math.abs(S-St)<=Br*Math.max(1,Math.abs(S),Math.abs(St))&&Math.abs(C-Qt)<=Br*Math.max(1,Math.abs(C),Math.abs(Qt))&&Math.abs(A-jt)<=Br*Math.max(1,Math.abs(A),Math.abs(jt))&&Math.abs(F-yt)<=Br*Math.max(1,Math.abs(F),Math.abs(yt))&&Math.abs(V-Ft)<=Br*Math.max(1,Math.abs(V),Math.abs(Ft))&&Math.abs(W-It)<=Br*Math.max(1,Math.abs(W),Math.abs(It))&&Math.abs(Z-Mt)<=Br*Math.max(1,Math.abs(Z),Math.abs(Mt))&&Math.abs(J-qe)<=Br*Math.max(1,Math.abs(J),Math.abs(qe))&&Math.abs(te-$t)<=Br*Math.max(1,Math.abs(te),Math.abs($t))&&Math.abs(de-Bt)<=Br*Math.max(1,Math.abs(de),Math.abs(Bt))&&Math.abs(ge-oi)<=Br*Math.max(1,Math.abs(ge),Math.abs(oi))},_.a0=vi,_.a1=nt,_.a2=st,_.a3=s=>{const t=window.document.createElement("video");return t.muted=!0,new Promise((r=>{t.onloadstart=()=>{r(t)};for(const u of s){const f=window.document.createElement("source");Bi(u)||(t.crossOrigin="Anonymous"),f.src=u,t.appendChild(f)}}))},_.a4=function(){return je++},_.a5=xt,_.a6=cu,_.a7=Jl,_.a8=vl,_.a9=De,_.aA=function(s){if(s.type==="custom")return new Ah(s);switch(s.type){case"background":return new Mh(s);case"circle":return new Kf(s);case"fill":return new eg(s);case"fill-extrusion":return new qm(s);case"heatmap":return new Qf(s);case"hillshade":return new Mm(s);case"line":return new au(s);case"raster":return new cg(s);case"symbol":return new gc(s)}},_.aB=ct,_.aC=function(s,t){if(!s)return[{command:"setStyle",args:[t]}];let r=[];try{if(!hi(s.version,t.version))return[{command:"setStyle",args:[t]}];hi(s.center,t.center)||r.push({command:"setCenter",args:[t.center]}),hi(s.zoom,t.zoom)||r.push({command:"setZoom",args:[t.zoom]}),hi(s.bearing,t.bearing)||r.push({command:"setBearing",args:[t.bearing]}),hi(s.pitch,t.pitch)||r.push({command:"setPitch",args:[t.pitch]}),hi(s.sprite,t.sprite)||r.push({command:"setSprite",args:[t.sprite]}),hi(s.glyphs,t.glyphs)||r.push({command:"setGlyphs",args:[t.glyphs]}),hi(s.transition,t.transition)||r.push({command:"setTransition",args:[t.transition]}),hi(s.light,t.light)||r.push({command:"setLight",args:[t.light]}),hi(s.terrain,t.terrain)||r.push({command:"setTerrain",args:[t.terrain]}),hi(s.sky,t.sky)||r.push({command:"setSky",args:[t.sky]}),hi(s.projection,t.projection)||r.push({command:"setProjection",args:[t.projection]});const u={},f=[];(function(b,S,C,A){let F;for(F in S=S||{},b=b||{})Object.prototype.hasOwnProperty.call(b,F)&&(Object.prototype.hasOwnProperty.call(S,F)||ss(F,C,A));for(F in S)Object.prototype.hasOwnProperty.call(S,F)&&(Object.prototype.hasOwnProperty.call(b,F)?hi(b[F],S[F])||(b[F].type==="geojson"&&S[F].type==="geojson"&&fa(b,S,F)?Fi(C,{command:"setGeoJSONSourceData",args:[F,S[F].data]}):Js(F,S,C,A)):dn(F,S,C))})(s.sources,t.sources,f,u);const w=[];s.layers&&s.layers.forEach((b=>{"source"in b&&u[b.source]?r.push({command:"removeLayer",args:[b.id]}):w.push(b)})),r=r.concat(f),(function(b,S,C){S=S||[];const A=(b=b||[]).map(Mn),F=S.map(Mn),V=b.reduce(ga,{}),W=S.reduce(ga,{}),Z=A.slice(),J=Object.create(null);let te,de,ge,Me,we;for(let Ee=0,Ue=0;Ee<A.length;Ee++)te=A[Ee],Object.prototype.hasOwnProperty.call(W,te)?Ue++:(Fi(C,{command:"removeLayer",args:[te]}),Z.splice(Z.indexOf(te,Ue),1));for(let Ee=0,Ue=0;Ee<F.length;Ee++)te=F[F.length-1-Ee],Z[Z.length-1-Ee]!==te&&(Object.prototype.hasOwnProperty.call(V,te)?(Fi(C,{command:"removeLayer",args:[te]}),Z.splice(Z.lastIndexOf(te,Z.length-Ue),1)):Ue++,Me=Z[Z.length-Ee],Fi(C,{command:"addLayer",args:[W[te],Me]}),Z.splice(Z.length-Ee,0,te),J[te]=!0);for(let Ee=0;Ee<F.length;Ee++)if(te=F[Ee],de=V[te],ge=W[te],!J[te]&&!hi(de,ge))if(hi(de.source,ge.source)&&hi(de["source-layer"],ge["source-layer"])&&hi(de.type,ge.type)){for(we in fr(de.layout,ge.layout,C,te,null,"setLayoutProperty"),fr(de.paint,ge.paint,C,te,null,"setPaintProperty"),hi(de.filter,ge.filter)||Fi(C,{command:"setFilter",args:[te,ge.filter]}),hi(de.minzoom,ge.minzoom)&&hi(de.maxzoom,ge.maxzoom)||Fi(C,{command:"setLayerZoomRange",args:[te,ge.minzoom,ge.maxzoom]}),de)Object.prototype.hasOwnProperty.call(de,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?fr(de[we],ge[we],C,te,we.slice(6),"setPaintProperty"):hi(de[we],ge[we])||Fi(C,{command:"setLayerProperty",args:[te,we,ge[we]]}));for(we in ge)Object.prototype.hasOwnProperty.call(ge,we)&&!Object.prototype.hasOwnProperty.call(de,we)&&we!=="layout"&&we!=="paint"&&we!=="filter"&&we!=="metadata"&&we!=="minzoom"&&we!=="maxzoom"&&(we.indexOf("paint.")===0?fr(de[we],ge[we],C,te,we.slice(6),"setPaintProperty"):hi(de[we],ge[we])||Fi(C,{command:"setLayerProperty",args:[te,we,ge[we]]}))}else Fi(C,{command:"removeLayer",args:[te]}),Me=Z[Z.lastIndexOf(te)+1],Fi(C,{command:"addLayer",args:[ge,Me]})})(w,t.layers,r)}catch(u){console.warn("Unable to compute style diff:",u),r=[{command:"setStyle",args:[t]}]}return r},_.aD=function(s){const t=[],r=s.id;return r===void 0&&t.push({message:`layers.${r}: missing required property "id"`}),s.render===void 0&&t.push({message:`layers.${r}: missing required method "render"`}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&t.push({message:`layers.${r}: property "renderingMode" must be either "2d" or "3d"`}),t},_.aE=function s(t,r){if(Array.isArray(t)){if(!Array.isArray(r)||t.length!==r.length)return!1;for(let u=0;u<t.length;u++)if(!s(t[u],r[u]))return!1;return!0}if(typeof t=="object"&&t!==null&&r!==null){if(typeof r!="object"||Object.keys(t).length!==Object.keys(r).length)return!1;for(const u in t)if(!s(t[u],r[u]))return!1;return!0}return t===r},_.aF=Ae,_.aG=He,_.aH=class extends cs{constructor(s,t){super(s,t),this.current=0}set(s){this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},_.aI=As,_.aJ=class extends cs{constructor(s,t){super(s,t),this.current=Gu}set(s){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let t=1;t<16;t++)if(s[t]!==this.current[t]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}},_.aK=qu,_.aL=Qc,_.aM=ai,_.aN=class extends cs{constructor(s,t){super(s,t),this.current=[0,0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2]))}},_.aO=class extends cs{constructor(s,t){super(s,t),this.current=[0,0]}set(s){s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1]))}},_.aP=function(s,t,r,u,f,w,b){var S=1/(t-r),C=1/(u-f),A=1/(w-b);return s[0]=-2*S,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*C,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*A,s[11]=0,s[12]=(t+r)*S,s[13]=(f+u)*C,s[14]=(b+w)*A,s[15]=1,s},_.aQ=ah,_.aR=class extends Ne{},_.aS=ld,_.aT=class extends ze{},_.aU=Qu,_.aV=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},_.aW=hh,_.aX=ms,_.aY=vn,_.aZ=class extends At{},_.a_=function(s,t){return s[0]===t[0]&&s[1]===t[1]&&s[2]===t[2]&&s[3]===t[3]&&s[4]===t[4]&&s[5]===t[5]&&s[6]===t[6]&&s[7]===t[7]&&s[8]===t[8]&&s[9]===t[9]&&s[10]===t[10]&&s[11]===t[11]&&s[12]===t[12]&&s[13]===t[13]&&s[14]===t[14]&&s[15]===t[15]},_.aa=function(s){const t={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((r,u,f,w)=>{const b=f||w;return t[u]=!b||b.toLowerCase(),""})),t["max-age"]){const r=parseInt(t["max-age"],10);isNaN(r)?delete t["max-age"]:t["max-age"]=r}return t},_.ab=function(s,t){const r=[];for(const u in s)u in t||r.push(u);return r},_.ac=Je,_.ad=function(s,t,r){var u=Math.sin(r),f=Math.cos(r),w=t[0],b=t[1],S=t[2],C=t[3],A=t[4],F=t[5],V=t[6],W=t[7];return t!==s&&(s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[0]=w*f+A*u,s[1]=b*f+F*u,s[2]=S*f+V*u,s[3]=C*f+W*u,s[4]=A*f-w*u,s[5]=F*f-b*u,s[6]=V*f-S*u,s[7]=W*f-C*u,s},_.ae=function(s){var t=new tu(16);return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},_.af=oh,_.ag=function(s,t){let r=0,u=0;if(s.kind==="constant")u=s.layoutSize;else if(s.kind!=="source"){const{interpolationType:f,minZoom:w,maxZoom:b}=s,S=f?Je(Us.interpolationFactor(f,t,w,b),0,1):0;s.kind==="camera"?u=_s.number(s.minSize,s.maxSize,S):r=S}return{uSizeT:r,uSize:u}},_.ai=function(s,{uSize:t,uSizeT:r},{lowerSize:u,upperSize:f}){return s.kind==="source"?u/la:s.kind==="composite"?_s.number(u/la,f/la,r):t},_.aj=lu,_.ak=function(s,t,r,u){const f=t.y-s.y,w=t.x-s.x,b=u.y-r.y,S=u.x-r.x,C=b*w-S*f;if(C===0)return null;const A=(S*(s.y-r.y)-b*(s.x-r.x))/C;return new D(s.x+A*w,s.y+A*f)},_.al=ri,_.am=_p,_.an=nh,_.ao=function(s){let t=1/0,r=1/0,u=-1/0,f=-1/0;for(const w of s)t=Math.min(t,w.x),r=Math.min(r,w.y),u=Math.max(u,w.x),f=Math.max(f,w.y);return[t,r,u,f]},_.ap=as,_.ar=yd,_.as=function(s,t){var r=t[0],u=t[1],f=t[2],w=t[3],b=t[4],S=t[5],C=t[6],A=t[7],F=t[8],V=t[9],W=t[10],Z=t[11],J=t[12],te=t[13],de=t[14],ge=t[15],Me=r*S-u*b,we=r*C-f*b,Ee=r*A-w*b,Ue=u*C-f*S,Ke=u*A-w*S,St=f*A-w*C,Qt=F*te-V*J,jt=F*de-W*J,yt=F*ge-Z*J,Ft=V*de-W*te,It=V*ge-Z*te,Mt=W*ge-Z*de,qe=Me*Mt-we*It+Ee*Ft+Ue*yt-Ke*jt+St*Qt;return qe?(s[0]=(S*Mt-C*It+A*Ft)*(qe=1/qe),s[1]=(f*It-u*Mt-w*Ft)*qe,s[2]=(te*St-de*Ke+ge*Ue)*qe,s[3]=(W*Ke-V*St-Z*Ue)*qe,s[4]=(C*yt-b*Mt-A*jt)*qe,s[5]=(r*Mt-f*yt+w*jt)*qe,s[6]=(de*Ee-J*St-ge*we)*qe,s[7]=(F*St-W*Ee+Z*we)*qe,s[8]=(b*It-S*yt+A*Qt)*qe,s[9]=(u*yt-r*It-w*Qt)*qe,s[10]=(J*Ke-te*Ee+ge*Me)*qe,s[11]=(V*Ee-F*Ke-Z*Me)*qe,s[12]=(S*jt-b*Ft-C*Qt)*qe,s[13]=(r*Ft-u*jt+f*Qt)*qe,s[14]=(te*we-J*Ue-de*Me)*qe,s[15]=(F*Ue-V*we+W*Me)*qe,s):null},_.at=hg,_.au=gd,_.av=pg,_.aw=function(){const s={},t=Oe.$version;for(const r in Oe.$root){const u=Oe.$root[r];if(u.required){let f=null;f=r==="version"?t:u.type==="array"?[]:{},f!=null&&(s[r]=f)}}return s},_.ax=Bn,_.ay=Rt,_.az=function(s){s=s.slice();const t=Object.create(null);for(let r=0;r<s.length;r++)t[s[r].id]=s[r];for(let r=0;r<s.length;r++)"ref"in s[r]&&(s[r]=ma(s[r],t[s[r].ref]));return s},_.b=gt,_.b0=function(s,t){return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},_.b1=function(s,t,r){return s[0]=t[0]*r[0],s[1]=t[1]*r[1],s[2]=t[2]*r[2],s[3]=t[3]*r[3],s},_.b2=function(s,t){return s[0]*t[0]+s[1]*t[1]+s[2]*t[2]+s[3]*t[3]},_.b3=Xe,_.b4=Qe,_.b5=fe,_.b6=function(s,t,r,u,f){var w,b=1/Math.tan(t/2);return s[0]=b/r,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=b,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,f!=null&&f!==1/0?(s[10]=(f+u)*(w=1/(u-f)),s[14]=2*f*u*w):(s[10]=-1,s[14]=-2*u),s},_.b7=function(s,t,r){var u=Math.sin(r),f=Math.cos(r),w=t[4],b=t[5],S=t[6],C=t[7],A=t[8],F=t[9],V=t[10],W=t[11];return t!==s&&(s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15]),s[4]=w*f+A*u,s[5]=b*f+F*u,s[6]=S*f+V*u,s[7]=C*f+W*u,s[8]=A*f-w*u,s[9]=F*f-b*u,s[10]=V*f-S*u,s[11]=W*f-C*u,s},_.b8=Ie,_.b9=Ze,_.bA=no,_.bB=function(s){return s.message===Ye},_.bC=Po,_.bD=Vi,_.ba=function(s){return s*Math.PI/180},_.bb=function(s,t){const{x:r,y:u}=$e.fromLngLat(t);return!(s<0||s>25||u<0||u>=1||r<0||r>=1)},_.bc=function(s,t){return s[0]=t[0],s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=t[1],s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=t[2],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s},_.bd=class extends B{},_.be=c,_.bf=Ob,_.bh=Ot,_.bi=function(s,t){_t.REGISTERED_PROTOCOLS[s]=t},_.bj=function(s){delete _t.REGISTERED_PROTOCOLS[s]},_.bk=function(s,t){const r={};for(let f=0;f<s.length;f++){const w=t&&t[s[f].id]||Ru(s[f]);t&&(t[s[f].id]=w);let b=r[w];b||(b=r[w]=[]),b.push(s[f])}const u=[];for(const f in r)u.push(r[f]);return u},_.bl=Ct,_.bm=Ns,_.bn=Te,_.bo=Fp,_.bp=function(s){s.bucket.createArrays(),s.bucket.tilePixelRatio=bs/(512*s.bucket.overscaling),s.bucket.compareText={},s.bucket.iconsNeedLinear=!1;const t=s.bucket.layers[0],r=t.layout,u=t._unevaluatedLayout._values,f={layoutIconSize:u["icon-size"].possiblyEvaluate(new bi(s.bucket.zoom+1),s.canonical),layoutTextSize:u["text-size"].possiblyEvaluate(new bi(s.bucket.zoom+1),s.canonical),textMaxSize:u["text-size"].possiblyEvaluate(new bi(18))};if(s.bucket.textSizeData.kind==="composite"){const{minZoom:A,maxZoom:F}=s.bucket.textSizeData;f.compositeTextSizes=[u["text-size"].possiblyEvaluate(new bi(A),s.canonical),u["text-size"].possiblyEvaluate(new bi(F),s.canonical)]}if(s.bucket.iconSizeData.kind==="composite"){const{minZoom:A,maxZoom:F}=s.bucket.iconSizeData;f.compositeIconSizes=[u["icon-size"].possiblyEvaluate(new bi(A),s.canonical),u["icon-size"].possiblyEvaluate(new bi(F),s.canonical)]}const w=r.get("text-line-height")*as,b=r.get("text-rotation-alignment")!=="viewport"&&r.get("symbol-placement")!=="point",S=r.get("text-keep-upright"),C=r.get("text-size");for(const A of s.bucket.features){const F=r.get("text-font").evaluate(A,{},s.canonical).join(","),V=C.evaluate(A,{},s.canonical),W=f.layoutTextSize.evaluate(A,{},s.canonical),Z=f.layoutIconSize.evaluate(A,{},s.canonical),J={horizontal:{},vertical:void 0},te=A.text;let de,ge=[0,0];if(te){const Ee=te.toString(),Ue=r.get("text-letter-spacing").evaluate(A,{},s.canonical)*as,Ke=gp(Ee)?Ue:0,St=r.get("text-anchor").evaluate(A,{},s.canonical),Qt=Fy(t,A,s.canonical);if(!Qt){const It=r.get("text-radial-offset").evaluate(A,{},s.canonical);ge=It?By(St,[It*as,dg]):r.get("text-offset").evaluate(A,{},s.canonical).map((Mt=>Mt*as))}let jt=b?"center":r.get("text-justify").evaluate(A,{},s.canonical);const yt=r.get("symbol-placement")==="point"?r.get("text-max-width").evaluate(A,{},s.canonical)*as:1/0,Ft=()=>{s.bucket.allowVerticalPlacement&&$u(Ee)&&(J.vertical=fd(te,s.glyphMap,s.glyphPositions,s.imagePositions,F,yt,w,St,"left",Ke,ge,_.ah.vertical,!0,W,V))};if(!b&&Qt){const It=new Set;if(jt==="auto")for(let qe=0;qe<Qt.values.length;qe+=2)It.add(hg(Qt.values[qe]));else It.add(jt);let Mt=!1;for(const qe of It)if(!J.horizontal[qe])if(Mt)J.horizontal[qe]=J.horizontal[0];else{const $t=fd(te,s.glyphMap,s.glyphPositions,s.imagePositions,F,yt,w,"center",qe,Ke,ge,_.ah.horizontal,!1,W,V);$t&&(J.horizontal[qe]=$t,Mt=$t.positionedLines.length===1)}Ft()}else{jt==="auto"&&(jt=hg(St));const It=fd(te,s.glyphMap,s.glyphPositions,s.imagePositions,F,yt,w,St,jt,Ke,ge,_.ah.horizontal,!1,W,V);It&&(J.horizontal[jt]=It),Ft(),$u(Ee)&&b&&S&&(J.vertical=fd(te,s.glyphMap,s.glyphPositions,s.imagePositions,F,yt,w,St,jt,Ke,ge,_.ah.vertical,!1,W,V))}}let Me=!1;if(A.icon&&A.icon.name){const Ee=s.imageMap[A.icon.name];Ee&&(de=Sl(s.imagePositions[A.icon.name],r.get("icon-offset").evaluate(A,{},s.canonical),r.get("icon-anchor").evaluate(A,{},s.canonical)),Me=!!Ee.sdf,s.bucket.sdfIcons===void 0?s.bucket.sdfIcons=Me:s.bucket.sdfIcons!==Me&&Ve("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ee.pixelRatio!==s.bucket.pixelRatio||r.get("icon-rotate").constantOr(1)!==0)&&(s.bucket.iconsNeedLinear=!0))}const we=Vy(J.horizontal)||J.vertical;s.bucket.iconsInText=!!we&&we.iconsInText,(we||de)&&Bb(s.bucket,A,J,de,s.imageMap,f,W,Z,ge,Me,s.canonical)}s.showCollisionBoxes&&s.bucket.generateCollisionDebugBuffers()},_.bq=wn,_.br=gh,_.bs=Zn,_.bt=wl,_.bu=Bo,_.bv=class{constructor(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let s=performance.getEntriesByName(this._marks.measure);return s.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),s=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),s}},_.bw=function(s,t,r,u,f){return d(this,void 0,void 0,(function*(){if(Pe())try{return yield Nt(s,t,r,u,f)}catch{}return(function(w,b,S,C,A){const F=w.width,V=w.height;it&&Se||(it=new OffscreenCanvas(F,V),Se=it.getContext("2d",{willReadFrequently:!0})),it.width=F,it.height=V,Se.drawImage(w,0,0,F,V);const W=Se.getImageData(b,S,C,A);return Se.clearRect(0,0,F,V),W.data})(s,t,r,u,f)}))},_.bx=Wt,_.by=I,_.bz=z,_.c=ot,_.d=s=>d(void 0,void 0,void 0,(function*(){if(s.byteLength===0)return createImageBitmap(new ImageData(1,1));const t=new Blob([new Uint8Array(s)],{type:"image/png"});try{return createImageBitmap(t)}catch(r){throw new Error(`Could not load image because of ${r.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),_.e=ut,_.f=s=>new Promise(((t,r)=>{const u=new Image;u.onload=()=>{t(u),URL.revokeObjectURL(u.src),u.onload=null,window.requestAnimationFrame((()=>{u.src=Be}))},u.onerror=()=>r(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const f=new Blob([new Uint8Array(s)],{type:"image/png"});u.src=s.byteLength?URL.createObjectURL(f):Be})),_.g=zt,_.h=(s,t)=>xi(ut(s,{type:"json"}),t),_.i=Tt,_.j=Pr,_.k=Gr,_.l=(s,t)=>xi(ut(s,{type:"arrayBuffer"}),t),_.m=xi,_.n=function(s){return new Bo(s).readFields(fc,[])},_.o=cc,_.p=pd,_.q=v,_.r=Ou,_.s=Bi,_.t=Yc,_.u=Pa,_.v=Oe,_.w=Ve,_.x=function([s,t,r]){return t+=90,t*=Math.PI/180,r*=Math.PI/180,{x:s*Math.cos(t)*Math.sin(r),y:s*Math.sin(t)*Math.sin(r),z:s*Math.cos(r)}},_.y=_s,_.z=bi})),j("worker",["./shared"],(function(_){class d{constructor(H){this.keyCache={},H&&this.replace(H)}replace(H){this._layerConfigs={},this._layers={},this.update(H,[])}update(H,q){for(const oe of H){this._layerConfigs[oe.id]=oe;const ve=this._layers[oe.id]=_.aA(oe);ve._featureFilter=_.a7(ve.filter),this.keyCache[oe.id]&&delete this.keyCache[oe.id]}for(const oe of q)delete this.keyCache[oe],delete this._layerConfigs[oe],delete this._layers[oe];this.familiesBySource={};const K=_.bk(Object.values(this._layerConfigs),this.keyCache);for(const oe of K){const ve=oe.map((Re=>this._layers[Re.id])),_e=ve[0];if(_e.visibility==="none")continue;const ke=_e.source||"";let xe=this.familiesBySource[ke];xe||(xe=this.familiesBySource[ke]={});const Le=_e.sourceLayer||"_geojsonTileLayer";let We=xe[Le];We||(We=xe[Le]=[]),We.push(ve)}}}class I{constructor(H){const q={},K=[];for(const ke in H){const xe=H[ke],Le=q[ke]={};for(const We in xe){const Re=xe[+We];if(!Re||Re.bitmap.width===0||Re.bitmap.height===0)continue;const et={x:0,y:0,w:Re.bitmap.width+2,h:Re.bitmap.height+2};K.push(et),Le[We]={rect:et,metrics:Re.metrics}}}const{w:oe,h:ve}=_.p(K),_e=new _.o({width:oe||1,height:ve||1});for(const ke in H){const xe=H[ke];for(const Le in xe){const We=xe[+Le];if(!We||We.bitmap.width===0||We.bitmap.height===0)continue;const Re=q[ke][Le].rect;_.o.copy(We.bitmap,_e,{x:0,y:0},{x:Re.x+1,y:Re.y+1},We.bitmap)}}this.image=_e,this.positions=q}}_.bl("GlyphAtlas",I);class z{constructor(H){this.tileID=new _.S(H.tileID.overscaledZ,H.tileID.wrap,H.tileID.canonical.z,H.tileID.canonical.x,H.tileID.canonical.y),this.uid=H.uid,this.zoom=H.zoom,this.pixelRatio=H.pixelRatio,this.tileSize=H.tileSize,this.source=H.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=H.showCollisionBoxes,this.collectResourceTiming=!!H.collectResourceTiming,this.returnDependencies=!!H.returnDependencies,this.promoteId=H.promoteId,this.inFlightDependencies=[]}parse(H,q,K,oe){return _._(this,void 0,void 0,(function*(){this.status="parsing",this.data=H,this.collisionBoxArray=new _.a5;const ve=new _.bm(Object.keys(H.layers).sort()),_e=new _.bn(this.tileID,this.promoteId);_e.bucketLayerIDs=[];const ke={},xe={featureIndex:_e,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:K},Le=q.familiesBySource[this.source];for(const yi in Le){const Ii=H.layers[yi];if(!Ii)continue;Ii.version===1&&_.w(`Vector tile source "${this.source}" layer "${yi}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Yi=ve.encode(yi),Es=[];for(let $s=0;$s<Ii.length;$s++){const _r=Ii.feature($s),Go=_e.getId(_r,yi);Es.push({feature:_r,id:Go,index:$s,sourceLayerIndex:Yi})}for(const $s of Le[yi]){const _r=$s[0];_r.source!==this.source&&_.w(`layer.source = ${_r.source} does not equal this.source = ${this.source}`),_r.minzoom&&this.zoom<Math.floor(_r.minzoom)||_r.maxzoom&&this.zoom>=_r.maxzoom||_r.visibility!=="none"&&(R($s,this.zoom,K),(ke[_r.id]=_r.createBucket({index:_e.bucketLayerIDs.length,layers:$s,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Yi,sourceID:this.source})).populate(Es,xe,this.tileID.canonical),_e.bucketLayerIDs.push($s.map((Go=>Go.id))))}}const We=_.aF(xe.glyphDependencies,(yi=>Object.keys(yi).map(Number)));this.inFlightDependencies.forEach((yi=>yi?.abort())),this.inFlightDependencies=[];let Re=Promise.resolve({});if(Object.keys(We).length){const yi=new AbortController;this.inFlightDependencies.push(yi),Re=oe.sendAsync({type:"GG",data:{stacks:We,source:this.source,tileID:this.tileID,type:"glyphs"}},yi)}const et=Object.keys(xe.iconDependencies);let Dt=Promise.resolve({});if(et.length){const yi=new AbortController;this.inFlightDependencies.push(yi),Dt=oe.sendAsync({type:"GI",data:{icons:et,source:this.source,tileID:this.tileID,type:"icons"}},yi)}const Ht=Object.keys(xe.patternDependencies);let ki=Promise.resolve({});if(Ht.length){const yi=new AbortController;this.inFlightDependencies.push(yi),ki=oe.sendAsync({type:"GI",data:{icons:Ht,source:this.source,tileID:this.tileID,type:"patterns"}},yi)}const[li,Si,pi]=yield Promise.all([Re,Dt,ki]),ys=new I(li),rs=new _.bo(Si,pi);for(const yi in ke){const Ii=ke[yi];Ii instanceof _.a6?(R(Ii.layers,this.zoom,K),_.bp({bucket:Ii,glyphMap:li,glyphPositions:ys.positions,imageMap:Si,imagePositions:rs.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical})):Ii.hasPattern&&(Ii instanceof _.bq||Ii instanceof _.br||Ii instanceof _.bs)&&(R(Ii.layers,this.zoom,K),Ii.addFeatures(xe,this.tileID.canonical,rs.patternPositions))}return this.status="done",{buckets:Object.values(ke).filter((yi=>!yi.isEmpty())),featureIndex:_e,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ys.image,imageAtlas:rs,glyphMap:this.returnDependencies?li:null,iconMap:this.returnDependencies?Si:null,glyphPositions:this.returnDependencies?ys.positions:null}}))}}function R(he,H,q){const K=new _.z(H);for(const oe of he)oe.recalculate(K,q)}class D{constructor(H,q,K){this.actor=H,this.layerIndex=q,this.availableImages=K,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(H,q){return _._(this,void 0,void 0,(function*(){const K=yield _.l(H.request,q);try{return{vectorTile:new _.bt.VectorTile(new _.bu(K.data)),rawData:K.data,cacheControl:K.cacheControl,expires:K.expires}}catch(oe){const ve=new Uint8Array(K.data);let _e=`Unable to parse the tile at ${H.request.url}, `;throw _e+=ve[0]===31&&ve[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${oe.message}`,new Error(_e)}}))}loadTile(H){return _._(this,void 0,void 0,(function*(){const q=H.uid,K=!!(H&&H.request&&H.request.collectResourceTiming)&&new _.bv(H.request),oe=new z(H);this.loading[q]=oe;const ve=new AbortController;oe.abort=ve;try{const _e=yield this.loadVectorTile(H,ve);if(delete this.loading[q],!_e)return null;const ke=_e.rawData,xe={};_e.expires&&(xe.expires=_e.expires),_e.cacheControl&&(xe.cacheControl=_e.cacheControl);const Le={};if(K){const Re=K.finish();Re&&(Le.resourceTiming=JSON.parse(JSON.stringify(Re)))}oe.vectorTile=_e.vectorTile;const We=oe.parse(_e.vectorTile,this.layerIndex,this.availableImages,this.actor);this.loaded[q]=oe,this.fetching[q]={rawTileData:ke,cacheControl:xe,resourceTiming:Le};try{const Re=yield We;return _.e({rawTileData:ke.slice(0)},Re,xe,Le)}finally{delete this.fetching[q]}}catch(_e){throw delete this.loading[q],oe.status="done",this.loaded[q]=oe,_e}}))}reloadTile(H){return _._(this,void 0,void 0,(function*(){const q=H.uid;if(!this.loaded||!this.loaded[q])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const K=this.loaded[q];if(K.showCollisionBoxes=H.showCollisionBoxes,K.status==="parsing"){const oe=yield K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor);let ve;if(this.fetching[q]){const{rawTileData:_e,cacheControl:ke,resourceTiming:xe}=this.fetching[q];delete this.fetching[q],ve=_.e({rawTileData:_e.slice(0)},oe,ke,xe)}else ve=oe;return ve}if(K.status==="done"&&K.vectorTile)return K.parse(K.vectorTile,this.layerIndex,this.availableImages,this.actor)}))}abortTile(H){return _._(this,void 0,void 0,(function*(){const q=this.loading,K=H.uid;q&&q[K]&&q[K].abort&&(q[K].abort.abort(),delete q[K])}))}removeTile(H){return _._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[H.uid]&&delete this.loaded[H.uid]}))}}class O{constructor(){this.loaded={}}loadTile(H){return _._(this,void 0,void 0,(function*(){const{uid:q,encoding:K,rawImageData:oe,redFactor:ve,greenFactor:_e,blueFactor:ke,baseShift:xe}=H,Le=oe.width+2,We=oe.height+2,Re=_.b(oe)?new _.R({width:Le,height:We},yield _.bw(oe,-1,-1,Le,We)):oe,et=new _.bx(q,Re,K,ve,_e,ke,xe);return this.loaded=this.loaded||{},this.loaded[q]=et,et}))}removeTile(H){const q=this.loaded,K=H.uid;q&&q[K]&&delete q[K]}}function ie(he,H){if(he.length!==0){Q(he[0],H);for(var q=1;q<he.length;q++)Q(he[q],!H)}}function Q(he,H){for(var q=0,K=0,oe=0,ve=he.length,_e=ve-1;oe<ve;_e=oe++){var ke=(he[oe][0]-he[_e][0])*(he[_e][1]+he[oe][1]),xe=q+ke;K+=Math.abs(q)>=Math.abs(ke)?q-xe+ke:ke-xe+q,q=xe}q+K>=0!=!!H&&he.reverse()}var ae=_.by((function he(H,q){var K,oe=H&&H.type;if(oe==="FeatureCollection")for(K=0;K<H.features.length;K++)he(H.features[K],q);else if(oe==="GeometryCollection")for(K=0;K<H.geometries.length;K++)he(H.geometries[K],q);else if(oe==="Feature")he(H.geometry,q);else if(oe==="Polygon")ie(H.coordinates,q);else if(oe==="MultiPolygon")for(K=0;K<H.coordinates.length;K++)ie(H.coordinates[K],q);return H}));const se=_.bt.VectorTileFeature.prototype.toGeoJSON;var pe={exports:{}},Pe=_.bz,Ie=_.bt.VectorTileFeature,Ze=Je;function Je(he,H){this.options=H||{},this.features=he,this.length=he.length}function Xe(he,H){this.id=typeof he.id=="number"?he.id:void 0,this.type=he.type,this.rawGeometry=he.type===1?[he.geometry]:he.geometry,this.properties=he.tags,this.extent=H||4096}Je.prototype.feature=function(he){return new Xe(this.features[he],this.options.extent)},Xe.prototype.loadGeometry=function(){var he=this.rawGeometry;this.geometry=[];for(var H=0;H<he.length;H++){for(var q=he[H],K=[],oe=0;oe<q.length;oe++)K.push(new Pe(q[oe][0],q[oe][1]));this.geometry.push(K)}return this.geometry},Xe.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var he=this.geometry,H=1/0,q=-1/0,K=1/0,oe=-1/0,ve=0;ve<he.length;ve++)for(var _e=he[ve],ke=0;ke<_e.length;ke++){var xe=_e[ke];H=Math.min(H,xe.x),q=Math.max(q,xe.x),K=Math.min(K,xe.y),oe=Math.max(oe,xe.y)}return[H,K,q,oe]},Xe.prototype.toGeoJSON=Ie.prototype.toGeoJSON;var ut=_.bA,je=Ze;function Ae(he){var H=new ut;return(function(q,K){for(var oe in q.layers)K.writeMessage(3,He,q.layers[oe])})(he,H),H.finish()}function He(he,H){var q;H.writeVarintField(15,he.version||1),H.writeStringField(1,he.name||""),H.writeVarintField(5,he.extent||4096);var K={keys:[],values:[],keycache:{},valuecache:{}};for(q=0;q<he.length;q++)K.feature=he.feature(q),H.writeMessage(2,ct,K);var oe=K.keys;for(q=0;q<oe.length;q++)H.writeStringField(3,oe[q]);var ve=K.values;for(q=0;q<ve.length;q++)H.writeMessage(4,Et,ve[q])}function ct(he,H){var q=he.feature;q.id!==void 0&&H.writeVarintField(1,q.id),H.writeMessage(2,Jt,he),H.writeVarintField(3,q.type),H.writeMessage(4,Tt,q)}function Jt(he,H){var q=he.feature,K=he.keys,oe=he.values,ve=he.keycache,_e=he.valuecache;for(var ke in q.properties){var xe=q.properties[ke],Le=ve[ke];if(xe!==null){Le===void 0&&(K.push(ke),ve[ke]=Le=K.length-1),H.writeVarint(Le);var We=typeof xe;We!=="string"&&We!=="boolean"&&We!=="number"&&(xe=JSON.stringify(xe));var Re=We+":"+xe,et=_e[Re];et===void 0&&(oe.push(xe),_e[Re]=et=oe.length-1),H.writeVarint(et)}}}function Ve(he,H){return(H<<3)+(7&he)}function at(he){return he<<1^he>>31}function Tt(he,H){for(var q=he.loadGeometry(),K=he.type,oe=0,ve=0,_e=q.length,ke=0;ke<_e;ke++){var xe=q[ke],Le=1;K===1&&(Le=xe.length),H.writeVarint(Ve(1,Le));for(var We=K===3?xe.length-1:xe.length,Re=0;Re<We;Re++){Re===1&&K!==1&&H.writeVarint(Ve(2,We-1));var et=xe[Re].x-oe,Dt=xe[Re].y-ve;H.writeVarint(at(et)),H.writeVarint(at(Dt)),oe+=et,ve+=Dt}K===3&&H.writeVarint(Ve(7,1))}}function Et(he,H){var q=typeof he;q==="string"?H.writeStringField(1,he):q==="boolean"?H.writeBooleanField(7,he):q==="number"&&(he%1!=0?H.writeDoubleField(3,he):he<0?H.writeSVarintField(6,he):H.writeVarintField(5,he))}pe.exports=Ae,pe.exports.fromVectorTileJs=Ae,pe.exports.fromGeojsonVt=function(he,H){H=H||{};var q={};for(var K in he)q[K]=new je(he[K].features,H),q[K].name=K,q[K].version=H.version,q[K].extent=H.extent;return Ae({layers:q})},pe.exports.GeoJSONWrapper=je;var gt=_.by(pe.exports);const Be={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:he=>he},Nt=Math.fround||(it=new Float32Array(1),he=>(it[0]=+he,it[0]));var it;const Se=3,Ye=5,ot=6;class _t{constructor(H){this.options=Object.assign(Object.create(Be),H),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(H){const{log:q,minZoom:K,maxZoom:oe}=this.options;q&&console.time("total time");const ve=`prepare ${H.length} points`;q&&console.time(ve),this.points=H;const _e=[];for(let xe=0;xe<H.length;xe++){const Le=H[xe];if(!Le.geometry)continue;const[We,Re]=Le.geometry.coordinates,et=Nt(Ot(We)),Dt=Nt(Rt(Re));_e.push(et,Dt,1/0,xe,-1,1),this.options.reduce&&_e.push(0)}let ke=this.trees[oe+1]=this._createTree(_e);q&&console.timeEnd(ve);for(let xe=oe;xe>=K;xe--){const Le=+Date.now();ke=this.trees[xe]=this._createTree(this._cluster(ke,xe)),q&&console.log("z%d: %d clusters in %dms",xe,ke.numItems,+Date.now()-Le)}return q&&console.timeEnd("total time"),this}getClusters(H,q){let K=((H[0]+180)%360+360)%360-180;const oe=Math.max(-90,Math.min(90,H[1]));let ve=H[2]===180?180:((H[2]+180)%360+360)%360-180;const _e=Math.max(-90,Math.min(90,H[3]));if(H[2]-H[0]>=360)K=-180,ve=180;else if(K>ve){const Re=this.getClusters([K,oe,180,_e],q),et=this.getClusters([-180,oe,ve,_e],q);return Re.concat(et)}const ke=this.trees[this._limitZoom(q)],xe=ke.range(Ot(K),Rt(_e),Ot(ve),Rt(oe)),Le=ke.data,We=[];for(const Re of xe){const et=this.stride*Re;We.push(Le[et+Ye]>1?zt(Le,et,this.clusterProps):this.points[Le[et+Se]])}return We}getChildren(H){const q=this._getOriginId(H),K=this._getOriginZoom(H),oe="No cluster with the specified id.",ve=this.trees[K];if(!ve)throw new Error(oe);const _e=ve.data;if(q*this.stride>=_e.length)throw new Error(oe);const ke=this.options.radius/(this.options.extent*Math.pow(2,K-1)),xe=ve.within(_e[q*this.stride],_e[q*this.stride+1],ke),Le=[];for(const We of xe){const Re=We*this.stride;_e[Re+4]===H&&Le.push(_e[Re+Ye]>1?zt(_e,Re,this.clusterProps):this.points[_e[Re+Se]])}if(Le.length===0)throw new Error(oe);return Le}getLeaves(H,q,K){const oe=[];return this._appendLeaves(oe,H,q=q||10,K=K||0,0),oe}getTile(H,q,K){const oe=this.trees[this._limitZoom(H)],ve=Math.pow(2,H),{extent:_e,radius:ke}=this.options,xe=ke/_e,Le=(K-xe)/ve,We=(K+1+xe)/ve,Re={features:[]};return this._addTileFeatures(oe.range((q-xe)/ve,Le,(q+1+xe)/ve,We),oe.data,q,K,ve,Re),q===0&&this._addTileFeatures(oe.range(1-xe/ve,Le,1,We),oe.data,ve,K,ve,Re),q===ve-1&&this._addTileFeatures(oe.range(0,Le,xe/ve,We),oe.data,-1,K,ve,Re),Re.features.length?Re:null}getClusterExpansionZoom(H){let q=this._getOriginZoom(H)-1;for(;q<=this.options.maxZoom;){const K=this.getChildren(H);if(q++,K.length!==1)break;H=K[0].properties.cluster_id}return q}_appendLeaves(H,q,K,oe,ve){const _e=this.getChildren(q);for(const ke of _e){const xe=ke.properties;if(xe&&xe.cluster?ve+xe.point_count<=oe?ve+=xe.point_count:ve=this._appendLeaves(H,xe.cluster_id,K,oe,ve):ve<oe?ve++:H.push(ke),H.length===K)break}return ve}_createTree(H){const q=new _.av(H.length/this.stride|0,this.options.nodeSize,Float32Array);for(let K=0;K<H.length;K+=this.stride)q.add(H[K],H[K+1]);return q.finish(),q.data=H,q}_addTileFeatures(H,q,K,oe,ve,_e){for(const ke of H){const xe=ke*this.stride,Le=q[xe+Ye]>1;let We,Re,et;if(Le)We=ti(q,xe,this.clusterProps),Re=q[xe],et=q[xe+1];else{const ki=this.points[q[xe+Se]];We=ki.properties;const[li,Si]=ki.geometry.coordinates;Re=Ot(li),et=Rt(Si)}const Dt={type:1,geometry:[[Math.round(this.options.extent*(Re*ve-K)),Math.round(this.options.extent*(et*ve-oe))]],tags:We};let Ht;Ht=Le||this.options.generateId?q[xe+Se]:this.points[q[xe+Se]].id,Ht!==void 0&&(Dt.id=Ht),_e.features.push(Dt)}}_limitZoom(H){return Math.max(this.options.minZoom,Math.min(Math.floor(+H),this.options.maxZoom+1))}_cluster(H,q){const{radius:K,extent:oe,reduce:ve,minPoints:_e}=this.options,ke=K/(oe*Math.pow(2,q)),xe=H.data,Le=[],We=this.stride;for(let Re=0;Re<xe.length;Re+=We){if(xe[Re+2]<=q)continue;xe[Re+2]=q;const et=xe[Re],Dt=xe[Re+1],Ht=H.within(xe[Re],xe[Re+1],ke),ki=xe[Re+Ye];let li=ki;for(const Si of Ht){const pi=Si*We;xe[pi+2]>q&&(li+=xe[pi+Ye])}if(li>ki&&li>=_e){let Si,pi=et*ki,ys=Dt*ki,rs=-1;const yi=((Re/We|0)<<5)+(q+1)+this.points.length;for(const Ii of Ht){const Yi=Ii*We;if(xe[Yi+2]<=q)continue;xe[Yi+2]=q;const Es=xe[Yi+Ye];pi+=xe[Yi]*Es,ys+=xe[Yi+1]*Es,xe[Yi+4]=yi,ve&&(Si||(Si=this._map(xe,Re,!0),rs=this.clusterProps.length,this.clusterProps.push(Si)),ve(Si,this._map(xe,Yi)))}xe[Re+4]=yi,Le.push(pi/li,ys/li,1/0,yi,-1,li),ve&&Le.push(rs)}else{for(let Si=0;Si<We;Si++)Le.push(xe[Re+Si]);if(li>1)for(const Si of Ht){const pi=Si*We;if(!(xe[pi+2]<=q)){xe[pi+2]=q;for(let ys=0;ys<We;ys++)Le.push(xe[pi+ys])}}}}return Le}_getOriginId(H){return H-this.points.length>>5}_getOriginZoom(H){return(H-this.points.length)%32}_map(H,q,K){if(H[q+Ye]>1){const _e=this.clusterProps[H[q+ot]];return K?Object.assign({},_e):_e}const oe=this.points[H[q+Se]].properties,ve=this.options.map(oe);return K&&ve===oe?Object.assign({},ve):ve}}function zt(he,H,q){return{type:"Feature",id:he[H+Se],properties:ti(he,H,q),geometry:{type:"Point",coordinates:[(K=he[H],360*(K-.5)),xi(he[H+1])]}};var K}function ti(he,H,q){const K=he[H+Ye],oe=K>=1e4?`${Math.round(K/1e3)}k`:K>=1e3?Math.round(K/100)/10+"k":K,ve=he[H+ot],_e=ve===-1?{}:Object.assign({},q[ve]);return Object.assign(_e,{cluster:!0,cluster_id:he[H+Se],point_count:K,point_count_abbreviated:oe})}function Ot(he){return he/360+.5}function Rt(he){const H=Math.sin(he*Math.PI/180),q=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return q<0?0:q>1?1:q}function xi(he){const H=(180-360*he)*Math.PI/180;return 360*Math.atan(Math.exp(H))/Math.PI-90}function Bi(he,H,q,K){let oe=K;const ve=H+(q-H>>1);let _e,ke=q-H;const xe=he[H],Le=he[H+1],We=he[q],Re=he[q+1];for(let et=H+3;et<q;et+=3){const Dt=Ys(he[et],he[et+1],xe,Le,We,Re);if(Dt>oe)_e=et,oe=Dt;else if(Dt===oe){const Ht=Math.abs(et-ve);Ht<ke&&(_e=et,ke=Ht)}}oe>K&&(_e-H>3&&Bi(he,H,_e,K),he[_e+2]=oe,q-_e>3&&Bi(he,_e,q,K))}function Ys(he,H,q,K,oe,ve){let _e=oe-q,ke=ve-K;if(_e!==0||ke!==0){const xe=((he-q)*_e+(H-K)*ke)/(_e*_e+ke*ke);xe>1?(q=oe,K=ve):xe>0&&(q+=_e*xe,K+=ke*xe)}return _e=he-q,ke=H-K,_e*_e+ke*ke}function hs(he,H,q,K){const oe={id:he??null,type:H,geometry:q,tags:K,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(H==="Point"||H==="MultiPoint"||H==="LineString")Gr(oe,q);else if(H==="Polygon")Gr(oe,q[0]);else if(H==="MultiLineString")for(const ve of q)Gr(oe,ve);else if(H==="MultiPolygon")for(const ve of q)Gr(oe,ve[0]);return oe}function Gr(he,H){for(let q=0;q<H.length;q+=3)he.minX=Math.min(he.minX,H[q]),he.minY=Math.min(he.minY,H[q+1]),he.maxX=Math.max(he.maxX,H[q]),he.maxY=Math.max(he.maxY,H[q+1])}function Pr(he,H,q,K){if(!H.geometry)return;const oe=H.geometry.coordinates;if(oe&&oe.length===0)return;const ve=H.geometry.type,_e=Math.pow(q.tolerance/((1<<q.maxZoom)*q.extent),2);let ke=[],xe=H.id;if(q.promoteId?xe=H.properties[q.promoteId]:q.generateId&&(xe=K||0),ve==="Point")pa(oe,ke);else if(ve==="MultiPoint")for(const Le of oe)pa(Le,ke);else if(ve==="LineString")Oe(oe,ke,_e,!1);else if(ve==="MultiLineString"){if(q.lineMetrics){for(const Le of oe)ke=[],Oe(Le,ke,_e,!1),he.push(hs(xe,"LineString",ke,H.properties));return}mr(oe,ke,_e,!1)}else if(ve==="Polygon")mr(oe,ke,_e,!0);else{if(ve!=="MultiPolygon"){if(ve==="GeometryCollection"){for(const Le of H.geometry.geometries)Pr(he,{id:xe,geometry:Le,properties:H.properties},q,K);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Le of oe){const We=[];mr(Le,We,_e,!0),ke.push(We)}}he.push(hs(xe,ve,ke,H.properties))}function pa(he,H){H.push(ma(he[0]),hi(he[1]),0)}function Oe(he,H,q,K){let oe,ve,_e=0;for(let xe=0;xe<he.length;xe++){const Le=ma(he[xe][0]),We=hi(he[xe][1]);H.push(Le,We,0),xe>0&&(_e+=K?(oe*We-Le*ve)/2:Math.sqrt(Math.pow(Le-oe,2)+Math.pow(We-ve,2))),oe=Le,ve=We}const ke=H.length-3;H[2]=1,Bi(H,0,ke,q),H[ke+2]=1,H.size=Math.abs(_e),H.start=0,H.end=H.size}function mr(he,H,q,K){for(let oe=0;oe<he.length;oe++){const ve=[];Oe(he[oe],ve,q,K),H.push(ve)}}function ma(he){return he/360+.5}function hi(he){const H=Math.sin(he*Math.PI/180),q=.5-.25*Math.log((1+H)/(1-H))/Math.PI;return q<0?0:q>1?1:q}function Fi(he,H,q,K,oe,ve,_e,ke){if(K/=H,ve>=(q/=H)&&_e<K)return he;if(_e<q||ve>=K)return null;const xe=[];for(const Le of he){const We=Le.geometry;let Re=Le.type;const et=oe===0?Le.minX:Le.minY,Dt=oe===0?Le.maxX:Le.maxY;if(et>=q&&Dt<K){xe.push(Le);continue}if(Dt<q||et>=K)continue;let Ht=[];if(Re==="Point"||Re==="MultiPoint")dn(We,Ht,q,K,oe);else if(Re==="LineString")ss(We,Ht,q,K,oe,!1,ke.lineMetrics);else if(Re==="MultiLineString")fa(We,Ht,q,K,oe,!1);else if(Re==="Polygon")fa(We,Ht,q,K,oe,!0);else if(Re==="MultiPolygon")for(const ki of We){const li=[];fa(ki,li,q,K,oe,!0),li.length&&Ht.push(li)}if(Ht.length){if(ke.lineMetrics&&Re==="LineString"){for(const ki of Ht)xe.push(hs(Le.id,Re,ki,Le.tags));continue}Re!=="LineString"&&Re!=="MultiLineString"||(Ht.length===1?(Re="LineString",Ht=Ht[0]):Re="MultiLineString"),Re!=="Point"&&Re!=="MultiPoint"||(Re=Ht.length===3?"Point":"MultiPoint"),xe.push(hs(Le.id,Re,Ht,Le.tags))}}return xe.length?xe:null}function dn(he,H,q,K,oe){for(let ve=0;ve<he.length;ve+=3){const _e=he[ve+oe];_e>=q&&_e<=K&&fr(H,he[ve],he[ve+1],he[ve+2])}}function ss(he,H,q,K,oe,ve,_e){let ke=Js(he);const xe=oe===0?Mn:ga;let Le,We,Re=he.start;for(let li=0;li<he.length-3;li+=3){const Si=he[li],pi=he[li+1],ys=he[li+2],rs=he[li+3],yi=he[li+4],Ii=oe===0?Si:pi,Yi=oe===0?rs:yi;let Es=!1;_e&&(Le=Math.sqrt(Math.pow(Si-rs,2)+Math.pow(pi-yi,2))),Ii<q?Yi>q&&(We=xe(ke,Si,pi,rs,yi,q),_e&&(ke.start=Re+Le*We)):Ii>K?Yi<K&&(We=xe(ke,Si,pi,rs,yi,K),_e&&(ke.start=Re+Le*We)):fr(ke,Si,pi,ys),Yi<q&&Ii>=q&&(We=xe(ke,Si,pi,rs,yi,q),Es=!0),Yi>K&&Ii<=K&&(We=xe(ke,Si,pi,rs,yi,K),Es=!0),!ve&&Es&&(_e&&(ke.end=Re+Le*We),H.push(ke),ke=Js(he)),_e&&(Re+=Le)}let et=he.length-3;const Dt=he[et],Ht=he[et+1],ki=oe===0?Dt:Ht;ki>=q&&ki<=K&&fr(ke,Dt,Ht,he[et+2]),et=ke.length-3,ve&&et>=3&&(ke[et]!==ke[0]||ke[et+1]!==ke[1])&&fr(ke,ke[0],ke[1],ke[2]),ke.length&&H.push(ke)}function Js(he){const H=[];return H.size=he.size,H.start=he.start,H.end=he.end,H}function fa(he,H,q,K,oe,ve){for(const _e of he)ss(_e,H,q,K,oe,ve,!1)}function fr(he,H,q,K){he.push(H,q,K)}function Mn(he,H,q,K,oe,ve){const _e=(ve-H)/(K-H);return fr(he,ve,q+(oe-q)*_e,1),_e}function ga(he,H,q,K,oe,ve){const _e=(ve-q)/(oe-q);return fr(he,H+(K-H)*_e,ve,1),_e}function st(he,H){const q=[];for(let K=0;K<he.length;K++){const oe=he[K],ve=oe.type;let _e;if(ve==="Point"||ve==="MultiPoint"||ve==="LineString")_e=gr(oe.geometry,H);else if(ve==="MultiLineString"||ve==="Polygon"){_e=[];for(const ke of oe.geometry)_e.push(gr(ke,H))}else if(ve==="MultiPolygon"){_e=[];for(const ke of oe.geometry){const xe=[];for(const Le of ke)xe.push(gr(Le,H));_e.push(xe)}}q.push(hs(oe.id,ve,_e,oe.tags))}return q}function gr(he,H){const q=[];q.size=he.size,he.start!==void 0&&(q.start=he.start,q.end=he.end);for(let K=0;K<he.length;K+=3)q.push(he[K]+H,he[K+1],he[K+2]);return q}function Xi(he,H){if(he.transformed)return he;const q=1<<he.z,K=he.x,oe=he.y;for(const ve of he.features){const _e=ve.geometry,ke=ve.type;if(ve.geometry=[],ke===1)for(let xe=0;xe<_e.length;xe+=2)ve.geometry.push(Ks(_e[xe],_e[xe+1],H,q,K,oe));else for(let xe=0;xe<_e.length;xe++){const Le=[];for(let We=0;We<_e[xe].length;We+=2)Le.push(Ks(_e[xe][We],_e[xe][We+1],H,q,K,oe));ve.geometry.push(Le)}}return he.transformed=!0,he}function Ks(he,H,q,K,oe,ve){return[Math.round(q*(he*K-oe)),Math.round(q*(H*K-ve))]}function xr(he,H,q,K,oe){const ve=H===oe.maxZoom?0:oe.tolerance/((1<<H)*oe.extent),_e={features:[],numPoints:0,numSimplified:0,numFeatures:he.length,source:null,x:q,y:K,z:H,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ke of he)dt(_e,ke,ve,oe);return _e}function dt(he,H,q,K){const oe=H.geometry,ve=H.type,_e=[];if(he.minX=Math.min(he.minX,H.minX),he.minY=Math.min(he.minY,H.minY),he.maxX=Math.max(he.maxX,H.maxX),he.maxY=Math.max(he.maxY,H.maxY),ve==="Point"||ve==="MultiPoint")for(let ke=0;ke<oe.length;ke+=3)_e.push(oe[ke],oe[ke+1]),he.numPoints++,he.numSimplified++;else if(ve==="LineString")ui(_e,oe,he,q,!1,!1);else if(ve==="MultiLineString"||ve==="Polygon")for(let ke=0;ke<oe.length;ke++)ui(_e,oe[ke],he,q,ve==="Polygon",ke===0);else if(ve==="MultiPolygon")for(let ke=0;ke<oe.length;ke++){const xe=oe[ke];for(let Le=0;Le<xe.length;Le++)ui(_e,xe[Le],he,q,!0,Le===0)}if(_e.length){let ke=H.tags||null;if(ve==="LineString"&&K.lineMetrics){ke={};for(const Le in H.tags)ke[Le]=H.tags[Le];ke.mapbox_clip_start=oe.start/oe.size,ke.mapbox_clip_end=oe.end/oe.size}const xe={geometry:_e,type:ve==="Polygon"||ve==="MultiPolygon"?3:ve==="LineString"||ve==="MultiLineString"?2:1,tags:ke};H.id!==null&&(xe.id=H.id),he.features.push(xe)}}function ui(he,H,q,K,oe,ve){const _e=K*K;if(K>0&&H.size<(oe?_e:K))return void(q.numPoints+=H.length/3);const ke=[];for(let xe=0;xe<H.length;xe+=3)(K===0||H[xe+2]>_e)&&(q.numSimplified++,ke.push(H[xe],H[xe+1])),q.numPoints++;oe&&(function(xe,Le){let We=0;for(let Re=0,et=xe.length,Dt=et-2;Re<et;Dt=Re,Re+=2)We+=(xe[Re]-xe[Dt])*(xe[Re+1]+xe[Dt+1]);if(We>0===Le)for(let Re=0,et=xe.length;Re<et/2;Re+=2){const Dt=xe[Re],Ht=xe[Re+1];xe[Re]=xe[et-2-Re],xe[Re+1]=xe[et-1-Re],xe[et-2-Re]=Dt,xe[et-1-Re]=Ht}})(ke,ve),he.push(ke)}const Kt={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ps{constructor(H,q){const K=(q=this.options=(function(ve,_e){for(const ke in _e)ve[ke]=_e[ke];return ve})(Object.create(Kt),q)).debug;if(K&&console.time("preprocess data"),q.maxZoom<0||q.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(q.promoteId&&q.generateId)throw new Error("promoteId and generateId cannot be used together.");let oe=(function(ve,_e){const ke=[];if(ve.type==="FeatureCollection")for(let xe=0;xe<ve.features.length;xe++)Pr(ke,ve.features[xe],_e,xe);else Pr(ke,ve.type==="Feature"?ve:{geometry:ve},_e);return ke})(H,q);this.tiles={},this.tileCoords=[],K&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",q.indexMaxZoom,q.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),oe=(function(ve,_e){const ke=_e.buffer/_e.extent;let xe=ve;const Le=Fi(ve,1,-1-ke,ke,0,-1,2,_e),We=Fi(ve,1,1-ke,2+ke,0,-1,2,_e);return(Le||We)&&(xe=Fi(ve,1,-ke,1+ke,0,-1,2,_e)||[],Le&&(xe=st(Le,1).concat(xe)),We&&(xe=xe.concat(st(We,-1)))),xe})(oe,q),oe.length&&this.splitTile(oe,0,0,0),K&&(oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(H,q,K,oe,ve,_e,ke){const xe=[H,q,K,oe],Le=this.options,We=Le.debug;for(;xe.length;){oe=xe.pop(),K=xe.pop(),q=xe.pop(),H=xe.pop();const Re=1<<q,et=yr(q,K,oe);let Dt=this.tiles[et];if(!Dt&&(We>1&&console.time("creation"),Dt=this.tiles[et]=xr(H,q,K,oe,Le),this.tileCoords.push({z:q,x:K,y:oe}),We)){We>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",q,K,oe,Dt.numFeatures,Dt.numPoints,Dt.numSimplified),console.timeEnd("creation"));const Es=`z${q}`;this.stats[Es]=(this.stats[Es]||0)+1,this.total++}if(Dt.source=H,ve==null){if(q===Le.indexMaxZoom||Dt.numPoints<=Le.indexMaxPoints)continue}else{if(q===Le.maxZoom||q===ve)continue;if(ve!=null){const Es=ve-q;if(K!==_e>>Es||oe!==ke>>Es)continue}}if(Dt.source=null,H.length===0)continue;We>1&&console.time("clipping");const Ht=.5*Le.buffer/Le.extent,ki=.5-Ht,li=.5+Ht,Si=1+Ht;let pi=null,ys=null,rs=null,yi=null,Ii=Fi(H,Re,K-Ht,K+li,0,Dt.minX,Dt.maxX,Le),Yi=Fi(H,Re,K+ki,K+Si,0,Dt.minX,Dt.maxX,Le);H=null,Ii&&(pi=Fi(Ii,Re,oe-Ht,oe+li,1,Dt.minY,Dt.maxY,Le),ys=Fi(Ii,Re,oe+ki,oe+Si,1,Dt.minY,Dt.maxY,Le),Ii=null),Yi&&(rs=Fi(Yi,Re,oe-Ht,oe+li,1,Dt.minY,Dt.maxY,Le),yi=Fi(Yi,Re,oe+ki,oe+Si,1,Dt.minY,Dt.maxY,Le),Yi=null),We>1&&console.timeEnd("clipping"),xe.push(pi||[],q+1,2*K,2*oe),xe.push(ys||[],q+1,2*K,2*oe+1),xe.push(rs||[],q+1,2*K+1,2*oe),xe.push(yi||[],q+1,2*K+1,2*oe+1)}}getTile(H,q,K){H=+H,q=+q,K=+K;const oe=this.options,{extent:ve,debug:_e}=oe;if(H<0||H>24)return null;const ke=1<<H,xe=yr(H,q=q+ke&ke-1,K);if(this.tiles[xe])return Xi(this.tiles[xe],ve);_e>1&&console.log("drilling down to z%d-%d-%d",H,q,K);let Le,We=H,Re=q,et=K;for(;!Le&&We>0;)We--,Re>>=1,et>>=1,Le=this.tiles[yr(We,Re,et)];return Le&&Le.source?(_e>1&&(console.log("found parent tile z%d-%d-%d",We,Re,et),console.time("drilling down")),this.splitTile(Le.source,We,Re,et,H,q,K),_e>1&&console.timeEnd("drilling down"),this.tiles[xe]?Xi(this.tiles[xe],ve):null):null}}function yr(he,H,q){return 32*((1<<he)*q+H)+he}function ei(he,H){return H?he.properties[H]:he.id}function xs(he,H){if(he==null)return!0;if(he.type==="Feature")return ei(he,H)!=null;if(he.type==="FeatureCollection"){const q=new Set;for(const K of he.features){const oe=ei(K,H);if(oe==null||q.has(oe))return!1;q.add(oe)}return!0}return!1}function Zr(he,H){const q=new Map;if(he!=null)if(he.type==="Feature")q.set(ei(he,H),he);else for(const K of he.features)q.set(ei(K,H),K);return q}class vr extends D{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(H,q){return _._(this,void 0,void 0,(function*(){const K=H.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const oe=this._geoJSONIndex.getTile(K.z,K.x,K.y);if(!oe)return null;const ve=new class{constructor(ke){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=_.X,this.length=ke.length,this._features=ke}feature(ke){return new class{constructor(xe){this._feature=xe,this.extent=_.X,this.type=xe.type,this.properties=xe.tags,"id"in xe&&!isNaN(xe.id)&&(this.id=parseInt(xe.id,10))}loadGeometry(){if(this._feature.type===1){const xe=[];for(const Le of this._feature.geometry)xe.push([new _.P(Le[0],Le[1])]);return xe}{const xe=[];for(const Le of this._feature.geometry){const We=[];for(const Re of Le)We.push(new _.P(Re[0],Re[1]));xe.push(We)}return xe}}toGeoJSON(xe,Le,We){return se.call(this,xe,Le,We)}}(this._features[ke])}}(oe.features);let _e=gt(ve);return _e.byteOffset===0&&_e.byteLength===_e.buffer.byteLength||(_e=new Uint8Array(_e)),{vectorTile:ve,rawData:_e.buffer}}))}loadData(H){return _._(this,void 0,void 0,(function*(){var q;(q=this._pendingRequest)===null||q===void 0||q.abort();const K=!!(H&&H.request&&H.request.collectResourceTiming)&&new _.bv(H.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(H,this._pendingRequest),this._geoJSONIndex=H.cluster?new _t((function({superclusterOptions:_e,clusterProperties:ke}){if(!ke||!_e)return _e;const xe={},Le={},We={accumulated:null,zoom:0},Re={properties:null},et=Object.keys(ke);for(const Dt of et){const[Ht,ki]=ke[Dt],li=_.bC(ki),Si=_.bC(typeof Ht=="string"?[Ht,["accumulated"],["get",Dt]]:Ht);xe[Dt]=li.value,Le[Dt]=Si.value}return _e.map=Dt=>{Re.properties=Dt;const Ht={};for(const ki of et)Ht[ki]=xe[ki].evaluate(We,Re);return Ht},_e.reduce=(Dt,Ht)=>{Re.properties=Ht;for(const ki of et)We.accumulated=Dt[ki],Dt[ki]=Le[ki].evaluate(We,Re)},_e})(H)).load((yield this._pendingData).features):(oe=yield this._pendingData,new Ps(oe,H.geojsonVtOptions)),this.loaded={};const ve={};if(K){const _e=K.finish();_e&&(ve.resourceTiming={},ve.resourceTiming[H.source]=JSON.parse(JSON.stringify(_e)))}return ve}catch(ve){if(delete this._pendingRequest,_.bB(ve))return{abandoned:!0};throw ve}var oe}))}getData(){return _._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(H){const q=this.loaded;return q&&q[H.uid]?super.reloadTile(H):this.loadTile(H)}loadAndProcessGeoJSON(H,q){return _._(this,void 0,void 0,(function*(){let K=yield this.loadGeoJSON(H,q);if(delete this._pendingRequest,typeof K!="object")throw new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`);if(ae(K,!0),H.filter){const oe=_.bC(H.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(oe.result==="error")throw new Error(oe.value.map((_e=>`${_e.key}: ${_e.message}`)).join(", "));K={type:"FeatureCollection",features:K.features.filter((_e=>oe.value.evaluate({zoom:0},_e)))}}return K}))}loadGeoJSON(H,q){return _._(this,void 0,void 0,(function*(){const{promoteId:K}=H;if(H.request){const oe=yield _.h(H.request,q);return this._dataUpdateable=xs(oe.data,K)?Zr(oe.data,K):void 0,oe.data}if(typeof H.data=="string")try{const oe=JSON.parse(H.data);return this._dataUpdateable=xs(oe,K)?Zr(oe,K):void 0,oe}catch{throw new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`)}if(!H.dataDiff)throw new Error(`Input data given to '${H.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${H.source}`);return(function(oe,ve,_e){var ke,xe,Le,We;if(ve.removeAll&&oe.clear(),ve.remove)for(const Re of ve.remove)oe.delete(Re);if(ve.add)for(const Re of ve.add){const et=ei(Re,_e);et!=null&&oe.set(et,Re)}if(ve.update)for(const Re of ve.update){let et=oe.get(Re.id);if(et==null)continue;const Dt=!Re.removeAllProperties&&(((ke=Re.removeProperties)===null||ke===void 0?void 0:ke.length)>0||((xe=Re.addOrUpdateProperties)===null||xe===void 0?void 0:xe.length)>0);if((Re.newGeometry||Re.removeAllProperties||Dt)&&(et=Object.assign({},et),oe.set(Re.id,et),Dt&&(et.properties=Object.assign({},et.properties))),Re.newGeometry&&(et.geometry=Re.newGeometry),Re.removeAllProperties)et.properties={};else if(((Le=Re.removeProperties)===null||Le===void 0?void 0:Le.length)>0)for(const Ht of Re.removeProperties)Object.prototype.hasOwnProperty.call(et.properties,Ht)&&delete et.properties[Ht];if(((We=Re.addOrUpdateProperties)===null||We===void 0?void 0:We.length)>0)for(const{key:Ht,value:ki}of Re.addOrUpdateProperties)et.properties[Ht]=ki}})(this._dataUpdateable,H.dataDiff,K),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(H){return _._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(H){return this._geoJSONIndex.getClusterExpansionZoom(H.clusterId)}getClusterChildren(H){return this._geoJSONIndex.getChildren(H.clusterId)}getClusterLeaves(H){return this._geoJSONIndex.getLeaves(H.clusterId,H.limit,H.offset)}}class Vs{constructor(H){this.self=H,this.actor=new _.F(H),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(q,K)=>{if(this.externalWorkerSourceTypes[q])throw new Error(`Worker source with name "${q}" already registered.`);this.externalWorkerSourceTypes[q]=K},this.self.addProtocol=_.bi,this.self.removeProtocol=_.bj,this.self.registerRTLTextPlugin=q=>{if(_.bD.isParsed())throw new Error("RTL text plugin already registered.");_.bD.setMethods(q)},this.actor.registerMessageHandler("LDT",((q,K)=>this._getDEMWorkerSource(q,K.source).loadTile(K))),this.actor.registerMessageHandler("RDT",((q,K)=>_._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(q,K.source).removeTile(K)})))),this.actor.registerMessageHandler("GCEZ",((q,K)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(q,K.type,K.source).getClusterExpansionZoom(K)})))),this.actor.registerMessageHandler("GCC",((q,K)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(q,K.type,K.source).getClusterChildren(K)})))),this.actor.registerMessageHandler("GCL",((q,K)=>_._(this,void 0,void 0,(function*(){return this._getWorkerSource(q,K.type,K.source).getClusterLeaves(K)})))),this.actor.registerMessageHandler("LD",((q,K)=>this._getWorkerSource(q,K.type,K.source).loadData(K))),this.actor.registerMessageHandler("GD",((q,K)=>this._getWorkerSource(q,K.type,K.source).getData())),this.actor.registerMessageHandler("LT",((q,K)=>this._getWorkerSource(q,K.type,K.source).loadTile(K))),this.actor.registerMessageHandler("RT",((q,K)=>this._getWorkerSource(q,K.type,K.source).reloadTile(K))),this.actor.registerMessageHandler("AT",((q,K)=>this._getWorkerSource(q,K.type,K.source).abortTile(K))),this.actor.registerMessageHandler("RMT",((q,K)=>this._getWorkerSource(q,K.type,K.source).removeTile(K))),this.actor.registerMessageHandler("RS",((q,K)=>_._(this,void 0,void 0,(function*(){if(!this.workerSources[q]||!this.workerSources[q][K.type]||!this.workerSources[q][K.type][K.source])return;const oe=this.workerSources[q][K.type][K.source];delete this.workerSources[q][K.type][K.source],oe.removeSource!==void 0&&oe.removeSource(K)})))),this.actor.registerMessageHandler("RM",(q=>_._(this,void 0,void 0,(function*(){delete this.layerIndexes[q],delete this.availableImages[q],delete this.workerSources[q],delete this.demWorkerSources[q]})))),this.actor.registerMessageHandler("SR",((q,K)=>_._(this,void 0,void 0,(function*(){this.referrer=K})))),this.actor.registerMessageHandler("SRPS",((q,K)=>this._syncRTLPluginState(q,K))),this.actor.registerMessageHandler("IS",((q,K)=>_._(this,void 0,void 0,(function*(){this.self.importScripts(K)})))),this.actor.registerMessageHandler("SI",((q,K)=>this._setImages(q,K))),this.actor.registerMessageHandler("UL",((q,K)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(q).update(K.layers,K.removedIds)})))),this.actor.registerMessageHandler("SL",((q,K)=>_._(this,void 0,void 0,(function*(){this._getLayerIndex(q).replace(K)}))))}_setImages(H,q){return _._(this,void 0,void 0,(function*(){this.availableImages[H]=q;for(const K in this.workerSources[H]){const oe=this.workerSources[H][K];for(const ve in oe)oe[ve].availableImages=q}}))}_syncRTLPluginState(H,q){return _._(this,void 0,void 0,(function*(){if(_.bD.isParsed())return _.bD.getState();if(q.pluginStatus!=="loading")return _.bD.setState(q),q;const K=q.pluginURL;if(this.self.importScripts(K),_.bD.isParsed()){const oe={pluginStatus:"loaded",pluginURL:K};return _.bD.setState(oe),oe}throw _.bD.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${K}`)}))}_getAvailableImages(H){let q=this.availableImages[H];return q||(q=[]),q}_getLayerIndex(H){let q=this.layerIndexes[H];return q||(q=this.layerIndexes[H]=new d),q}_getWorkerSource(H,q,K){if(this.workerSources[H]||(this.workerSources[H]={}),this.workerSources[H][q]||(this.workerSources[H][q]={}),!this.workerSources[H][q][K]){const oe={sendAsync:(ve,_e)=>(ve.targetMapId=H,this.actor.sendAsync(ve,_e))};switch(q){case"vector":this.workerSources[H][q][K]=new D(oe,this._getLayerIndex(H),this._getAvailableImages(H));break;case"geojson":this.workerSources[H][q][K]=new vr(oe,this._getLayerIndex(H),this._getAvailableImages(H));break;default:this.workerSources[H][q][K]=new this.externalWorkerSourceTypes[q](oe,this._getLayerIndex(H),this._getAvailableImages(H))}}return this.workerSources[H][q][K]}_getDEMWorkerSource(H,q){return this.demWorkerSources[H]||(this.demWorkerSources[H]={}),this.demWorkerSources[H][q]||(this.demWorkerSources[H][q]=new O),this.demWorkerSources[H][q]}}return _.i(self)&&(self.worker=new Vs(self)),Vs})),j("index",["exports","./shared"],(function(_,d){var I="4.7.1";let z,R;const D={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frameAsync:v=>new Promise(((e,o)=>{const p=requestAnimationFrame(e);v.signal.addEventListener("abort",(()=>{cancelAnimationFrame(p),o(d.c())}))})),getImageData(v,e=0){return this.getImageCanvasContext(v).getImageData(-e,-e,v.width+2*e,v.height+2*e)},getImageCanvasContext(v){const e=window.document.createElement("canvas"),o=e.getContext("2d",{willReadFrequently:!0});if(!o)throw new Error("failed to create canvas 2d context");return e.width=v.width,e.height=v.height,o.drawImage(v,0,0,v.width,v.height),o},resolveURL:v=>(z||(z=document.createElement("a")),z.href=v,z.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(R==null&&(R=matchMedia("(prefers-reduced-motion: reduce)")),R.matches)}};class O{static testProp(e){if(!O.docStyle)return e[0];for(let o=0;o<e.length;o++)if(e[o]in O.docStyle)return e[o];return e[0]}static create(e,o,p){const m=window.document.createElement(e);return o!==void 0&&(m.className=o),p&&p.appendChild(m),m}static createNS(e,o){return window.document.createElementNS(e,o)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(e,o){e.style[O.transformProp]=o}static addEventListener(e,o,p,m={}){e.addEventListener(o,p,"passive"in m?m:m.capture)}static removeEventListener(e,o,p,m={}){e.removeEventListener(o,p,"passive"in m?m:m.capture)}static suppressClickInternal(e){e.preventDefault(),e.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",O.suppressClickInternal,!0)}),0)}static getScale(e){const o=e.getBoundingClientRect();return{x:o.width/e.offsetWidth||1,y:o.height/e.offsetHeight||1,boundingClientRect:o}}static getPoint(e,o,p){const m=o.boundingClientRect;return new d.P((p.clientX-m.left)/o.x-e.clientLeft,(p.clientY-m.top)/o.y-e.clientTop)}static mousePos(e,o){const p=O.getScale(e);return O.getPoint(e,p,o)}static touchPos(e,o){const p=[],m=O.getScale(e);for(let y=0;y<o.length;y++)p.push(O.getPoint(e,m,o[y]));return p}static mouseButton(e){return e.button}static remove(e){e.parentNode&&e.parentNode.removeChild(e)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const ie={supported:!1,testSupport:function(v){!se&&ae&&(pe?Pe(v):Q=v)}};let Q,ae,se=!1,pe=!1;function Pe(v){const e=v.createTexture();v.bindTexture(v.TEXTURE_2D,e);try{if(v.texImage2D(v.TEXTURE_2D,0,v.RGBA,v.RGBA,v.UNSIGNED_BYTE,ae),v.isContextLost())return;ie.supported=!0}catch{}v.deleteTexture(e),se=!0}var Ie;typeof document<"u"&&(ae=document.createElement("img"),ae.onload=()=>{Q&&Pe(Q),Q=null,pe=!0},ae.onerror=()=>{se=!0,Q=null},ae.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(v){let e,o,p,m;v.resetRequestQueue=()=>{e=[],o=0,p=0,m={}},v.addThrottleControl=M=>{const B=p++;return m[B]=M,B},v.removeThrottleControl=M=>{delete m[M],T()},v.getImage=(M,B,$=!0)=>new Promise(((U,X)=>{ie.supported&&(M.headers||(M.headers={}),M.headers.accept="image/webp,*/*"),d.e(M,{type:"image"}),e.push({abortController:B,requestParameters:M,supportImageRefresh:$,state:"queued",onError:ee=>{X(ee)},onSuccess:ee=>{U(ee)}}),T()}));const y=M=>d._(this,void 0,void 0,(function*(){M.state="running";const{requestParameters:B,supportImageRefresh:$,onError:U,onSuccess:X,abortController:ee}=M,ne=$===!1&&!d.i(self)&&!d.g(B.url)&&(!B.headers||Object.keys(B.headers).reduce(((me,ye)=>me&&ye==="accept"),!0));o++;const le=ne?P(B,ee):d.m(B,ee);try{const me=yield le;delete M.abortController,M.state="completed",me.data instanceof HTMLImageElement||d.b(me.data)?X(me):me.data&&X({data:yield(ue=me.data,typeof createImageBitmap=="function"?d.d(ue):d.f(ue)),cacheControl:me.cacheControl,expires:me.expires})}catch(me){delete M.abortController,U(me)}finally{o--,T()}var ue})),T=()=>{const M=(()=>{for(const B of Object.keys(m))if(m[B]())return!0;return!1})()?d.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:d.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let B=o;B<M&&e.length>0;B++){const $=e.shift();$.abortController.signal.aborted?B--:y($)}},P=(M,B)=>new Promise((($,U)=>{const X=new Image,ee=M.url,ne=M.credentials;ne&&ne==="include"?X.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!d.s(ee))&&(X.crossOrigin="anonymous"),B.signal.addEventListener("abort",(()=>{X.src="",U(d.c())})),X.fetchPriority="high",X.onload=()=>{X.onerror=X.onload=null,$({data:X})},X.onerror=()=>{X.onerror=X.onload=null,B.signal.aborted||U(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},X.src=ee}))})(Ie||(Ie={})),Ie.resetRequestQueue();class Ze{constructor(e){this._transformRequestFn=e}transformRequest(e,o){return this._transformRequestFn&&this._transformRequestFn(e,o)||{url:e}}setTransformRequest(e){this._transformRequestFn=e}}function Je(v){var e=new d.A(3);return e[0]=v[0],e[1]=v[1],e[2]=v[2],e}var Xe,ut=function(v,e,o){return v[0]=e[0]-o[0],v[1]=e[1]-o[1],v[2]=e[2]-o[2],v};Xe=new d.A(3),d.A!=Float32Array&&(Xe[0]=0,Xe[1]=0,Xe[2]=0);var je=function(v){var e=v[0],o=v[1];return e*e+o*o};function Ae(v){const e=[];if(typeof v=="string")e.push({id:"default",url:v});else if(v&&v.length>0){const o=[];for(const{id:p,url:m}of v){const y=`${p}${m}`;o.indexOf(y)===-1&&(o.push(y),e.push({id:p,url:m}))}}return e}function He(v,e,o){const p=v.split("?");return p[0]+=`${e}${o}`,p.join("?")}(function(){var v=new d.A(2);d.A!=Float32Array&&(v[0]=0,v[1]=0)})();class ct{constructor(e,o,p,m){this.context=e,this.format=p,this.texture=e.gl.createTexture(),this.update(o,m)}update(e,o,p){const{width:m,height:y}=e,T=!(this.size&&this.size[0]===m&&this.size[1]===y||p),{context:P}=this,{gl:M}=P;if(this.useMipmap=!!(o&&o.useMipmap),M.bindTexture(M.TEXTURE_2D,this.texture),P.pixelStoreUnpackFlipY.set(!1),P.pixelStoreUnpack.set(1),P.pixelStoreUnpackPremultiplyAlpha.set(this.format===M.RGBA&&(!o||o.premultiply!==!1)),T)this.size=[m,y],e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||d.b(e)?M.texImage2D(M.TEXTURE_2D,0,this.format,this.format,M.UNSIGNED_BYTE,e):M.texImage2D(M.TEXTURE_2D,0,this.format,m,y,0,this.format,M.UNSIGNED_BYTE,e.data);else{const{x:B,y:$}=p||{x:0,y:0};e instanceof HTMLImageElement||e instanceof HTMLCanvasElement||e instanceof HTMLVideoElement||e instanceof ImageData||d.b(e)?M.texSubImage2D(M.TEXTURE_2D,0,B,$,M.RGBA,M.UNSIGNED_BYTE,e):M.texSubImage2D(M.TEXTURE_2D,0,B,$,m,y,M.RGBA,M.UNSIGNED_BYTE,e.data)}this.useMipmap&&this.isSizePowerOfTwo()&&M.generateMipmap(M.TEXTURE_2D)}bind(e,o,p){const{context:m}=this,{gl:y}=m;y.bindTexture(y.TEXTURE_2D,this.texture),p!==y.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=y.LINEAR),e!==this.filter&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,e),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,p||e),this.filter=e),o!==this.wrap&&(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,o),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,o),this.wrap=o)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:e}=this.context;e.deleteTexture(this.texture),this.texture=null}}function Jt(v){const{userImage:e}=v;return!!(e&&e.render&&e.render())&&(v.data.replace(new Uint8Array(e.data.buffer)),!0)}class Ve extends d.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new d.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(e){if(this.loaded!==e&&(this.loaded=e,e)){for(const{ids:o,promiseResolve:p}of this.requestors)p(this._getImagesForIds(o));this.requestors=[]}}getImage(e){const o=this.images[e];if(o&&!o.data&&o.spriteData){const p=o.spriteData;o.data=new d.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),o.spriteData=null}return o}addImage(e,o){if(this.images[e])throw new Error(`Image id ${e} already exist, use updateImage instead`);this._validate(e,o)&&(this.images[e]=o)}_validate(e,o){let p=!0;const m=o.data||o.spriteData;return this._validateStretch(o.stretchX,m&&m.width)||(this.fire(new d.j(new Error(`Image "${e}" has invalid "stretchX" value`))),p=!1),this._validateStretch(o.stretchY,m&&m.height)||(this.fire(new d.j(new Error(`Image "${e}" has invalid "stretchY" value`))),p=!1),this._validateContent(o.content,o)||(this.fire(new d.j(new Error(`Image "${e}" has invalid "content" value`))),p=!1),p}_validateStretch(e,o){if(!e)return!0;let p=0;for(const m of e){if(m[0]<p||m[1]<m[0]||o<m[1])return!1;p=m[1]}return!0}_validateContent(e,o){if(!e)return!0;if(e.length!==4)return!1;const p=o.spriteData,m=p&&p.width||o.data.width,y=p&&p.height||o.data.height;return!(e[0]<0||m<e[0]||e[1]<0||y<e[1]||e[2]<0||m<e[2]||e[3]<0||y<e[3]||e[2]<e[0]||e[3]<e[1])}updateImage(e,o,p=!0){const m=this.getImage(e);if(p&&(m.data.width!==o.data.width||m.data.height!==o.data.height))throw new Error(`size mismatch between old image (${m.data.width}x${m.data.height}) and new image (${o.data.width}x${o.data.height}).`);o.version=m.version+1,this.images[e]=o,this.updatedImages[e]=!0}removeImage(e){const o=this.images[e];delete this.images[e],delete this.patterns[e],o.userImage&&o.userImage.onRemove&&o.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(e){return new Promise(((o,p)=>{let m=!0;if(!this.isLoaded())for(const y of e)this.images[y]||(m=!1);this.isLoaded()||m?o(this._getImagesForIds(e)):this.requestors.push({ids:e,promiseResolve:o})}))}_getImagesForIds(e){const o={};for(const p of e){let m=this.getImage(p);m||(this.fire(new d.k("styleimagemissing",{id:p})),m=this.getImage(p)),m?o[p]={data:m.data.clone(),pixelRatio:m.pixelRatio,sdf:m.sdf,version:m.version,stretchX:m.stretchX,stretchY:m.stretchY,content:m.content,textFitWidth:m.textFitWidth,textFitHeight:m.textFitHeight,hasRenderCallback:!!(m.userImage&&m.userImage.render)}:d.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return o}getPixelSize(){const{width:e,height:o}=this.atlasImage;return{width:e,height:o}}getPattern(e){const o=this.patterns[e],p=this.getImage(e);if(!p)return null;if(o&&o.position.version===p.version)return o.position;if(o)o.position.version=p.version;else{const m={w:p.data.width+2,h:p.data.height+2,x:0,y:0},y=new d.I(m,p);this.patterns[e]={bin:m,position:y}}return this._updatePatternAtlas(),this.patterns[e].position}bind(e){const o=e.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ct(e,this.atlasImage,o.RGBA),this.atlasTexture.bind(o.LINEAR,o.CLAMP_TO_EDGE)}_updatePatternAtlas(){const e=[];for(const y in this.patterns)e.push(this.patterns[y].bin);const{w:o,h:p}=d.p(e),m=this.atlasImage;m.resize({width:o||1,height:p||1});for(const y in this.patterns){const{bin:T}=this.patterns[y],P=T.x+1,M=T.y+1,B=this.getImage(y).data,$=B.width,U=B.height;d.R.copy(B,m,{x:0,y:0},{x:P,y:M},{width:$,height:U}),d.R.copy(B,m,{x:0,y:U-1},{x:P,y:M-1},{width:$,height:1}),d.R.copy(B,m,{x:0,y:0},{x:P,y:M+U},{width:$,height:1}),d.R.copy(B,m,{x:$-1,y:0},{x:P-1,y:M},{width:1,height:U}),d.R.copy(B,m,{x:0,y:0},{x:P+$,y:M},{width:1,height:U})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(e){for(const o of e){if(this.callbackDispatchedThisFrame[o])continue;this.callbackDispatchedThisFrame[o]=!0;const p=this.getImage(o);p||d.w(`Image with ID: "${o}" was not found`),Jt(p)&&this.updateImage(o,p)}}}const at=1e20;function Tt(v,e,o,p,m,y,T,P,M){for(let B=e;B<e+p;B++)Et(v,o*y+B,y,m,T,P,M);for(let B=o;B<o+m;B++)Et(v,B*y+e,1,p,T,P,M)}function Et(v,e,o,p,m,y,T){y[0]=0,T[0]=-at,T[1]=at,m[0]=v[e];for(let P=1,M=0,B=0;P<p;P++){m[P]=v[e+P*o];const $=P*P;do{const U=y[M];B=(m[P]-m[U]+$-U*U)/(P-U)/2}while(B<=T[M]&&--M>-1);M++,y[M]=P,T[M]=B,T[M+1]=at}for(let P=0,M=0;P<p;P++){for(;T[M+1]<P;)M++;const B=y[M],$=P-B;v[e+P*o]=m[B]+$*$}}class gt{constructor(e,o){this.requestManager=e,this.localIdeographFontFamily=o,this.entries={}}setURL(e){this.url=e}getGlyphs(e){return d._(this,void 0,void 0,(function*(){const o=[];for(const y in e)for(const T of e[y])o.push(this._getAndCacheGlyphsPromise(y,T));const p=yield Promise.all(o),m={};for(const{stack:y,id:T,glyph:P}of p)m[y]||(m[y]={}),m[y][T]=P&&{id:P.id,bitmap:P.bitmap.clone(),metrics:P.metrics};return m}))}_getAndCacheGlyphsPromise(e,o){return d._(this,void 0,void 0,(function*(){let p=this.entries[e];p||(p=this.entries[e]={glyphs:{},requests:{},ranges:{}});let m=p.glyphs[o];if(m!==void 0)return{stack:e,id:o,glyph:m};if(m=this._tinySDF(p,e,o),m)return p.glyphs[o]=m,{stack:e,id:o,glyph:m};const y=Math.floor(o/256);if(256*y>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[y])return{stack:e,id:o,glyph:m};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[y]){const P=gt.loadGlyphRange(e,y,this.url,this.requestManager);p.requests[y]=P}const T=yield p.requests[y];for(const P in T)this._doesCharSupportLocalGlyph(+P)||(p.glyphs[+P]=T[+P]);return p.ranges[y]=!0,{stack:e,id:o,glyph:T[o]||null}}))}_doesCharSupportLocalGlyph(e){return!!this.localIdeographFontFamily&&/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(e))}_tinySDF(e,o,p){const m=this.localIdeographFontFamily;if(!m||!this._doesCharSupportLocalGlyph(p))return;let y=e.tinySDF;if(!y){let P="400";/bold/i.test(o)?P="900":/medium/i.test(o)?P="500":/light/i.test(o)&&(P="200"),y=e.tinySDF=new gt.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:m,fontWeight:P})}const T=y.draw(String.fromCharCode(p));return{id:p,bitmap:new d.o({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}gt.loadGlyphRange=function(v,e,o,p){return d._(this,void 0,void 0,(function*(){const m=256*e,y=m+255,T=p.transformRequest(o.replace("{fontstack}",v).replace("{range}",`${m}-${y}`),"Glyphs"),P=yield d.l(T,new AbortController);if(!P||!P.data)throw new Error(`Could not load glyph range. range: ${e}, ${m}-${y}`);const M={};for(const B of d.n(P.data))M[B.id]=B;return M}))},gt.TinySDF=class{constructor({fontSize:v=24,buffer:e=3,radius:o=8,cutoff:p=.25,fontFamily:m="sans-serif",fontWeight:y="normal",fontStyle:T="normal"}={}){this.buffer=e,this.cutoff=p,this.radius=o;const P=this.size=v+4*e,M=this._createCanvas(P),B=this.ctx=M.getContext("2d",{willReadFrequently:!0});B.font=`${T} ${y} ${v}px ${m}`,B.textBaseline="alphabetic",B.textAlign="left",B.fillStyle="black",this.gridOuter=new Float64Array(P*P),this.gridInner=new Float64Array(P*P),this.f=new Float64Array(P),this.z=new Float64Array(P+1),this.v=new Uint16Array(P)}_createCanvas(v){const e=document.createElement("canvas");return e.width=e.height=v,e}draw(v){const{width:e,actualBoundingBoxAscent:o,actualBoundingBoxDescent:p,actualBoundingBoxLeft:m,actualBoundingBoxRight:y}=this.ctx.measureText(v),T=Math.ceil(o),P=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(y-m))),M=Math.min(this.size-this.buffer,T+Math.ceil(p)),B=P+2*this.buffer,$=M+2*this.buffer,U=Math.max(B*$,0),X=new Uint8ClampedArray(U),ee={data:X,width:B,height:$,glyphWidth:P,glyphHeight:M,glyphTop:T,glyphLeft:0,glyphAdvance:e};if(P===0||M===0)return ee;const{ctx:ne,buffer:le,gridInner:ue,gridOuter:me}=this;ne.clearRect(le,le,P,M),ne.fillText(v,le,le+T);const ye=ne.getImageData(le,le,P,M);me.fill(at,0,U),ue.fill(0,0,U);for(let ce=0;ce<M;ce++)for(let Ne=0;Ne<P;Ne++){const Ce=ye.data[4*(ce*P+Ne)+3]/255;if(Ce===0)continue;const ze=(ce+le)*B+Ne+le;if(Ce===1)me[ze]=0,ue[ze]=at;else{const Ge=.5-Ce;me[ze]=Ge>0?Ge*Ge:0,ue[ze]=Ge<0?Ge*Ge:0}}Tt(me,0,0,B,$,B,this.f,this.v,this.z),Tt(ue,le,le,P,M,B,this.f,this.v,this.z);for(let ce=0;ce<U;ce++){const Ne=Math.sqrt(me[ce])-Math.sqrt(ue[ce]);X[ce]=Math.round(255-255*(Ne/this.radius+this.cutoff))}return ee}};class Be{constructor(){this.specification=d.v.light.position}possiblyEvaluate(e,o){return d.x(e.expression.evaluate(o))}interpolate(e,o,p){return{x:d.y.number(e.x,o.x,p),y:d.y.number(e.y,o.y,p),z:d.y.number(e.z,o.z,p)}}}let Nt;class it extends d.E{constructor(e){super(),Nt=Nt||new d.q({anchor:new d.D(d.v.light.anchor),position:new Be,color:new d.D(d.v.light.color),intensity:new d.D(d.v.light.intensity)}),this._transitionable=new d.T(Nt),this.setLight(e),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(e,o={}){if(!this._validate(d.r,e,o))for(const p in e){const m=e[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,p){return(!p||p.validate!==!1)&&d.t(this,e.call(d.u,{value:o,style:{glyphs:!0,sprite:!0},styleSpec:d.v}))}}const Se=new d.q({"sky-color":new d.D(d.v.sky["sky-color"]),"horizon-color":new d.D(d.v.sky["horizon-color"]),"fog-color":new d.D(d.v.sky["fog-color"]),"fog-ground-blend":new d.D(d.v.sky["fog-ground-blend"]),"horizon-fog-blend":new d.D(d.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new d.D(d.v.sky["sky-horizon-blend"]),"atmosphere-blend":new d.D(d.v.sky["atmosphere-blend"])});class Ye extends d.E{constructor(e){super(),this._transitionable=new d.T(Se),this.setSky(e),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new d.z(0))}setSky(e,o={}){if(!this._validate(d.B,e,o)){e||(e={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in e){const m=e[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),m):this._transitionable.setValue(p,m)}}}getSky(){return this._transitionable.serialize()}updateTransitions(e){this._transitioning=this._transitionable.transitioned(e,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(e){this.properties=this._transitioning.possiblyEvaluate(e)}_validate(e,o,p={}){return p?.validate!==!1&&d.t(this,e.call(d.u,d.e({value:o,style:{glyphs:!0,sprite:!0},styleSpec:d.v})))}calculateFogBlendOpacity(e){return e<60?0:e<70?(e-60)/10:1}}class ot{constructor(e,o){this.width=e,this.height=o,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(e,o){const p=e.join(",")+String(o);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(e,o)),this.dashEntry[p]}getDashRanges(e,o,p){const m=[];let y=e.length%2==1?-e[e.length-1]*p:0,T=e[0]*p,P=!0;m.push({left:y,right:T,isDash:P,zeroLength:e[0]===0});let M=e[0];for(let B=1;B<e.length;B++){P=!P;const $=e[B];y=M*p,M+=$,T=M*p,m.push({left:y,right:T,isDash:P,zeroLength:$===0})}return m}addRoundDash(e,o,p){const m=o/2;for(let y=-p;y<=p;y++){const T=this.width*(this.nextRow+p+y);let P=0,M=e[P];for(let B=0;B<this.width;B++){B/M.right>1&&(M=e[++P]);const $=Math.abs(B-M.left),U=Math.abs(B-M.right),X=Math.min($,U);let ee;const ne=y/p*(m+1);if(M.isDash){const le=m-Math.abs(ne);ee=Math.sqrt(X*X+le*le)}else ee=m-Math.sqrt(X*X+ne*ne);this.data[T+B]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(e){for(let P=e.length-1;P>=0;--P){const M=e[P],B=e[P+1];M.zeroLength?e.splice(P,1):B&&B.isDash===M.isDash&&(B.left=M.left,e.splice(P,1))}const o=e[0],p=e[e.length-1];o.isDash===p.isDash&&(o.left=p.left-this.width,p.right=o.right+this.width);const m=this.width*this.nextRow;let y=0,T=e[y];for(let P=0;P<this.width;P++){P/T.right>1&&(T=e[++y]);const M=Math.abs(P-T.left),B=Math.abs(P-T.right),$=Math.min(M,B);this.data[m+P]=Math.max(0,Math.min(255,(T.isDash?$:-$)+128))}}addDash(e,o){const p=o?7:0,m=2*p+1;if(this.nextRow+m>this.height)return d.w("LineAtlas out of space"),null;let y=0;for(let P=0;P<e.length;P++)y+=e[P];if(y!==0){const P=this.width/y,M=this.getDashRanges(e,this.width,P);o?this.addRoundDash(M,P,p):this.addRegularDash(M)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:y};return this.nextRow+=m,this.dirty=!0,T}bind(e){const o=e.gl;this.texture?(o.bindTexture(o.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,o.texSubImage2D(o.TEXTURE_2D,0,0,0,this.width,this.height,o.ALPHA,o.UNSIGNED_BYTE,this.data))):(this.texture=o.createTexture(),o.bindTexture(o.TEXTURE_2D,this.texture),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.REPEAT),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texImage2D(o.TEXTURE_2D,0,o.ALPHA,this.width,this.height,0,o.ALPHA,o.UNSIGNED_BYTE,this.data))}}const _t="maplibre_preloaded_worker_pool";class zt{constructor(){this.active={}}acquire(e){if(!this.workers)for(this.workers=[];this.workers.length<zt.workerCount;)this.workers.push(new Worker(d.a.WORKER_URL));return this.active[e]=!0,this.workers.slice()}release(e){delete this.active[e],this.numActive()===0&&(this.workers.forEach((o=>{o.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[_t]}numActive(){return Object.keys(this.active).length}}const ti=Math.floor(D.hardwareConcurrency/2);let Ot,Rt;function xi(){return Ot||(Ot=new zt),Ot}zt.workerCount=d.C(globalThis)?Math.max(Math.min(ti,3),1):1;class Bi{constructor(e,o){this.workerPool=e,this.actors=[],this.currentActor=0,this.id=o;const p=this.workerPool.acquire(o);for(let m=0;m<p.length;m++){const y=new d.F(p[m],o);y.name=`Worker ${m}`,this.actors.push(y)}if(!this.actors.length)throw new Error("No actors found")}broadcast(e,o){const p=[];for(const m of this.actors)p.push(m.sendAsync({type:e,data:o}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(e=!0){this.actors.forEach((o=>{o.remove()})),this.actors=[],e&&this.workerPool.release(this.id)}registerMessageHandler(e,o){for(const p of this.actors)p.registerMessageHandler(e,o)}}function Ys(){return Rt||(Rt=new Bi(xi(),d.G),Rt.registerMessageHandler("GR",((v,e,o)=>d.m(e,o)))),Rt}function hs(v,e){const o=d.H();return d.J(o,o,[1,1,0]),d.K(o,o,[.5*v.width,.5*v.height,1]),d.L(o,o,v.calculatePosMatrix(e.toUnwrapped()))}function Gr(v,e,o,p,m,y){const T=(function(U,X,ee){if(U)for(const ne of U){const le=X[ne];if(le&&le.source===ee&&le.type==="fill-extrusion")return!0}else for(const ne in X){const le=X[ne];if(le.source===ee&&le.type==="fill-extrusion")return!0}return!1})(m&&m.layers,e,v.id),P=y.maxPitchScaleFactor(),M=v.tilesIn(p,P,T);M.sort(Pr);const B=[];for(const U of M)B.push({wrappedTileID:U.tileID.wrapped().key,queryResults:U.tile.queryRenderedFeatures(e,o,v._state,U.queryGeometry,U.cameraQueryGeometry,U.scale,m,y,P,hs(v.transform,U.tileID))});const $=(function(U){const X={},ee={};for(const ne of U){const le=ne.queryResults,ue=ne.wrappedTileID,me=ee[ue]=ee[ue]||{};for(const ye in le){const ce=le[ye],Ne=me[ye]=me[ye]||{},Ce=X[ye]=X[ye]||[];for(const ze of ce)Ne[ze.featureIndex]||(Ne[ze.featureIndex]=!0,Ce.push(ze))}}return X})(B);for(const U in $)$[U].forEach((X=>{const ee=X.feature,ne=v.getFeatureState(ee.layer["source-layer"],ee.id);ee.source=ee.layer.source,ee.layer["source-layer"]&&(ee.sourceLayer=ee.layer["source-layer"]),ee.state=ne}));return $}function Pr(v,e){const o=v.tileID,p=e.tileID;return o.overscaledZ-p.overscaledZ||o.canonical.y-p.canonical.y||o.wrap-p.wrap||o.canonical.x-p.canonical.x}function pa(v,e,o){return d._(this,void 0,void 0,(function*(){let p=v;if(v.url?p=(yield d.h(e.transformRequest(v.url,"Source"),o)).data:yield D.frameAsync(o),!p)return null;const m=d.M(d.e(p,v),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(m.vectorLayerIds=p.vector_layers.map((y=>y.id))),m}))}class Oe{constructor(e,o){e&&(o?this.setSouthWest(e).setNorthEast(o):Array.isArray(e)&&(e.length===4?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1])))}setNorthEast(e){return this._ne=e instanceof d.N?new d.N(e.lng,e.lat):d.N.convert(e),this}setSouthWest(e){return this._sw=e instanceof d.N?new d.N(e.lng,e.lat):d.N.convert(e),this}extend(e){const o=this._sw,p=this._ne;let m,y;if(e instanceof d.N)m=e,y=e;else{if(!(e instanceof Oe))return Array.isArray(e)?e.length===4||e.every(Array.isArray)?this.extend(Oe.convert(e)):this.extend(d.N.convert(e)):e&&("lng"in e||"lon"in e)&&"lat"in e?this.extend(d.N.convert(e)):this;if(m=e._sw,y=e._ne,!m||!y)return this}return o||p?(o.lng=Math.min(m.lng,o.lng),o.lat=Math.min(m.lat,o.lat),p.lng=Math.max(y.lng,p.lng),p.lat=Math.max(y.lat,p.lat)):(this._sw=new d.N(m.lng,m.lat),this._ne=new d.N(y.lng,y.lat)),this}getCenter(){return new d.N((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new d.N(this.getWest(),this.getNorth())}getSouthEast(){return new d.N(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(e){const{lng:o,lat:p}=d.N.convert(e);let m=this._sw.lng<=o&&o<=this._ne.lng;return this._sw.lng>this._ne.lng&&(m=this._sw.lng>=o&&o>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&m}static convert(e){return e instanceof Oe?e:e&&new Oe(e)}static fromLngLat(e,o=0){const p=360*o/40075017,m=p/Math.cos(Math.PI/180*e.lat);return new Oe(new d.N(e.lng-m,e.lat-p),new d.N(e.lng+m,e.lat+p))}adjustAntiMeridian(){const e=new d.N(this._sw.lng,this._sw.lat),o=new d.N(this._ne.lng,this._ne.lat);return new Oe(e,e.lng>o.lng?new d.N(o.lng+360,o.lat):o)}}class mr{constructor(e,o,p){this.bounds=Oe.convert(this.validateBounds(e)),this.minzoom=o||0,this.maxzoom=p||24}validateBounds(e){return Array.isArray(e)&&e.length===4?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]}contains(e){const o=Math.pow(2,e.z),p=Math.floor(d.O(this.bounds.getWest())*o),m=Math.floor(d.Q(this.bounds.getNorth())*o),y=Math.ceil(d.O(this.bounds.getEast())*o),T=Math.ceil(d.Q(this.bounds.getSouth())*o);return e.x>=p&&e.x<y&&e.y>=m&&e.y<T}}class ma extends d.E{constructor(e,o,p,m){if(super(),this.id=e,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,d.e(this,d.M(o,["url","scheme","tileSize","promoteId"])),this._options=d.e({type:"vector"},o),this._collectResourceTiming=o.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(m)}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield pa(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),e&&(d.e(this,e),e.bounds&&(this.tileBounds=new mr(e.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new d.j(e))}}))}loaded(){return this._loaded}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}onAdd(e){this.map=e,this.load()}setSourceProperty(e){this._tileJSONRequest&&this._tileJSONRequest.abort(),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return d.e({},this._options)}loadTile(e){return d._(this,void 0,void 0,(function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(o,"Tile"),uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,tileSize:this.tileSize*e.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};p.request.collectResourceTiming=this._collectResourceTiming;let m="RT";if(e.actor&&e.state!=="expired"){if(e.state==="loading")return new Promise(((y,T)=>{e.reloadPromise={resolve:y,reject:T}}))}else e.actor=this.dispatcher.getActor(),m="LT";e.abortController=new AbortController;try{const y=yield e.actor.sendAsync({type:m,data:p},e.abortController);if(delete e.abortController,e.aborted)return;this._afterTileLoadWorkerResponse(e,y)}catch(y){if(delete e.abortController,e.aborted)return;if(y&&y.status!==404)throw y;this._afterTileLoadWorkerResponse(e,null)}}))}_afterTileLoadWorkerResponse(e,o){if(o&&o.resourceTiming&&(e.resourceTiming=o.resourceTiming),o&&this.map._refreshExpiredTiles&&e.setExpiryData(o),e.loadVectorData(o,this.map.painter),e.reloadPromise){const p=e.reloadPromise;e.reloadPromise=null,this.loadTile(e).then(p.resolve).catch(p.reject)}}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.actor&&(yield e.actor.sendAsync({type:"AT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.unloadVectorData(),e.actor&&(yield e.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class hi extends d.E{constructor(e,o,p,m){super(),this.id=e,this.dispatcher=p,this.setEventedParent(m),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=d.e({type:"raster"},o),d.e(this,d.M(o,["url","scheme","tileSize"]))}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const e=yield pa(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,e&&(d.e(this,e),e.bounds&&(this.tileBounds=new mr(e.bounds,this.minzoom,this.maxzoom)),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})))}catch(e){this._tileJSONRequest=null,this.fire(new d.j(e))}}))}loaded(){return this._loaded}onAdd(e){this.map=e,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(e){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),e(),this.load()}setTiles(e){return this.setSourceProperty((()=>{this._options.tiles=e})),this}setUrl(e){return this.setSourceProperty((()=>{this.url=e,this._options.url=e})),this}serialize(){return d.e({},this._options)}hasTile(e){return!this.tileBounds||this.tileBounds.contains(e.canonical)}loadTile(e){return d._(this,void 0,void 0,(function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);e.abortController=new AbortController;try{const p=yield Ie.getImage(this.map._requestManager.transformRequest(o,"Tile"),e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&p.cacheControl&&p.expires&&e.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const m=this.map.painter.context,y=m.gl,T=p.data;e.texture=this.map.painter.getTileTexture(T.width),e.texture?e.texture.update(T,{useMipmap:!0}):(e.texture=new ct(m,T,y.RGBA,{useMipmap:!0}),e.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE,y.LINEAR_MIPMAP_NEAREST)),e.state="loaded"}}catch(p){if(delete e.abortController,e.aborted)e.state="unloaded";else if(p)throw e.state="errored",p}}))}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController)}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.texture&&this.map.painter.saveTileTexture(e.texture)}))}hasTransition(){return!1}}class Fi extends hi{constructor(e,o,p,m){super(e,o,p,m),this.type="raster-dem",this.maxzoom=22,this._options=d.e({type:"raster-dem"},o),this.encoding=o.encoding||"mapbox",this.redFactor=o.redFactor,this.greenFactor=o.greenFactor,this.blueFactor=o.blueFactor,this.baseShift=o.baseShift}loadTile(e){return d._(this,void 0,void 0,(function*(){const o=e.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(o,"Tile");e.neighboringTiles=this._getNeighboringTiles(e.tileID),e.abortController=new AbortController;try{const m=yield Ie.getImage(p,e.abortController,this.map._refreshExpiredTiles);if(delete e.abortController,e.aborted)return void(e.state="unloaded");if(m&&m.data){const y=m.data;this.map._refreshExpiredTiles&&m.cacheControl&&m.expires&&e.setExpiryData({cacheControl:m.cacheControl,expires:m.expires});const T=d.b(y)&&d.U()?y:yield this.readImageNow(y),P={type:this.type,uid:e.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!e.actor||e.state==="expired"){e.actor=this.dispatcher.getActor();const M=yield e.actor.sendAsync({type:"LDT",data:P});e.dem=M,e.needsHillshadePrepare=!0,e.needsTerrainPrepare=!0,e.state="loaded"}}}catch(m){if(delete e.abortController,e.aborted)e.state="unloaded";else if(m)throw e.state="errored",m}}))}readImageNow(e){return d._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&d.V()){const o=e.width+2,p=e.height+2;try{return new d.R({width:o,height:p},yield d.W(e,-1,-1,o,p))}catch{}}return D.getImageData(e,1)}))}_getNeighboringTiles(e){const o=e.canonical,p=Math.pow(2,o.z),m=(o.x-1+p)%p,y=o.x===0?e.wrap-1:e.wrap,T=(o.x+1+p)%p,P=o.x+1===p?e.wrap+1:e.wrap,M={};return M[new d.S(e.overscaledZ,y,o.z,m,o.y).key]={backfilled:!1},M[new d.S(e.overscaledZ,P,o.z,T,o.y).key]={backfilled:!1},o.y>0&&(M[new d.S(e.overscaledZ,y,o.z,m,o.y-1).key]={backfilled:!1},M[new d.S(e.overscaledZ,e.wrap,o.z,o.x,o.y-1).key]={backfilled:!1},M[new d.S(e.overscaledZ,P,o.z,T,o.y-1).key]={backfilled:!1}),o.y+1<p&&(M[new d.S(e.overscaledZ,y,o.z,m,o.y+1).key]={backfilled:!1},M[new d.S(e.overscaledZ,e.wrap,o.z,o.x,o.y+1).key]={backfilled:!1},M[new d.S(e.overscaledZ,P,o.z,T,o.y+1).key]={backfilled:!1}),M}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.demTexture&&this.map.painter.saveTileTexture(e.demTexture),e.fbo&&(e.fbo.destroy(),delete e.fbo),e.dem&&delete e.dem,delete e.neighboringTiles,e.state="unloaded",e.actor&&(yield e.actor.sendAsync({type:"RDT",data:{type:this.type,uid:e.uid,source:this.id}}))}))}}class dn extends d.E{constructor(e,o,p,m){super(),this.id=e,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(m),this._data=o.data,this._options=d.e({},o),this._collectResourceTiming=o.collectResourceTiming,o.maxzoom!==void 0&&(this.maxzoom=o.maxzoom),o.type&&(this.type=o.type),o.attribution&&(this.attribution=o.attribution),this.promoteId=o.promoteId;const y=d.X/this.tileSize;o.clusterMaxZoom!==void 0&&this.maxzoom<=o.clusterMaxZoom&&d.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${o.clusterMaxZoom}".`),this.workerOptions=d.e({source:this.id,cluster:o.cluster||!1,geojsonVtOptions:{buffer:(o.buffer!==void 0?o.buffer:128)*y,tolerance:(o.tolerance!==void 0?o.tolerance:.375)*y,extent:d.X,maxZoom:this.maxzoom,lineMetrics:o.lineMetrics||!1,generateId:o.generateId||!1},superclusterOptions:{maxZoom:o.clusterMaxZoom!==void 0?o.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,o.clusterMinPoints||2),extent:d.X,radius:(o.clusterRadius||50)*y,log:!1,generateId:o.generateId||!1},clusterProperties:o.clusterProperties,filter:o.filter},o.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}load(){return d._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(e){this.map=e,this.load()}setData(e){return this._data=e,this._updateWorkerData(),this}updateData(e){return this._updateWorkerData(e),this}getData(){return d._(this,void 0,void 0,(function*(){const e=d.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:e})}))}setClusterOptions(e){return this.workerOptions.cluster=e.cluster,e&&(e.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=e.clusterRadius),e.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=e.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(e){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:e,source:this.id}})}getClusterChildren(e){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:e,source:this.id}})}getClusterLeaves(e,o,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:e,limit:o,offset:p}})}_updateWorkerData(e){return d._(this,void 0,void 0,(function*(){const o=d.e({type:this.type},this.workerOptions);e?o.dataDiff=e:typeof this._data=="string"?(o.request=this.map._requestManager.transformRequest(D.resolveURL(this._data),"Source"),o.request.collectResourceTiming=this._collectResourceTiming):o.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new d.k("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:o});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new d.k("dataabort",{dataType:"source"}));let m=null;p.resourceTiming&&p.resourceTiming[this.id]&&(m=p.resourceTiming[this.id].slice(0));const y={dataType:"source"};this._collectResourceTiming&&m&&m.length>0&&d.e(y,{resourceTiming:m}),this.fire(new d.k("data",Object.assign(Object.assign({},y),{sourceDataType:"metadata"}))),this.fire(new d.k("data",Object.assign(Object.assign({},y),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new d.k("dataabort",{dataType:"source"}));this.fire(new d.j(p))}}))}loaded(){return this._pendingLoads===0}loadTile(e){return d._(this,void 0,void 0,(function*(){const o=e.actor?"RT":"LT";e.actor=this.actor;const p={type:this.type,uid:e.uid,tileID:e.tileID,zoom:e.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};e.abortController=new AbortController;const m=yield this.actor.sendAsync({type:o,data:p},e.abortController);delete e.abortController,e.unloadVectorData(),e.aborted||e.loadVectorData(m,this.map.painter,o==="RT")}))}abortTile(e){return d._(this,void 0,void 0,(function*(){e.abortController&&(e.abortController.abort(),delete e.abortController),e.aborted=!0}))}unloadTile(e){return d._(this,void 0,void 0,(function*(){e.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:e.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return d.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}var ss=d.Y([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Js extends d.E{constructor(e,o,p,m){super(),this.id=e,this.dispatcher=p,this.coordinates=o.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(m),this.options=o}load(e){return d._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new d.k("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const o=yield Ie.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,o&&o.data&&(this.image=o.data,e&&(this.coordinates=e),this._finishLoading())}catch(o){this._request=null,this._loaded=!0,this.fire(new d.j(o))}}))}loaded(){return this._loaded}updateImage(e){return e.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=e.url,this.load(e.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new d.k("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(e){this.map=e,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(e){this.coordinates=e;const o=e.map(d.Z.fromLngLat);this.tileID=(function(m){let y=1/0,T=1/0,P=-1/0,M=-1/0;for(const X of m)y=Math.min(y,X.x),T=Math.min(T,X.y),P=Math.max(P,X.x),M=Math.max(M,X.y);const B=Math.max(P-y,M-T),$=Math.max(0,Math.floor(-Math.log(B)/Math.LN2)),U=Math.pow(2,$);return new d.a1($,Math.floor((y+P)/2*U),Math.floor((T+M)/2*U))})(o),this.minzoom=this.maxzoom=this.tileID.z;const p=o.map((m=>this.tileID.getTilePoint(m)._round()));return this._boundsArray=new d.$,this._boundsArray.emplaceBack(p[0].x,p[0].y,0,0),this._boundsArray.emplaceBack(p[1].x,p[1].y,d.X,0),this._boundsArray.emplaceBack(p[3].x,p[3].y,0,d.X),this._boundsArray.emplaceBack(p[2].x,p[2].y,d.X,d.X),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new d.k("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,ss.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture||(this.texture=new ct(e,this.image,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(e){return d._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(e.tileID.canonical)?(this.tiles[String(e.tileID.wrap)]=e,e.buckets={}):e.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}class fa extends Js{constructor(e,o,p,m){super(e,o,p,m),this.roundZoom=!0,this.type="video",this.options=o}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!1;const e=this.options;this.urls=[];for(const o of e.urls)this.urls.push(this.map._requestManager.transformRequest(o,"Source").url);try{const o=yield d.a3(this.urls);if(this._loaded=!0,!o)return;this.video=o,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(o){this.fire(new d.j(o))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(e){if(this.video){const o=this.video.seekable;e<o.start(0)||e>o.end(0)?this.fire(new d.j(new d.a2(`sources.${this.id}`,null,`Playback for this video can be set only between the ${o.start(0)} and ${o.end(0)}-second mark.`))):this.video.currentTime=e}}getVideo(){return this.video}onAdd(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const e=this.map.painter.context,o=e.gl;this.boundsBuffer||(this.boundsBuffer=e.createVertexBuffer(this._boundsArray,ss.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE),o.texSubImage2D(o.TEXTURE_2D,0,0,0,o.RGBA,o.UNSIGNED_BYTE,this.video)):(this.texture=new ct(e,this.video,o.RGBA),this.texture.bind(o.LINEAR,o.CLAMP_TO_EDGE));let p=!1;for(const m in this.tiles){const y=this.tiles[m];y.state!=="loaded"&&(y.state="loaded",y.texture=this.texture,p=!0)}p&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class fr extends Js{constructor(e,o,p,m){super(e,o,p,m),o.coordinates?Array.isArray(o.coordinates)&&o.coordinates.length===4&&!o.coordinates.some((y=>!Array.isArray(y)||y.length!==2||y.some((T=>typeof T!="number"))))||this.fire(new d.j(new d.a2(`sources.${e}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new d.j(new d.a2(`sources.${e}`,null,'missing required property "coordinates"'))),o.animate&&typeof o.animate!="boolean"&&this.fire(new d.j(new d.a2(`sources.${e}`,null,'optional "animate" property must be a boolean value'))),o.canvas?typeof o.canvas=="string"||o.canvas instanceof HTMLCanvasElement||this.fire(new d.j(new d.a2(`sources.${e}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new d.j(new d.a2(`sources.${e}`,null,'missing required property "canvas"'))),this.options=o,this.animate=o.animate===void 0||o.animate}load(){return d._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new d.j(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let e=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const o=this.map.painter.context,p=o.gl;this.boundsBuffer||(this.boundsBuffer=o.createVertexBuffer(this._boundsArray,ss.members)),this.boundsSegments||(this.boundsSegments=d.a0.simpleSegment(0,0,4,2)),this.texture?(e||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ct(o,this.canvas,p.RGBA,{premultiply:!0});let m=!1;for(const y in this.tiles){const T=this.tiles[y];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,m=!0)}m&&this.fire(new d.k("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const e of[this.canvas.width,this.canvas.height])if(isNaN(e)||e<=0)return!0;return!1}}const Mn={},ga=v=>{switch(v){case"geojson":return dn;case"image":return Js;case"raster":return hi;case"raster-dem":return Fi;case"vector":return ma;case"video":return fa;case"canvas":return fr}return Mn[v]},st="RTLPluginLoaded";class gr extends d.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ys()}_syncState(e){return this.status=e,this.dispatcher.broadcast("SRPS",{pluginStatus:e,pluginURL:this.url}).catch((o=>{throw this.status="error",o}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(e){return d._(this,arguments,void 0,(function*(o,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=D.resolveURL(o),!this.url)throw new Error(`requested url ${o} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return d._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new d.k(st))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let Xi=null;function Ks(){return Xi||(Xi=new gr),Xi}class xr{constructor(e,o){this.timeAdded=0,this.fadeEndTime=0,this.tileID=e,this.uid=d.a4(),this.uses=0,this.tileSize=o,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(e){const o=e+this.timeAdded;o<this.fadeEndTime||(this.fadeEndTime=o)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(e){this.demTexture&&e.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(e,o,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",e){e.featureIndex&&(this.latestFeatureIndex=e.featureIndex,e.rawTileData?(this.latestRawTileData=e.rawTileData,this.latestFeatureIndex.rawTileData=e.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=e.collisionBoxArray,this.buckets=(function(m,y){const T={};if(!y)return T;for(const P of m){const M=P.layerIds.map((B=>y.getLayer(B))).filter(Boolean);if(M.length!==0){P.layers=M,P.stateDependentLayerIds&&(P.stateDependentLayers=P.stateDependentLayerIds.map((B=>M.filter(($=>$.id===B))[0])));for(const B of M)T[B.id]=P}}return T})(e.buckets,o.style),this.hasSymbolBuckets=!1;for(const m in this.buckets){const y=this.buckets[m];if(y instanceof d.a6){if(this.hasSymbolBuckets=!0,!p)break;y.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const m in this.buckets){const y=this.buckets[m];if(y instanceof d.a6&&y.hasRTLText){this.hasRTLText=!0,Ks().lazyLoad();break}}this.queryPadding=0;for(const m in this.buckets){const y=this.buckets[m];this.queryPadding=Math.max(this.queryPadding,o.style.getLayer(m).queryRadius(y))}e.imageAtlas&&(this.imageAtlas=e.imageAtlas),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)}else this.collisionBoxArray=new d.a5}unloadVectorData(){for(const e in this.buckets)this.buckets[e].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(e){return this.buckets[e.id]}upload(e){for(const p in this.buckets){const m=this.buckets[p];m.uploadPending()&&m.upload(e)}const o=e.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ct(e,this.imageAtlas.image,o.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ct(e,this.glyphAtlasImage,o.ALPHA),this.glyphAtlasImage=null)}prepare(e){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(e,this.imageAtlasTexture)}queryRenderedFeatures(e,o,p,m,y,T,P,M,B,$){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:m,cameraQueryGeometry:y,scale:T,tileSize:this.tileSize,pixelPosMatrix:$,transform:M,params:P,queryPadding:this.queryPadding*B},e,o,p):{}}querySourceFeatures(e,o){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const m=p.loadVTLayers(),y=o&&o.sourceLayer?o.sourceLayer:"",T=m._geojsonTileLayer||m[y];if(!T)return;const P=d.a7(o&&o.filter),{z:M,x:B,y:$}=this.tileID.canonical,U={z:M,x:B,y:$};for(let X=0;X<T.length;X++){const ee=T.feature(X);if(P.needGeometry){const ue=d.a8(ee,!0);if(!P.filter(new d.z(this.tileID.overscaledZ),ue,this.tileID.canonical))continue}else if(!P.filter(new d.z(this.tileID.overscaledZ),ee))continue;const ne=p.getId(ee,y),le=new d.a9(ee,M,B,$,ne);le.tile=U,e.push(le)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(e){const o=this.expirationTime;if(e.cacheControl){const p=d.aa(e.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){const p=Date.now();let m=!1;if(this.expirationTime>p)m=!1;else if(o)if(this.expirationTime<o)m=!0;else{const y=this.expirationTime-o;y?this.expirationTime=p+Math.max(y,3e4):m=!0}else m=!0;m?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(e,o){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(e).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const m in this.buckets){if(!o.style.hasLayer(m))continue;const y=this.buckets[m],T=y.layers[0].sourceLayer||"_geojsonTileLayer",P=p[T],M=e[T];if(!P||!M||Object.keys(M).length===0)continue;y.update(M,P,this.imageAtlas&&this.imageAtlas.patternPositions||{});const B=o&&o.style&&o.style.getLayer(m);B&&(this.queryPadding=Math.max(this.queryPadding,B.queryRadius(y)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<D.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(e){this.symbolFadeHoldUntil=D.now()+e}setDependencies(e,o){const p={};for(const m of o)p[m]=!0;this.dependencies[e]=p}hasDependency(e,o){for(const p of e){const m=this.dependencies[p];if(m){for(const y of o)if(m[y])return!0}}return!1}}class dt{constructor(e,o){this.max=e,this.onRemove=o,this.reset()}reset(){for(const e in this.data)for(const o of this.data[e])o.timeout&&clearTimeout(o.timeout),this.onRemove(o.value);return this.data={},this.order=[],this}add(e,o,p){const m=e.wrapped().key;this.data[m]===void 0&&(this.data[m]=[]);const y={value:o,timeout:void 0};if(p!==void 0&&(y.timeout=setTimeout((()=>{this.remove(e,y)}),p)),this.data[m].push(y),this.order.push(m),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(e){return e.wrapped().key in this.data}getAndRemove(e){return this.has(e)?this._getAndRemoveByKey(e.wrapped().key):null}_getAndRemoveByKey(e){const o=this.data[e].shift();return o.timeout&&clearTimeout(o.timeout),this.data[e].length===0&&delete this.data[e],this.order.splice(this.order.indexOf(e),1),o.value}getByKey(e){const o=this.data[e];return o?o[0].value:null}get(e){return this.has(e)?this.data[e.wrapped().key][0].value:null}remove(e,o){if(!this.has(e))return this;const p=e.wrapped().key,m=o===void 0?0:this.data[p].indexOf(o),y=this.data[p][m];return this.data[p].splice(m,1),y.timeout&&clearTimeout(y.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(y.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(e){for(this.max=e;this.order.length>this.max;){const o=this._getAndRemoveByKey(this.order[0]);o&&this.onRemove(o)}return this}filter(e){const o=[];for(const p in this.data)for(const m of this.data[p])e(m.value)||o.push(m);for(const p of o)this.remove(p.value.tileID,p)}}class ui{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(e,o,p){const m=String(o);if(this.stateChanges[e]=this.stateChanges[e]||{},this.stateChanges[e][m]=this.stateChanges[e][m]||{},d.e(this.stateChanges[e][m],p),this.deletedStates[e]===null){this.deletedStates[e]={};for(const y in this.state[e])y!==m&&(this.deletedStates[e][y]=null)}else if(this.deletedStates[e]&&this.deletedStates[e][m]===null){this.deletedStates[e][m]={};for(const y in this.state[e][m])p[y]||(this.deletedStates[e][m][y]=null)}else for(const y in p)this.deletedStates[e]&&this.deletedStates[e][m]&&this.deletedStates[e][m][y]===null&&delete this.deletedStates[e][m][y]}removeFeatureState(e,o,p){if(this.deletedStates[e]===null)return;const m=String(o);if(this.deletedStates[e]=this.deletedStates[e]||{},p&&o!==void 0)this.deletedStates[e][m]!==null&&(this.deletedStates[e][m]=this.deletedStates[e][m]||{},this.deletedStates[e][m][p]=null);else if(o!==void 0)if(this.stateChanges[e]&&this.stateChanges[e][m])for(p in this.deletedStates[e][m]={},this.stateChanges[e][m])this.deletedStates[e][m][p]=null;else this.deletedStates[e][m]=null;else this.deletedStates[e]=null}getState(e,o){const p=String(o),m=d.e({},(this.state[e]||{})[p],(this.stateChanges[e]||{})[p]);if(this.deletedStates[e]===null)return{};if(this.deletedStates[e]){const y=this.deletedStates[e][o];if(y===null)return{};for(const T in y)delete m[T]}return m}initializeTileState(e,o){e.setFeatureState(this.state,o)}coalesceChanges(e,o){const p={};for(const m in this.stateChanges){this.state[m]=this.state[m]||{};const y={};for(const T in this.stateChanges[m])this.state[m][T]||(this.state[m][T]={}),d.e(this.state[m][T],this.stateChanges[m][T]),y[T]=this.state[m][T];p[m]=y}for(const m in this.deletedStates){this.state[m]=this.state[m]||{};const y={};if(this.deletedStates[m]===null)for(const T in this.state[m])y[T]={},this.state[m][T]={};else for(const T in this.deletedStates[m]){if(this.deletedStates[m][T]===null)this.state[m][T]={};else for(const P of Object.keys(this.deletedStates[m][T]))delete this.state[m][T][P];y[T]=this.state[m][T]}p[m]=p[m]||{},d.e(p[m],y)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const m in e)e[m].setFeatureState(p,o)}}class Kt extends d.E{constructor(e,o,p){super(),this.id=e,this.dispatcher=p,this.on("data",(m=>this._dataHandler(m))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((m,y,T,P)=>{const M=new(ga(y.type))(m,y,T,P);if(M.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${M.id}`);return M})(e,o,p,this),this._tiles={},this._cache=new dt(0,(m=>this._unloadTile(m))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new ui,this._didEmitContent=!1,this._updated=!1}onAdd(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._maxTileCacheZoomLevels=e?e._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(e)}onRemove(e){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(e)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const e in this._tiles){const o=this._tiles[e];if(o.state!=="loaded"&&o.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(e,o,p){return d._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(e),this._tileLoaded(e,o,p)}catch(m){e.state="errored",m.status!==404?this._source.fire(new d.j(m,{tile:e})):this.update(this.transform,this.terrain)}}))}_unloadTile(e){this._source.unloadTile&&this._source.unloadTile(e)}_abortTile(e){this._source.abortTile&&this._source.abortTile(e),this._source.fire(new d.k("dataabort",{tile:e,coord:e.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(e){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const o in this._tiles){const p=this._tiles[o];p.upload(e),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((e=>e.tileID)).sort(Ps).map((e=>e.key))}getRenderableIds(e){const o=[];for(const p in this._tiles)this._isIdRenderable(p,e)&&o.push(this._tiles[p]);return e?o.sort(((p,m)=>{const y=p.tileID,T=m.tileID,P=new d.P(y.canonical.x,y.canonical.y)._rotate(this.transform.angle),M=new d.P(T.canonical.x,T.canonical.y)._rotate(this.transform.angle);return y.overscaledZ-T.overscaledZ||M.y-P.y||M.x-P.x})).map((p=>p.tileID.key)):o.map((p=>p.tileID)).sort(Ps).map((p=>p.key))}hasRenderableParent(e){const o=this.findLoadedParent(e,0);return!!o&&this._isIdRenderable(o.tileID.key)}_isIdRenderable(e,o){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]&&(o||!this._tiles[e].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const e in this._tiles)this._tiles[e].state!=="errored"&&this._reloadTile(e,"reloading")}}_reloadTile(e,o){return d._(this,void 0,void 0,(function*(){const p=this._tiles[e];p&&(p.state!=="loading"&&(p.state=o),yield this._loadTile(p,e,o))}))}_tileLoaded(e,o,p){e.timeAdded=D.now(),p==="expired"&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(o,e),this.getSource().type==="raster-dem"&&e.dem&&this._backfillDEM(e),this._state.initializeTileState(e,this.map?this.map.painter:null),e.aborted||this._source.fire(new d.k("data",{dataType:"source",tile:e,coord:e.tileID}))}_backfillDEM(e){const o=this.getRenderableIds();for(let m=0;m<o.length;m++){const y=o[m];if(e.neighboringTiles&&e.neighboringTiles[y]){const T=this.getTileByID(y);p(e,T),p(T,e)}}function p(m,y){m.needsHillshadePrepare=!0,m.needsTerrainPrepare=!0;let T=y.tileID.canonical.x-m.tileID.canonical.x;const P=y.tileID.canonical.y-m.tileID.canonical.y,M=Math.pow(2,m.tileID.canonical.z),B=y.tileID.key;T===0&&P===0||Math.abs(P)>1||(Math.abs(T)>1&&(Math.abs(T+M)===1?T+=M:Math.abs(T-M)===1&&(T-=M)),y.dem&&m.dem&&(m.dem.backfillBorder(y.dem,T,P),m.neighboringTiles&&m.neighboringTiles[B]&&(m.neighboringTiles[B].backfilled=!0)))}}getTile(e){return this.getTileByID(e.key)}getTileByID(e){return this._tiles[e]}_retainLoadedChildren(e,o,p,m){for(const y in this._tiles){let T=this._tiles[y];if(m[y]||!T.hasData()||T.tileID.overscaledZ<=o||T.tileID.overscaledZ>p)continue;let P=T.tileID;for(;T&&T.tileID.overscaledZ>o+1;){const B=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[B.key],T&&T.hasData()&&(P=B)}let M=P;for(;M.overscaledZ>o;)if(M=M.scaledTo(M.overscaledZ-1),e[M.key]){m[P.key]=P;break}}}findLoadedParent(e,o){if(e.key in this._loadedParentTiles){const p=this._loadedParentTiles[e.key];return p&&p.tileID.overscaledZ>=o?p:null}for(let p=e.overscaledZ-1;p>=o;p--){const m=e.scaledTo(p),y=this._getLoadedTile(m);if(y)return y}}findLoadedSibling(e){return this._getLoadedTile(e)}_getLoadedTile(e){const o=this._tiles[e.key];return o&&o.hasData()?o:this._cache.getByKey(e.wrapped().key)}updateCacheSize(e){const o=Math.ceil(e.width/this._source.tileSize)+1,p=Math.ceil(e.height/this._source.tileSize)+1,m=Math.floor(o*p*(this._maxTileCacheZoomLevels===null?d.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),y=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,m):m;this._cache.setMaxSize(y)}handleWrapJump(e){const o=Math.round((e-(this._prevLng===void 0?e:this._prevLng))/360);if(this._prevLng=e,o){const p={};for(const m in this._tiles){const y=this._tiles[m];y.tileID=y.tileID.unwrapTo(y.tileID.wrap+o),p[y.tileID.key]=y}this._tiles=p;for(const m in this._timers)clearTimeout(this._timers[m]),delete this._timers[m];for(const m in this._tiles)this._setTileReloadTimer(m,this._tiles[m])}}_updateCoveredAndRetainedTiles(e,o,p,m,y,T){const P={},M={},B=Object.keys(e),$=D.now();for(const U of B){const X=e[U],ee=this._tiles[U];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=$)continue;const ne=this.findLoadedParent(X,o),le=this.findLoadedSibling(X),ue=ne||le||null;ue&&(this._addTile(ue.tileID),P[ue.tileID.key]=ue.tileID),M[U]=X}this._retainLoadedChildren(M,m,p,e);for(const U in P)e[U]||(this._coveredTiles[U]=!0,e[U]=P[U]);if(T){const U={},X={};for(const ee of y)this._tiles[ee.key].hasData()?U[ee.key]=ee:X[ee.key]=ee;for(const ee in X){const ne=X[ee].children(this._source.maxzoom);this._tiles[ne[0].key]&&this._tiles[ne[1].key]&&this._tiles[ne[2].key]&&this._tiles[ne[3].key]&&(U[ne[0].key]=e[ne[0].key]=ne[0],U[ne[1].key]=e[ne[1].key]=ne[1],U[ne[2].key]=e[ne[2].key]=ne[2],U[ne[3].key]=e[ne[3].key]=ne[3],delete X[ee])}for(const ee in X){const ne=X[ee],le=this.findLoadedParent(ne,this._source.minzoom),ue=this.findLoadedSibling(ne),me=le||ue||null;if(me){U[me.tileID.key]=e[me.tileID.key]=me.tileID;for(const ye in U)U[ye].isChildOf(me.tileID)&&delete U[ye]}}for(const ee in this._tiles)U[ee]||(this._coveredTiles[ee]=!0)}}update(e,o){if(!this._sourceLoaded||this._paused)return;let p;this.transform=e,this.terrain=o,this.updateCacheSize(e),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=e.getVisibleUnwrappedCoordinates(this._source.tileID).map(($=>new d.S($.canonical.z,$.wrap,$.canonical.z,$.canonical.x,$.canonical.y))):(p=e.coveringTiles({tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:o}),this._source.hasTile&&(p=p.filter(($=>this._source.hasTile($))))):p=[];const m=e.coveringZoomLevel(this._source),y=Math.max(m-Kt.maxOverzooming,this._source.minzoom),T=Math.max(m+Kt.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const $={};for(const U of p)if(U.canonical.z>this._source.minzoom){const X=U.scaledTo(U.canonical.z-1);$[X.key]=X;const ee=U.scaledTo(Math.max(this._source.minzoom,Math.min(U.canonical.z,5)));$[ee.key]=ee}p=p.concat(Object.values($))}const P=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,P&&this.fire(new d.k("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const M=this._updateRetainedTiles(p,m);yr(this._source.type)&&this._updateCoveredAndRetainedTiles(M,y,T,m,p,o);for(const $ in M)this._tiles[$].clearFadeHold();const B=d.ab(this._tiles,M);for(const $ of B){const U=this._tiles[$];U.hasSymbolBuckets&&!U.holdingForFade()?U.setHoldDuration(this.map._fadeDuration):U.hasSymbolBuckets&&!U.symbolFadeFinished()||this._removeTile($)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const e in this._tiles)this._tiles[e].holdingForFade()&&this._removeTile(e)}_updateRetainedTiles(e,o){var p;const m={},y={},T=Math.max(o-Kt.maxOverzooming,this._source.minzoom),P=Math.max(o+Kt.maxUnderzooming,this._source.minzoom),M={};for(const B of e){const $=this._addTile(B);m[B.key]=B,$.hasData()||o<this._source.maxzoom&&(M[B.key]=B)}this._retainLoadedChildren(M,o,P,m);for(const B of e){let $=this._tiles[B.key];if($.hasData())continue;if(o+1>this._source.maxzoom){const X=B.children(this._source.maxzoom)[0],ee=this.getTile(X);if(ee&&ee.hasData()){m[X.key]=X;continue}}else{const X=B.children(this._source.maxzoom);if(m[X[0].key]&&m[X[1].key]&&m[X[2].key]&&m[X[3].key])continue}let U=$.wasRequested();for(let X=B.overscaledZ-1;X>=T;--X){const ee=B.scaledTo(X);if(y[ee.key])break;if(y[ee.key]=!0,$=this.getTile(ee),!$&&U&&($=this._addTile(ee)),$){const ne=$.hasData();if((ne||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||U)&&(m[ee.key]=ee),U=$.wasRequested(),ne)break}}}return m}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const e in this._tiles){const o=[];let p,m=this._tiles[e].tileID;for(;m.overscaledZ>0;){if(m.key in this._loadedParentTiles){p=this._loadedParentTiles[m.key];break}o.push(m.key);const y=m.scaledTo(m.overscaledZ-1);if(p=this._getLoadedTile(y),p)break;m=y}for(const y of o)this._loadedParentTiles[y]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const e in this._tiles){const o=this._tiles[e].tileID,p=this._getLoadedTile(o);this._loadedSiblingTiles[o.key]=p}}_addTile(e){let o=this._tiles[e.key];if(o)return o;o=this._cache.getAndRemove(e),o&&(this._setTileReloadTimer(e.key,o),o.tileID=e,this._state.initializeTileState(o,this.map?this.map.painter:null),this._cacheTimers[e.key]&&(clearTimeout(this._cacheTimers[e.key]),delete this._cacheTimers[e.key],this._setTileReloadTimer(e.key,o)));const p=o;return o||(o=new xr(e,this._source.tileSize*e.overscaleFactor()),this._loadTile(o,e.key,o.state)),o.uses++,this._tiles[e.key]=o,p||this._source.fire(new d.k("dataloading",{tile:o,coord:o.tileID,dataType:"source"})),o}_setTileReloadTimer(e,o){e in this._timers&&(clearTimeout(this._timers[e]),delete this._timers[e]);const p=o.getExpiryTimeout();p&&(this._timers[e]=setTimeout((()=>{this._reloadTile(e,"expired"),delete this._timers[e]}),p))}_removeTile(e){const o=this._tiles[e];o&&(o.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),o.uses>0||(o.hasData()&&o.state!=="reloading"?this._cache.add(o.tileID,o,o.getExpiryTimeout()):(o.aborted=!0,this._abortTile(o),this._unloadTile(o))))}_dataHandler(e){const o=e.sourceDataType;e.dataType==="source"&&o==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&e.dataType==="source"&&o==="content"&&(this.reload(),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const e in this._tiles)this._removeTile(e);this._cache.reset()}tilesIn(e,o,p){const m=[],y=this.transform;if(!y)return m;const T=p?y.getCameraQueryGeometry(e):e,P=e.map((ne=>y.pointCoordinate(ne,this.terrain))),M=T.map((ne=>y.pointCoordinate(ne,this.terrain))),B=this.getIds();let $=1/0,U=1/0,X=-1/0,ee=-1/0;for(const ne of M)$=Math.min($,ne.x),U=Math.min(U,ne.y),X=Math.max(X,ne.x),ee=Math.max(ee,ne.y);for(let ne=0;ne<B.length;ne++){const le=this._tiles[B[ne]];if(le.holdingForFade())continue;const ue=le.tileID,me=Math.pow(2,y.zoom-le.tileID.overscaledZ),ye=o*le.queryPadding*d.X/le.tileSize/me,ce=[ue.getTilePoint(new d.Z($,U)),ue.getTilePoint(new d.Z(X,ee))];if(ce[0].x-ye<d.X&&ce[0].y-ye<d.X&&ce[1].x+ye>=0&&ce[1].y+ye>=0){const Ne=P.map((ze=>ue.getTilePoint(ze))),Ce=M.map((ze=>ue.getTilePoint(ze)));m.push({tile:le,tileID:ue,queryGeometry:Ne,cameraQueryGeometry:Ce,scale:me})}}return m}getVisibleCoordinates(e){const o=this.getRenderableIds(e).map((p=>this._tiles[p].tileID));for(const p of o)p.posMatrix=this.transform.calculatePosMatrix(p.toUnwrapped());return o}hasTransition(){if(this._source.hasTransition())return!0;if(yr(this._source.type)){const e=D.now();for(const o in this._tiles)if(this._tiles[o].fadeEndTime>=e)return!0}return!1}setFeatureState(e,o,p){this._state.updateState(e=e||"_geojsonTileLayer",o,p)}removeFeatureState(e,o,p){this._state.removeFeatureState(e=e||"_geojsonTileLayer",o,p)}getFeatureState(e,o){return this._state.getState(e=e||"_geojsonTileLayer",o)}setDependencies(e,o,p){const m=this._tiles[e];m&&m.setDependencies(o,p)}reloadTilesForDependencies(e,o){for(const p in this._tiles)this._tiles[p].hasDependency(e,o)&&this._reloadTile(p,"reloading");this._cache.filter((p=>!p.hasDependency(e,o)))}}function Ps(v,e){const o=Math.abs(2*v.wrap)-+(v.wrap<0),p=Math.abs(2*e.wrap)-+(e.wrap<0);return v.overscaledZ-e.overscaledZ||p-o||e.canonical.y-v.canonical.y||e.canonical.x-v.canonical.x}function yr(v){return v==="raster"||v==="image"||v==="video"}Kt.maxOverzooming=10,Kt.maxUnderzooming=3;class ei{constructor(e,o){this.reset(e,o)}reset(e,o){this.points=e||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(o||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(e){if(this.points.length===1)return this.points[0];e=d.ac(e,0,1);let o=1,p=this._distances[o];const m=e*this.paddedLength+this.padding;for(;p<m&&o<this._distances.length;)p=this._distances[++o];const y=o-1,T=this._distances[y],P=p-T,M=P>0?(m-T)/P:0;return this.points[y].mult(1-M).add(this.points[o].mult(M))}}function xs(v,e){let o=!0;return v==="always"||v!=="never"&&e!=="never"||(o=!1),o}class Zr{constructor(e,o,p){const m=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(e/p),this.yCellCount=Math.ceil(o/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)m.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=o,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/o,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(e,o,p,m,y){this._forEachCell(o,p,m,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(o),this.bboxes.push(p),this.bboxes.push(m),this.bboxes.push(y)}insertCircle(e,o,p,m){this._forEachCell(o-m,p-m,o+m,p+m,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(o),this.circles.push(p),this.circles.push(m)}_insertBoxCell(e,o,p,m,y,T){this.boxCells[y].push(T)}_insertCircleCell(e,o,p,m,y,T){this.circleCells[y].push(T)}_query(e,o,p,m,y,T,P){if(p<0||e>this.width||m<0||o>this.height)return[];const M=[];if(e<=0&&o<=0&&this.width<=p&&this.height<=m){if(y)return[{key:null,x1:e,y1:o,x2:p,y2:m}];for(let B=0;B<this.boxKeys.length;B++)M.push({key:this.boxKeys[B],x1:this.bboxes[4*B],y1:this.bboxes[4*B+1],x2:this.bboxes[4*B+2],y2:this.bboxes[4*B+3]});for(let B=0;B<this.circleKeys.length;B++){const $=this.circles[3*B],U=this.circles[3*B+1],X=this.circles[3*B+2];M.push({key:this.circleKeys[B],x1:$-X,y1:U-X,x2:$+X,y2:U+X})}}else this._forEachCell(e,o,p,m,this._queryCell,M,{hitTest:y,overlapMode:T,seenUids:{box:{},circle:{}}},P);return M}query(e,o,p,m){return this._query(e,o,p,m,!1,null)}hitTest(e,o,p,m,y,T){return this._query(e,o,p,m,!0,y,T).length>0}hitTestCircle(e,o,p,m,y){const T=e-p,P=e+p,M=o-p,B=o+p;if(P<0||T>this.width||B<0||M>this.height)return!1;const $=[];return this._forEachCell(T,M,P,B,this._queryCellCircle,$,{hitTest:!0,overlapMode:m,circle:{x:e,y:o,radius:p},seenUids:{box:{},circle:{}}},y),$.length>0}_queryCell(e,o,p,m,y,T,P,M){const{seenUids:B,hitTest:$,overlapMode:U}=P,X=this.boxCells[y];if(X!==null){const ne=this.bboxes;for(const le of X)if(!B.box[le]){B.box[le]=!0;const ue=4*le,me=this.boxKeys[le];if(e<=ne[ue+2]&&o<=ne[ue+3]&&p>=ne[ue+0]&&m>=ne[ue+1]&&(!M||M(me))&&(!$||!xs(U,me.overlapMode))&&(T.push({key:me,x1:ne[ue],y1:ne[ue+1],x2:ne[ue+2],y2:ne[ue+3]}),$))return!0}}const ee=this.circleCells[y];if(ee!==null){const ne=this.circles;for(const le of ee)if(!B.circle[le]){B.circle[le]=!0;const ue=3*le,me=this.circleKeys[le];if(this._circleAndRectCollide(ne[ue],ne[ue+1],ne[ue+2],e,o,p,m)&&(!M||M(me))&&(!$||!xs(U,me.overlapMode))){const ye=ne[ue],ce=ne[ue+1],Ne=ne[ue+2];if(T.push({key:me,x1:ye-Ne,y1:ce-Ne,x2:ye+Ne,y2:ce+Ne}),$)return!0}}}return!1}_queryCellCircle(e,o,p,m,y,T,P,M){const{circle:B,seenUids:$,overlapMode:U}=P,X=this.boxCells[y];if(X!==null){const ne=this.bboxes;for(const le of X)if(!$.box[le]){$.box[le]=!0;const ue=4*le,me=this.boxKeys[le];if(this._circleAndRectCollide(B.x,B.y,B.radius,ne[ue+0],ne[ue+1],ne[ue+2],ne[ue+3])&&(!M||M(me))&&!xs(U,me.overlapMode))return T.push(!0),!0}}const ee=this.circleCells[y];if(ee!==null){const ne=this.circles;for(const le of ee)if(!$.circle[le]){$.circle[le]=!0;const ue=3*le,me=this.circleKeys[le];if(this._circlesCollide(ne[ue],ne[ue+1],ne[ue+2],B.x,B.y,B.radius)&&(!M||M(me))&&!xs(U,me.overlapMode))return T.push(!0),!0}}}_forEachCell(e,o,p,m,y,T,P,M){const B=this._convertToXCellCoord(e),$=this._convertToYCellCoord(o),U=this._convertToXCellCoord(p),X=this._convertToYCellCoord(m);for(let ee=B;ee<=U;ee++)for(let ne=$;ne<=X;ne++)if(y.call(this,e,o,p,m,this.xCellCount*ne+ee,T,P,M))return}_convertToXCellCoord(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))}_convertToYCellCoord(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))}_circlesCollide(e,o,p,m,y,T){const P=m-e,M=y-o,B=p+T;return B*B>P*P+M*M}_circleAndRectCollide(e,o,p,m,y,T,P){const M=(T-m)/2,B=Math.abs(e-(m+M));if(B>M+p)return!1;const $=(P-y)/2,U=Math.abs(o-(y+$));if(U>$+p)return!1;if(B<=M||U<=$)return!0;const X=B-M,ee=U-$;return X*X+ee*ee<=p*p}}function vr(v,e,o,p,m){const y=d.H();return e?(d.K(y,y,[1/m,1/m,1]),o||d.ad(y,y,p.angle)):d.L(y,p.labelPlaneMatrix,v),y}function Vs(v,e,o,p,m){if(e){const y=d.ae(v);return d.K(y,y,[m,m,1]),o||d.ad(y,y,-p.angle),y}return p.glCoordMatrix}function he(v,e,o,p){let m;p?(m=[v,e,p(v,e),1],d.af(m,m,o)):(m=[v,e,0,1],ki(m,m,o));const y=m[3];return{point:new d.P(m[0]/y,m[1]/y),signedDistanceFromCamera:y,isOccluded:!1}}function H(v,e){return .5+v/e*.5}function q(v,e){return v.x>=-e[0]&&v.x<=e[0]&&v.y>=-e[1]&&v.y<=e[1]}function K(v,e,o,p,m,y,T,P,M,B,$,U,X,ee,ne){const le=p?v.textSizeData:v.iconSizeData,ue=d.ag(le,o.transform.zoom),me=[256/o.width*2+1,256/o.height*2+1],ye=p?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;ye.clear();const ce=v.lineVertexArray,Ne=p?v.text.placedSymbolArray:v.icon.placedSymbolArray,Ce=o.transform.width/o.transform.height;let ze=!1;for(let Ge=0;Ge<Ne.length;Ge++){const rt=Ne.get(Ge);if(rt.hidden||rt.writingMode===d.ah.vertical&&!ze){Ht(rt.numGlyphs,ye);continue}ze=!1;const ht=he(rt.anchorX,rt.anchorY,e,ne);if(!q(ht.point,me)){Ht(rt.numGlyphs,ye);continue}const wt=H(o.transform.cameraToCenterDistance,ht.signedDistanceFromCamera),pt=d.ai(le,ue,rt),lt=T?pt/wt:pt*wt,At={getElevation:ne,labelPlaneMatrix:m,lineVertexArray:ce,pitchWithMap:T,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:B,tileAnchorPoint:new d.P(rt.anchorX,rt.anchorY),unwrappedTileID:$,width:U,height:X,translation:ee},si=_e(At,rt,lt,!1,P,e,y,v.glyphOffsetArray,ye,Ce,M);ze=si.useVertical,(si.notEnoughRoom||ze||si.needsFlipping&&_e(At,rt,lt,!0,P,e,y,v.glyphOffsetArray,ye,Ce,M).notEnoughRoom)&&Ht(rt.numGlyphs,ye)}p?v.text.dynamicLayoutVertexBuffer.updateData(ye):v.icon.dynamicLayoutVertexBuffer.updateData(ye)}function oe(v,e,o,p,m,y,T,P){const M=y.glyphStartIndex+y.numGlyphs,B=y.lineStartIndex,$=y.lineStartIndex+y.lineLength,U=e.getoffsetX(y.glyphStartIndex),X=e.getoffsetX(M-1),ee=et(v*U,o,p,m,y.segment,B,$,P,T);if(!ee)return null;const ne=et(v*X,o,p,m,y.segment,B,$,P,T);return ne?P.projectionCache.anyProjectionOccluded?null:{first:ee,last:ne}:null}function ve(v,e,o,p){return v===d.ah.horizontal&&Math.abs(o.y-e.y)>Math.abs(o.x-e.x)*p?{useVertical:!0}:(v===d.ah.vertical?e.y<o.y:e.x>o.x)?{needsFlipping:!0}:null}function _e(v,e,o,p,m,y,T,P,M,B,$){const U=o/24,X=e.lineOffsetX*U,ee=e.lineOffsetY*U;let ne;if(e.numGlyphs>1){const le=e.glyphStartIndex+e.numGlyphs,ue=e.lineStartIndex,me=e.lineStartIndex+e.lineLength,ye=oe(U,P,X,ee,p,e,$,v);if(!ye)return{notEnoughRoom:!0};const ce=he(ye.first.point.x,ye.first.point.y,T,v.getElevation).point,Ne=he(ye.last.point.x,ye.last.point.y,T,v.getElevation).point;if(m&&!p){const Ce=ve(e.writingMode,ce,Ne,B);if(Ce)return Ce}ne=[ye.first];for(let Ce=e.glyphStartIndex+1;Ce<le-1;Ce++)ne.push(et(U*P.getoffsetX(Ce),X,ee,p,e.segment,ue,me,v,$));ne.push(ye.last)}else{if(m&&!p){const ue=he(v.tileAnchorPoint.x,v.tileAnchorPoint.y,y,v.getElevation).point,me=e.lineStartIndex+e.segment+1,ye=new d.P(v.lineVertexArray.getx(me),v.lineVertexArray.gety(me)),ce=he(ye.x,ye.y,y,v.getElevation),Ne=ce.signedDistanceFromCamera>0?ce.point:(function(ze,Ge,rt,ht,wt,pt){return ke(ze,Ge,rt,1,wt,pt)})(v.tileAnchorPoint,ye,ue,0,y,v),Ce=ve(e.writingMode,ue,Ne,B);if(Ce)return Ce}const le=et(U*P.getoffsetX(e.glyphStartIndex),X,ee,p,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,v,$);if(!le||v.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[le]}for(const le of ne)d.aj(M,le.point,le.angle);return{}}function ke(v,e,o,p,m,y){const T=v.add(v.sub(e)._unit()),P=m!==void 0?he(T.x,T.y,m,y.getElevation).point:Le(T.x,T.y,y).point,M=o.sub(P);return o.add(M._mult(p/M.mag()))}function xe(v,e,o){const p=e.projectionCache;if(p.projections[v])return p.projections[v];const m=new d.P(e.lineVertexArray.getx(v),e.lineVertexArray.gety(v)),y=Le(m.x,m.y,e);if(y.signedDistanceFromCamera>0)return p.projections[v]=y.point,p.anyProjectionOccluded=p.anyProjectionOccluded||y.isOccluded,y.point;const T=v-o.direction;return(function(P,M,B,$,U){return ke(P,M,B,$,void 0,U)})(o.distanceFromAnchor===0?e.tileAnchorPoint:new d.P(e.lineVertexArray.getx(T),e.lineVertexArray.gety(T)),m,o.previousVertex,o.absOffsetX-o.distanceFromAnchor+1,e)}function Le(v,e,o){const p=v+o.translation[0],m=e+o.translation[1];let y;return!o.pitchWithMap&&o.projection.useSpecialProjectionForSymbols?(y=o.projection.projectTileCoordinates(p,m,o.unwrappedTileID,o.getElevation),y.point.x=(.5*y.point.x+.5)*o.width,y.point.y=(.5*-y.point.y+.5)*o.height):(y=he(p,m,o.labelPlaneMatrix,o.getElevation),y.isOccluded=!1),y}function We(v,e,o){return v._unit()._perp()._mult(e*o)}function Re(v,e,o,p,m,y,T,P,M){if(P.projectionCache.offsets[v])return P.projectionCache.offsets[v];const B=o.add(e);if(v+M.direction<p||v+M.direction>=m)return P.projectionCache.offsets[v]=B,B;const $=xe(v+M.direction,P,M),U=We($.sub(o),T,M.direction),X=o.add(U),ee=$.add(U);return P.projectionCache.offsets[v]=d.ak(y,B,X,ee)||B,P.projectionCache.offsets[v]}function et(v,e,o,p,m,y,T,P,M){const B=p?v-e:v+e;let $=B>0?1:-1,U=0;p&&($*=-1,U=Math.PI),$<0&&(U+=Math.PI);let X,ee=$>0?y+m:y+m+1;P.projectionCache.cachedAnchorPoint?X=P.projectionCache.cachedAnchorPoint:(X=Le(P.tileAnchorPoint.x,P.tileAnchorPoint.y,P).point,P.projectionCache.cachedAnchorPoint=X);let ne,le,ue=X,me=X,ye=0,ce=0;const Ne=Math.abs(B),Ce=[];let ze;for(;ye+ce<=Ne;){if(ee+=$,ee<y||ee>=T)return null;ye+=ce,me=ue,le=ne;const ht={absOffsetX:Ne,direction:$,distanceFromAnchor:ye,previousVertex:me};if(ue=xe(ee,P,ht),o===0)Ce.push(me),ze=ue.sub(me);else{let wt;const pt=ue.sub(me);wt=pt.mag()===0?We(xe(ee+$,P,ht).sub(ue),o,$):We(pt,o,$),le||(le=me.add(wt)),ne=Re(ee,wt,ue,y,T,le,o,P,ht),Ce.push(le),ze=ne.sub(le)}ce=ze.mag()}const Ge=ze._mult((Ne-ye)/ce)._add(le||me),rt=U+Math.atan2(ue.y-me.y,ue.x-me.x);return Ce.push(Ge),{point:Ge,angle:M?rt:0,path:Ce}}const Dt=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function Ht(v,e){for(let o=0;o<v;o++){const p=e.length;e.resize(p+4),e.float32.set(Dt,3*p)}}function ki(v,e,o){const p=e[0],m=e[1];return v[0]=o[0]*p+o[4]*m+o[12],v[1]=o[1]*p+o[5]*m+o[13],v[3]=o[3]*p+o[7]*m+o[15],v}const li=100;class Si{constructor(e,o,p=new Zr(e.width+200,e.height+200,25),m=new Zr(e.width+200,e.height+200,25)){this.transform=e,this.mapProjection=o,this.grid=p,this.ignoredGrid=m,this.pitchFactor=Math.cos(e._pitch)*e.cameraToCenterDistance,this.screenRightBoundary=e.width+li,this.screenBottomBoundary=e.height+li,this.gridRightBoundary=e.width+200,this.gridBottomBoundary=e.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(e,o,p,m,y,T,P,M,B,$,U){const X=e.anchorPointX+M[0],ee=e.anchorPointY+M[1],ne=this.projectAndGetPerspectiveRatio(m,X,ee,y,$),le=p*ne.perspectiveRatio;let ue;if(T||P)ue=this._projectCollisionBox(e,le,m,y,T,P,M,ne,$,U);else{const Ce=ne.point.x+(U?U.x*le:0),ze=ne.point.y+(U?U.y*le:0);ue={allPointsOccluded:!1,box:[Ce+e.x1*le,ze+e.y1*le,Ce+e.x2*le,ze+e.y2*le]}}const[me,ye,ce,Ne]=ue.box;return this.mapProjection.useSpecialProjectionForSymbols&&(T?ue.allPointsOccluded:this.mapProjection.isOccluded(X,ee,y))||ne.perspectiveRatio<this.perspectiveRatioCutoff||!this.isInsideGrid(me,ye,ce,Ne)||o!=="always"&&this.grid.hitTest(me,ye,ce,Ne,o,B)?{box:[me,ye,ce,Ne],placeable:!1,offscreen:!1}:{box:[me,ye,ce,Ne],placeable:!0,offscreen:this.isOffscreen(me,ye,ce,Ne)}}placeCollisionCircles(e,o,p,m,y,T,P,M,B,$,U,X,ee,ne,le,ue){const me=[],ye=new d.P(o.anchorX,o.anchorY),ce=this.getPerspectiveRatio(T,ye.x,ye.y,P,ue),Ne=(U?y/ce:y*ce)/d.ap,Ce={getElevation:ue,labelPlaneMatrix:M,lineVertexArray:p,pitchWithMap:U,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},projection:this.mapProjection,tileAnchorPoint:ye,unwrappedTileID:P,width:this.transform.width,height:this.transform.height,translation:le},ze=oe(Ne,m,o.lineOffsetX*Ne,o.lineOffsetY*Ne,!1,o,!1,Ce);let Ge=!1,rt=!1,ht=!0;if(ze){const wt=.5*ee*ce+ne,pt=new d.P(-100,-100),lt=new d.P(this.screenRightBoundary,this.screenBottomBoundary),At=new ei,si=ze.first,mt=ze.last;let xt=[];for(let ci=si.path.length-1;ci>=1;ci--)xt.push(si.path[ci]);for(let ci=1;ci<mt.path.length;ci++)xt.push(mt.path[ci]);const ii=2.5*wt;if(B){const ci=this.projectPathToScreenSpace(xt,Ce,B);xt=ci.some((fi=>fi.signedDistanceFromCamera<=0))?[]:ci.map((fi=>fi.point))}let Oi=[];if(xt.length>0){const ci=xt[0].clone(),fi=xt[0].clone();for(let $i=1;$i<xt.length;$i++)ci.x=Math.min(ci.x,xt[$i].x),ci.y=Math.min(ci.y,xt[$i].y),fi.x=Math.max(fi.x,xt[$i].x),fi.y=Math.max(fi.y,xt[$i].y);Oi=ci.x>=pt.x&&fi.x<=lt.x&&ci.y>=pt.y&&fi.y<=lt.y?[xt]:fi.x<pt.x||ci.x>lt.x||fi.y<pt.y||ci.y>lt.y?[]:d.al([xt],pt.x,pt.y,lt.x,lt.y)}for(const ci of Oi){At.reset(ci,.25*wt);let fi=0;fi=At.length<=.5*wt?1:Math.ceil(At.paddedLength/ii)+1;for(let $i=0;$i<fi;$i++){const Hs=$i/Math.max(fi-1,1),Qr=At.lerp(Hs),Ui=Qr.x+li,Ms=Qr.y+li;me.push(Ui,Ms,wt,0);const Ki=Ui-wt,ms=Ms-wt,tr=Ui+wt,On=Ms+wt;if(ht=ht&&this.isOffscreen(Ki,ms,tr,On),rt=rt||this.isInsideGrid(Ki,ms,tr,On),e!=="always"&&this.grid.hitTestCircle(Ui,Ms,wt,e,X)&&(Ge=!0,!$))return{circles:[],offscreen:!1,collisionDetected:Ge}}}}return{circles:!$&&Ge||!rt||ce<this.perspectiveRatioCutoff?[]:me,offscreen:ht,collisionDetected:Ge}}projectPathToScreenSpace(e,o,p){return e.map((m=>he(m.x,m.y,p,o.getElevation)))}queryRenderedSymbols(e){if(e.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const o=[];let p=1/0,m=1/0,y=-1/0,T=-1/0;for(const $ of e){const U=new d.P($.x+li,$.y+li);p=Math.min(p,U.x),m=Math.min(m,U.y),y=Math.max(y,U.x),T=Math.max(T,U.y),o.push(U)}const P=this.grid.query(p,m,y,T).concat(this.ignoredGrid.query(p,m,y,T)),M={},B={};for(const $ of P){const U=$.key;if(M[U.bucketInstanceId]===void 0&&(M[U.bucketInstanceId]={}),M[U.bucketInstanceId][U.featureIndex])continue;const X=[new d.P($.x1,$.y1),new d.P($.x2,$.y1),new d.P($.x2,$.y2),new d.P($.x1,$.y2)];d.am(o,X)&&(M[U.bucketInstanceId][U.featureIndex]=!0,B[U.bucketInstanceId]===void 0&&(B[U.bucketInstanceId]=[]),B[U.bucketInstanceId].push(U.featureIndex))}return B}insertCollisionBox(e,o,p,m,y,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:m,featureIndex:y,collisionGroupID:T,overlapMode:o},e[0],e[1],e[2],e[3])}insertCollisionCircles(e,o,p,m,y,T){const P=p?this.ignoredGrid:this.grid,M={bucketInstanceId:m,featureIndex:y,collisionGroupID:T,overlapMode:o};for(let B=0;B<e.length;B+=4)P.insertCircle(M,e[B],e[B+1],e[B+2])}projectAndGetPerspectiveRatio(e,o,p,m,y){let T;y?(T=[o,p,y(o,p),1],d.af(T,T,e)):(T=[o,p,0,1],ki(T,T,e));const P=T[3];return{point:new d.P((T[0]/P+1)/2*this.transform.width+li,(-T[1]/P+1)/2*this.transform.height+li),perspectiveRatio:.5+this.transform.cameraToCenterDistance/P*.5,isOccluded:!1,signedDistanceFromCamera:P}}getPerspectiveRatio(e,o,p,m,y){const T=this.mapProjection.useSpecialProjectionForSymbols?this.mapProjection.projectTileCoordinates(o,p,m,y):he(o,p,e,y);return .5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5}isOffscreen(e,o,p,m){return p<li||e>=this.screenRightBoundary||m<li||o>this.screenBottomBoundary}isInsideGrid(e,o,p,m){return p>=0&&e<this.gridRightBoundary&&m>=0&&o<this.gridBottomBoundary}getViewportMatrix(){const e=d.an([]);return d.J(e,e,[-100,-100,0]),e}_projectCollisionBox(e,o,p,m,y,T,P,M,B,$){let U=new d.P(1,0),X=new d.P(0,1);const ee=new d.P(e.anchorPointX+P[0],e.anchorPointY+P[1]);if(T&&!y){const ht=this.projectAndGetPerspectiveRatio(p,ee.x+1,ee.y,m,B).point.sub(M.point).unit(),wt=Math.atan(ht.y/ht.x)+(ht.x<0?Math.PI:0),pt=Math.sin(wt),lt=Math.cos(wt);U=new d.P(lt,pt),X=new d.P(-pt,lt)}else if(!T&&y){const ht=-this.transform.angle,wt=Math.sin(ht),pt=Math.cos(ht);U=new d.P(pt,wt),X=new d.P(-wt,pt)}let ne=M.point,le=o;if(y){ne=ee;const ht=this.transform.zoom-Math.floor(this.transform.zoom);le=Math.pow(2,-ht),le*=this.mapProjection.getPitchedTextCorrection(this.transform,ee,m),$||(le*=d.ac(.5+M.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))}$&&(ne=ne.add(U.mult($.x*le)).add(X.mult($.y*le)));const ue=e.x1*le,me=e.x2*le,ye=(ue+me)/2,ce=e.y1*le,Ne=e.y2*le,Ce=(ce+Ne)/2,ze=[{offsetX:ue,offsetY:ce},{offsetX:ye,offsetY:ce},{offsetX:me,offsetY:ce},{offsetX:me,offsetY:Ce},{offsetX:me,offsetY:Ne},{offsetX:ye,offsetY:Ne},{offsetX:ue,offsetY:Ne},{offsetX:ue,offsetY:Ce}];let Ge=[];for(const{offsetX:ht,offsetY:wt}of ze)Ge.push(new d.P(ne.x+U.x*ht+X.x*wt,ne.y+U.y*ht+X.y*wt));let rt=!1;if(y){const ht=Ge.map((wt=>this.projectAndGetPerspectiveRatio(p,wt.x,wt.y,m,B)));rt=ht.some((wt=>!wt.isOccluded)),Ge=ht.map((wt=>wt.point))}else rt=!0;return{box:d.ao(Ge),allPointsOccluded:!rt}}}function pi(v,e,o){return e*(d.X/(v.tileSize*Math.pow(2,o-v.tileID.overscaledZ)))}class ys{constructor(e,o,p,m){this.opacity=e?Math.max(0,Math.min(1,e.opacity+(e.placed?o:-o))):m&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class rs{constructor(e,o,p,m,y){this.text=new ys(e?e.text:null,o,p,y),this.icon=new ys(e?e.icon:null,o,m,y)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class yi{constructor(e,o,p){this.text=e,this.icon=o,this.skipFade=p}}class Ii{constructor(){this.invProjMatrix=d.H(),this.viewportMatrix=d.H(),this.circles=[]}}class Yi{constructor(e,o,p,m,y){this.bucketInstanceId=e,this.featureIndex=o,this.sourceLayerIndex=p,this.bucketIndex=m,this.tileID=y}}class Es{constructor(e){this.crossSourceCollisions=e,this.maxGroupID=0,this.collisionGroups={}}get(e){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[e]){const o=++this.maxGroupID;this.collisionGroups[e]={ID:o,predicate:p=>p.collisionGroupID===o}}return this.collisionGroups[e]}}function $s(v,e,o,p,m){const{horizontalAlign:y,verticalAlign:T}=d.au(v);return new d.P(-(y-.5)*e+p[0]*m,-(T-.5)*o+p[1]*m)}class _r{constructor(e,o,p,m,y,T){this.transform=e.clone(),this.terrain=p,this.collisionIndex=new Si(this.transform,o),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=m,this.retainedQueryData={},this.collisionGroups=new Es(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=T,T&&(T.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(e){const o=this.terrain;return o?(p,m)=>o.getElevation(e,p,m):null}getBucketParts(e,o,p,m){const y=p.getBucket(o),T=p.latestFeatureIndex;if(!y||!T||o.id!==y.layerIds[0])return;const P=p.collisionBoxArray,M=y.layers[0].layout,B=y.layers[0].paint,$=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),U=p.tileSize/d.X,X=p.tileID.toUnwrapped(),ee=this.transform.calculatePosMatrix(X),ne=M.get("text-pitch-alignment")==="map",le=M.get("text-rotation-alignment")==="map",ue=pi(p,1,this.transform.zoom),me=this.collisionIndex.mapProjection.translatePosition(this.transform,p,B.get("text-translate"),B.get("text-translate-anchor")),ye=this.collisionIndex.mapProjection.translatePosition(this.transform,p,B.get("icon-translate"),B.get("icon-translate-anchor")),ce=vr(ee,ne,le,this.transform,ue);let Ne=null;if(ne){const ze=Vs(ee,ne,le,this.transform,ue);Ne=d.L([],this.transform.labelPlaneMatrix,ze)}this.retainedQueryData[y.bucketInstanceId]=new Yi(y.bucketInstanceId,T,y.sourceLayerIndex,y.index,p.tileID);const Ce={bucket:y,layout:M,translationText:me,translationIcon:ye,posMatrix:ee,unwrappedTileID:X,textLabelPlaneMatrix:ce,labelToScreenMatrix:Ne,scale:$,textPixelRatio:U,holdingForFade:p.holdingForFade(),collisionBoxArray:P,partiallyEvaluatedTextSize:d.ag(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(m)for(const ze of y.sortKeyRanges){const{sortKey:Ge,symbolInstanceStart:rt,symbolInstanceEnd:ht}=ze;e.push({sortKey:Ge,symbolInstanceStart:rt,symbolInstanceEnd:ht,parameters:Ce})}else e.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Ce})}attemptAnchorPlacement(e,o,p,m,y,T,P,M,B,$,U,X,ee,ne,le,ue,me,ye,ce){const Ne=d.aq[e.textAnchor],Ce=[e.textOffset0,e.textOffset1],ze=$s(Ne,p,m,Ce,y),Ge=this.collisionIndex.placeCollisionBox(o,X,M,B,$,P,T,ue,U.predicate,ce,ze);if((!ye||this.collisionIndex.placeCollisionBox(ye,X,M,B,$,P,T,me,U.predicate,ce,ze).placeable)&&Ge.placeable){let rt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(rt=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:Ce,width:p,height:m,anchor:Ne,textBoxScale:y,prevAnchor:rt},this.markUsedJustification(ne,Ne,ee,le),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,le,ee),this.placedOrientations[ee.crossTileID]=le),{shift:ze,placedGlyphBoxes:Ge}}}placeLayerBucketPart(e,o,p){const{bucket:m,layout:y,translationText:T,translationIcon:P,posMatrix:M,unwrappedTileID:B,textLabelPlaneMatrix:$,labelToScreenMatrix:U,textPixelRatio:X,holdingForFade:ee,collisionBoxArray:ne,partiallyEvaluatedTextSize:le,collisionGroup:ue}=e.parameters,me=y.get("text-optional"),ye=y.get("icon-optional"),ce=d.ar(y,"text-overlap","text-allow-overlap"),Ne=ce==="always",Ce=d.ar(y,"icon-overlap","icon-allow-overlap"),ze=Ce==="always",Ge=y.get("text-rotation-alignment")==="map",rt=y.get("text-pitch-alignment")==="map",ht=y.get("icon-text-fit")!=="none",wt=y.get("symbol-z-order")==="viewport-y",pt=Ne&&(ze||!m.hasIconData()||ye),lt=ze&&(Ne||!m.hasTextData()||me);!m.collisionArrays&&ne&&m.deserializeCollisionBoxes(ne);const At=this._getTerrainElevationFunc(this.retainedQueryData[m.bucketInstanceId].tileID),si=(mt,xt,ii)=>{var Oi,ci;if(o[mt.crossTileID])return;if(ee)return void(this.placements[mt.crossTileID]=new yi(!1,!1,!1));let fi=!1,$i=!1,Hs=!0,Qr=null,Ui={box:null,placeable:!1,offscreen:null},Ms={placeable:!1},Ki=null,ms=null,tr=null,On=0,Lr=0,Vn=0;xt.textFeatureIndex?On=xt.textFeatureIndex:mt.useRuntimeCollisionCircles&&(On=mt.featureIndex),xt.verticalTextFeatureIndex&&(Lr=xt.verticalTextFeatureIndex);const io=xt.textBox;if(io){const Nr=ws=>{let es=d.ah.horizontal;if(m.allowVerticalPlacement&&!ws&&this.prevPlacement){const ir=this.prevPlacement.placedOrientations[mt.crossTileID];ir&&(this.placedOrientations[mt.crossTileID]=ir,es=ir,this.markUsedOrientation(m,es,mt))}return es},tn=(ws,es)=>{if(m.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&xt.verticalTextBox){for(const ir of m.writingModes)if(ir===d.ah.vertical?(Ui=es(),Ms=Ui):Ui=ws(),Ui&&Ui.placeable)break}else Ui=ws()},$n=mt.textAnchorOffsetStartIndex,vn=mt.textAnchorOffsetEndIndex;if(vn===$n){const ws=(es,ir)=>{const vi=this.collisionIndex.placeCollisionBox(es,ce,X,M,B,rt,Ge,T,ue.predicate,At);return vi&&vi.placeable&&(this.markUsedOrientation(m,ir,mt),this.placedOrientations[mt.crossTileID]=ir),vi};tn((()=>ws(io,d.ah.horizontal)),(()=>{const es=xt.verticalTextBox;return m.allowVerticalPlacement&&mt.numVerticalGlyphVertices>0&&es?ws(es,d.ah.vertical):{box:null,offscreen:null}})),Nr(Ui&&Ui.placeable)}else{let ws=d.aq[(ci=(Oi=this.prevPlacement)===null||Oi===void 0?void 0:Oi.variableOffsets[mt.crossTileID])===null||ci===void 0?void 0:ci.anchor];const es=(vi,sn,so)=>{const Un=vi.x2-vi.x1,Hu=vi.y2-vi.y1,Wu=mt.textBoxScale,ns=ht&&Ce==="never"?sn:null;let Hn=null,Kc=ce==="never"?1:2,fl="never";ws&&Kc++;for(let ro=0;ro<Kc;ro++){for(let gl=$n;gl<vn;gl++){const aa=m.textAnchorOffsets.get(gl);if(ws&&aa.textAnchor!==ws)continue;const Hi=this.attemptAnchorPlacement(aa,vi,Un,Hu,Wu,Ge,rt,X,M,B,ue,fl,mt,m,so,T,P,ns,At);if(Hi&&(Hn=Hi.placedGlyphBoxes,Hn&&Hn.placeable))return fi=!0,Qr=Hi.shift,Hn}ws?ws=null:fl=ce}return p&&!Hn&&(Hn={box:this.collisionIndex.placeCollisionBox(io,"always",X,M,B,rt,Ge,T,ue.predicate,At,new d.P(0,0)).box,offscreen:!1,placeable:!1}),Hn};tn((()=>es(io,xt.iconBox,d.ah.horizontal)),(()=>{const vi=xt.verticalTextBox;return m.allowVerticalPlacement&&(!Ui||!Ui.placeable)&&mt.numVerticalGlyphVertices>0&&vi?es(vi,xt.verticalIconBox,d.ah.vertical):{box:null,occluded:!0,offscreen:null}})),Ui&&(fi=Ui.placeable,Hs=Ui.offscreen);const ir=Nr(Ui&&Ui.placeable);if(!fi&&this.prevPlacement){const vi=this.prevPlacement.variableOffsets[mt.crossTileID];vi&&(this.variableOffsets[mt.crossTileID]=vi,this.markUsedJustification(m,vi.anchor,mt,ir))}}}if(Ki=Ui,fi=Ki&&Ki.placeable,Hs=Ki&&Ki.offscreen,mt.useRuntimeCollisionCircles){const Nr=m.text.placedSymbolArray.get(mt.centerJustifiedTextSymbolIndex),tn=d.ai(m.textSizeData,le,Nr),$n=y.get("text-padding");ms=this.collisionIndex.placeCollisionCircles(ce,Nr,m.lineVertexArray,m.glyphOffsetArray,tn,M,B,$,U,p,rt,ue.predicate,mt.collisionCircleDiameter,$n,T,At),ms.circles.length&&ms.collisionDetected&&!p&&d.w("Collisions detected, but collision boxes are not shown"),fi=Ne||ms.circles.length>0&&!ms.collisionDetected,Hs=Hs&&ms.offscreen}if(xt.iconFeatureIndex&&(Vn=xt.iconFeatureIndex),xt.iconBox){const Nr=tn=>this.collisionIndex.placeCollisionBox(tn,Ce,X,M,B,rt,Ge,P,ue.predicate,At,ht&&Qr?Qr:void 0);Ms&&Ms.placeable&&xt.verticalIconBox?(tr=Nr(xt.verticalIconBox),$i=tr.placeable):(tr=Nr(xt.iconBox),$i=tr.placeable),Hs=Hs&&tr.offscreen}const en=me||mt.numHorizontalGlyphVertices===0&&mt.numVerticalGlyphVertices===0,yn=ye||mt.numIconVertices===0;en||yn?yn?en||($i=$i&&fi):fi=$i&&fi:$i=fi=$i&&fi;const na=$i&&tr.placeable;if(fi&&Ki.placeable&&this.collisionIndex.insertCollisionBox(Ki.box,ce,y.get("text-ignore-placement"),m.bucketInstanceId,Ms&&Ms.placeable&&Lr?Lr:On,ue.ID),na&&this.collisionIndex.insertCollisionBox(tr.box,Ce,y.get("icon-ignore-placement"),m.bucketInstanceId,Vn,ue.ID),ms&&fi&&this.collisionIndex.insertCollisionCircles(ms.circles,ce,y.get("text-ignore-placement"),m.bucketInstanceId,On,ue.ID),p&&this.storeCollisionData(m.bucketInstanceId,ii,xt,Ki,tr,ms),mt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(m.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[mt.crossTileID]=new yi(fi||pt,$i||lt,Hs||m.justReloaded),o[mt.crossTileID]=!0};if(wt){if(e.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const mt=m.getSortedSymbolIndexes(this.transform.angle);for(let xt=mt.length-1;xt>=0;--xt){const ii=mt[xt];si(m.symbolInstances.get(ii),m.collisionArrays[ii],ii)}}else for(let mt=e.symbolInstanceStart;mt<e.symbolInstanceEnd;mt++)si(m.symbolInstances.get(mt),m.collisionArrays[mt],mt);if(p&&m.bucketInstanceId in this.collisionCircleArrays){const mt=this.collisionCircleArrays[m.bucketInstanceId];d.as(mt.invProjMatrix,M),mt.viewportMatrix=this.collisionIndex.getViewportMatrix()}m.justReloaded=!1}storeCollisionData(e,o,p,m,y,T){if(p.textBox||p.iconBox){let P,M;this.collisionBoxArrays.has(e)?P=this.collisionBoxArrays.get(e):(P=new Map,this.collisionBoxArrays.set(e,P)),P.has(o)?M=P.get(o):(M={text:null,icon:null},P.set(o,M)),p.textBox&&(M.text=m.box),p.iconBox&&(M.icon=y.box)}if(T){let P=this.collisionCircleArrays[e];P===void 0&&(P=this.collisionCircleArrays[e]=new Ii);for(let M=0;M<T.circles.length;M+=4)P.circles.push(T.circles[M+0]),P.circles.push(T.circles[M+1]),P.circles.push(T.circles[M+2]),P.circles.push(T.collisionDetected?1:0)}}markUsedJustification(e,o,p,m){let y;y=m===d.ah.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[d.at(o)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const P of T)P>=0&&(e.text.placedSymbolArray.get(P).crossTileID=y>=0&&P!==y?0:p.crossTileID)}markUsedOrientation(e,o,p){const m=o===d.ah.horizontal||o===d.ah.horizontalOnly?o:0,y=o===d.ah.vertical?o:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const P of T)e.text.placedSymbolArray.get(P).placedOrientation=m;p.verticalPlacedTextSymbolIndex&&(e.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=y)}commit(e){this.commitTime=e,this.zoomAtLastRecencyCheck=this.transform.zoom;const o=this.prevPlacement;let p=!1;this.prevZoomAdjustment=o?o.zoomAdjustment(this.transform.zoom):0;const m=o?o.symbolFadeChange(e):1,y=o?o.opacities:{},T=o?o.variableOffsets:{},P=o?o.placedOrientations:{};for(const M in this.placements){const B=this.placements[M],$=y[M];$?(this.opacities[M]=new rs($,m,B.text,B.icon),p=p||B.text!==$.text.placed||B.icon!==$.icon.placed):(this.opacities[M]=new rs(null,m,B.text,B.icon,B.skipFade),p=p||B.text||B.icon)}for(const M in y){const B=y[M];if(!this.opacities[M]){const $=new rs(B,m,!1,!1);$.isHidden()||(this.opacities[M]=$,p=p||B.text.placed||B.icon.placed)}}for(const M in T)this.variableOffsets[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.variableOffsets[M]=T[M]);for(const M in P)this.placedOrientations[M]||!this.opacities[M]||this.opacities[M].isHidden()||(this.placedOrientations[M]=P[M]);if(o&&o.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=e:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=o?o.lastPlacementChangeTime:e)}updateLayerOpacities(e,o){const p={};for(const m of o){const y=m.getBucket(e);y&&m.latestFeatureIndex&&e.id===y.layerIds[0]&&this.updateBucketOpacities(y,m.tileID,p,m.collisionBoxArray)}}updateBucketOpacities(e,o,p,m){e.hasTextData()&&(e.text.opacityVertexArray.clear(),e.text.hasVisibleVertices=!1),e.hasIconData()&&(e.icon.opacityVertexArray.clear(),e.icon.hasVisibleVertices=!1),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexArray.clear(),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexArray.clear();const y=e.layers[0],T=y.layout,P=new rs(null,0,!1,!1,!0),M=T.get("text-allow-overlap"),B=T.get("icon-allow-overlap"),$=y._unevaluatedLayout.hasValue("text-variable-anchor")||y._unevaluatedLayout.hasValue("text-variable-anchor-offset"),U=T.get("text-rotation-alignment")==="map",X=T.get("text-pitch-alignment")==="map",ee=T.get("icon-text-fit")!=="none",ne=new rs(null,0,M&&(B||!e.hasIconData()||T.get("icon-optional")),B&&(M||!e.hasTextData()||T.get("text-optional")),!0);!e.collisionArrays&&m&&(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData())&&e.deserializeCollisionBoxes(m);const le=(me,ye,ce)=>{for(let Ne=0;Ne<ye/4;Ne++)me.opacityVertexArray.emplaceBack(ce);me.hasVisibleVertices=me.hasVisibleVertices||ce!==wr},ue=this.collisionBoxArrays.get(e.bucketInstanceId);for(let me=0;me<e.symbolInstances.length;me++){const ye=e.symbolInstances.get(me),{numHorizontalGlyphVertices:ce,numVerticalGlyphVertices:Ne,crossTileID:Ce}=ye;let ze=this.opacities[Ce];p[Ce]?ze=P:ze||(ze=ne,this.opacities[Ce]=ze),p[Ce]=!0;const Ge=ye.numIconVertices>0,rt=this.placedOrientations[ye.crossTileID],ht=rt===d.ah.vertical,wt=rt===d.ah.horizontal||rt===d.ah.horizontalOnly;if(ce>0||Ne>0){const lt=lr(ze.text);le(e.text,ce,ht?wr:lt),le(e.text,Ne,wt?wr:lt);const At=ze.text.isHidden();[ye.rightJustifiedTextSymbolIndex,ye.centerJustifiedTextSymbolIndex,ye.leftJustifiedTextSymbolIndex].forEach((xt=>{xt>=0&&(e.text.placedSymbolArray.get(xt).hidden=At||ht?1:0)})),ye.verticalPlacedTextSymbolIndex>=0&&(e.text.placedSymbolArray.get(ye.verticalPlacedTextSymbolIndex).hidden=At||wt?1:0);const si=this.variableOffsets[ye.crossTileID];si&&this.markUsedJustification(e,si.anchor,ye,rt);const mt=this.placedOrientations[ye.crossTileID];mt&&(this.markUsedJustification(e,"left",ye,mt),this.markUsedOrientation(e,mt,ye))}if(Ge){const lt=lr(ze.icon),At=!(ee&&ye.verticalPlacedIconSymbolIndex&&ht);ye.placedIconSymbolIndex>=0&&(le(e.icon,ye.numIconVertices,At?lt:wr),e.icon.placedSymbolArray.get(ye.placedIconSymbolIndex).hidden=ze.icon.isHidden()),ye.verticalPlacedIconSymbolIndex>=0&&(le(e.icon,ye.numVerticalIconVertices,At?wr:lt),e.icon.placedSymbolArray.get(ye.verticalPlacedIconSymbolIndex).hidden=ze.icon.isHidden())}const pt=ue&&ue.has(me)?ue.get(me):{text:null,icon:null};if(e.hasIconCollisionBoxData()||e.hasTextCollisionBoxData()){const lt=e.collisionArrays[me];if(lt){let At=new d.P(0,0);if(lt.textBox||lt.verticalTextBox){let si=!0;if($){const mt=this.variableOffsets[Ce];mt?(At=$s(mt.anchor,mt.width,mt.height,mt.textOffset,mt.textBoxScale),U&&At._rotate(X?this.transform.angle:-this.transform.angle)):si=!1}if(lt.textBox||lt.verticalTextBox){let mt;lt.textBox&&(mt=ht),lt.verticalTextBox&&(mt=wt),Go(e.textCollisionBox.collisionVertexArray,ze.text.placed,!si||mt,pt.text,At.x,At.y)}}if(lt.iconBox||lt.verticalIconBox){const si=!!(!wt&&lt.verticalIconBox);let mt;lt.iconBox&&(mt=si),lt.verticalIconBox&&(mt=!si),Go(e.iconCollisionBox.collisionVertexArray,ze.icon.placed,mt,pt.icon,ee?At.x:0,ee?At.y:0)}}}}if(e.sortFeatures(this.transform.angle),this.retainedQueryData[e.bucketInstanceId]&&(this.retainedQueryData[e.bucketInstanceId].featureSortOrder=e.featureSortOrder),e.hasTextData()&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(e.text.opacityVertexArray),e.hasIconData()&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(e.icon.opacityVertexArray),e.hasIconCollisionBoxData()&&e.iconCollisionBox.collisionVertexBuffer&&e.iconCollisionBox.collisionVertexBuffer.updateData(e.iconCollisionBox.collisionVertexArray),e.hasTextCollisionBoxData()&&e.textCollisionBox.collisionVertexBuffer&&e.textCollisionBox.collisionVertexBuffer.updateData(e.textCollisionBox.collisionVertexArray),e.text.opacityVertexArray.length!==e.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${e.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${e.text.layoutVertexArray.length}) / 4`);if(e.icon.opacityVertexArray.length!==e.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${e.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${e.icon.layoutVertexArray.length}) / 4`);if(e.bucketInstanceId in this.collisionCircleArrays){const me=this.collisionCircleArrays[e.bucketInstanceId];e.placementInvProjMatrix=me.invProjMatrix,e.placementViewportMatrix=me.viewportMatrix,e.collisionCircleArray=me.circles,delete this.collisionCircleArrays[e.bucketInstanceId]}}symbolFadeChange(e){return this.fadeDuration===0?1:(e-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(e){return Math.max(0,(this.transform.zoom-e)/1.5)}hasTransitions(e){return this.stale||e-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(e,o){const p=this.zoomAtLastRecencyCheck===o?1-this.zoomAdjustment(o):1;return this.zoomAtLastRecencyCheck=o,this.commitTime+this.fadeDuration*p>e}setStale(){this.stale=!0}}function Go(v,e,o,p,m,y){p&&p.length!==0||(p=[0,0,0,0]);const T=p[0]-li,P=p[1]-li,M=p[2]-li,B=p[3]-li;v.emplaceBack(e?1:0,o?1:0,m||0,y||0,T,P),v.emplaceBack(e?1:0,o?1:0,m||0,y||0,M,P),v.emplaceBack(e?1:0,o?1:0,m||0,y||0,M,B),v.emplaceBack(e?1:0,o?1:0,m||0,y||0,T,B)}const ai=Math.pow(2,25),_u=Math.pow(2,24),Bl=Math.pow(2,17),Er=Math.pow(2,16),or=Math.pow(2,9),op=Math.pow(2,8),Xr=Math.pow(2,1);function lr(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const e=v.placed?1:0,o=Math.floor(127*v.opacity);return o*ai+e*_u+o*Bl+e*Er+o*or+e*op+o*Xr+e}const wr=0;function vo(){return{isOccluded:(v,e,o)=>!1,getPitchedTextCorrection:(v,e,o)=>1,get useSpecialProjectionForSymbols(){return!1},projectTileCoordinates(v,e,o,p){throw new Error("Not implemented.")},translatePosition:(v,e,o,p)=>(function(m,y,T,P,M=!1){if(!T[0]&&!T[1])return[0,0];const B=M?P==="map"?m.angle:0:P==="viewport"?-m.angle:0;if(B){const $=Math.sin(B),U=Math.cos(B);T=[T[0]*U-T[1]*$,T[0]*$+T[1]*U]}return[M?T[0]:pi(y,T[0],m.zoom),M?T[1]:pi(y,T[1],m.zoom)]})(v,e,o,p),getCircleRadiusCorrection:v=>1}}class Li{constructor(e){this._sortAcrossTiles=e.layout.get("symbol-z-order")!=="viewport-y"&&!e.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(e,o,p,m,y){const T=this._bucketParts;for(;this._currentTileIndex<e.length;)if(o.getBucketParts(T,m,e[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort(((P,M)=>P.sortKey-M.sortKey)));this._currentPartIndex<T.length;)if(o.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,y())return!0;return!1}}class Fl{constructor(e,o,p,m,y,T,P,M){this.placement=new _r(e,vo(),o,T,P,M),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=m,this._showCollisionBoxes=y,this._done=!1}isDone(){return this._done}continuePlacement(e,o,p){const m=D.now(),y=()=>!this._forceFullPlacement&&D.now()-m>2;for(;this._currentPlacementIndex>=0;){const T=o[e[this._currentPlacementIndex]],P=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=P)&&(!T.maxzoom||T.maxzoom>P)){if(this._inProgressLayer||(this._inProgressLayer=new Li(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,y))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(e){return this.placement.commit(e),this.placement}}const An=512/d.X/2;class vs{constructor(e,o,p){this.tileID=e,this.bucketInstanceId=p,this._symbolsByKey={};const m=new Map;for(let y=0;y<o.length;y++){const T=o.get(y),P=T.key,M=m.get(P);M?M.push(T):m.set(P,[T])}for(const[y,T]of m){const P={positions:T.map((M=>({x:Math.floor(M.anchorX*An),y:Math.floor(M.anchorY*An)}))),crossTileIDs:T.map((M=>M.crossTileID))};if(P.positions.length>128){const M=new d.av(P.positions.length,16,Uint16Array);for(const{x:B,y:$}of P.positions)M.add(B,$);M.finish(),delete P.positions,P.index=M}this._symbolsByKey[y]=P}}getScaledCoordinates(e,o){const{x:p,y:m,z:y}=this.tileID.canonical,{x:T,y:P,z:M}=o.canonical,B=An/Math.pow(2,M-y),$=(P*d.X+e.anchorY)*B,U=m*d.X*An;return{x:Math.floor((T*d.X+e.anchorX)*B-p*d.X*An),y:Math.floor($-U)}}findMatches(e,o,p){const m=this.tileID.canonical.z<o.canonical.z?1:Math.pow(2,this.tileID.canonical.z-o.canonical.z);for(let y=0;y<e.length;y++){const T=e.get(y);if(T.crossTileID)continue;const P=this._symbolsByKey[T.key];if(!P)continue;const M=this.getScaledCoordinates(T,o);if(P.index){const B=P.index.range(M.x-m,M.y-m,M.x+m,M.y+m).sort();for(const $ of B){const U=P.crossTileIDs[$];if(!p[U]){p[U]=!0,T.crossTileID=U;break}}}else if(P.positions)for(let B=0;B<P.positions.length;B++){const $=P.positions[B],U=P.crossTileIDs[B];if(Math.abs($.x-M.x)<=m&&Math.abs($.y-M.y)<=m&&!p[U]){p[U]=!0,T.crossTileID=U;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:e})=>e))}}class _o{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Mr{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(e){const o=Math.round((e-this.lng)/360);if(o!==0)for(const p in this.indexes){const m=this.indexes[p],y={};for(const T in m){const P=m[T];P.tileID=P.tileID.unwrapTo(P.tileID.wrap+o),y[P.tileID.key]=P}this.indexes[p]=y}this.lng=e}addBucket(e,o,p){if(this.indexes[e.overscaledZ]&&this.indexes[e.overscaledZ][e.key]){if(this.indexes[e.overscaledZ][e.key].bucketInstanceId===o.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(e.overscaledZ,this.indexes[e.overscaledZ][e.key])}for(let y=0;y<o.symbolInstances.length;y++)o.symbolInstances.get(y).crossTileID=0;this.usedCrossTileIDs[e.overscaledZ]||(this.usedCrossTileIDs[e.overscaledZ]={});const m=this.usedCrossTileIDs[e.overscaledZ];for(const y in this.indexes){const T=this.indexes[y];if(Number(y)>e.overscaledZ)for(const P in T){const M=T[P];M.tileID.isChildOf(e)&&M.findMatches(o.symbolInstances,e,m)}else{const P=T[e.scaledTo(Number(y)).key];P&&P.findMatches(o.symbolInstances,e,m)}}for(let y=0;y<o.symbolInstances.length;y++){const T=o.symbolInstances.get(y);T.crossTileID||(T.crossTileID=p.generate(),m[T.crossTileID]=!0)}return this.indexes[e.overscaledZ]===void 0&&(this.indexes[e.overscaledZ]={}),this.indexes[e.overscaledZ][e.key]=new vs(e,o.symbolInstances,o.bucketInstanceId),!0}removeBucketCrossTileIDs(e,o){for(const p of o.getCrossTileIDsLists())for(const m of p)delete this.usedCrossTileIDs[e][m]}removeStaleBuckets(e){let o=!1;for(const p in this.indexes){const m=this.indexes[p];for(const y in m)e[m[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,m[y]),delete m[y],o=!0)}return o}}class wo{constructor(){this.layerIndexes={},this.crossTileIDs=new _o,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(e,o,p){let m=this.layerIndexes[e.id];m===void 0&&(m=this.layerIndexes[e.id]=new Mr);let y=!1;const T={};m.handleWrapJump(p);for(const P of o){const M=P.getBucket(e);M&&e.id===M.layerIds[0]&&(M.bucketInstanceId||(M.bucketInstanceId=++this.maxBucketInstanceId),m.addBucket(P.tileID,M,this.crossTileIDs)&&(y=!0),T[M.bucketInstanceId]=!0)}return m.removeStaleBuckets(T)&&(y=!0),y}pruneUnusedLayers(e){const o={};e.forEach((p=>{o[p]=!0}));for(const p in this.layerIndexes)o[p]||delete this.layerIndexes[p]}}const Ar=(v,e)=>d.t(v,e&&e.filter((o=>o.identifier!=="source.canvas"))),lp=d.aw();class Pc extends d.E{constructor(e,o={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const m=this.sourceCaches[p].getSource().type;m!=="vector"&&m!=="geojson"||this.sourceCaches[p].reload()}},this.map=e,this.dispatcher=new Bi(xi(),e._getMapId()),this.dispatcher.registerMessageHandler("GG",((p,m)=>this.getGlyphs(p,m))),this.dispatcher.registerMessageHandler("GI",((p,m)=>this.getImages(p,m))),this.imageManager=new Ve,this.imageManager.setEventedParent(this),this.glyphManager=new gt(e._requestManager,o.localIdeographFontFamily),this.lineAtlas=new ot(256,512),this.crossTileSymbolIndex=new wo,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new d.ax,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",d.ay()),Ks().on(st,this._rtlPluginLoaded),this.on("data",(p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const m=this.sourceCaches[p.sourceId];if(!m)return;const y=m.getSource();if(y&&y.vectorLayerIds)for(const T in this._layers){const P=this._layers[T];P.source===y.id&&this._validateLayer(P)}}))}loadURL(e,o={},p){this.fire(new d.k("dataloading",{dataType:"style"})),o.validate=typeof o.validate!="boolean"||o.validate;const m=this.map._requestManager.transformRequest(e,"Style");this._loadStyleRequest=new AbortController;const y=this._loadStyleRequest;d.h(m,this._loadStyleRequest).then((T=>{this._loadStyleRequest=null,this._load(T.data,o,p)})).catch((T=>{this._loadStyleRequest=null,T&&!y.signal.aborted&&this.fire(new d.j(T))}))}loadJSON(e,o={},p){this.fire(new d.k("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,o.validate=o.validate!==!1,this._load(e,o,p)})).catch((()=>{}))}loadEmpty(){this.fire(new d.k("dataloading",{dataType:"style"})),this._load(lp,{validate:!1})}_load(e,o,p){var m;const y=o.transformStyle?o.transformStyle(p,e):e;if(!o.validate||!Ar(this,d.u(y))){this._loaded=!0,this.stylesheet=y;for(const T in y.sources)this.addSource(T,y.sources[T],{validate:!1});y.sprite?this._loadSprite(y.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(y.glyphs),this._createLayers(),this.light=new it(this.stylesheet.light),this.sky=new Ye(this.stylesheet.sky),this.map.setTerrain((m=this.stylesheet.terrain)!==null&&m!==void 0?m:null),this.fire(new d.k("data",{dataType:"style"})),this.fire(new d.k("style.load"))}}_createLayers(){const e=d.az(this.stylesheet.layers);this.dispatcher.broadcast("SL",e),this._order=e.map((o=>o.id)),this._layers={},this._serializedLayers=null;for(const o of e){const p=d.aA(o);p.setEventedParent(this,{layer:{id:o.id}}),this._layers[o.id]=p}}_loadSprite(e,o=!1,p=void 0){let m;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,(function(y,T,P,M){return d._(this,void 0,void 0,(function*(){const B=Ae(y),$=P>1?"@2x":"",U={},X={};for(const{id:ee,url:ne}of B){const le=T.transformRequest(He(ne,$,".json"),"SpriteJSON");U[ee]=d.h(le,M);const ue=T.transformRequest(He(ne,$,".png"),"SpriteImage");X[ee]=Ie.getImage(ue,M)}return yield Promise.all([...Object.values(U),...Object.values(X)]),(function(ee,ne){return d._(this,void 0,void 0,(function*(){const le={};for(const ue in ee){le[ue]={};const me=D.getImageCanvasContext((yield ne[ue]).data),ye=(yield ee[ue]).data;for(const ce in ye){const{width:Ne,height:Ce,x:ze,y:Ge,sdf:rt,pixelRatio:ht,stretchX:wt,stretchY:pt,content:lt,textFitWidth:At,textFitHeight:si}=ye[ce];le[ue][ce]={data:null,pixelRatio:ht,sdf:rt,stretchX:wt,stretchY:pt,content:lt,textFitWidth:At,textFitHeight:si,spriteData:{width:Ne,height:Ce,x:ze,y:Ge,context:me}}}}return le}))})(U,X)}))})(e,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((y=>{if(this._spriteRequest=null,y)for(const T in y){this._spritesImagesIds[T]=[];const P=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter((M=>!(M in y))):[];for(const M of P)this.imageManager.removeImage(M),this._changedImages[M]=!0;for(const M in y[T]){const B=T==="default"?M:`${T}:${M}`;this._spritesImagesIds[T].push(B),B in this.imageManager.images?this.imageManager.updateImage(B,y[T][M],!1):this.imageManager.addImage(B,y[T][M]),o&&(this._changedImages[B]=!0)}}})).catch((y=>{this._spriteRequest=null,m=y,this.fire(new d.j(m))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),o&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"})),p&&p(m)}))}_unloadSprite(){for(const e of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(e),this._changedImages[e]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}_validateLayer(e){const o=this.sourceCaches[e.source];if(!o)return;const p=e.sourceLayer;if(!p)return;const m=o.getSource();(m.type==="geojson"||m.vectorLayerIds&&m.vectorLayerIds.indexOf(p)===-1)&&this.fire(new d.j(new Error(`Source layer "${p}" does not exist on source "${m.id}" as specified by style layer "${e.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const e in this.sourceCaches)if(!this.sourceCaches[e].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(e,o=!1){const p=this._serializedAllLayers();if(!e||e.length===0)return Object.values(o?d.aB(p):p);const m=[];for(const y of e)if(p[y]){const T=o?d.aB(p[y]):p[y];m.push(T)}return m}_serializedAllLayers(){let e=this._serializedLayers;if(e)return e;e=this._serializedLayers={};const o=Object.keys(this._layers);for(const p of o){const m=this._layers[p];m.type!=="custom"&&(e[p]=m.serialize())}return e}hasTransitions(){if(this.light&&this.light.hasTransition()||this.sky&&this.sky.hasTransition())return!0;for(const e in this.sourceCaches)if(this.sourceCaches[e].hasTransition())return!0;for(const e in this._layers)if(this._layers[e].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(e){if(!this._loaded)return;const o=this._changed;if(o){const m=Object.keys(this._updatedLayers),y=Object.keys(this._removedLayers);(m.length||y.length)&&this._updateWorkerLayers(m,y);for(const T in this._updatedSources){const P=this._updatedSources[T];if(P==="reload")this._reloadSource(T);else{if(P!=="clear")throw new Error(`Invalid action ${P}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(e);this.light.updateTransitions(e),this.sky.updateTransitions(e),this._resetUpdates()}const p={};for(const m in this.sourceCaches){const y=this.sourceCaches[m];p[m]=y.used,y.used=!1}for(const m of this._order){const y=this._layers[m];y.recalculate(e,this._availableImages),!y.isHidden(e.zoom)&&y.source&&(this.sourceCaches[y.source].used=!0)}for(const m in p){const y=this.sourceCaches[m];!!p[m]!=!!y.used&&y.fire(new d.k("data",{sourceDataType:"visibility",dataType:"source",sourceId:m}))}this.light.recalculate(e),this.sky.recalculate(e),this.z=e.zoom,o&&this.fire(new d.k("data",{dataType:"style"}))}_updateTilesForChangedImages(){const e=Object.keys(this._changedImages);if(e.length){for(const o in this.sourceCaches)this.sourceCaches[o].reloadTilesForDependencies(["icons","patterns"],e);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const e in this.sourceCaches)this.sourceCaches[e].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(e,o){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(e,!1),removedIds:o})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(e,o={}){var p;this._checkLoaded();const m=this.serialize();if(e=o.transformStyle?o.transformStyle(m,e):e,((p=o.validate)===null||p===void 0||p)&&Ar(this,d.u(e)))return!1;(e=d.aB(e)).layers=d.az(e.layers);const y=d.aC(m,e),T=this._getOperationsToPerform(y);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const P of T.operations)P();return this.stylesheet=e,this._serializedLayers=null,!0}_getOperationsToPerform(e){const o=[],p=[];for(const m of e)switch(m.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":continue;case"addLayer":o.push((()=>this.addLayer.apply(this,m.args)));break;case"removeLayer":o.push((()=>this.removeLayer.apply(this,m.args)));break;case"setPaintProperty":o.push((()=>this.setPaintProperty.apply(this,m.args)));break;case"setLayoutProperty":o.push((()=>this.setLayoutProperty.apply(this,m.args)));break;case"setFilter":o.push((()=>this.setFilter.apply(this,m.args)));break;case"addSource":o.push((()=>this.addSource.apply(this,m.args)));break;case"removeSource":o.push((()=>this.removeSource.apply(this,m.args)));break;case"setLayerZoomRange":o.push((()=>this.setLayerZoomRange.apply(this,m.args)));break;case"setLight":o.push((()=>this.setLight.apply(this,m.args)));break;case"setGeoJSONSourceData":o.push((()=>this.setGeoJSONSourceData.apply(this,m.args)));break;case"setGlyphs":o.push((()=>this.setGlyphs.apply(this,m.args)));break;case"setSprite":o.push((()=>this.setSprite.apply(this,m.args)));break;case"setSky":o.push((()=>this.setSky.apply(this,m.args)));break;case"setTerrain":o.push((()=>this.map.setTerrain.apply(this,m.args)));break;case"setTransition":o.push((()=>{}));break;default:p.push(m.command)}return{operations:o,unimplemented:p}}addImage(e,o){if(this.getImage(e))return this.fire(new d.j(new Error(`An image named "${e}" already exists.`)));this.imageManager.addImage(e,o),this._afterImageUpdated(e)}updateImage(e,o){this.imageManager.updateImage(e,o)}getImage(e){return this.imageManager.getImage(e)}removeImage(e){if(!this.getImage(e))return this.fire(new d.j(new Error(`An image named "${e}" does not exist.`)));this.imageManager.removeImage(e),this._afterImageUpdated(e)}_afterImageUpdated(e){this._availableImages=this.imageManager.listImages(),this._changedImages[e]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(e,o,p={}){if(this._checkLoaded(),this.sourceCaches[e]!==void 0)throw new Error(`Source "${e}" already exists.`);if(!o.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(o).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(o.type)>=0&&this._validate(d.u.source,`sources.${e}`,o,null,p))return;this.map&&this.map._collectResourceTiming&&(o.collectResourceTiming=!0);const m=this.sourceCaches[e]=new Kt(e,o,this.dispatcher);m.style=this,m.setEventedParent(this,(()=>({isSourceLoaded:m.loaded(),source:m.serialize(),sourceId:e}))),m.onAdd(this.map),this._changed=!0}removeSource(e){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===e)return this.fire(new d.j(new Error(`Source "${e}" cannot be removed while layer "${p}" is using it.`)));const o=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],o.fire(new d.k("data",{sourceDataType:"metadata",dataType:"source",sourceId:e})),o.setEventedParent(null),o.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(e,o){if(this._checkLoaded(),this.sourceCaches[e]===void 0)throw new Error(`There is no source with this ID=${e}`);const p=this.sourceCaches[e].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(o),this._changed=!0}getSource(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()}addLayer(e,o,p={}){this._checkLoaded();const m=e.id;if(this.getLayer(m))return void this.fire(new d.j(new Error(`Layer "${m}" already exists on this map.`)));let y;if(e.type==="custom"){if(Ar(this,d.aD(e)))return;y=d.aA(e)}else{if("source"in e&&typeof e.source=="object"&&(this.addSource(m,e.source),e=d.aB(e),e=d.e(e,{source:m})),this._validate(d.u.layer,`layers.${m}`,e,{arrayIndex:-1},p))return;y=d.aA(e),this._validateLayer(y),y.setEventedParent(this,{layer:{id:m}})}const T=o?this._order.indexOf(o):this._order.length;if(o&&T===-1)this.fire(new d.j(new Error(`Cannot add layer "${m}" before non-existing layer "${o}".`)));else{if(this._order.splice(T,0,m),this._layerOrderChanged=!0,this._layers[m]=y,this._removedLayers[m]&&y.source&&y.type!=="custom"){const P=this._removedLayers[m];delete this._removedLayers[m],P.type!==y.type?this._updatedSources[y.source]="clear":(this._updatedSources[y.source]="reload",this.sourceCaches[y.source].pause())}this._updateLayer(y),y.onAdd&&y.onAdd(this.map)}}moveLayer(e,o){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire(new d.j(new Error(`The layer '${e}' does not exist in the map's style and cannot be moved.`)));if(e===o)return;const p=this._order.indexOf(e);this._order.splice(p,1);const m=o?this._order.indexOf(o):this._order.length;o&&m===-1?this.fire(new d.j(new Error(`Cannot move layer "${e}" before non-existing layer "${o}".`))):(this._order.splice(m,0,e),this._layerOrderChanged=!0)}removeLayer(e){this._checkLoaded();const o=this._layers[e];if(!o)return void this.fire(new d.j(new Error(`Cannot remove non-existing layer "${e}".`)));o.setEventedParent(null);const p=this._order.indexOf(e);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=o,delete this._layers[e],this._serializedLayers&&delete this._serializedLayers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e],o.onRemove&&o.onRemove(this.map)}getLayer(e){return this._layers[e]}getLayersOrder(){return[...this._order]}hasLayer(e){return e in this._layers}setLayerZoomRange(e,o,p){this._checkLoaded();const m=this.getLayer(e);m?m.minzoom===o&&m.maxzoom===p||(o!=null&&(m.minzoom=o),p!=null&&(m.maxzoom=p),this._updateLayer(m)):this.fire(new d.j(new Error(`Cannot set the zoom range of non-existing layer "${e}".`)))}setFilter(e,o,p={}){this._checkLoaded();const m=this.getLayer(e);if(m){if(!d.aE(m.filter,o))return o==null?(m.filter=void 0,void this._updateLayer(m)):void(this._validate(d.u.filter,`layers.${m.id}.filter`,o,null,p)||(m.filter=d.aB(o),this._updateLayer(m)))}else this.fire(new d.j(new Error(`Cannot filter non-existing layer "${e}".`)))}getFilter(e){return d.aB(this.getLayer(e).filter)}setLayoutProperty(e,o,p,m={}){this._checkLoaded();const y=this.getLayer(e);y?d.aE(y.getLayoutProperty(o),p)||(y.setLayoutProperty(o,p,m),this._updateLayer(y)):this.fire(new d.j(new Error(`Cannot style non-existing layer "${e}".`)))}getLayoutProperty(e,o){const p=this.getLayer(e);if(p)return p.getLayoutProperty(o);this.fire(new d.j(new Error(`Cannot get style of non-existing layer "${e}".`)))}setPaintProperty(e,o,p,m={}){this._checkLoaded();const y=this.getLayer(e);y?d.aE(y.getPaintProperty(o),p)||(y.setPaintProperty(o,p,m)&&this._updateLayer(y),this._changed=!0,this._updatedPaintProps[e]=!0,this._serializedLayers=null):this.fire(new d.j(new Error(`Cannot style non-existing layer "${e}".`)))}getPaintProperty(e,o){return this.getLayer(e).getPaintProperty(o)}setFeatureState(e,o){this._checkLoaded();const p=e.source,m=e.sourceLayer,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new d.j(new Error(`The source '${p}' does not exist in the map's style.`)));const T=y.getSource().type;T==="geojson"&&m?this.fire(new d.j(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||m?(e.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),y.setFeatureState(m,e.id,o)):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(e,o){this._checkLoaded();const p=e.source,m=this.sourceCaches[p];if(m===void 0)return void this.fire(new d.j(new Error(`The source '${p}' does not exist in the map's style.`)));const y=m.getSource().type,T=y==="vector"?e.sourceLayer:void 0;y!=="vector"||T?o&&typeof e.id!="string"&&typeof e.id!="number"?this.fire(new d.j(new Error("A feature id is required to remove its specific state property."))):m.removeFeatureState(T,e.id,o):this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(e){this._checkLoaded();const o=e.source,p=e.sourceLayer,m=this.sourceCaches[o];if(m!==void 0)return m.getSource().type!=="vector"||p?(e.id===void 0&&this.fire(new d.j(new Error("The feature id parameter must be provided."))),m.getFeatureState(p,e.id)):void this.fire(new d.j(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new d.j(new Error(`The source '${o}' does not exist in the map's style.`)))}getTransition(){return d.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const e=d.aF(this.sourceCaches,(y=>y.serialize())),o=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,m=this.stylesheet;return d.aG({version:m.version,name:m.name,metadata:m.metadata,light:m.light,sky:m.sky,center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch,sprite:m.sprite,glyphs:m.glyphs,transition:m.transition,sources:e,layers:o,terrain:p},(y=>y!==void 0))}_updateLayer(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&this.sourceCaches[e.source].getSource().type!=="raster"&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(e){const o=T=>this._layers[T].type==="fill-extrusion",p={},m=[];for(let T=this._order.length-1;T>=0;T--){const P=this._order[T];if(o(P)){p[P]=T;for(const M of e){const B=M[P];if(B)for(const $ of B)m.push($)}}}m.sort(((T,P)=>P.intersectionZ-T.intersectionZ));const y=[];for(let T=this._order.length-1;T>=0;T--){const P=this._order[T];if(o(P))for(let M=m.length-1;M>=0;M--){const B=m[M].feature;if(p[B.layer.id]<T)break;y.push(B),m.pop()}else for(const M of e){const B=M[P];if(B)for(const $ of B)y.push($.feature)}}return y}queryRenderedFeatures(e,o,p){o&&o.filter&&this._validate(d.u.filter,"queryRenderedFeatures.filter",o.filter,null,o);const m={};if(o&&o.layers){if(!Array.isArray(o.layers))return this.fire(new d.j(new Error("parameters.layers must be an Array."))),[];for(const P of o.layers){const M=this._layers[P];if(!M)return this.fire(new d.j(new Error(`The layer '${P}' does not exist in the map's style and cannot be queried for features.`))),[];m[M.source]=!0}}const y=[];o.availableImages=this._availableImages;const T=this._serializedAllLayers();for(const P in this.sourceCaches)o.layers&&!m[P]||y.push(Gr(this.sourceCaches[P],this._layers,T,e,o,p));return this.placement&&y.push((function(P,M,B,$,U,X,ee){const ne={},le=X.queryRenderedSymbols($),ue=[];for(const me of Object.keys(le).map(Number))ue.push(ee[me]);ue.sort(Pr);for(const me of ue){const ye=me.featureIndex.lookupSymbolFeatures(le[me.bucketInstanceId],M,me.bucketIndex,me.sourceLayerIndex,U.filter,U.layers,U.availableImages,P);for(const ce in ye){const Ne=ne[ce]=ne[ce]||[],Ce=ye[ce];Ce.sort(((ze,Ge)=>{const rt=me.featureSortOrder;if(rt){const ht=rt.indexOf(ze.featureIndex);return rt.indexOf(Ge.featureIndex)-ht}return Ge.featureIndex-ze.featureIndex}));for(const ze of Ce)Ne.push(ze)}}for(const me in ne)ne[me].forEach((ye=>{const ce=ye.feature,Ne=B[P[me].source].getFeatureState(ce.layer["source-layer"],ce.id);ce.source=ce.layer.source,ce.layer["source-layer"]&&(ce.sourceLayer=ce.layer["source-layer"]),ce.state=Ne}));return ne})(this._layers,T,this.sourceCaches,e,o,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(y)}querySourceFeatures(e,o){o&&o.filter&&this._validate(d.u.filter,"querySourceFeatures.filter",o.filter,null,o);const p=this.sourceCaches[e];return p?(function(m,y){const T=m.getRenderableIds().map((B=>m.getTileByID(B))),P=[],M={};for(let B=0;B<T.length;B++){const $=T[B],U=$.tileID.canonical.key;M[U]||(M[U]=!0,$.querySourceFeatures(P,y))}return P})(p,o):[]}getLight(){return this.light.getLight()}setLight(e,o={}){this._checkLoaded();const p=this.light.getLight();let m=!1;for(const T in e)if(!d.aE(e[T],p[T])){m=!0;break}if(!m)return;const y={now:D.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(e,o),this.light.updateTransitions(y)}getSky(){var e;return(e=this.stylesheet)===null||e===void 0?void 0:e.sky}setSky(e,o={}){const p=this.getSky();let m=!1;if(!e&&!p)return;if(e&&!p)m=!0;else if(!e&&p)m=!0;else for(const T in e)if(!d.aE(e[T],p[T])){m=!0;break}if(!m)return;const y={now:D.now(),transition:d.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=e,this.sky.setSky(e,o),this.sky.updateTransitions(y)}_validate(e,o,p,m,y={}){return(!y||y.validate!==!1)&&Ar(this,e.call(d.u,d.e({key:o,style:this.serialize(),value:p,styleSpec:d.v},m)))}_remove(e=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),Ks().off(st,this._rtlPluginLoaded);for(const o in this._layers)this._layers[o].setEventedParent(null);for(const o in this.sourceCaches){const p=this.sourceCaches[o];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),e&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(e)}_clearSource(e){this.sourceCaches[e].clearTiles()}_reloadSource(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()}_updateSources(e){for(const o in this.sourceCaches)this.sourceCaches[o].update(e,this.map.terrain)}_generateCollisionBoxes(){for(const e in this.sourceCaches)this._reloadSource(e)}_updatePlacement(e,o,p,m,y=!1){let T=!1,P=!1;const M={};for(const B of this._order){const $=this._layers[B];if($.type!=="symbol")continue;if(!M[$.source]){const X=this.sourceCaches[$.source];M[$.source]=X.getRenderableIds(!0).map((ee=>X.getTileByID(ee))).sort(((ee,ne)=>ne.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(ne.tileID)?-1:1)))}const U=this.crossTileSymbolIndex.addLayer($,M[$.source],e.center.lng);T=T||U}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((y=y||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(D.now(),e.zoom))&&(this.pauseablePlacement=new Fl(e,this.map.terrain,this._order,y,o,p,m,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,M),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(D.now()),P=!0),T&&this.pauseablePlacement.placement.setStale()),P||T)for(const B of this._order){const $=this._layers[B];$.type==="symbol"&&this.placement.updateLayerOpacities($,M[$.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(D.now())}_releaseSymbolFadeTiles(){for(const e in this.sourceCaches)this.sourceCaches[e].releaseSymbolFadeTiles()}getImages(e,o){return d._(this,void 0,void 0,(function*(){const p=yield this.imageManager.getImages(o.icons);this._updateTilesForChangedImages();const m=this.sourceCaches[o.source];return m&&m.setDependencies(o.tileID.key,o.type,o.icons),p}))}getGlyphs(e,o){return d._(this,void 0,void 0,(function*(){const p=yield this.glyphManager.getGlyphs(o.stacks),m=this.sourceCaches[o.source];return m&&m.setDependencies(o.tileID.key,o.type,[""]),p}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(e,o={}){this._checkLoaded(),e&&this._validate(d.u.glyphs,"glyphs",e,null,o)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=e,this.glyphManager.entries={},this.glyphManager.setURL(e))}addSprite(e,o,p={},m){this._checkLoaded();const y=[{id:e,url:o}],T=[...Ae(this.stylesheet.sprite),...y];this._validate(d.u.sprite,"sprite",T,null,p)||(this.stylesheet.sprite=T,this._loadSprite(y,!0,m))}removeSprite(e){this._checkLoaded();const o=Ae(this.stylesheet.sprite);if(o.find((p=>p.id===e))){if(this._spritesImagesIds[e])for(const p of this._spritesImagesIds[e])this.imageManager.removeImage(p),this._changedImages[p]=!0;o.splice(o.findIndex((p=>p.id===e)),1),this.stylesheet.sprite=o.length>0?o:void 0,delete this._spritesImagesIds[e],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new d.k("data",{dataType:"style"}))}else this.fire(new d.j(new Error(`Sprite "${e}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(e,o={},p){this._checkLoaded(),e&&this._validate(d.u.sprite,"sprite",e,null,o)||(this.stylesheet.sprite=e,e?this._loadSprite(e,!0,p):(this._unloadSprite(),p&&p(null)))}}var xa=d.Y([{name:"a_pos",type:"Int16",components:2}]);const ya={prelude:Ti(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture2D(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture2D(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}`),background:Ti(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),backgroundPattern:Ti(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:Ti(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);float ele=get_elevation(circle_center);v_visibility=calculate_visibility(u_matrix*vec4(circle_center,ele,1.0));if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,ele,1);} else {gl_Position=u_matrix*vec4(circle_center,ele,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:Ti("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:Ti(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,get_elevation(floor(a_pos*0.5)),1);gl_Position=u_matrix*pos;}`),heatmapTexture:Ti(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:Ti("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_anchor_pos;attribute vec2 a_placed;attribute vec2 a_box_real;uniform mat4 u_matrix;uniform vec2 u_pixel_extrude_scale;varying float v_placed;varying float v_notUsed;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:Ti("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:Ti("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,get_elevation(a_pos),1);}"),fill:Ti(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),fillOutline:Ti(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillOutlinePattern:Ti(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),fillPattern:Ti(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:Ti(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:Ti(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;
#ifdef TERRAIN3D
attribute vec2 a_centroid;
#endif
varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:Ti(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:Ti(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),line:Ti(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:Ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:Ti(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:Ti(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:Ti(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:Ti(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_tex;varying float v_fade_opacity;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:Ti(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec2 v_data0;varying vec3 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:Ti(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;varying vec4 v_data0;varying vec4 v_data1;vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_matrix*vec4(posInTile,elevation,1.0);}
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:Ti("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;varying vec2 v_texture_pos;varying float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture2D(u_texture,v_texture_pos);if (v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);gl_FragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {gl_FragColor=surface_color;}}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform mat4 u_fog_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;varying float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:Ti("varying float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {gl_FragColor=pack(v_depth);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:Ti("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;varying vec2 v_texture_pos;void main() {vec4 rgba=texture2D(u_texture,v_texture_pos);gl_FragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","attribute vec3 a_pos3d;uniform mat4 u_matrix;uniform float u_ele_delta;varying vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=u_matrix*vec4(a_pos3d.xy,ele-ele_delta,1.0);}"),sky:Ti("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform float u_horizon;uniform float u_sky_horizon_blend;void main() {float y=gl_FragCoord.y;if (y > u_horizon) {float blend=y-u_horizon;if (blend < u_sky_horizon_blend) {gl_FragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {gl_FragColor=u_sky_color;}}}","attribute vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function Ti(v,e){const o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=e.match(/attribute ([\w]+) ([\w]+)/g),m=v.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),y=e.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=y?y.concat(m):m,P={};return{fragmentSource:v=v.replace(o,((M,B,$,U,X)=>(P[X]=!0,B==="define"?`
#ifndef HAS_UNIFORM_u_${X}
varying ${$} ${U} ${X};
#else
uniform ${$} ${U} u_${X};
#endif
`:`
#ifdef HAS_UNIFORM_u_${X}
    ${$} ${U} ${X} = u_${X};
#endif
`))),vertexSource:e=e.replace(o,((M,B,$,U,X)=>{const ee=U==="float"?"vec2":"vec4",ne=X.match(/color/)?"color":ee;return P[X]?B==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${$} ${ee} a_${X};
varying ${$} ${U} ${X};
#else
uniform ${$} ${U} u_${X};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = a_${X};
#else
    ${$} ${U} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${X} = unpack_mix_${ne}(a_${X}, u_${X}_t);
#else
    ${$} ${U} ${X} = u_${X};
#endif
`:B==="define"?`
#ifndef HAS_UNIFORM_u_${X}
uniform lowp float u_${X}_t;
attribute ${$} ${ee} a_${X};
#else
uniform ${$} ${U} u_${X};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${X}
    ${$} ${U} ${X} = a_${X};
#else
    ${$} ${U} ${X} = u_${X};
#endif
`:`
#ifndef HAS_UNIFORM_u_${X}
    ${$} ${U} ${X} = unpack_mix_${ne}(a_${X}, u_${X}_t);
#else
    ${$} ${U} ${X} = u_${X};
#endif
`})),staticAttributes:p,staticUniforms:T}}class bo{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(e,o,p,m,y,T,P,M,B){this.context=e;let $=this.boundPaintVertexBuffers.length!==m.length;for(let U=0;!$&&U<m.length;U++)this.boundPaintVertexBuffers[U]!==m[U]&&($=!0);!this.vao||this.boundProgram!==o||this.boundLayoutVertexBuffer!==p||$||this.boundIndexBuffer!==y||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==P||this.boundDynamicVertexBuffer2!==M||this.boundDynamicVertexBuffer3!==B?this.freshBind(o,p,m,y,T,P,M,B):(e.bindVertexArray.set(this.vao),P&&P.bind(),y&&y.dynamicDraw&&y.bind(),M&&M.bind(),B&&B.bind())}freshBind(e,o,p,m,y,T,P,M){const B=e.numAttributes,$=this.context,U=$.gl;this.vao&&this.destroy(),this.vao=$.createVertexArray(),$.bindVertexArray.set(this.vao),this.boundProgram=e,this.boundLayoutVertexBuffer=o,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=m,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=P,this.boundDynamicVertexBuffer3=M,o.enableAttributes(U,e);for(const X of p)X.enableAttributes(U,e);T&&T.enableAttributes(U,e),P&&P.enableAttributes(U,e),M&&M.enableAttributes(U,e),o.bind(),o.setVertexAttribPointers(U,e,y);for(const X of p)X.bind(),X.setVertexAttribPointers(U,e,y);T&&(T.bind(),T.setVertexAttribPointers(U,e,y)),m&&m.bind(),P&&(P.bind(),P.setVertexAttribPointers(U,e,y)),M&&(M.bind(),M.setVertexAttribPointers(U,e,y)),$.currentNumAttributes=B}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const wu=(v,e,o,p,m)=>({u_matrix:v,u_texture:0,u_ele_delta:e,u_fog_matrix:o,u_fog_color:p?p.properties.get("fog-color"):d.aM.white,u_fog_ground_blend:p?p.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:p?p.calculateFogBlendOpacity(m):0,u_horizon_color:p?p.properties.get("horizon-color"):d.aM.white,u_horizon_fog_blend:p?p.properties.get("horizon-fog-blend"):1});function Ua(v){const e=[];for(let o=0;o<v.length;o++){if(v[o]===null)continue;const p=v[o].split(" ");e.push(p.pop())}return e}class zi{constructor(e,o,p,m,y,T){const P=e.gl;this.program=P.createProgram();const M=Ua(o.staticAttributes),B=p?p.getBinderAttributes():[],$=M.concat(B),U=ya.prelude.staticUniforms?Ua(ya.prelude.staticUniforms):[],X=o.staticUniforms?Ua(o.staticUniforms):[],ee=p?p.getBinderUniforms():[],ne=U.concat(X).concat(ee),le=[];for(const ze of ne)le.indexOf(ze)<0&&le.push(ze);const ue=p?p.defines():[];y&&ue.push("#define OVERDRAW_INSPECTOR;"),T&&ue.push("#define TERRAIN3D;");const me=ue.concat(ya.prelude.fragmentSource,o.fragmentSource).join(`
`),ye=ue.concat(ya.prelude.vertexSource,o.vertexSource).join(`
`),ce=P.createShader(P.FRAGMENT_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(ce,me),P.compileShader(ce),!P.getShaderParameter(ce,P.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${P.getShaderInfoLog(ce)}`);P.attachShader(this.program,ce);const Ne=P.createShader(P.VERTEX_SHADER);if(P.isContextLost())return void(this.failedToCreate=!0);if(P.shaderSource(Ne,ye),P.compileShader(Ne),!P.getShaderParameter(Ne,P.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${P.getShaderInfoLog(Ne)}`);P.attachShader(this.program,Ne),this.attributes={};const Ce={};this.numAttributes=$.length;for(let ze=0;ze<this.numAttributes;ze++)$[ze]&&(P.bindAttribLocation(this.program,ze,$[ze]),this.attributes[$[ze]]=ze);if(P.linkProgram(this.program),!P.getProgramParameter(this.program,P.LINK_STATUS))throw new Error(`Program failed to link: ${P.getProgramInfoLog(this.program)}`);P.deleteShader(Ne),P.deleteShader(ce);for(let ze=0;ze<le.length;ze++){const Ge=le[ze];if(Ge&&!Ce[Ge]){const rt=P.getUniformLocation(this.program,Ge);rt&&(Ce[Ge]=rt)}}this.fixedUniforms=m(e,Ce),this.terrainUniforms=((ze,Ge)=>({u_depth:new d.aH(ze,Ge.u_depth),u_terrain:new d.aH(ze,Ge.u_terrain),u_terrain_dim:new d.aI(ze,Ge.u_terrain_dim),u_terrain_matrix:new d.aJ(ze,Ge.u_terrain_matrix),u_terrain_unpack:new d.aK(ze,Ge.u_terrain_unpack),u_terrain_exaggeration:new d.aI(ze,Ge.u_terrain_exaggeration)}))(e,Ce),this.binderUniforms=p?p.getUniforms(e,Ce):[]}draw(e,o,p,m,y,T,P,M,B,$,U,X,ee,ne,le,ue,me,ye){const ce=e.gl;if(this.failedToCreate)return;if(e.program.set(this.program),e.setDepthMode(p),e.setStencilMode(m),e.setColorMode(y),e.setCullFace(T),M){e.activeTexture.set(ce.TEXTURE2),ce.bindTexture(ce.TEXTURE_2D,M.depthTexture),e.activeTexture.set(ce.TEXTURE3),ce.bindTexture(ce.TEXTURE_2D,M.texture);for(const Ce in this.terrainUniforms)this.terrainUniforms[Ce].set(M[Ce])}for(const Ce in this.fixedUniforms)this.fixedUniforms[Ce].set(P[Ce]);le&&le.setUniforms(e,this.binderUniforms,ee,{zoom:ne});let Ne=0;switch(o){case ce.LINES:Ne=2;break;case ce.TRIANGLES:Ne=3;break;case ce.LINE_STRIP:Ne=1}for(const Ce of X.get()){const ze=Ce.vaos||(Ce.vaos={});(ze[B]||(ze[B]=new bo)).bind(e,this,$,le?le.getPaintVertexBuffers():[],U,Ce.vertexOffset,ue,me,ye),ce.drawElements(o,Ce.primitiveLength*Ne,ce.UNSIGNED_SHORT,Ce.primitiveOffset*Ne*2)}}}function Ol(v,e,o){const p=1/pi(o,1,e.transform.tileZoom),m=Math.pow(2,o.tileID.overscaledZ),y=o.tileSize*Math.pow(2,e.transform.tileZoom)/m,T=y*(o.tileID.canonical.x+o.tileID.wrap*m),P=y*o.tileID.canonical.y;return{u_image:0,u_texsize:o.imageAtlasTexture.size,u_scale:[p,v.fromScale,v.toScale],u_fade:v.t,u_pixel_coord_upper:[T>>16,P>>16],u_pixel_coord_lower:[65535&T,65535&P]}}const Zo=(v,e,o,p)=>{const m=e.style.light,y=m.properties.get("position"),T=[y.x,y.y,y.z],P=(function(){var B=new d.A(9);return d.A!=Float32Array&&(B[1]=0,B[2]=0,B[3]=0,B[5]=0,B[6]=0,B[7]=0),B[0]=1,B[4]=1,B[8]=1,B})();m.properties.get("anchor")==="viewport"&&(function(B,$){var U=Math.sin($),X=Math.cos($);B[0]=X,B[1]=U,B[2]=0,B[3]=-U,B[4]=X,B[5]=0,B[6]=0,B[7]=0,B[8]=1})(P,-e.transform.angle),(function(B,$,U){var X=$[0],ee=$[1],ne=$[2];B[0]=X*U[0]+ee*U[3]+ne*U[6],B[1]=X*U[1]+ee*U[4]+ne*U[7],B[2]=X*U[2]+ee*U[5]+ne*U[8]})(T,T,P);const M=m.properties.get("color");return{u_matrix:v,u_lightpos:T,u_lightintensity:m.properties.get("intensity"),u_lightcolor:[M.r,M.g,M.b],u_vertical_gradient:+o,u_opacity:p}},Xo=(v,e,o,p,m,y,T)=>d.e(Zo(v,e,o,p),Ol(y,e,T),{u_height_factor:-Math.pow(2,m.overscaledZ)/T.tileSize/8}),jo=v=>({u_matrix:v}),bu=(v,e,o,p)=>d.e(jo(v),Ol(o,e,p)),Fd=(v,e)=>({u_matrix:v,u_world:e}),Ec=(v,e,o,p,m)=>d.e(bu(v,e,o,p),{u_world:m}),Mc=(v,e,o,p)=>{const m=v.transform;let y,T;if(p.paint.get("circle-pitch-alignment")==="map"){const P=pi(o,1,m.zoom);y=!0,T=[P,P]}else y=!1,T=m.pixelsToGLUnits;return{u_camera_to_center_distance:m.cameraToCenterDistance,u_scale_with_map:+(p.paint.get("circle-pitch-scale")==="map"),u_matrix:v.translatePosMatrix(e.posMatrix,o,p.paint.get("circle-translate"),p.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:v.pixelRatio,u_extrude_scale:T}},Ir=(v,e,o)=>({u_matrix:v,u_inv_matrix:e,u_camera_to_center_distance:o.cameraToCenterDistance,u_viewport_size:[o.width,o.height]}),hn=(v,e,o=1)=>({u_matrix:v,u_color:e,u_overlay:0,u_overlay_scale:o}),_s=v=>({u_matrix:v}),Us=(v,e,o,p)=>({u_matrix:v,u_extrude_scale:pi(e,1,o),u_intensity:p}),Ha=(v,e,o,p)=>{const m=d.H();d.aP(m,0,v.width,v.height,0,0,1);const y=v.context.gl;return{u_matrix:m,u_world:[y.drawingBufferWidth,y.drawingBufferHeight],u_image:o,u_color_ramp:p,u_opacity:e.paint.get("heatmap-opacity")}};function In(v,e){const o=Math.pow(2,e.canonical.z),p=e.canonical.y;return[new d.Z(0,p/o).toLngLat().lat,new d.Z(0,(p+1)/o).toLngLat().lat]}const Ac=(v,e,o,p)=>{const m=v.transform;return{u_matrix:Vl(v,e,o,p),u_ratio:1/pi(e,1,m.zoom),u_device_pixel_ratio:v.pixelRatio,u_units_to_pixels:[1/m.pixelsToGLUnits[0],1/m.pixelsToGLUnits[1]]}},ju=(v,e,o,p,m)=>d.e(Ac(v,e,o,m),{u_image:0,u_image_height:p}),Qn=(v,e,o,p,m)=>{const y=v.transform,T=Nu(e,y);return{u_matrix:Vl(v,e,o,m),u_texsize:e.imageAtlasTexture.size,u_ratio:1/pi(e,1,y.zoom),u_device_pixel_ratio:v.pixelRatio,u_image:0,u_scale:[T,p.fromScale,p.toScale],u_fade:p.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},cp=(v,e,o,p,m,y)=>{const T=v.lineAtlas,P=Nu(e,v.transform),M=o.layout.get("line-cap")==="round",B=T.getDash(p.from,M),$=T.getDash(p.to,M),U=B.width*m.fromScale,X=$.width*m.toScale;return d.e(Ac(v,e,o,y),{u_patternscale_a:[P/U,-B.height/2],u_patternscale_b:[P/X,-$.height/2],u_sdfgamma:T.width/(256*Math.min(U,X)*v.pixelRatio)/2,u_image:0,u_tex_y_a:B.y,u_tex_y_b:$.y,u_mix:m.t})};function Nu(v,e){return 1/pi(v,1,e.tileZoom)}function Vl(v,e,o,p){return v.translatePosMatrix(p?p.posMatrix:e.tileID.posMatrix,e,o.paint.get("line-translate"),o.paint.get("line-translate-anchor"))}const Od=(v,e,o,p,m)=>{return{u_matrix:v,u_tl_parent:e,u_scale_parent:o,u_buffer_scale:1,u_fade_t:p.mix,u_opacity:p.opacity*m.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:m.paint.get("raster-brightness-min"),u_brightness_high:m.paint.get("raster-brightness-max"),u_saturation_factor:(T=m.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(y=m.paint.get("raster-contrast"),y>0?1/(1-y):1+y),u_spin_weights:up(m.paint.get("raster-hue-rotate"))};var y,T};function up(v){v*=Math.PI/180;const e=Math.sin(v),o=Math.cos(v);return[(2*o+1)/3,(-Math.sqrt(3)*e-o+1)/3,(Math.sqrt(3)*e-o+1)/3]}const Yo=(v,e,o,p,m,y,T,P,M,B,$,U,X,ee)=>{const ne=T.transform;return{u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:e?e.uSizeT:0,u_size:e?e.uSize:0,u_camera_to_center_distance:ne.cameraToCenterDistance,u_pitch:ne.pitch/360*2*Math.PI,u_rotate_symbol:+o,u_aspect_ratio:ne.width/ne.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_matrix:P,u_label_plane_matrix:M,u_coord_matrix:B,u_is_text:+U,u_pitch_with_map:+p,u_is_along_line:m,u_is_variable_anchor:y,u_texsize:X,u_texture:0,u_translation:$,u_pitched_scale:ee}},va=(v,e,o,p,m,y,T,P,M,B,$,U,X,ee,ne)=>{const le=T.transform;return d.e(Yo(v,e,o,p,m,y,T,P,M,B,$,U,X,ne),{u_gamma_scale:p?Math.cos(le._pitch)*le.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},Wa=(v,e,o,p,m,y,T,P,M,B,$,U,X,ee)=>d.e(va(v,e,o,p,m,y,T,P,M,B,$,!0,U,!0,ee),{u_texsize_icon:X,u_texture_icon:1}),No=(v,e,o)=>({u_matrix:v,u_opacity:e,u_color:o}),ku=(v,e,o,p,m,y)=>d.e((function(T,P,M,B){const $=M.imageManager.getPattern(T.from.toString()),U=M.imageManager.getPattern(T.to.toString()),{width:X,height:ee}=M.imageManager.getPixelSize(),ne=Math.pow(2,B.tileID.overscaledZ),le=B.tileSize*Math.pow(2,M.transform.tileZoom)/ne,ue=le*(B.tileID.canonical.x+B.tileID.wrap*ne),me=le*B.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:$.tl,u_pattern_br_a:$.br,u_pattern_tl_b:U.tl,u_pattern_br_b:U.br,u_texsize:[X,ee],u_mix:P.t,u_pattern_size_a:$.displaySize,u_pattern_size_b:U.displaySize,u_scale_a:P.fromScale,u_scale_b:P.toScale,u_tile_units_to_pixels:1/pi(B,1,M.transform.tileZoom),u_pixel_coord_upper:[ue>>16,me>>16],u_pixel_coord_lower:[65535&ue,65535&me]}})(p,y,o,m),{u_matrix:v,u_opacity:e}),Su={fillExtrusion:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_lightpos:new d.aN(v,e.u_lightpos),u_lightintensity:new d.aI(v,e.u_lightintensity),u_lightcolor:new d.aN(v,e.u_lightcolor),u_vertical_gradient:new d.aI(v,e.u_vertical_gradient),u_opacity:new d.aI(v,e.u_opacity)}),fillExtrusionPattern:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_lightpos:new d.aN(v,e.u_lightpos),u_lightintensity:new d.aI(v,e.u_lightintensity),u_lightcolor:new d.aN(v,e.u_lightcolor),u_vertical_gradient:new d.aI(v,e.u_vertical_gradient),u_height_factor:new d.aI(v,e.u_height_factor),u_image:new d.aH(v,e.u_image),u_texsize:new d.aO(v,e.u_texsize),u_pixel_coord_upper:new d.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(v,e.u_pixel_coord_lower),u_scale:new d.aN(v,e.u_scale),u_fade:new d.aI(v,e.u_fade),u_opacity:new d.aI(v,e.u_opacity)}),fill:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix)}),fillPattern:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_image:new d.aH(v,e.u_image),u_texsize:new d.aO(v,e.u_texsize),u_pixel_coord_upper:new d.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(v,e.u_pixel_coord_lower),u_scale:new d.aN(v,e.u_scale),u_fade:new d.aI(v,e.u_fade)}),fillOutline:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_world:new d.aO(v,e.u_world)}),fillOutlinePattern:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_world:new d.aO(v,e.u_world),u_image:new d.aH(v,e.u_image),u_texsize:new d.aO(v,e.u_texsize),u_pixel_coord_upper:new d.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(v,e.u_pixel_coord_lower),u_scale:new d.aN(v,e.u_scale),u_fade:new d.aI(v,e.u_fade)}),circle:(v,e)=>({u_camera_to_center_distance:new d.aI(v,e.u_camera_to_center_distance),u_scale_with_map:new d.aH(v,e.u_scale_with_map),u_pitch_with_map:new d.aH(v,e.u_pitch_with_map),u_extrude_scale:new d.aO(v,e.u_extrude_scale),u_device_pixel_ratio:new d.aI(v,e.u_device_pixel_ratio),u_matrix:new d.aJ(v,e.u_matrix)}),collisionBox:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_pixel_extrude_scale:new d.aO(v,e.u_pixel_extrude_scale)}),collisionCircle:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_inv_matrix:new d.aJ(v,e.u_inv_matrix),u_camera_to_center_distance:new d.aI(v,e.u_camera_to_center_distance),u_viewport_size:new d.aO(v,e.u_viewport_size)}),debug:(v,e)=>({u_color:new d.aL(v,e.u_color),u_matrix:new d.aJ(v,e.u_matrix),u_overlay:new d.aH(v,e.u_overlay),u_overlay_scale:new d.aI(v,e.u_overlay_scale)}),clippingMask:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix)}),heatmap:(v,e)=>({u_extrude_scale:new d.aI(v,e.u_extrude_scale),u_intensity:new d.aI(v,e.u_intensity),u_matrix:new d.aJ(v,e.u_matrix)}),heatmapTexture:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_world:new d.aO(v,e.u_world),u_image:new d.aH(v,e.u_image),u_color_ramp:new d.aH(v,e.u_color_ramp),u_opacity:new d.aI(v,e.u_opacity)}),hillshade:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_image:new d.aH(v,e.u_image),u_latrange:new d.aO(v,e.u_latrange),u_light:new d.aO(v,e.u_light),u_shadow:new d.aL(v,e.u_shadow),u_highlight:new d.aL(v,e.u_highlight),u_accent:new d.aL(v,e.u_accent)}),hillshadePrepare:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_image:new d.aH(v,e.u_image),u_dimension:new d.aO(v,e.u_dimension),u_zoom:new d.aI(v,e.u_zoom),u_unpack:new d.aK(v,e.u_unpack)}),line:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_ratio:new d.aI(v,e.u_ratio),u_device_pixel_ratio:new d.aI(v,e.u_device_pixel_ratio),u_units_to_pixels:new d.aO(v,e.u_units_to_pixels)}),lineGradient:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_ratio:new d.aI(v,e.u_ratio),u_device_pixel_ratio:new d.aI(v,e.u_device_pixel_ratio),u_units_to_pixels:new d.aO(v,e.u_units_to_pixels),u_image:new d.aH(v,e.u_image),u_image_height:new d.aI(v,e.u_image_height)}),linePattern:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_texsize:new d.aO(v,e.u_texsize),u_ratio:new d.aI(v,e.u_ratio),u_device_pixel_ratio:new d.aI(v,e.u_device_pixel_ratio),u_image:new d.aH(v,e.u_image),u_units_to_pixels:new d.aO(v,e.u_units_to_pixels),u_scale:new d.aN(v,e.u_scale),u_fade:new d.aI(v,e.u_fade)}),lineSDF:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_ratio:new d.aI(v,e.u_ratio),u_device_pixel_ratio:new d.aI(v,e.u_device_pixel_ratio),u_units_to_pixels:new d.aO(v,e.u_units_to_pixels),u_patternscale_a:new d.aO(v,e.u_patternscale_a),u_patternscale_b:new d.aO(v,e.u_patternscale_b),u_sdfgamma:new d.aI(v,e.u_sdfgamma),u_image:new d.aH(v,e.u_image),u_tex_y_a:new d.aI(v,e.u_tex_y_a),u_tex_y_b:new d.aI(v,e.u_tex_y_b),u_mix:new d.aI(v,e.u_mix)}),raster:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_tl_parent:new d.aO(v,e.u_tl_parent),u_scale_parent:new d.aI(v,e.u_scale_parent),u_buffer_scale:new d.aI(v,e.u_buffer_scale),u_fade_t:new d.aI(v,e.u_fade_t),u_opacity:new d.aI(v,e.u_opacity),u_image0:new d.aH(v,e.u_image0),u_image1:new d.aH(v,e.u_image1),u_brightness_low:new d.aI(v,e.u_brightness_low),u_brightness_high:new d.aI(v,e.u_brightness_high),u_saturation_factor:new d.aI(v,e.u_saturation_factor),u_contrast_factor:new d.aI(v,e.u_contrast_factor),u_spin_weights:new d.aN(v,e.u_spin_weights)}),symbolIcon:(v,e)=>({u_is_size_zoom_constant:new d.aH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(v,e.u_is_size_feature_constant),u_size_t:new d.aI(v,e.u_size_t),u_size:new d.aI(v,e.u_size),u_camera_to_center_distance:new d.aI(v,e.u_camera_to_center_distance),u_pitch:new d.aI(v,e.u_pitch),u_rotate_symbol:new d.aH(v,e.u_rotate_symbol),u_aspect_ratio:new d.aI(v,e.u_aspect_ratio),u_fade_change:new d.aI(v,e.u_fade_change),u_matrix:new d.aJ(v,e.u_matrix),u_label_plane_matrix:new d.aJ(v,e.u_label_plane_matrix),u_coord_matrix:new d.aJ(v,e.u_coord_matrix),u_is_text:new d.aH(v,e.u_is_text),u_pitch_with_map:new d.aH(v,e.u_pitch_with_map),u_is_along_line:new d.aH(v,e.u_is_along_line),u_is_variable_anchor:new d.aH(v,e.u_is_variable_anchor),u_texsize:new d.aO(v,e.u_texsize),u_texture:new d.aH(v,e.u_texture),u_translation:new d.aO(v,e.u_translation),u_pitched_scale:new d.aI(v,e.u_pitched_scale)}),symbolSDF:(v,e)=>({u_is_size_zoom_constant:new d.aH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(v,e.u_is_size_feature_constant),u_size_t:new d.aI(v,e.u_size_t),u_size:new d.aI(v,e.u_size),u_camera_to_center_distance:new d.aI(v,e.u_camera_to_center_distance),u_pitch:new d.aI(v,e.u_pitch),u_rotate_symbol:new d.aH(v,e.u_rotate_symbol),u_aspect_ratio:new d.aI(v,e.u_aspect_ratio),u_fade_change:new d.aI(v,e.u_fade_change),u_matrix:new d.aJ(v,e.u_matrix),u_label_plane_matrix:new d.aJ(v,e.u_label_plane_matrix),u_coord_matrix:new d.aJ(v,e.u_coord_matrix),u_is_text:new d.aH(v,e.u_is_text),u_pitch_with_map:new d.aH(v,e.u_pitch_with_map),u_is_along_line:new d.aH(v,e.u_is_along_line),u_is_variable_anchor:new d.aH(v,e.u_is_variable_anchor),u_texsize:new d.aO(v,e.u_texsize),u_texture:new d.aH(v,e.u_texture),u_gamma_scale:new d.aI(v,e.u_gamma_scale),u_device_pixel_ratio:new d.aI(v,e.u_device_pixel_ratio),u_is_halo:new d.aH(v,e.u_is_halo),u_translation:new d.aO(v,e.u_translation),u_pitched_scale:new d.aI(v,e.u_pitched_scale)}),symbolTextAndIcon:(v,e)=>({u_is_size_zoom_constant:new d.aH(v,e.u_is_size_zoom_constant),u_is_size_feature_constant:new d.aH(v,e.u_is_size_feature_constant),u_size_t:new d.aI(v,e.u_size_t),u_size:new d.aI(v,e.u_size),u_camera_to_center_distance:new d.aI(v,e.u_camera_to_center_distance),u_pitch:new d.aI(v,e.u_pitch),u_rotate_symbol:new d.aH(v,e.u_rotate_symbol),u_aspect_ratio:new d.aI(v,e.u_aspect_ratio),u_fade_change:new d.aI(v,e.u_fade_change),u_matrix:new d.aJ(v,e.u_matrix),u_label_plane_matrix:new d.aJ(v,e.u_label_plane_matrix),u_coord_matrix:new d.aJ(v,e.u_coord_matrix),u_is_text:new d.aH(v,e.u_is_text),u_pitch_with_map:new d.aH(v,e.u_pitch_with_map),u_is_along_line:new d.aH(v,e.u_is_along_line),u_is_variable_anchor:new d.aH(v,e.u_is_variable_anchor),u_texsize:new d.aO(v,e.u_texsize),u_texsize_icon:new d.aO(v,e.u_texsize_icon),u_texture:new d.aH(v,e.u_texture),u_texture_icon:new d.aH(v,e.u_texture_icon),u_gamma_scale:new d.aI(v,e.u_gamma_scale),u_device_pixel_ratio:new d.aI(v,e.u_device_pixel_ratio),u_is_halo:new d.aH(v,e.u_is_halo),u_translation:new d.aO(v,e.u_translation),u_pitched_scale:new d.aI(v,e.u_pitched_scale)}),background:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_opacity:new d.aI(v,e.u_opacity),u_color:new d.aL(v,e.u_color)}),backgroundPattern:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_opacity:new d.aI(v,e.u_opacity),u_image:new d.aH(v,e.u_image),u_pattern_tl_a:new d.aO(v,e.u_pattern_tl_a),u_pattern_br_a:new d.aO(v,e.u_pattern_br_a),u_pattern_tl_b:new d.aO(v,e.u_pattern_tl_b),u_pattern_br_b:new d.aO(v,e.u_pattern_br_b),u_texsize:new d.aO(v,e.u_texsize),u_mix:new d.aI(v,e.u_mix),u_pattern_size_a:new d.aO(v,e.u_pattern_size_a),u_pattern_size_b:new d.aO(v,e.u_pattern_size_b),u_scale_a:new d.aI(v,e.u_scale_a),u_scale_b:new d.aI(v,e.u_scale_b),u_pixel_coord_upper:new d.aO(v,e.u_pixel_coord_upper),u_pixel_coord_lower:new d.aO(v,e.u_pixel_coord_lower),u_tile_units_to_pixels:new d.aI(v,e.u_tile_units_to_pixels)}),terrain:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_texture:new d.aH(v,e.u_texture),u_ele_delta:new d.aI(v,e.u_ele_delta),u_fog_matrix:new d.aJ(v,e.u_fog_matrix),u_fog_color:new d.aL(v,e.u_fog_color),u_fog_ground_blend:new d.aI(v,e.u_fog_ground_blend),u_fog_ground_blend_opacity:new d.aI(v,e.u_fog_ground_blend_opacity),u_horizon_color:new d.aL(v,e.u_horizon_color),u_horizon_fog_blend:new d.aI(v,e.u_horizon_fog_blend)}),terrainDepth:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_ele_delta:new d.aI(v,e.u_ele_delta)}),terrainCoords:(v,e)=>({u_matrix:new d.aJ(v,e.u_matrix),u_texture:new d.aH(v,e.u_texture),u_terrain_coords_id:new d.aI(v,e.u_terrain_coords_id),u_ele_delta:new d.aI(v,e.u_ele_delta)}),sky:(v,e)=>({u_sky_color:new d.aL(v,e.u_sky_color),u_horizon_color:new d.aL(v,e.u_horizon_color),u_horizon:new d.aI(v,e.u_horizon),u_sky_horizon_blend:new d.aI(v,e.u_sky_horizon_blend)})};class pn{constructor(e,o,p){this.context=e;const m=e.gl;this.buffer=m.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),e.bindElementBuffer.set(this.buffer),m.bufferData(m.ELEMENT_ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?m.DYNAMIC_DRAW:m.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(e){const o=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),o.bufferSubData(o.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ic={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class $l{constructor(e,o,p,m){this.length=o.length,this.attributes=p,this.itemSize=o.bytesPerElement,this.dynamicDraw=m,this.context=e;const y=e.gl;this.buffer=y.createBuffer(),e.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,o.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete o.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(e){if(e.length!==this.length)throw new Error(`Length of new data is ${e.length}, which doesn't match current length of ${this.length}`);const o=this.context.gl;this.bind(),o.bufferSubData(o.ARRAY_BUFFER,0,e.arrayBuffer)}enableAttributes(e,o){for(let p=0;p<this.attributes.length;p++){const m=o.attributes[this.attributes[p].name];m!==void 0&&e.enableVertexAttribArray(m)}}setVertexAttribPointers(e,o,p){for(let m=0;m<this.attributes.length;m++){const y=this.attributes[m],T=o.attributes[y.name];T!==void 0&&e.vertexAttribPointer(T,y.components,e[Ic[y.type]],!1,this.itemSize,y.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const qa=new WeakMap;function br(v){var e;if(qa.has(v))return qa.get(v);{const o=(e=v.getParameter(v.VERSION))===null||e===void 0?void 0:e.startsWith("WebGL 2.0");return qa.set(v,o),o}}class Pi{constructor(e){this.gl=e.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(e){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ko extends Pi{getDefault(){return d.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.clearColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Vd extends Pi{getDefault(){return 1}set(e){(e!==this.current||this.dirty)&&(this.gl.clearDepth(e),this.current=e,this.dirty=!1)}}class _a extends Pi{getDefault(){return 0}set(e){(e!==this.current||this.dirty)&&(this.gl.clearStencil(e),this.current=e,this.dirty=!1)}}class zc extends Pi{getDefault(){return[!0,!0,!0,!0]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.colorMask(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class Tu extends Pi{getDefault(){return!0}set(e){(e!==this.current||this.dirty)&&(this.gl.depthMask(e),this.current=e,this.dirty=!1)}}class Yr extends Pi{getDefault(){return 255}set(e){(e!==this.current||this.dirty)&&(this.gl.stencilMask(e),this.current=e,this.dirty=!1)}}class So extends Pi{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(e){const o=this.current;(e.func!==o.func||e.ref!==o.ref||e.mask!==o.mask||this.dirty)&&(this.gl.stencilFunc(e.func,e.ref,e.mask),this.current=e,this.dirty=!1)}}class Ul extends Pi{getDefault(){const e=this.gl;return[e.KEEP,e.KEEP,e.KEEP]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||this.dirty)&&(this.gl.stencilOp(e[0],e[1],e[2]),this.current=e,this.dirty=!1)}}class Jo extends Pi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.STENCIL_TEST):o.disable(o.STENCIL_TEST),this.current=e,this.dirty=!1}}class $d extends Pi{getDefault(){return[0,1]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.depthRange(e[0],e[1]),this.current=e,this.dirty=!1)}}class Dc extends Pi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.DEPTH_TEST):o.disable(o.DEPTH_TEST),this.current=e,this.dirty=!1}}class Rc extends Pi{getDefault(){return this.gl.LESS}set(e){(e!==this.current||this.dirty)&&(this.gl.depthFunc(e),this.current=e,this.dirty=!1)}}class zn extends Pi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.BLEND):o.disable(o.BLEND),this.current=e,this.dirty=!1}}class Hl extends Pi{getDefault(){const e=this.gl;return[e.ONE,e.ZERO]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||this.dirty)&&(this.gl.blendFunc(e[0],e[1]),this.current=e,this.dirty=!1)}}class Ud extends Pi{getDefault(){return d.aM.transparent}set(e){const o=this.current;(e.r!==o.r||e.g!==o.g||e.b!==o.b||e.a!==o.a||this.dirty)&&(this.gl.blendColor(e.r,e.g,e.b,e.a),this.current=e,this.dirty=!1)}}class Hd extends Pi{getDefault(){return this.gl.FUNC_ADD}set(e){(e!==this.current||this.dirty)&&(this.gl.blendEquation(e),this.current=e,this.dirty=!1)}}class Wl extends Pi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;e?o.enable(o.CULL_FACE):o.disable(o.CULL_FACE),this.current=e,this.dirty=!1}}class dp extends Pi{getDefault(){return this.gl.BACK}set(e){(e!==this.current||this.dirty)&&(this.gl.cullFace(e),this.current=e,this.dirty=!1)}}class Ko extends Pi{getDefault(){return this.gl.CCW}set(e){(e!==this.current||this.dirty)&&(this.gl.frontFace(e),this.current=e,this.dirty=!1)}}class hp extends Pi{getDefault(){return null}set(e){(e!==this.current||this.dirty)&&(this.gl.useProgram(e),this.current=e,this.dirty=!1)}}class pp extends Pi{getDefault(){return this.gl.TEXTURE0}set(e){(e!==this.current||this.dirty)&&(this.gl.activeTexture(e),this.current=e,this.dirty=!1)}}class Wd extends Pi{getDefault(){const e=this.gl;return[0,0,e.drawingBufferWidth,e.drawingBufferHeight]}set(e){const o=this.current;(e[0]!==o[0]||e[1]!==o[1]||e[2]!==o[2]||e[3]!==o[3]||this.dirty)&&(this.gl.viewport(e[0],e[1],e[2],e[3]),this.current=e,this.dirty=!1)}}class qd extends Pi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindFramebuffer(o.FRAMEBUFFER,e),this.current=e,this.dirty=!1}}class Gd extends Pi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindRenderbuffer(o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Lc extends Pi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindTexture(o.TEXTURE_2D,e),this.current=e,this.dirty=!1}}class Zd extends Pi{getDefault(){return null}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.bindBuffer(o.ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class Bc extends Pi{getDefault(){return null}set(e){const o=this.gl;o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,e),this.current=e,this.dirty=!1}}class wa extends Pi{getDefault(){return null}set(e){var o;if(e===this.current&&!this.dirty)return;const p=this.gl;br(p)?p.bindVertexArray(e):(o=p.getExtension("OES_vertex_array_object"))===null||o===void 0||o.bindVertexArrayOES(e),this.current=e,this.dirty=!1}}class Cu extends Pi{getDefault(){return 4}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_ALIGNMENT,e),this.current=e,this.dirty=!1}}class ql extends Pi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e),this.current=e,this.dirty=!1}}class Pu extends Pi{getDefault(){return!1}set(e){if(e===this.current&&!this.dirty)return;const o=this.gl;o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,e),this.current=e,this.dirty=!1}}class Fc extends Pi{constructor(e,o){super(e),this.context=e,this.parent=o}getDefault(){return null}}class Eu extends Fc{setDirty(){this.dirty=!0}set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferTexture2D(o.FRAMEBUFFER,o.COLOR_ATTACHMENT0,o.TEXTURE_2D,e,0),this.current=e,this.dirty=!1}}class Ga extends Fc{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class Mu extends Fc{set(e){if(e===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const o=this.gl;o.framebufferRenderbuffer(o.FRAMEBUFFER,o.DEPTH_STENCIL_ATTACHMENT,o.RENDERBUFFER,e),this.current=e,this.dirty=!1}}class mp{constructor(e,o,p,m,y){this.context=e,this.width=o,this.height=p;const T=e.gl,P=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Eu(e,P),m)this.depthAttachment=y?new Mu(e,P):new Ga(e,P);else if(y)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error("Framebuffer is not complete")}destroy(){const e=this.context.gl,o=this.colorAttachment.get();if(o&&e.deleteTexture(o),this.depthAttachment){const p=this.depthAttachment.get();p&&e.deleteRenderbuffer(p)}e.deleteFramebuffer(this.framebuffer)}}class ps{constructor(e,o,p){this.blendFunction=e,this.blendColor=o,this.mask=p}}ps.Replace=[1,0],ps.disabled=new ps(ps.Replace,d.aM.transparent,[!1,!1,!1,!1]),ps.unblended=new ps(ps.Replace,d.aM.transparent,[!0,!0,!0,!0]),ps.alphaBlended=new ps([1,771],d.aM.transparent,[!0,!0,!0,!0]);class fp{constructor(e){var o,p;if(this.gl=e,this.clearColor=new ko(this),this.clearDepth=new Vd(this),this.clearStencil=new _a(this),this.colorMask=new zc(this),this.depthMask=new Tu(this),this.stencilMask=new Yr(this),this.stencilFunc=new So(this),this.stencilOp=new Ul(this),this.stencilTest=new Jo(this),this.depthRange=new $d(this),this.depthTest=new Dc(this),this.depthFunc=new Rc(this),this.blend=new zn(this),this.blendFunc=new Hl(this),this.blendColor=new Ud(this),this.blendEquation=new Hd(this),this.cullFace=new Wl(this),this.cullFaceSide=new dp(this),this.frontFace=new Ko(this),this.program=new hp(this),this.activeTexture=new pp(this),this.viewport=new Wd(this),this.bindFramebuffer=new qd(this),this.bindRenderbuffer=new Gd(this),this.bindTexture=new Lc(this),this.bindVertexBuffer=new Zd(this),this.bindElementBuffer=new Bc(this),this.bindVertexArray=new wa(this),this.pixelStoreUnpack=new Cu(this),this.pixelStoreUnpackPremultiplyAlpha=new ql(this),this.pixelStoreUnpackFlipY=new Pu(this),this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),br(e)){this.HALF_FLOAT=e.HALF_FLOAT;const m=e.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(o=e.RGBA16F)!==null&&o!==void 0?o:m?.RGBA16F_EXT,this.RGB16F=(p=e.RGB16F)!==null&&p!==void 0?p:m?.RGB16F_EXT,e.getExtension("EXT_color_buffer_float")}else{e.getExtension("EXT_color_buffer_half_float"),e.getExtension("OES_texture_half_float_linear");const m=e.getExtension("OES_texture_half_float");this.HALF_FLOAT=m?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(e,o){return new pn(this,e,o)}createVertexBuffer(e,o,p){return new $l(this,e,o,p)}createRenderbuffer(e,o,p){const m=this.gl,y=m.createRenderbuffer();return this.bindRenderbuffer.set(y),m.renderbufferStorage(m.RENDERBUFFER,e,o,p),this.bindRenderbuffer.set(null),y}createFramebuffer(e,o,p,m){return new mp(this,e,o,p,m)}clear({color:e,depth:o,stencil:p}){const m=this.gl;let y=0;e&&(y|=m.COLOR_BUFFER_BIT,this.clearColor.set(e),this.colorMask.set([!0,!0,!0,!0])),o!==void 0&&(y|=m.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(o),this.depthMask.set(!0)),p!==void 0&&(y|=m.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),m.clear(y)}setCullFace(e){e.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(e.mode),this.frontFace.set(e.frontFace))}setDepthMode(e){e.func!==this.gl.ALWAYS||e.mask?(this.depthTest.set(!0),this.depthFunc.set(e.func),this.depthMask.set(e.mask),this.depthRange.set(e.range)):this.depthTest.set(!1)}setStencilMode(e){e.test.func!==this.gl.ALWAYS||e.mask?(this.stencilTest.set(!0),this.stencilMask.set(e.mask),this.stencilOp.set([e.fail,e.depthFail,e.pass]),this.stencilFunc.set({func:e.test.func,ref:e.ref,mask:e.test.mask})):this.stencilTest.set(!1)}setColorMode(e){d.aE(e.blendFunction,ps.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(e.blendFunction),this.blendColor.set(e.blendColor)),this.colorMask.set(e.mask)}createVertexArray(){var e;return br(this.gl)?this.gl.createVertexArray():(e=this.gl.getExtension("OES_vertex_array_object"))===null||e===void 0?void 0:e.createVertexArrayOES()}deleteVertexArray(e){var o;return br(this.gl)?this.gl.deleteVertexArray(e):(o=this.gl.getExtension("OES_vertex_array_object"))===null||o===void 0?void 0:o.deleteVertexArrayOES(e)}unbindVAO(){this.bindVertexArray.set(null)}}class _i{constructor(e,o,p){this.func=e,this.mask=o,this.range=p}}_i.ReadOnly=!1,_i.ReadWrite=!0,_i.disabled=new _i(519,_i.ReadOnly,[0,1]);const Oc=7680;class Wi{constructor(e,o,p,m,y,T){this.test=e,this.ref=o,this.mask=p,this.fail=m,this.depthFail=y,this.pass=T}}Wi.disabled=new Wi({func:519,mask:0},0,0,Oc,Oc,Oc);class Di{constructor(e,o,p){this.enable=e,this.mode=o,this.frontFace=p}}let Dn;function Gl(v,e,o,p,m){const y=v.context,T=y.gl,P=v.useProgram("collisionBox"),M=[];let B=0,$=0;for(let me=0;me<p.length;me++){const ye=p[me],ce=e.getTile(ye).getBucket(o);if(!ce)continue;const Ne=m?ce.textCollisionBox:ce.iconCollisionBox,Ce=ce.collisionCircleArray;if(Ce.length>0){const ze=d.H();d.aQ(ze,ce.placementInvProjMatrix,v.transform.glCoordMatrix),d.aQ(ze,ze,ce.placementViewportMatrix),M.push({circleArray:Ce,circleOffset:$,transform:ye.posMatrix,invTransform:ze,coord:ye}),B+=Ce.length/4,$=B}Ne&&P.draw(y,T.LINES,_i.disabled,Wi.disabled,v.colorModeForRenderPass(),Di.disabled,{u_matrix:ye.posMatrix,u_pixel_extrude_scale:[1/(U=v.transform).width,1/U.height]},v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye),o.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,null,v.transform.zoom,null,null,Ne.collisionVertexBuffer)}var U;if(!m||!M.length)return;const X=v.useProgram("collisionCircle"),ee=new d.aR;ee.resize(4*B),ee._trim();let ne=0;for(const me of M)for(let ye=0;ye<me.circleArray.length/4;ye++){const ce=4*ye,Ne=me.circleArray[ce+0],Ce=me.circleArray[ce+1],ze=me.circleArray[ce+2],Ge=me.circleArray[ce+3];ee.emplace(ne++,Ne,Ce,ze,Ge,0),ee.emplace(ne++,Ne,Ce,ze,Ge,1),ee.emplace(ne++,Ne,Ce,ze,Ge,2),ee.emplace(ne++,Ne,Ce,ze,Ge,3)}(!Dn||Dn.length<2*B)&&(Dn=(function(me){const ye=2*me,ce=new d.aT;ce.resize(ye),ce._trim();for(let Ne=0;Ne<ye;Ne++){const Ce=6*Ne;ce.uint16[Ce+0]=4*Ne+0,ce.uint16[Ce+1]=4*Ne+1,ce.uint16[Ce+2]=4*Ne+2,ce.uint16[Ce+3]=4*Ne+2,ce.uint16[Ce+4]=4*Ne+3,ce.uint16[Ce+5]=4*Ne+0}return ce})(B));const le=y.createIndexBuffer(Dn,!0),ue=y.createVertexBuffer(ee,d.aS.members,!0);for(const me of M){const ye=Ir(me.transform,me.invTransform,v.transform);X.draw(y,T.TRIANGLES,_i.disabled,Wi.disabled,v.colorModeForRenderPass(),Di.disabled,ye,v.style.map.terrain&&v.style.map.terrain.getTerrainData(me.coord),o.id,ue,le,d.a0.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,v.transform.zoom,null,null,null)}ue.destroy(),le.destroy()}Di.disabled=new Di(!1,1029,2305),Di.backCCW=new Di(!0,1029,2305);const Qo=d.an(new Float32Array(16));function Vc(v,e,o,p,m,y){const{horizontalAlign:T,verticalAlign:P}=d.au(v);return new d.P((-(T-.5)*e/m+p[0])*y,(-(P-.5)*o/m+p[1])*y)}function Za(v,e,o,p,m,y){const T=e.tileAnchorPoint.add(new d.P(e.translation[0],e.translation[1]));if(e.pitchWithMap){let P=p.mult(y);o||(P=P.rotate(-m));const M=T.add(P);return he(M.x,M.y,e.labelPlaneMatrix,e.getElevation).point}if(o){const P=Le(e.tileAnchorPoint.x+1,e.tileAnchorPoint.y,e).point.sub(v),M=Math.atan(P.y/P.x)+(P.x<0?Math.PI:0);return v.add(p.rotate(M))}return v.add(p)}function To(v,e,o,p,m,y,T,P,M,B,$,U,X,ee){const ne=v.text.placedSymbolArray,le=v.text.dynamicLayoutVertexArray,ue=v.icon.dynamicLayoutVertexArray,me={};le.clear();for(let ye=0;ye<ne.length;ye++){const ce=ne.get(ye),Ne=ce.hidden||!ce.crossTileID||v.allowVerticalPlacement&&!ce.placedOrientation?null:p[ce.crossTileID];if(Ne){const Ce=new d.P(ce.anchorX,ce.anchorY),ze={getElevation:ee,width:m.width,height:m.height,labelPlaneMatrix:y,pitchWithMap:o,projection:$,tileAnchorPoint:Ce,translation:U,unwrappedTileID:X},Ge=o?he(Ce.x,Ce.y,T,ee):Le(Ce.x,Ce.y,ze),rt=H(m.cameraToCenterDistance,Ge.signedDistanceFromCamera);let ht=d.ai(v.textSizeData,M,ce)*rt/d.ap;o&&(ht*=v.tilePixelRatio/P);const{width:wt,height:pt,anchor:lt,textOffset:At,textBoxScale:si}=Ne,mt=Vc(lt,wt,pt,At,si,ht),xt=$.getPitchedTextCorrection(m,Ce.add(new d.P(U[0],U[1])),X),ii=Za(Ge.point,ze,e,mt,m.angle,xt),Oi=v.allowVerticalPlacement&&ce.placedOrientation===d.ah.vertical?Math.PI/2:0;for(let ci=0;ci<ce.numGlyphs;ci++)d.aj(le,ii,Oi);B&&ce.associatedIconIndex>=0&&(me[ce.associatedIconIndex]={shiftedAnchor:ii,angle:Oi})}else Ht(ce.numGlyphs,le)}if(B){ue.clear();const ye=v.icon.placedSymbolArray;for(let ce=0;ce<ye.length;ce++){const Ne=ye.get(ce);if(Ne.hidden)Ht(Ne.numGlyphs,ue);else{const Ce=me[ce];if(Ce)for(let ze=0;ze<Ne.numGlyphs;ze++)d.aj(ue,Ce.shiftedAnchor,Ce.angle);else Ht(Ne.numGlyphs,ue)}}v.icon.dynamicLayoutVertexBuffer.updateData(ue)}v.text.dynamicLayoutVertexBuffer.updateData(le)}function Jr(v,e,o){return o.iconsInText&&e?"symbolTextAndIcon":v?"symbolSDF":"symbolIcon"}function Xa(v,e,o,p,m,y,T,P,M,B,$,U){const X=v.context,ee=X.gl,ne=v.transform,le=vo(),ue=P==="map",me=M==="map",ye=P!=="viewport"&&o.layout.get("symbol-placement")!=="point",ce=ue&&!me&&!ye,Ne=!me&&ye,Ce=!o.layout.get("symbol-sort-key").isConstant();let ze=!1;const Ge=v.depthModeForSublayer(0,_i.ReadOnly),rt=o._unevaluatedLayout.hasValue("text-variable-anchor")||o._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ht=[],wt=le.getCircleRadiusCorrection(ne);for(const pt of p){const lt=e.getTile(pt),At=lt.getBucket(o);if(!At)continue;const si=m?At.text:At.icon;if(!si||!si.segments.get().length||!si.hasVisibleVertices)continue;const mt=si.programConfigurations.get(o.id),xt=m||At.sdfIcons,ii=m?At.textSizeData:At.iconSizeData,Oi=me||ne.pitch!==0,ci=v.useProgram(Jr(xt,m,At),mt),fi=d.ag(ii,ne.zoom),$i=v.style.map.terrain&&v.style.map.terrain.getTerrainData(pt);let Hs,Qr,Ui,Ms,Ki=[0,0],ms=null;if(m)Qr=lt.glyphAtlasTexture,Ui=ee.LINEAR,Hs=lt.glyphAtlasTexture.size,At.iconsInText&&(Ki=lt.imageAtlasTexture.size,ms=lt.imageAtlasTexture,Ms=Oi||v.options.rotating||v.options.zooming||ii.kind==="composite"||ii.kind==="camera"?ee.LINEAR:ee.NEAREST);else{const vi=o.layout.get("icon-size").constantOr(0)!==1||At.iconsNeedLinear;Qr=lt.imageAtlasTexture,Ui=xt||v.options.rotating||v.options.zooming||vi||Oi?ee.LINEAR:ee.NEAREST,Hs=lt.imageAtlasTexture.size}const tr=pi(lt,1,v.transform.zoom),On=Ne?pt.posMatrix:Qo,Lr=vr(On,me,ue,v.transform,tr),Vn=Vs(On,me,ue,v.transform,tr),io=Vs(pt.posMatrix,me,ue,v.transform,tr),en=le.translatePosition(v.transform,lt,y,T),yn=rt&&At.hasTextData(),na=o.layout.get("icon-text-fit")!=="none"&&yn&&At.hasIconData();if(ye){const vi=v.style.map.terrain?(so,Un)=>v.style.map.terrain.getElevation(pt,so,Un):null,sn=o.layout.get("text-rotation-alignment")==="map";K(At,pt.posMatrix,v,m,Lr,io,me,B,sn,le,pt.toUnwrapped(),ne.width,ne.height,en,vi)}const Nr=pt.posMatrix,tn=m&&rt||na,$n=ye||tn?Qo:Lr,vn=Vn,ws=xt&&o.paint.get(m?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let es;es=xt?At.iconsInText?Wa(ii.kind,fi,ce,me,ye,tn,v,Nr,$n,vn,en,Hs,Ki,wt):va(ii.kind,fi,ce,me,ye,tn,v,Nr,$n,vn,en,m,Hs,!0,wt):Yo(ii.kind,fi,ce,me,ye,tn,v,Nr,$n,vn,en,m,Hs,wt);const ir={program:ci,buffers:si,uniformValues:es,atlasTexture:Qr,atlasTextureIcon:ms,atlasInterpolation:Ui,atlasInterpolationIcon:Ms,isSDF:xt,hasHalo:ws};if(Ce&&At.canOverlap){ze=!0;const vi=si.segments.get();for(const sn of vi)ht.push({segments:new d.a0([sn]),sortKey:sn.sortKey,state:ir,terrainData:$i})}else ht.push({segments:si.segments,sortKey:0,state:ir,terrainData:$i})}ze&&ht.sort(((pt,lt)=>pt.sortKey-lt.sortKey));for(const pt of ht){const lt=pt.state;if(X.activeTexture.set(ee.TEXTURE0),lt.atlasTexture.bind(lt.atlasInterpolation,ee.CLAMP_TO_EDGE),lt.atlasTextureIcon&&(X.activeTexture.set(ee.TEXTURE1),lt.atlasTextureIcon&&lt.atlasTextureIcon.bind(lt.atlasInterpolationIcon,ee.CLAMP_TO_EDGE)),lt.isSDF){const At=lt.uniformValues;lt.hasHalo&&(At.u_is_halo=1,Au(lt.buffers,pt.segments,o,v,lt.program,Ge,$,U,At,pt.terrainData)),At.u_is_halo=0}Au(lt.buffers,pt.segments,o,v,lt.program,Ge,$,U,lt.uniformValues,pt.terrainData)}}function Au(v,e,o,p,m,y,T,P,M,B){const $=p.context;m.draw($,$.gl.TRIANGLES,y,T,P,Di.disabled,M,B,o.id,v.layoutVertexBuffer,v.indexBuffer,e,o.paint,p.transform.zoom,v.programConfigurations.get(o.id),v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer)}function Iu(v,e,o,p){const m=v.context,y=m.gl,T=Wi.disabled,P=new ps([y.ONE,y.ONE],d.aM.transparent,[!0,!0,!0,!0]),M=e.getBucket(o);if(!M)return;const B=p.key;let $=o.heatmapFbos.get(B);$||($=el(m,e.tileSize,e.tileSize),o.heatmapFbos.set(B,$)),m.bindFramebuffer.set($.framebuffer),m.viewport.set([0,0,e.tileSize,e.tileSize]),m.clear({color:d.aM.transparent});const U=M.programConfigurations.get(o.id),X=v.useProgram("heatmap",U),ee=v.style.map.terrain.getTerrainData(p);X.draw(m,y.TRIANGLES,_i.disabled,T,P,Di.disabled,Us(p.posMatrix,e,v.transform.zoom,o.paint.get("heatmap-intensity")),ee,o.id,M.layoutVertexBuffer,M.indexBuffer,M.segments,o.paint,v.transform.zoom,U)}function Co(v,e,o){const p=v.context,m=p.gl;p.setColorMode(v.colorModeForRenderPass());const y=tl(p,e),T=o.key,P=e.heatmapFbos.get(T);P&&(p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,P.colorAttachment.get()),p.activeTexture.set(m.TEXTURE1),y.bind(m.LINEAR,m.CLAMP_TO_EDGE),v.useProgram("heatmapTexture").draw(p,m.TRIANGLES,_i.disabled,Wi.disabled,v.colorModeForRenderPass(),Di.disabled,Ha(v,e,0,1),null,e.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments,e.paint,v.transform.zoom),P.destroy(),e.heatmapFbos.delete(T))}function el(v,e,o){var p,m;const y=v.gl,T=y.createTexture();y.bindTexture(y.TEXTURE_2D,T),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR);const P=(p=v.HALF_FLOAT)!==null&&p!==void 0?p:y.UNSIGNED_BYTE,M=(m=v.RGBA16F)!==null&&m!==void 0?m:y.RGBA;y.texImage2D(y.TEXTURE_2D,0,M,e,o,0,y.RGBA,P,null);const B=v.createFramebuffer(e,o,!1,!1);return B.colorAttachment.set(T),B}function tl(v,e){return e.colorRampTexture||(e.colorRampTexture=new ct(v,e.colorRamp,v.gl.RGBA)),e.colorRampTexture}function ea(v,e,o,p,m){if(!o||!p||!p.imageAtlas)return;const y=p.imageAtlas.patternPositions;let T=y[o.to.toString()],P=y[o.from.toString()];if(!T&&P&&(T=P),!P&&T&&(P=T),!T||!P){const M=m.getPaintProperty(e);T=y[M],P=y[M]}T&&P&&v.setConstantPatternPositions(T,P)}function ba(v,e,o,p,m,y,T){const P=v.context.gl,M="fill-pattern",B=o.paint.get(M),$=B&&B.constantOr(1),U=o.getCrossfadeParameters();let X,ee,ne,le,ue;T?(ee=$&&!o.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",X=P.LINES):(ee=$?"fillPattern":"fill",X=P.TRIANGLES);const me=B.constantOr(null);for(const ye of p){const ce=e.getTile(ye);if($&&!ce.patternsLoaded())continue;const Ne=ce.getBucket(o);if(!Ne)continue;const Ce=Ne.programConfigurations.get(o.id),ze=v.useProgram(ee,Ce),Ge=v.style.map.terrain&&v.style.map.terrain.getTerrainData(ye);$&&(v.context.activeTexture.set(P.TEXTURE0),ce.imageAtlasTexture.bind(P.LINEAR,P.CLAMP_TO_EDGE),Ce.updatePaintBuffers(U)),ea(Ce,M,me,ce,o);const rt=Ge?ye:null,ht=v.translatePosMatrix(rt?rt.posMatrix:ye.posMatrix,ce,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"));if(T){le=Ne.indexBuffer2,ue=Ne.segments2;const wt=[P.drawingBufferWidth,P.drawingBufferHeight];ne=ee==="fillOutlinePattern"&&$?Ec(ht,v,U,ce,wt):Fd(ht,wt)}else le=Ne.indexBuffer,ue=Ne.segments,ne=$?bu(ht,v,U,ce):jo(ht);ze.draw(v.context,X,m,v.stencilModeForClipping(ye),y,Di.disabled,ne,Ge,o.id,Ne.layoutVertexBuffer,le,ue,o.paint,v.transform.zoom,Ce)}}function $c(v,e,o,p,m,y,T){const P=v.context,M=P.gl,B="fill-extrusion-pattern",$=o.paint.get(B),U=$.constantOr(1),X=o.getCrossfadeParameters(),ee=o.paint.get("fill-extrusion-opacity"),ne=$.constantOr(null);for(const le of p){const ue=e.getTile(le),me=ue.getBucket(o);if(!me)continue;const ye=v.style.map.terrain&&v.style.map.terrain.getTerrainData(le),ce=me.programConfigurations.get(o.id),Ne=v.useProgram(U?"fillExtrusionPattern":"fillExtrusion",ce);U&&(v.context.activeTexture.set(M.TEXTURE0),ue.imageAtlasTexture.bind(M.LINEAR,M.CLAMP_TO_EDGE),ce.updatePaintBuffers(X)),ea(ce,B,ne,ue,o);const Ce=v.translatePosMatrix(le.posMatrix,ue,o.paint.get("fill-extrusion-translate"),o.paint.get("fill-extrusion-translate-anchor")),ze=o.paint.get("fill-extrusion-vertical-gradient"),Ge=U?Xo(Ce,v,ze,ee,le,X,ue):Zo(Ce,v,ze,ee);Ne.draw(P,P.gl.TRIANGLES,m,y,T,Di.backCCW,Ge,ye,o.id,me.layoutVertexBuffer,me.indexBuffer,me.segments,o.paint,v.transform.zoom,ce,v.style.map.terrain&&me.centroidVertexBuffer)}}function ja(v,e,o,p,m,y,T){const P=v.context,M=P.gl,B=o.fbo;if(!B)return;const $=v.useProgram("hillshade"),U=v.style.map.terrain&&v.style.map.terrain.getTerrainData(e);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,B.colorAttachment.get()),$.draw(P,M.TRIANGLES,m,y,T,Di.disabled,((X,ee,ne,le)=>{const ue=ne.paint.get("hillshade-shadow-color"),me=ne.paint.get("hillshade-highlight-color"),ye=ne.paint.get("hillshade-accent-color");let ce=ne.paint.get("hillshade-illumination-direction")*(Math.PI/180);ne.paint.get("hillshade-illumination-anchor")==="viewport"&&(ce-=X.transform.angle);const Ne=!X.options.moving;return{u_matrix:le?le.posMatrix:X.transform.calculatePosMatrix(ee.tileID.toUnwrapped(),Ne),u_image:0,u_latrange:In(0,ee.tileID),u_light:[ne.paint.get("hillshade-exaggeration"),ce],u_shadow:ue,u_highlight:me,u_accent:ye}})(v,o,p,U?e:null),U,p.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments)}function il(v,e,o,p,m,y){const T=v.context,P=T.gl,M=e.dem;if(M&&M.data){const B=M.dim,$=M.stride,U=M.getPixels();if(T.activeTexture.set(P.TEXTURE1),T.pixelStoreUnpackPremultiplyAlpha.set(!1),e.demTexture=e.demTexture||v.getTileTexture($),e.demTexture){const ee=e.demTexture;ee.update(U,{premultiply:!1}),ee.bind(P.NEAREST,P.CLAMP_TO_EDGE)}else e.demTexture=new ct(T,U,P.RGBA,{premultiply:!1}),e.demTexture.bind(P.NEAREST,P.CLAMP_TO_EDGE);T.activeTexture.set(P.TEXTURE0);let X=e.fbo;if(!X){const ee=new ct(T,{width:B,height:B,data:null},P.RGBA);ee.bind(P.LINEAR,P.CLAMP_TO_EDGE),X=e.fbo=T.createFramebuffer(B,B,!0,!1),X.colorAttachment.set(ee.texture)}T.bindFramebuffer.set(X.framebuffer),T.viewport.set([0,0,B,B]),v.useProgram("hillshadePrepare").draw(T,P.TRIANGLES,p,m,y,Di.disabled,((ee,ne)=>{const le=ne.stride,ue=d.H();return d.aP(ue,0,d.X,-d.X,0,0,1),d.J(ue,ue,[0,-d.X,0]),{u_matrix:ue,u_image:1,u_dimension:[le,le],u_zoom:ee.overscaledZ,u_unpack:ne.getUnpackVector()}})(e.tileID,M),null,o.id,v.rasterBoundsBuffer,v.quadTriangleIndexBuffer,v.rasterBoundsSegments),e.needsHillshadePrepare=!1}}function zu(v,e,o,p,m,y){const T=p.paint.get("raster-fade-duration");if(!y&&T>0){const P=D.now(),M=(P-v.timeAdded)/T,B=e?(P-e.timeAdded)/T:-1,$=o.getSource(),U=m.coveringZoomLevel({tileSize:$.tileSize,roundZoom:$.roundZoom}),X=!e||Math.abs(e.tileID.overscaledZ-U)>Math.abs(v.tileID.overscaledZ-U),ee=X&&v.refreshedUponExpiration?1:d.ac(X?M:1-B,0,1);return v.refreshedUponExpiration&&M>=1&&(v.refreshedUponExpiration=!1),e?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const Zl=new d.aM(1,0,0,1),ji=new d.aM(0,1,0,1),Xl=new d.aM(0,0,1,1),Xd=new d.aM(1,0,1,1),Du=new d.aM(0,1,1,1);function sl(v,e,o,p){Uc(v,0,e+o/2,v.transform.width,o,p)}function Yd(v,e,o,p){Uc(v,e-o/2,0,o,v.transform.height,p)}function Uc(v,e,o,p,m,y){const T=v.context,P=T.gl;P.enable(P.SCISSOR_TEST),P.scissor(e*v.pixelRatio,o*v.pixelRatio,p*v.pixelRatio,m*v.pixelRatio),T.clear({color:y}),P.disable(P.SCISSOR_TEST)}function Jd(v,e,o){const p=v.context,m=p.gl,y=o.posMatrix,T=v.useProgram("debug"),P=_i.disabled,M=Wi.disabled,B=v.colorModeForRenderPass(),$="$debug",U=v.style.map.terrain&&v.style.map.terrain.getTerrainData(o);p.activeTexture.set(m.TEXTURE0);const X=e.getTileByID(o.key).latestRawTileData,ee=Math.floor((X&&X.byteLength||0)/1024),ne=e.getTile(o).tileSize,le=512/Math.min(ne,512)*(o.overscaledZ/v.transform.zoom)*.5;let ue=o.canonical.toString();o.overscaledZ!==o.canonical.z&&(ue+=` => ${o.overscaledZ}`),(function(me,ye){me.initDebugOverlayCanvas();const ce=me.debugOverlayCanvas,Ne=me.context.gl,Ce=me.debugOverlayCanvas.getContext("2d");Ce.clearRect(0,0,ce.width,ce.height),Ce.shadowColor="white",Ce.shadowBlur=2,Ce.lineWidth=1.5,Ce.strokeStyle="white",Ce.textBaseline="top",Ce.font="bold 36px Open Sans, sans-serif",Ce.fillText(ye,5,5),Ce.strokeText(ye,5,5),me.debugOverlayTexture.update(ce),me.debugOverlayTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE)})(v,`${ue} ${ee}kB`),T.draw(p,m.TRIANGLES,P,M,ps.alphaBlended,Di.disabled,hn(y,d.aM.transparent,le),null,$,v.debugBuffer,v.quadTriangleIndexBuffer,v.debugSegments),T.draw(p,m.LINE_STRIP,P,M,B,Di.disabled,hn(y,d.aM.red),U,$,v.debugBuffer,v.tileBorderIndexBuffer,v.debugSegments)}function Kd(v,e,o){const p=v.context,m=p.gl,y=v.colorModeForRenderPass(),T=new _i(m.LEQUAL,_i.ReadWrite,v.depthRangeFor3D),P=v.useProgram("terrain"),M=e.getTerrainMesh();p.bindFramebuffer.set(null),p.viewport.set([0,0,v.width,v.height]);for(const B of o){const $=v.renderToTexture.getTexture(B),U=e.getTerrainData(B.tileID);p.activeTexture.set(m.TEXTURE0),m.bindTexture(m.TEXTURE_2D,$.texture);const X=v.transform.calculatePosMatrix(B.tileID.toUnwrapped()),ee=e.getMeshFrameDelta(v.transform.zoom),ne=v.transform.calculateFogMatrix(B.tileID.toUnwrapped()),le=wu(X,ee,ne,v.style.sky,v.transform.pitch);P.draw(p,m.TRIANGLES,T,Wi.disabled,y,Di.backCCW,le,U,"terrain",M.vertexBuffer,M.indexBuffer,M.segments)}}class zr{constructor(e,o,p){this.vertexBuffer=e,this.indexBuffer=o,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}class Ya{constructor(e,o){this.context=new fp(e),this.transform=o,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:d.an(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Kt.maxUnderzooming+Kt.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new wo}resize(e,o,p){if(this.width=Math.floor(e*p),this.height=Math.floor(o*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const m of this.style._order)this.style._layers[m].resize()}setup(){const e=this.context,o=new d.aX;o.emplaceBack(0,0),o.emplaceBack(d.X,0),o.emplaceBack(0,d.X),o.emplaceBack(d.X,d.X),this.tileExtentBuffer=e.createVertexBuffer(o,xa.members),this.tileExtentSegments=d.a0.simpleSegment(0,0,4,2);const p=new d.aX;p.emplaceBack(0,0),p.emplaceBack(d.X,0),p.emplaceBack(0,d.X),p.emplaceBack(d.X,d.X),this.debugBuffer=e.createVertexBuffer(p,xa.members),this.debugSegments=d.a0.simpleSegment(0,0,4,5);const m=new d.$;m.emplaceBack(0,0,0,0),m.emplaceBack(d.X,0,d.X,0),m.emplaceBack(0,d.X,0,d.X),m.emplaceBack(d.X,d.X,d.X,d.X),this.rasterBoundsBuffer=e.createVertexBuffer(m,ss.members),this.rasterBoundsSegments=d.a0.simpleSegment(0,0,4,2);const y=new d.aX;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=e.createVertexBuffer(y,xa.members),this.viewportSegments=d.a0.simpleSegment(0,0,4,2);const T=new d.aZ;T.emplaceBack(0),T.emplaceBack(1),T.emplaceBack(3),T.emplaceBack(2),T.emplaceBack(0),this.tileBorderIndexBuffer=e.createIndexBuffer(T);const P=new d.aY;P.emplaceBack(0,1,2),P.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=e.createIndexBuffer(P);const M=this.context.gl;this.stencilClearMode=new Wi({func:M.ALWAYS,mask:0},0,255,M.ZERO,M.ZERO,M.ZERO)}clearStencil(){const e=this.context,o=e.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=d.H();d.aP(p,0,this.width,this.height,0,0,1),d.K(p,p,[o.drawingBufferWidth,o.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(e,o.TRIANGLES,_i.disabled,this.stencilClearMode,ps.disabled,Di.disabled,_s(p),null,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(e,o){if(this.currentStencilSource===e.source||!e.isTileClipped()||!o||!o.length)return;this.currentStencilSource=e.source;const p=this.context,m=p.gl;this.nextStencilID+o.length>256&&this.clearStencil(),p.setColorMode(ps.disabled),p.setDepthMode(_i.disabled);const y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const T of o){const P=this._tileClippingMaskIDs[T.key]=this.nextStencilID++,M=this.style.map.terrain&&this.style.map.terrain.getTerrainData(T);y.draw(p,m.TRIANGLES,_i.disabled,new Wi({func:m.ALWAYS,mask:0},P,255,m.KEEP,m.KEEP,m.REPLACE),ps.disabled,Di.disabled,_s(T.posMatrix),M,"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const e=this.nextStencilID++,o=this.context.gl;return new Wi({func:o.NOTEQUAL,mask:255},e,255,o.KEEP,o.KEEP,o.REPLACE)}stencilModeForClipping(e){const o=this.context.gl;return new Wi({func:o.EQUAL,mask:255},this._tileClippingMaskIDs[e.key],0,o.KEEP,o.KEEP,o.REPLACE)}stencilConfigForOverlap(e){const o=this.context.gl,p=e.sort(((T,P)=>P.overscaledZ-T.overscaledZ)),m=p[p.length-1].overscaledZ,y=p[0].overscaledZ-m+1;if(y>1){this.currentStencilSource=void 0,this.nextStencilID+y>256&&this.clearStencil();const T={};for(let P=0;P<y;P++)T[P+m]=new Wi({func:o.GEQUAL,mask:255},P+this.nextStencilID,255,o.KEEP,o.KEEP,o.REPLACE);return this.nextStencilID+=y,[T,p]}return[{[m]:Wi.disabled},p]}colorModeForRenderPass(){const e=this.context.gl;return this._showOverdrawInspector?new ps([e.CONSTANT_COLOR,e.ONE],new d.aM(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?ps.unblended:ps.alphaBlended}depthModeForSublayer(e,o,p){if(!this.opaquePassEnabledForLayer())return _i.disabled;const m=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon;return new _i(p||this.context.gl.LEQUAL,o,[m,m])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(e,o){this.style=e,this.options=o,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager,this.symbolFadeChange=e.placement.symbolFadeChange(D.now()),this.imageManager.beginFrame();const p=this.style._order,m=this.style.sourceCaches,y={},T={},P={};for(const M in m){const B=m[M];B.used&&B.prepare(this.context),y[M]=B.getVisibleCoordinates(),T[M]=y[M].slice().reverse(),P[M]=B.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let M=0;M<p.length;M++)if(this.style._layers[p[M]].is3D()){this.opaquePassCutoff=M;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const M of p){const B=this.style._layers[M];if(!B.hasOffscreenPass()||B.isHidden(this.transform.zoom))continue;const $=T[B.source];(B.type==="custom"||$.length)&&this.renderLayer(this,m[B.source],B,$)}if(this.context.bindFramebuffer.set(null),this.context.clear({color:o.showOverdrawInspector?d.aM.black:d.aM.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(M,B){const $=M.context,U=$.gl,X=((me,ye,ce)=>({u_sky_color:me.properties.get("sky-color"),u_horizon_color:me.properties.get("horizon-color"),u_horizon:(ye.height/2+ye.getHorizon())*ce,u_sky_horizon_blend:me.properties.get("sky-horizon-blend")*ye.height/2*ce}))(B,M.style.map.transform,M.pixelRatio),ee=new _i(U.LEQUAL,_i.ReadWrite,[0,1]),ne=Wi.disabled,le=M.colorModeForRenderPass(),ue=M.useProgram("sky");if(!B.mesh){const me=new d.aX;me.emplaceBack(-1,-1),me.emplaceBack(1,-1),me.emplaceBack(1,1),me.emplaceBack(-1,1);const ye=new d.aY;ye.emplaceBack(0,1,2),ye.emplaceBack(0,2,3),B.mesh=new zr($.createVertexBuffer(me,xa.members),$.createIndexBuffer(ye),d.a0.simpleSegment(0,0,me.length,ye.length))}ue.draw($,U.TRIANGLES,ee,ne,le,Di.disabled,X,void 0,"sky",B.mesh.vertexBuffer,B.mesh.indexBuffer,B.mesh.segments)})(this,this.style.sky),this._showOverdrawInspector=o.showOverdrawInspector,this.depthRangeFor3D=[0,1-(e._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=p.length-1;this.currentLayer>=0;this.currentLayer--){const M=this.style._layers[p[this.currentLayer]],B=m[M.source],$=y[M.source];this._renderTileClippingMasks(M,$),this.renderLayer(this,B,M,$)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<p.length;this.currentLayer++){const M=this.style._layers[p[this.currentLayer]],B=m[M.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(M))continue;const $=(M.type==="symbol"?P:T)[M.source];this._renderTileClippingMasks(M,y[M.source]),this.renderLayer(this,B,M,$)}if(this.options.showTileBoundaries){const M=(function(B,$){let U=null;const X=Object.values(B._layers).flatMap((ue=>ue.source&&!ue.isHidden($)?[B.sourceCaches[ue.source]]:[])),ee=X.filter((ue=>ue.getSource().type==="vector")),ne=X.filter((ue=>ue.getSource().type!=="vector")),le=ue=>{(!U||U.getSource().maxzoom<ue.getSource().maxzoom)&&(U=ue)};return ee.forEach((ue=>le(ue))),U||ne.forEach((ue=>le(ue))),U})(this.style,this.transform.zoom);M&&(function(B,$,U){for(let X=0;X<U.length;X++)Jd(B,$,U[X])})(this,M,M.getVisibleCoordinates())}this.options.showPadding&&(function(M){const B=M.transform.padding;sl(M,M.transform.height-(B.top||0),3,Zl),sl(M,B.bottom||0,3,ji),Yd(M,B.left||0,3,Xl),Yd(M,M.transform.width-(B.right||0),3,Xd);const $=M.transform.centerPoint;(function(U,X,ee,ne){Uc(U,X-1,ee-10,2,20,ne),Uc(U,X-10,ee-1,20,2,ne)})(M,$.x,M.transform.height-$.y,Du)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(e){if(!this.style||!this.style.map||!this.style.map.terrain)return;const o=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let m=this.terrainFacilitator.dirty;m||(m=e?!d.a_(o,p):!d.a$(o,p)),m||(m=this.style.map.terrain.sourceCache.tilesAfterTime(this.terrainFacilitator.renderTime).length>0),m&&(d.b0(o,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(y,T){const P=y.context,M=P.gl,B=ps.unblended,$=new _i(M.LEQUAL,_i.ReadWrite,[0,1]),U=T.getTerrainMesh(),X=T.sourceCache.getRenderableTiles(),ee=y.useProgram("terrainDepth");P.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),P.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),P.clear({color:d.aM.transparent,depth:1});for(const ne of X){const le=T.getTerrainData(ne.tileID),ue={u_matrix:y.transform.calculatePosMatrix(ne.tileID.toUnwrapped()),u_ele_delta:T.getMeshFrameDelta(y.transform.zoom)};ee.draw(P,M.TRIANGLES,$,Wi.disabled,B,Di.backCCW,ue,le,"terrain",U.vertexBuffer,U.indexBuffer,U.segments)}P.bindFramebuffer.set(null),P.viewport.set([0,0,y.width,y.height])})(this,this.style.map.terrain),(function(y,T){const P=y.context,M=P.gl,B=ps.unblended,$=new _i(M.LEQUAL,_i.ReadWrite,[0,1]),U=T.getTerrainMesh(),X=T.getCoordsTexture(),ee=T.sourceCache.getRenderableTiles(),ne=y.useProgram("terrainCoords");P.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),P.viewport.set([0,0,y.width/devicePixelRatio,y.height/devicePixelRatio]),P.clear({color:d.aM.transparent,depth:1}),T.coordsIndex=[];for(const le of ee){const ue=T.getTerrainData(le.tileID);P.activeTexture.set(M.TEXTURE0),M.bindTexture(M.TEXTURE_2D,X.texture);const me={u_matrix:y.transform.calculatePosMatrix(le.tileID.toUnwrapped()),u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(y.transform.zoom)};ne.draw(P,M.TRIANGLES,$,Wi.disabled,B,Di.backCCW,me,ue,"terrain",U.vertexBuffer,U.indexBuffer,U.segments),T.coordsIndex.push(le.tileID.key)}P.bindFramebuffer.set(null),P.viewport.set([0,0,y.width,y.height])})(this,this.style.map.terrain))}renderLayer(e,o,p,m){if(!p.isHidden(this.transform.zoom)&&(p.type==="background"||p.type==="custom"||(m||[]).length))switch(this.id=p.id,p.type){case"symbol":(function(y,T,P,M,B){if(y.renderPass!=="translucent")return;const $=Wi.disabled,U=y.colorModeForRenderPass();(P._unevaluatedLayout.hasValue("text-variable-anchor")||P._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(X,ee,ne,le,ue,me,ye,ce,Ne){const Ce=ee.transform,ze=vo(),Ge=ue==="map",rt=me==="map";for(const ht of X){const wt=le.getTile(ht),pt=wt.getBucket(ne);if(!pt||!pt.text||!pt.text.segments.get().length)continue;const lt=d.ag(pt.textSizeData,Ce.zoom),At=pi(wt,1,ee.transform.zoom),si=vr(ht.posMatrix,rt,Ge,ee.transform,At),mt=ne.layout.get("icon-text-fit")!=="none"&&pt.hasIconData();if(lt){const xt=Math.pow(2,Ce.zoom-wt.tileID.overscaledZ),ii=ee.style.map.terrain?(ci,fi)=>ee.style.map.terrain.getElevation(ht,ci,fi):null,Oi=ze.translatePosition(Ce,wt,ye,ce);To(pt,Ge,rt,Ne,Ce,si,ht.posMatrix,xt,lt,mt,ze,Oi,ht.toUnwrapped(),ii)}}})(M,y,P,T,P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),B),P.paint.get("icon-opacity").constantOr(1)!==0&&Xa(y,T,P,M,!1,P.paint.get("icon-translate"),P.paint.get("icon-translate-anchor"),P.layout.get("icon-rotation-alignment"),P.layout.get("icon-pitch-alignment"),P.layout.get("icon-keep-upright"),$,U),P.paint.get("text-opacity").constantOr(1)!==0&&Xa(y,T,P,M,!0,P.paint.get("text-translate"),P.paint.get("text-translate-anchor"),P.layout.get("text-rotation-alignment"),P.layout.get("text-pitch-alignment"),P.layout.get("text-keep-upright"),$,U),T.map.showCollisionBoxes&&(Gl(y,T,P,M,!0),Gl(y,T,P,M,!1))})(e,o,p,m,this.style.placement.variableOffsets);break;case"circle":(function(y,T,P,M){if(y.renderPass!=="translucent")return;const B=P.paint.get("circle-opacity"),$=P.paint.get("circle-stroke-width"),U=P.paint.get("circle-stroke-opacity"),X=!P.layout.get("circle-sort-key").isConstant();if(B.constantOr(1)===0&&($.constantOr(1)===0||U.constantOr(1)===0))return;const ee=y.context,ne=ee.gl,le=y.depthModeForSublayer(0,_i.ReadOnly),ue=Wi.disabled,me=y.colorModeForRenderPass(),ye=[];for(let ce=0;ce<M.length;ce++){const Ne=M[ce],Ce=T.getTile(Ne),ze=Ce.getBucket(P);if(!ze)continue;const Ge=ze.programConfigurations.get(P.id),rt=y.useProgram("circle",Ge),ht=ze.layoutVertexBuffer,wt=ze.indexBuffer,pt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ne),lt={programConfiguration:Ge,program:rt,layoutVertexBuffer:ht,indexBuffer:wt,uniformValues:Mc(y,Ne,Ce,P),terrainData:pt};if(X){const At=ze.segments.get();for(const si of At)ye.push({segments:new d.a0([si]),sortKey:si.sortKey,state:lt})}else ye.push({segments:ze.segments,sortKey:0,state:lt})}X&&ye.sort(((ce,Ne)=>ce.sortKey-Ne.sortKey));for(const ce of ye){const{programConfiguration:Ne,program:Ce,layoutVertexBuffer:ze,indexBuffer:Ge,uniformValues:rt,terrainData:ht}=ce.state;Ce.draw(ee,ne.TRIANGLES,le,ue,me,Di.disabled,rt,ht,P.id,ze,Ge,ce.segments,P.paint,y.transform.zoom,Ne)}})(e,o,p,m);break;case"heatmap":(function(y,T,P,M){if(P.paint.get("heatmap-opacity")===0)return;const B=y.context;if(y.style.map.terrain){for(const $ of M){const U=T.getTile($);T.hasRenderableParent($)||(y.renderPass==="offscreen"?Iu(y,U,P,$):y.renderPass==="translucent"&&Co(y,P,$))}B.viewport.set([0,0,y.width,y.height])}else y.renderPass==="offscreen"?(function($,U,X,ee){const ne=$.context,le=ne.gl,ue=Wi.disabled,me=new ps([le.ONE,le.ONE],d.aM.transparent,[!0,!0,!0,!0]);(function(ye,ce,Ne){const Ce=ye.gl;ye.activeTexture.set(Ce.TEXTURE1),ye.viewport.set([0,0,ce.width/4,ce.height/4]);let ze=Ne.heatmapFbos.get(d.aU);ze?(Ce.bindTexture(Ce.TEXTURE_2D,ze.colorAttachment.get()),ye.bindFramebuffer.set(ze.framebuffer)):(ze=el(ye,ce.width/4,ce.height/4),Ne.heatmapFbos.set(d.aU,ze))})(ne,$,X),ne.clear({color:d.aM.transparent});for(let ye=0;ye<ee.length;ye++){const ce=ee[ye];if(U.hasRenderableParent(ce))continue;const Ne=U.getTile(ce),Ce=Ne.getBucket(X);if(!Ce)continue;const ze=Ce.programConfigurations.get(X.id),Ge=$.useProgram("heatmap",ze),{zoom:rt}=$.transform;Ge.draw(ne,le.TRIANGLES,_i.disabled,ue,me,Di.disabled,Us(ce.posMatrix,Ne,rt,X.paint.get("heatmap-intensity")),null,X.id,Ce.layoutVertexBuffer,Ce.indexBuffer,Ce.segments,X.paint,$.transform.zoom,ze)}ne.viewport.set([0,0,$.width,$.height])})(y,T,P,M):y.renderPass==="translucent"&&(function($,U){const X=$.context,ee=X.gl;X.setColorMode($.colorModeForRenderPass());const ne=U.heatmapFbos.get(d.aU);ne&&(X.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,ne.colorAttachment.get()),X.activeTexture.set(ee.TEXTURE1),tl(X,U).bind(ee.LINEAR,ee.CLAMP_TO_EDGE),$.useProgram("heatmapTexture").draw(X,ee.TRIANGLES,_i.disabled,Wi.disabled,$.colorModeForRenderPass(),Di.disabled,Ha($,U,0,1),null,U.id,$.viewportBuffer,$.quadTriangleIndexBuffer,$.viewportSegments,U.paint,$.transform.zoom))})(y,P)})(e,o,p,m);break;case"line":(function(y,T,P,M){if(y.renderPass!=="translucent")return;const B=P.paint.get("line-opacity"),$=P.paint.get("line-width");if(B.constantOr(1)===0||$.constantOr(1)===0)return;const U=y.depthModeForSublayer(0,_i.ReadOnly),X=y.colorModeForRenderPass(),ee=P.paint.get("line-dasharray"),ne=P.paint.get("line-pattern"),le=ne.constantOr(1),ue=P.paint.get("line-gradient"),me=P.getCrossfadeParameters(),ye=le?"linePattern":ee?"lineSDF":ue?"lineGradient":"line",ce=y.context,Ne=ce.gl;let Ce=!0;for(const ze of M){const Ge=T.getTile(ze);if(le&&!Ge.patternsLoaded())continue;const rt=Ge.getBucket(P);if(!rt)continue;const ht=rt.programConfigurations.get(P.id),wt=y.context.program.get(),pt=y.useProgram(ye,ht),lt=Ce||pt.program!==wt,At=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ze),si=ne.constantOr(null);if(si&&Ge.imageAtlas){const ii=Ge.imageAtlas,Oi=ii.patternPositions[si.to.toString()],ci=ii.patternPositions[si.from.toString()];Oi&&ci&&ht.setConstantPatternPositions(Oi,ci)}const mt=At?ze:null,xt=le?Qn(y,Ge,P,me,mt):ee?cp(y,Ge,P,ee,me,mt):ue?ju(y,Ge,P,rt.lineClipsArray.length,mt):Ac(y,Ge,P,mt);if(le)ce.activeTexture.set(Ne.TEXTURE0),Ge.imageAtlasTexture.bind(Ne.LINEAR,Ne.CLAMP_TO_EDGE),ht.updatePaintBuffers(me);else if(ee&&(lt||y.lineAtlas.dirty))ce.activeTexture.set(Ne.TEXTURE0),y.lineAtlas.bind(ce);else if(ue){const ii=rt.gradients[P.id];let Oi=ii.texture;if(P.gradientVersion!==ii.version){let ci=256;if(P.stepInterpolant){const fi=T.getSource().maxzoom,$i=ze.canonical.z===fi?Math.ceil(1<<y.transform.maxZoom-ze.canonical.z):1;ci=d.ac(d.aV(rt.maxLineLength/d.X*1024*$i),256,ce.maxTextureSize)}ii.gradient=d.aW({expression:P.gradientExpression(),evaluationKey:"lineProgress",resolution:ci,image:ii.gradient||void 0,clips:rt.lineClipsArray}),ii.texture?ii.texture.update(ii.gradient):ii.texture=new ct(ce,ii.gradient,Ne.RGBA),ii.version=P.gradientVersion,Oi=ii.texture}ce.activeTexture.set(Ne.TEXTURE0),Oi.bind(P.stepInterpolant?Ne.NEAREST:Ne.LINEAR,Ne.CLAMP_TO_EDGE)}pt.draw(ce,Ne.TRIANGLES,U,y.stencilModeForClipping(ze),X,Di.disabled,xt,At,P.id,rt.layoutVertexBuffer,rt.indexBuffer,rt.segments,P.paint,y.transform.zoom,ht,rt.layoutVertexBuffer2),Ce=!1}})(e,o,p,m);break;case"fill":(function(y,T,P,M){const B=P.paint.get("fill-color"),$=P.paint.get("fill-opacity");if($.constantOr(1)===0)return;const U=y.colorModeForRenderPass(),X=P.paint.get("fill-pattern"),ee=y.opaquePassEnabledForLayer()&&!X.constantOr(1)&&B.constantOr(d.aM.transparent).a===1&&$.constantOr(0)===1?"opaque":"translucent";if(y.renderPass===ee){const ne=y.depthModeForSublayer(1,y.renderPass==="opaque"?_i.ReadWrite:_i.ReadOnly);ba(y,T,P,M,ne,U,!1)}if(y.renderPass==="translucent"&&P.paint.get("fill-antialias")){const ne=y.depthModeForSublayer(P.getPaintProperty("fill-outline-color")?2:0,_i.ReadOnly);ba(y,T,P,M,ne,U,!0)}})(e,o,p,m);break;case"fill-extrusion":(function(y,T,P,M){const B=P.paint.get("fill-extrusion-opacity");if(B!==0&&y.renderPass==="translucent"){const $=new _i(y.context.gl.LEQUAL,_i.ReadWrite,y.depthRangeFor3D);if(B!==1||P.paint.get("fill-extrusion-pattern").constantOr(1))$c(y,T,P,M,$,Wi.disabled,ps.disabled),$c(y,T,P,M,$,y.stencilModeFor3D(),y.colorModeForRenderPass());else{const U=y.colorModeForRenderPass();$c(y,T,P,M,$,Wi.disabled,U)}}})(e,o,p,m);break;case"hillshade":(function(y,T,P,M){if(y.renderPass!=="offscreen"&&y.renderPass!=="translucent")return;const B=y.context,$=y.depthModeForSublayer(0,_i.ReadOnly),U=y.colorModeForRenderPass(),[X,ee]=y.renderPass==="translucent"?y.stencilConfigForOverlap(M):[{},M];for(const ne of ee){const le=T.getTile(ne);le.needsHillshadePrepare!==void 0&&le.needsHillshadePrepare&&y.renderPass==="offscreen"?il(y,le,P,$,Wi.disabled,U):y.renderPass==="translucent"&&ja(y,ne,le,P,$,X[ne.overscaledZ],U)}B.viewport.set([0,0,y.width,y.height])})(e,o,p,m);break;case"raster":(function(y,T,P,M){if(y.renderPass!=="translucent"||P.paint.get("raster-opacity")===0||!M.length)return;const B=y.context,$=B.gl,U=T.getSource(),X=y.useProgram("raster"),ee=y.colorModeForRenderPass(),[ne,le]=U instanceof Js?[{},M]:y.stencilConfigForOverlap(M),ue=le[le.length-1].overscaledZ,me=!y.options.moving;for(const ye of le){const ce=y.depthModeForSublayer(ye.overscaledZ-ue,P.paint.get("raster-opacity")===1?_i.ReadWrite:_i.ReadOnly,$.LESS),Ne=T.getTile(ye);Ne.registerFadeDuration(P.paint.get("raster-fade-duration"));const Ce=T.findLoadedParent(ye,0),ze=T.findLoadedSibling(ye),Ge=zu(Ne,Ce||ze||null,T,P,y.transform,y.style.map.terrain);let rt,ht;const wt=P.paint.get("raster-resampling")==="nearest"?$.NEAREST:$.LINEAR;B.activeTexture.set($.TEXTURE0),Ne.texture.bind(wt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),B.activeTexture.set($.TEXTURE1),Ce?(Ce.texture.bind(wt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),rt=Math.pow(2,Ce.tileID.overscaledZ-Ne.tileID.overscaledZ),ht=[Ne.tileID.canonical.x*rt%1,Ne.tileID.canonical.y*rt%1]):Ne.texture.bind(wt,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),Ne.texture.useMipmap&&B.extTextureFilterAnisotropic&&y.transform.pitch>20&&$.texParameterf($.TEXTURE_2D,B.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,B.extTextureFilterAnisotropicMax);const pt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(ye),lt=pt?ye:null,At=lt?lt.posMatrix:y.transform.calculatePosMatrix(ye.toUnwrapped(),me),si=Od(At,ht||[0,0],rt||1,Ge,P);U instanceof Js?X.draw(B,$.TRIANGLES,ce,Wi.disabled,ee,Di.disabled,si,pt,P.id,U.boundsBuffer,y.quadTriangleIndexBuffer,U.boundsSegments):X.draw(B,$.TRIANGLES,ce,ne[ye.overscaledZ],ee,Di.disabled,si,pt,P.id,y.rasterBoundsBuffer,y.quadTriangleIndexBuffer,y.rasterBoundsSegments)}})(e,o,p,m);break;case"background":(function(y,T,P,M){const B=P.paint.get("background-color"),$=P.paint.get("background-opacity");if($===0)return;const U=y.context,X=U.gl,ee=y.transform,ne=ee.tileSize,le=P.paint.get("background-pattern");if(y.isPatternMissing(le))return;const ue=!le&&B.a===1&&$===1&&y.opaquePassEnabledForLayer()?"opaque":"translucent";if(y.renderPass!==ue)return;const me=Wi.disabled,ye=y.depthModeForSublayer(0,ue==="opaque"?_i.ReadWrite:_i.ReadOnly),ce=y.colorModeForRenderPass(),Ne=y.useProgram(le?"backgroundPattern":"background"),Ce=M||ee.coveringTiles({tileSize:ne,terrain:y.style.map.terrain});le&&(U.activeTexture.set(X.TEXTURE0),y.imageManager.bind(y.context));const ze=P.getCrossfadeParameters();for(const Ge of Ce){const rt=M?Ge.posMatrix:y.transform.calculatePosMatrix(Ge.toUnwrapped()),ht=le?ku(rt,$,y,le,{tileID:Ge,tileSize:ne},ze):No(rt,$,B),wt=y.style.map.terrain&&y.style.map.terrain.getTerrainData(Ge);Ne.draw(U,X.TRIANGLES,ye,me,ce,Di.disabled,ht,wt,P.id,y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}})(e,0,p,m);break;case"custom":(function(y,T,P){const M=y.context,B=P.implementation;if(y.renderPass==="offscreen"){const $=B.prerender;$&&(y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),$.call(B,M.gl,y.transform.customLayerMatrix()),M.setDirty(),y.setBaseState())}else if(y.renderPass==="translucent"){y.setCustomLayerDefaults(),M.setColorMode(y.colorModeForRenderPass()),M.setStencilMode(Wi.disabled);const $=B.renderingMode==="3d"?new _i(y.context.gl.LEQUAL,_i.ReadWrite,y.depthRangeFor3D):y.depthModeForSublayer(0,_i.ReadOnly);M.setDepthMode($),B.render(M.gl,y.transform.customLayerMatrix(),{farZ:y.transform.farZ,nearZ:y.transform.nearZ,fov:y.transform._fov,modelViewProjectionMatrix:y.transform.modelViewProjectionMatrix,projectionMatrix:y.transform.projectionMatrix}),M.setDirty(),y.setBaseState(),M.bindFramebuffer.set(null)}})(e,0,p)}}translatePosMatrix(e,o,p,m,y){if(!p[0]&&!p[1])return e;const T=y?m==="map"?this.transform.angle:0:m==="viewport"?-this.transform.angle:0;if(T){const B=Math.sin(T),$=Math.cos(T);p=[p[0]*$-p[1]*B,p[0]*B+p[1]*$]}const P=[y?p[0]:pi(o,p[0],this.transform.zoom),y?p[1]:pi(o,p[1],this.transform.zoom),0],M=new Float32Array(16);return d.J(M,e,P),M}saveTileTexture(e){const o=this._tileTextures[e.size[0]];o?o.push(e):this._tileTextures[e.size[0]]=[e]}getTileTexture(e){const o=this._tileTextures[e];return o&&o.length>0?o.pop():null}isPatternMissing(e){if(!e)return!1;if(!e.from||!e.to)return!0;const o=this.imageManager.getPattern(e.from.toString()),p=this.imageManager.getPattern(e.to.toString());return!o||!p}useProgram(e,o){this.cache=this.cache||{};const p=e+(o?o.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"")+(this.style.map.terrain?"/terrain":"");return this.cache[p]||(this.cache[p]=new zi(this.context,ya[e],o,Su[e],this._showOverdrawInspector,this.style.map.terrain)),this.cache[p]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const e=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(e.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ct(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:e,drawingBufferHeight:o}=this.context.gl;return this.width!==e||this.height!==o}}class Po{constructor(e,o){this.points=e,this.planes=o}static fromInvProjectionMatrix(e,o,p){const m=Math.pow(2,p),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((P=>{const M=1/(P=d.af([],P,e))[3]/o*m;return d.b1(P,P,[M,M,1/P[3],M])})),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((P=>{const M=(function(X,ee){var ne=ee[0],le=ee[1],ue=ee[2],me=ne*ne+le*le+ue*ue;return me>0&&(me=1/Math.sqrt(me)),X[0]=ee[0]*me,X[1]=ee[1]*me,X[2]=ee[2]*me,X})([],(function(X,ee,ne){var le=ee[0],ue=ee[1],me=ee[2],ye=ne[0],ce=ne[1],Ne=ne[2];return X[0]=ue*Ne-me*ce,X[1]=me*ye-le*Ne,X[2]=le*ce-ue*ye,X})([],ut([],y[P[0]],y[P[1]]),ut([],y[P[2]],y[P[1]]))),B=-(($=M)[0]*(U=y[P[1]])[0]+$[1]*U[1]+$[2]*U[2]);var $,U;return M.concat(B)}));return new Po(y,T)}}class Eo{constructor(e,o){this.min=e,this.max=o,this.center=(function(p,m,y){return p[0]=.5*m[0],p[1]=.5*m[1],p[2]=.5*m[2],p})([],(function(p,m,y){return p[0]=m[0]+y[0],p[1]=m[1]+y[1],p[2]=m[2]+y[2],p})([],this.min,this.max))}quadrant(e){const o=[e%2==0,e<2],p=Je(this.min),m=Je(this.max);for(let y=0;y<o.length;y++)p[y]=o[y]?this.min[y]:this.center[y],m[y]=o[y]?this.center[y]:this.max[y];return m[2]=this.max[2],new Eo(p,m)}distanceX(e){return Math.max(Math.min(this.max[0],e[0]),this.min[0])-e[0]}distanceY(e){return Math.max(Math.min(this.max[1],e[1]),this.min[1])-e[1]}intersects(e){const o=[[this.min[0],this.min[1],this.min[2],1],[this.max[0],this.min[1],this.min[2],1],[this.max[0],this.max[1],this.min[2],1],[this.min[0],this.max[1],this.min[2],1],[this.min[0],this.min[1],this.max[2],1],[this.max[0],this.min[1],this.max[2],1],[this.max[0],this.max[1],this.max[2],1],[this.min[0],this.max[1],this.max[2],1]];let p=!0;for(let m=0;m<e.planes.length;m++){const y=e.planes[m];let T=0;for(let P=0;P<o.length;P++)d.b2(y,o[P])>=0&&T++;if(T===0)return 0;T!==o.length&&(p=!1)}if(p)return 2;for(let m=0;m<3;m++){let y=Number.MAX_VALUE,T=-Number.MAX_VALUE;for(let P=0;P<e.points.length;P++){const M=e.points[P][m]-this.min[m];y=Math.min(y,M),T=Math.max(T,M)}if(T<0||y>this.max[m]-this.min[m])return 0}return 1}}class Mo{constructor(e=0,o=0,p=0,m=0){if(isNaN(e)||e<0||isNaN(o)||o<0||isNaN(p)||p<0||isNaN(m)||m<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=e,this.bottom=o,this.left=p,this.right=m}interpolate(e,o,p){return o.top!=null&&e.top!=null&&(this.top=d.y.number(e.top,o.top,p)),o.bottom!=null&&e.bottom!=null&&(this.bottom=d.y.number(e.bottom,o.bottom,p)),o.left!=null&&e.left!=null&&(this.left=d.y.number(e.left,o.left,p)),o.right!=null&&e.right!=null&&(this.right=d.y.number(e.right,o.right,p)),this}getCenter(e,o){const p=d.ac((this.left+e-this.right)/2,0,e),m=d.ac((this.top+o-this.bottom)/2,0,o);return new d.P(p,m)}equals(e){return this.top===e.top&&this.bottom===e.bottom&&this.left===e.left&&this.right===e.right}clone(){return new Mo(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Hc=85.051129;class Ja{constructor(e,o,p,m,y){this.tileSize=512,this._renderWorldCopies=y===void 0||!!y,this._minZoom=e||0,this._maxZoom=o||22,this._minPitch=p??0,this._maxPitch=m??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new d.N(0,0),this._elevation=0,this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Mo,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={},this.minElevationForCurrentTile=0}clone(){const e=new Ja(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return e.apply(this),e}apply(e){this.tileSize=e.tileSize,this.latRange=e.latRange,this.lngRange=e.lngRange,this.width=e.width,this.height=e.height,this._center=e._center,this._elevation=e._elevation,this.minElevationForCurrentTile=e.minElevationForCurrentTile,this.zoom=e.zoom,this.angle=e.angle,this._fov=e._fov,this._pitch=e._pitch,this._unmodified=e._unmodified,this._edgeInsets=e._edgeInsets.clone(),this._calcMatrices()}get minZoom(){return this._minZoom}set minZoom(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))}get maxZoom(){return this._maxZoom}set maxZoom(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))}get minPitch(){return this._minPitch}set minPitch(e){this._minPitch!==e&&(this._minPitch=e,this.pitch=Math.max(this.pitch,e))}get maxPitch(){return this._maxPitch}set maxPitch(e){this._maxPitch!==e&&(this._maxPitch=e,this.pitch=Math.min(this.pitch,e))}get renderWorldCopies(){return this._renderWorldCopies}set renderWorldCopies(e){e===void 0?e=!0:e===null&&(e=!1),this._renderWorldCopies=e}get worldSize(){return this.tileSize*this.scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new d.P(this.width,this.height)}get bearing(){return-this.angle/Math.PI*180}set bearing(e){const o=-d.b3(e,-180,180)*Math.PI/180;this.angle!==o&&(this._unmodified=!1,this.angle=o,this._calcMatrices(),this.rotationMatrix=(function(){var p=new d.A(4);return d.A!=Float32Array&&(p[1]=0,p[2]=0),p[0]=1,p[3]=1,p})(),(function(p,m,y){var T=m[0],P=m[1],M=m[2],B=m[3],$=Math.sin(y),U=Math.cos(y);p[0]=T*U+M*$,p[1]=P*U+B*$,p[2]=T*-$+M*U,p[3]=P*-$+B*U})(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(e){const o=d.ac(e,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==o&&(this._unmodified=!1,this._pitch=o,this._calcMatrices())}get fov(){return this._fov/Math.PI*180}set fov(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())}get zoom(){return this._zoom}set zoom(e){const o=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==o&&(this._unmodified=!1,this._zoom=o,this.tileZoom=Math.max(0,Math.floor(o)),this.scale=this.zoomScale(o),this._constrain(),this._calcMatrices())}get center(){return this._center}set center(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}set elevation(e){e!==this._elevation&&(this._elevation=e,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}set padding(e){this._edgeInsets.equals(e)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,e,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}isPaddingEqual(e){return this._edgeInsets.equals(e)}interpolatePadding(e,o,p){this._unmodified=!1,this._edgeInsets.interpolate(e,o,p),this._constrain(),this._calcMatrices()}coveringZoomLevel(e){const o=(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize));return Math.max(0,o)}getVisibleUnwrappedCoordinates(e){const o=[new d.b4(0,e)];if(this._renderWorldCopies){const p=this.pointCoordinate(new d.P(0,0)),m=this.pointCoordinate(new d.P(this.width,0)),y=this.pointCoordinate(new d.P(this.width,this.height)),T=this.pointCoordinate(new d.P(0,this.height)),P=Math.floor(Math.min(p.x,m.x,y.x,T.x)),M=Math.floor(Math.max(p.x,m.x,y.x,T.x)),B=1;for(let $=P-B;$<=M+B;$++)$!==0&&o.push(new d.b4($,e))}return o}coveringTiles(e){var o,p;let m=this.coveringZoomLevel(e);const y=m;if(e.minzoom!==void 0&&m<e.minzoom)return[];e.maxzoom!==void 0&&m>e.maxzoom&&(m=e.maxzoom);const T=this.pointCoordinate(this.getCameraPoint()),P=d.Z.fromLngLat(this.center),M=Math.pow(2,m),B=[M*T.x,M*T.y,0],$=[M*P.x,M*P.y,0],U=Po.fromInvProjectionMatrix(this.invModelViewProjectionMatrix,this.worldSize,m);let X=e.minzoom||0;!e.terrain&&this.pitch<=60&&this._edgeInsets.top<.1&&(X=m);const ee=e.terrain?2/Math.min(this.tileSize,e.tileSize)*this.tileSize:3,ne=ce=>({aabb:new Eo([ce*M,0,0],[(ce+1)*M,M,0]),zoom:0,x:0,y:0,wrap:ce,fullyVisible:!1}),le=[],ue=[],me=m,ye=e.reparseOverscaled?y:m;if(this._renderWorldCopies)for(let ce=1;ce<=3;ce++)le.push(ne(-ce)),le.push(ne(ce));for(le.push(ne(0));le.length>0;){const ce=le.pop(),Ne=ce.x,Ce=ce.y;let ze=ce.fullyVisible;if(!ze){const pt=ce.aabb.intersects(U);if(pt===0)continue;ze=pt===2}const Ge=e.terrain?B:$,rt=ce.aabb.distanceX(Ge),ht=ce.aabb.distanceY(Ge),wt=Math.max(Math.abs(rt),Math.abs(ht));if(ce.zoom===me||wt>ee+(1<<me-ce.zoom)-2&&ce.zoom>=X){const pt=me-ce.zoom,lt=B[0]-.5-(Ne<<pt),At=B[1]-.5-(Ce<<pt);ue.push({tileID:new d.S(ce.zoom===me?ye:ce.zoom,ce.wrap,ce.zoom,Ne,Ce),distanceSq:je([$[0]-.5-Ne,$[1]-.5-Ce]),tileDistanceToCamera:Math.sqrt(lt*lt+At*At)})}else for(let pt=0;pt<4;pt++){const lt=(Ne<<1)+pt%2,At=(Ce<<1)+(pt>>1),si=ce.zoom+1;let mt=ce.aabb.quadrant(pt);if(e.terrain){const xt=new d.S(si,ce.wrap,si,lt,At),ii=e.terrain.getMinMaxElevation(xt),Oi=(o=ii.minElevation)!==null&&o!==void 0?o:this.elevation,ci=(p=ii.maxElevation)!==null&&p!==void 0?p:this.elevation;mt=new Eo([mt.min[0],mt.min[1],Oi],[mt.max[0],mt.max[1],ci])}le.push({aabb:mt,zoom:si,x:lt,y:At,wrap:ce.wrap,fullyVisible:ze})}}return ue.sort(((ce,Ne)=>ce.distanceSq-Ne.distanceSq)).map((ce=>ce.tileID))}resize(e,o){this.width=e,this.height=o,this.pixelsToGLUnits=[2/e,-2/o],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(e){return Math.pow(2,e)}scaleZoom(e){return Math.log(e)/Math.LN2}project(e){const o=d.ac(e.lat,-85.051129,Hc);return new d.P(d.O(e.lng)*this.worldSize,d.Q(o)*this.worldSize)}unproject(e){return new d.Z(e.x/this.worldSize,e.y/this.worldSize).toLngLat()}get point(){return this.project(this.center)}getCameraPosition(){return{lngLat:this.pointLocation(this.getCameraPoint()),altitude:Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter+this.elevation}}recalculateZoom(e){const o=this.elevation,p=Math.cos(this._pitch)*this.cameraToCenterDistance/this._pixelPerMeter,m=this.pointLocation(this.centerPoint,e),y=e.getElevationForLngLatZoom(m,this.tileZoom);if(!(this.elevation-y))return;const T=p+o-y,P=Math.cos(this._pitch)*this.cameraToCenterDistance/T/d.b5(1,m.lat),M=this.scaleZoom(P/this.tileSize);this._elevation=y,this._center=m,this.zoom=M}setLocationAtPoint(e,o){const p=this.pointCoordinate(o),m=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(e),T=new d.Z(y.x-(p.x-m.x),y.y-(p.y-m.y));this.center=this.coordinateLocation(T),this._renderWorldCopies&&(this.center=this.center.wrap())}locationPoint(e,o){return o?this.coordinatePoint(this.locationCoordinate(e),o.getElevationForLngLatZoom(e,this.tileZoom),this.pixelMatrix3D):this.coordinatePoint(this.locationCoordinate(e))}pointLocation(e,o){return this.coordinateLocation(this.pointCoordinate(e,o))}locationCoordinate(e){return d.Z.fromLngLat(e)}coordinateLocation(e){return e&&e.toLngLat()}pointCoordinate(e,o){if(o){const X=o.pointCoordinate(e);if(X!=null)return X}const p=[e.x,e.y,0,1],m=[e.x,e.y,1,1];d.af(p,p,this.pixelMatrixInverse),d.af(m,m,this.pixelMatrixInverse);const y=p[3],T=m[3],P=p[1]/y,M=m[1]/T,B=p[2]/y,$=m[2]/T,U=B===$?0:(0-B)/($-B);return new d.Z(d.y.number(p[0]/y,m[0]/T,U)/this.worldSize,d.y.number(P,M,U)/this.worldSize)}coordinatePoint(e,o=0,p=this.pixelMatrix){const m=[e.x*this.worldSize,e.y*this.worldSize,o,1];return d.af(m,m,p),new d.P(m[0]/m[3],m[1]/m[3])}getBounds(){const e=Math.max(0,this.height/2-this.getHorizon());return new Oe().extend(this.pointLocation(new d.P(0,e))).extend(this.pointLocation(new d.P(this.width,e))).extend(this.pointLocation(new d.P(this.width,this.height))).extend(this.pointLocation(new d.P(0,this.height)))}getMaxBounds(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new Oe([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null}getHorizon(){return Math.tan(Math.PI/2-this._pitch)*this.cameraToCenterDistance*.85}setMaxBounds(e){e?(this.lngRange=[e.getWest(),e.getEast()],this.latRange=[e.getSouth(),e.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-85.051129,Hc])}calculateTileMatrix(e){const o=e.canonical,p=this.worldSize/this.zoomScale(o.z),m=o.x+Math.pow(2,o.z)*e.wrap,y=d.an(new Float64Array(16));return d.J(y,y,[m*p,o.y*p,0]),d.K(y,y,[p/d.X,p/d.X,1]),y}calculatePosMatrix(e,o=!1){const p=e.key,m=o?this._alignedPosMatrixCache:this._posMatrixCache;if(m[p])return m[p];const y=this.calculateTileMatrix(e);return d.L(y,o?this.alignedModelViewProjectionMatrix:this.modelViewProjectionMatrix,y),m[p]=new Float32Array(y),m[p]}calculateFogMatrix(e){const o=e.key,p=this._fogMatrixCache;if(p[o])return p[o];const m=this.calculateTileMatrix(e);return d.L(m,this.fogMatrix,m),p[o]=new Float32Array(m),p[o]}customLayerMatrix(){return this.mercatorMatrix.slice()}getConstrained(e,o){o=d.ac(+o,this.minZoom,this.maxZoom);const p={center:new d.N(e.lng,e.lat),zoom:o};let m=this.lngRange;if(!this._renderWorldCopies&&m===null){const ce=179.9999999999;m=[-ce,ce]}const y=this.tileSize*this.zoomScale(p.zoom);let T=0,P=y,M=0,B=y,$=0,U=0;const{x:X,y:ee}=this.size;if(this.latRange){const ce=this.latRange;T=d.Q(ce[1])*y,P=d.Q(ce[0])*y,P-T<ee&&($=ee/(P-T))}m&&(M=d.b3(d.O(m[0])*y,0,y),B=d.b3(d.O(m[1])*y,0,y),B<M&&(B+=y),B-M<X&&(U=X/(B-M)));const{x:ne,y:le}=this.project.call({worldSize:y},e);let ue,me;const ye=Math.max(U||0,$||0);if(ye){const ce=new d.P(U?(B+M)/2:ne,$?(P+T)/2:le);return p.center=this.unproject.call({worldSize:y},ce).wrap(),p.zoom+=this.scaleZoom(ye),p}if(this.latRange){const ce=ee/2;le-ce<T&&(me=T+ce),le+ce>P&&(me=P-ce)}if(m){const ce=(M+B)/2;let Ne=ne;this._renderWorldCopies&&(Ne=d.b3(ne,ce-y/2,ce+y/2));const Ce=X/2;Ne-Ce<M&&(ue=M+Ce),Ne+Ce>B&&(ue=B-Ce)}if(ue!==void 0||me!==void 0){const ce=new d.P(ue??ne,me??le);p.center=this.unproject.call({worldSize:y},ce).wrap()}return p}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const e=this._unmodified,{center:o,zoom:p}=this.getConstrained(this.center,this.zoom);this.center=o,this.zoom=p,this._unmodified=e,this._constraining=!1}_calcMatrices(){if(!this.height)return;const e=this.centerOffset,o=this.point.x,p=this.point.y;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height,this._pixelPerMeter=d.b5(1,this.center.lat)*this.worldSize;let m=d.an(new Float64Array(16));d.K(m,m,[this.width/2,-this.height/2,1]),d.J(m,m,[1,-1,0]),this.labelPlaneMatrix=m,m=d.an(new Float64Array(16)),d.K(m,m,[1,-1,1]),d.J(m,m,[-1,-1,0]),d.K(m,m,[2/this.width,2/this.height,1]),this.glCoordMatrix=m;const y=this.cameraToCenterDistance+this._elevation*this._pixelPerMeter/Math.cos(this._pitch),T=Math.min(this.elevation,this.minElevationForCurrentTile),P=y-T*this._pixelPerMeter/Math.cos(this._pitch),M=T<0?P:y,B=Math.PI/2+this._pitch,$=this._fov*(.5+e.y/this.height),U=Math.sin($)*M/Math.sin(d.ac(Math.PI-B-$,.01,Math.PI-.01)),X=this.getHorizon(),ee=2*Math.atan(X/this.cameraToCenterDistance)*(.5+e.y/(2*X)),ne=Math.sin(ee)*M/Math.sin(d.ac(Math.PI-B-ee,.01,Math.PI-.01)),le=Math.min(U,ne);this.farZ=1.01*(Math.cos(Math.PI/2-this._pitch)*le+M),this.nearZ=this.height/50,m=new Float64Array(16),d.b6(m,this._fov,this.width/this.height,this.nearZ,this.farZ),m[8]=2*-e.x/this.width,m[9]=2*e.y/this.height,this.projectionMatrix=d.ae(m),d.K(m,m,[1,-1,1]),d.J(m,m,[0,0,-this.cameraToCenterDistance]),d.b7(m,m,this._pitch),d.ad(m,m,this.angle),d.J(m,m,[-o,-p,0]),this.mercatorMatrix=d.K([],m,[this.worldSize,this.worldSize,this.worldSize]),d.K(m,m,[1,1,this._pixelPerMeter]),this.pixelMatrix=d.L(new Float64Array(16),this.labelPlaneMatrix,m),d.J(m,m,[0,0,-this.elevation]),this.modelViewProjectionMatrix=m,this.invModelViewProjectionMatrix=d.as([],m),this.fogMatrix=new Float64Array(16),d.b6(this.fogMatrix,this._fov,this.width/this.height,y,this.farZ),this.fogMatrix[8]=2*-e.x/this.width,this.fogMatrix[9]=2*e.y/this.height,d.K(this.fogMatrix,this.fogMatrix,[1,-1,1]),d.J(this.fogMatrix,this.fogMatrix,[0,0,-this.cameraToCenterDistance]),d.b7(this.fogMatrix,this.fogMatrix,this._pitch),d.ad(this.fogMatrix,this.fogMatrix,this.angle),d.J(this.fogMatrix,this.fogMatrix,[-o,-p,0]),d.K(this.fogMatrix,this.fogMatrix,[1,1,this._pixelPerMeter]),d.J(this.fogMatrix,this.fogMatrix,[0,0,-this.elevation]),this.pixelMatrix3D=d.L(new Float64Array(16),this.labelPlaneMatrix,m);const ue=this.width%2/2,me=this.height%2/2,ye=Math.cos(this.angle),ce=Math.sin(this.angle),Ne=o-Math.round(o)+ye*ue+ce*me,Ce=p-Math.round(p)+ye*me+ce*ue,ze=new Float64Array(m);if(d.J(ze,ze,[Ne>.5?Ne-1:Ne,Ce>.5?Ce-1:Ce,0]),this.alignedModelViewProjectionMatrix=ze,m=d.as(new Float64Array(16),this.pixelMatrix),!m)throw new Error("failed to invert matrix");this.pixelMatrixInverse=m,this._posMatrixCache={},this._alignedPosMatrixCache={},this._fogMatrixCache={}}maxPitchScaleFactor(){if(!this.pixelMatrixInverse)return 1;const e=this.pointCoordinate(new d.P(0,0)),o=[e.x*this.worldSize,e.y*this.worldSize,0,1];return d.af(o,o,this.pixelMatrix)[3]/this.cameraToCenterDistance}getCameraPoint(){const e=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new d.P(0,e))}getCameraQueryGeometry(e){const o=this.getCameraPoint();if(e.length===1)return[e[0],o];{let p=o.x,m=o.y,y=o.x,T=o.y;for(const P of e)p=Math.min(p,P.x),m=Math.min(m,P.y),y=Math.max(y,P.x),T=Math.max(T,P.y);return[new d.P(p,m),new d.P(y,m),new d.P(y,T),new d.P(p,T),new d.P(p,m)]}}lngLatToCameraDepth(e,o){const p=this.locationCoordinate(e),m=[p.x*this.worldSize,p.y*this.worldSize,o,1];return d.af(m,m,this.modelViewProjectionMatrix),m[2]/m[3]}}function Yl(v,e){let o,p=!1,m=null,y=null;const T=()=>{m=null,p&&(v.apply(y,o),m=setTimeout(T,e),p=!1)};return(...P)=>(p=!0,y=this,o=P,m||T(),m)}class Wc{constructor(e){this._getCurrentHash=()=>{const o=window.location.hash.replace("#","");if(this._hashName){let p;return o.split("&").map((m=>m.split("="))).forEach((m=>{m[0]===this._hashName&&(p=m)})),(p&&p[1]||"").split("/")}return o.split("/")},this._onHashChange=()=>{const o=this._getCurrentHash();if(o.length>=3&&!o.some((p=>isNaN(p)))){const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(o[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+o[2],+o[1]],zoom:+o[0],bearing:p,pitch:+(o[4]||0)}),!0}return!1},this._updateHashUnthrottled=()=>{const o=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,o)},this._removeHash=()=>{const o=this._getCurrentHash();if(o.length===0)return;const p=o.join("/");let m=p;m.split("&").length>0&&(m=m.split("&")[0]),this._hashName&&(m=`${this._hashName}=${p}`);let y=window.location.hash.replace(m,"");y.startsWith("#&")?y=y.slice(0,1)+y.slice(2):y==="#"&&(y="");let T=window.location.href.replace(/(#.+)?$/,y);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=Yl(this._updateHashUnthrottled,300),this._hashName=e&&encodeURIComponent(e)}addTo(e){return this._map=e,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(e){const o=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,m=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,m),T=Math.round(o.lng*y)/y,P=Math.round(o.lat*y)/y,M=this._map.getBearing(),B=this._map.getPitch();let $="";if($+=e?`/${T}/${P}/${p}`:`${p}/${P}/${T}`,(M||B)&&($+="/"+Math.round(10*M)/10),B&&($+=`/${Math.round(B)}`),this._hashName){const U=this._hashName;let X=!1;const ee=window.location.hash.slice(1).split("&").map((ne=>{const le=ne.split("=")[0];return le===U?(X=!0,`${le}=${$}`):ne})).filter((ne=>ne));return X||ee.push(`${U}=${$}`),`#${ee.join("&")}`}return`#${$}`}}const Na={linearity:.3,easing:d.b8(0,0,.3,1)},Jl=d.e({deceleration:2500,maxSpeed:1400},Na),Kl=d.e({deceleration:20,maxSpeed:1400},Na),qc=d.e({deceleration:1e3,maxSpeed:360},Na),Ql=d.e({deceleration:1e3,maxSpeed:90},Na);class rl{constructor(e){this._map=e,this.clear()}clear(){this._inertiaBuffer=[]}record(e){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:D.now(),settings:e})}_drainInertiaBuffer(){const e=this._inertiaBuffer,o=D.now();for(;e.length>0&&o-e[0].time>160;)e.shift()}_onMoveEnd(e){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const o={zoom:0,bearing:0,pitch:0,pan:new d.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:y}of this._inertiaBuffer)o.zoom+=y.zoomDelta||0,o.bearing+=y.bearingDelta||0,o.pitch+=y.pitchDelta||0,y.panDelta&&o.pan._add(y.panDelta),y.around&&(o.around=y.around),y.pinchAround&&(o.pinchAround=y.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,m={};if(o.pan.mag()){const y=Ao(o.pan.mag(),p,d.e({},Jl,e||{}));m.offset=o.pan.mult(y.amount/o.pan.mag()),m.center=this._map.transform.center,ta(m,y)}if(o.zoom){const y=Ao(o.zoom,p,Kl);m.zoom=this._map.transform.zoom+y.amount,ta(m,y)}if(o.bearing){const y=Ao(o.bearing,p,qc);m.bearing=this._map.transform.bearing+d.ac(y.amount,-179,179),ta(m,y)}if(o.pitch){const y=Ao(o.pitch,p,Ql);m.pitch=this._map.transform.pitch+y.amount,ta(m,y)}if(m.zoom||m.bearing){const y=o.pinchAround===void 0?o.around:o.pinchAround;m.around=y?this._map.unproject(y):this._map.getCenter()}return this.clear(),d.e(m,{noMoveStart:!0})}}function ta(v,e){(!v.duration||v.duration<e.duration)&&(v.duration=e.duration,v.easing=e.easing)}function Ao(v,e,o){const{maxSpeed:p,linearity:m,deceleration:y}=o,T=d.ac(v*m/(e/1e3),-p,p),P=Math.abs(T)/(y*m);return{easing:o.easing,duration:1e3*P,amount:T*(P/2)}}class Qs extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,p,m={}){const y=O.mousePos(o.getCanvas(),p),T=o.unproject(y);super(e,d.e({point:y,lngLat:T,originalEvent:p},m)),this._defaultPrevented=!1,this.target=o}}class ia extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,p){const m=e==="touchend"?p.changedTouches:p.touches,y=O.touchPos(o.getCanvasContainer(),m),T=y.map((M=>o.unproject(M))),P=y.reduce(((M,B,$,U)=>M.add(B.div(U.length))),new d.P(0,0));super(e,{points:y,point:P,lngLats:T,lngLat:o.unproject(P),originalEvent:p}),this._defaultPrevented=!1}}class Ru extends d.k{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(e,o,p){super(e,{originalEvent:p}),this._defaultPrevented=!1}}class Lu{constructor(e,o){this._map=e,this._clickTolerance=o.clickTolerance}reset(){delete this._mousedownPos}wheel(e){return this._firePreventable(new Ru(e.type,this._map,e))}mousedown(e,o){return this._mousedownPos=o,this._firePreventable(new Qs(e.type,this._map,e))}mouseup(e){this._map.fire(new Qs(e.type,this._map,e))}click(e,o){this._mousedownPos&&this._mousedownPos.dist(o)>=this._clickTolerance||this._map.fire(new Qs(e.type,this._map,e))}dblclick(e){return this._firePreventable(new Qs(e.type,this._map,e))}mouseover(e){this._map.fire(new Qs(e.type,this._map,e))}mouseout(e){this._map.fire(new Qs(e.type,this._map,e))}touchstart(e){return this._firePreventable(new ia(e.type,this._map,e))}touchmove(e){this._map.fire(new ia(e.type,this._map,e))}touchend(e){this._map.fire(new ia(e.type,this._map,e))}touchcancel(e){this._map.fire(new ia(e.type,this._map,e))}_firePreventable(e){if(this._map.fire(e),e.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ls{constructor(e){this._map=e}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(e){this._map.fire(new Qs(e.type,this._map,e))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Qs("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(e){this._delayContextMenu?this._contextMenuEvent=e:this._ignoreContextMenu||this._map.fire(new Qs(e.type,this._map,e)),this._map.listens("contextmenu")&&e.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class mn{constructor(e){this._map=e}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(e){return this.transform.pointLocation(d.P.convert(e),this._map.terrain)}}class Dr{constructor(e,o){this._map=e,this._tr=new mn(e),this._el=e.getCanvasContainer(),this._container=e.getContainer(),this._clickTolerance=o.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(e,o){this.isEnabled()&&e.shiftKey&&e.button===0&&(O.disableDrag(),this._startPos=this._lastPos=o,this._active=!0)}mousemoveWindow(e,o){if(!this._active)return;const p=o;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const m=this._startPos;this._lastPos=p,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",e));const y=Math.min(m.x,p.x),T=Math.max(m.x,p.x),P=Math.min(m.y,p.y),M=Math.max(m.y,p.y);O.setTransform(this._box,`translate(${y}px,${P}px)`),this._box.style.width=T-y+"px",this._box.style.height=M-P+"px"}mouseupWindow(e,o){if(!this._active||e.button!==0)return;const p=this._startPos,m=o;if(this.reset(),O.suppressClick(),p.x!==m.x||p.y!==m.y)return this._map.fire(new d.k("boxzoomend",{originalEvent:e})),{cameraAnimation:y=>y.fitScreenCoordinates(p,m,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",e)}keydown(e){this._active&&e.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",e))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(e,o){return this._map.fire(new d.k(e,{originalEvent:o}))}}function nl(v,e){if(v.length!==e.length)throw new Error(`The number of touches and points are not equal - touches ${v.length}, points ${e.length}`);const o={};for(let p=0;p<v.length;p++)o[v[p].identifier]=e[p];return o}class sa{constructor(e){this.reset(),this.numTouches=e.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(e,o,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=e.timeStamp),p.length===this.numTouches&&(this.centroid=(function(m){const y=new d.P(0,0);for(const T of m)y._add(T);return y.div(m.length)})(o),this.touches=nl(p,o)))}touchmove(e,o,p){if(this.aborted||!this.centroid)return;const m=nl(p,o);for(const y in this.touches){const T=m[y];(!T||T.dist(this.touches[y])>30)&&(this.aborted=!0)}}touchend(e,o,p){if((!this.centroid||e.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const m=!this.aborted&&this.centroid;if(this.reset(),m)return m}}}class al{constructor(e){this.singleTap=new sa(e),this.numTaps=e.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(e,o,p){this.singleTap.touchstart(e,o,p)}touchmove(e,o,p){this.singleTap.touchmove(e,o,p)}touchend(e,o,p){const m=this.singleTap.touchend(e,o,p);if(m){const y=e.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(m)<30;if(y&&T||this.reset(),this.count++,this.lastTime=e.timeStamp,this.lastTap=m,this.count===this.numTaps)return this.reset(),m}}}class Ka{constructor(e){this._tr=new mn(e),this._zoomIn=new al({numTouches:1,numTaps:2}),this._zoomOut=new al({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(e,o,p){this._zoomIn.touchstart(e,o,p),this._zoomOut.touchstart(e,o,p)}touchmove(e,o,p){this._zoomIn.touchmove(e,o,p),this._zoomOut.touchmove(e,o,p)}touchend(e,o,p){const m=this._zoomIn.touchend(e,o,p),y=this._zoomOut.touchend(e,o,p),T=this._tr;return m?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(m)},{originalEvent:e})}):y?(this._active=!0,e.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:P=>P.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(y)},{originalEvent:e})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ka{constructor(e){this._enabled=!!e.enable,this._moveStateManager=e.moveStateManager,this._clickTolerance=e.clickTolerance||1,this._moveFunction=e.move,this._activateOnStart=!!e.activateOnStart,e.assignEvents(this),this.reset()}reset(e){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(e)}_move(...e){const o=this._moveFunction(...e);if(o.bearingDelta||o.pitchDelta||o.around||o.panDelta)return this._active=!0,o}dragStart(e,o){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(e)&&(this._moveStateManager.startMove(e),this._lastPoint=o.length?o[0]:o,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(e,o){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(e.preventDefault(),!this._moveStateManager.isValidMoveEvent(e))return void this.reset(e);const m=o.length?o[0]:o;return!this._moved&&m.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=m,this._move(p,m))}dragEnd(e){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(e)&&(this._moved&&O.suppressClick(),this.reset(e))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Bu={0:1,2:2};class Qa{constructor(e){this._correctEvent=e.checkCorrectEvent}startMove(e){const o=O.mouseButton(e);this._eventButton=o}endMove(e){delete this._eventButton}isValidStartEvent(e){return this._correctEvent(e)}isValidMoveEvent(e){return!(function(o,p){const m=Bu[p];return o.buttons===void 0||(o.buttons&m)!==m})(e,this._eventButton)}isValidEndEvent(e){return O.mouseButton(e)===this._eventButton}}class Fu{constructor(){this._firstTouch=void 0}_isOneFingerTouch(e){return e.targetTouches.length===1}_isSameTouchEvent(e){return e.targetTouches[0].identifier===this._firstTouch}startMove(e){this._firstTouch=e.targetTouches[0].identifier}endMove(e){delete this._firstTouch}isValidStartEvent(e){return this._isOneFingerTouch(e)}isValidMoveEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}isValidEndEvent(e){return this._isOneFingerTouch(e)&&this._isSameTouchEvent(e)}}const ec=v=>{v.mousedown=v.dragStart,v.mousemoveWindow=v.dragMove,v.mouseup=v.dragEnd,v.contextmenu=e=>{e.preventDefault()}},Gc=({enable:v,clickTolerance:e,bearingDegreesPerPixelMoved:o=.8})=>{const p=new Qa({checkCorrectEvent:m=>O.mouseButton(m)===0&&m.ctrlKey||O.mouseButton(m)===2});return new ka({clickTolerance:e,move:(m,y)=>({bearingDelta:(y.x-m.x)*o}),moveStateManager:p,enable:v,assignEvents:ec})},qi=({enable:v,clickTolerance:e,pitchDegreesPerPixelMoved:o=-.5})=>{const p=new Qa({checkCorrectEvent:m=>O.mouseButton(m)===0&&m.ctrlKey||O.mouseButton(m)===2});return new ka({clickTolerance:e,move:(m,y)=>({pitchDelta:(y.y-m.y)*o}),moveStateManager:p,enable:v,assignEvents:ec})};class Sa{constructor(e,o){this._clickTolerance=e.clickTolerance||1,this._map=o,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new d.P(0,0)}_shouldBePrevented(e){return e<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(e,o,p){return this._calculateTransform(e,o,p)}touchmove(e,o,p){if(this._active){if(!this._shouldBePrevented(p.length))return e.preventDefault(),this._calculateTransform(e,o,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",e)}}touchend(e,o,p){this._calculateTransform(e,o,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(e,o,p){p.length>0&&(this._active=!0);const m=nl(p,o),y=new d.P(0,0),T=new d.P(0,0);let P=0;for(const B in m){const $=m[B],U=this._touches[B];U&&(y._add($),T._add($.sub(U)),P++,m[B]=$)}if(this._touches=m,this._shouldBePrevented(P)||!T.mag())return;const M=T.div(P);return this._sum._add(M),this._sum.mag()<this._clickTolerance?void 0:{around:y.div(P),panDelta:M}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Io{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(e,o,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([o[0],o[1]]))}touchmove(e,o,p){if(!this._firstTwoTouches)return;e.preventDefault();const[m,y]=this._firstTwoTouches,T=Ta(p,o,m),P=Ta(p,o,y);if(!T||!P)return;const M=this._aroundCenter?null:T.add(P).div(2);return this._move([T,P],M,e)}touchend(e,o,p){if(!this._firstTwoTouches)return;const[m,y]=this._firstTwoTouches,T=Ta(p,o,m),P=Ta(p,o,y);T&&P||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(e){this._enabled=!0,this._aroundCenter=!!e&&e.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Ta(v,e,o){for(let p=0;p<v.length;p++)if(v[p].identifier===o)return e[p]}function Zc(v,e){return Math.log(v/e)/Math.LN2}class tc extends Io{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(e){this._startDistance=this._distance=e[0].dist(e[1])}_move(e,o){const p=this._distance;if(this._distance=e[0].dist(e[1]),this._active||!(Math.abs(Zc(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Zc(this._distance,p),pinchAround:o}}}function zo(v,e){return 180*v.angleWith(e)/Math.PI}class ol extends Io{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(e){this._startVector=this._vector=e[0].sub(e[1]),this._minDiameter=e[0].dist(e[1])}_move(e,o,p){const m=this._vector;if(this._vector=e[0].sub(e[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:zo(this._vector,m),pinchAround:o}}_isBelowThreshold(e){this._minDiameter=Math.min(this._minDiameter,e.mag());const o=25/(Math.PI*this._minDiameter)*360,p=zo(e,this._startVector);return Math.abs(p)<o}}function Ca(v){return Math.abs(v.y)>Math.abs(v.x)}class ll extends Io{constructor(e){super(),this._currentTouchCount=0,this._map=e}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(e,o,p){super.touchstart(e,o,p),this._currentTouchCount=p.length}_start(e){this._lastPoints=e,Ca(e[0].sub(e[1]))&&(this._valid=!1)}_move(e,o,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const m=e[0].sub(this._lastPoints[0]),y=e[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(m,y,p.timeStamp),this._valid?(this._lastPoints=e,this._active=!0,{pitchDelta:(m.y+y.y)/2*-.5}):void 0}gestureBeginsVertically(e,o,p){if(this._valid!==void 0)return this._valid;const m=e.mag()>=2,y=o.mag()>=2;if(!m&&!y)return;if(!m||!y)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=e.y>0==o.y>0;return Ca(e)&&Ca(o)&&T}}const Qd={panStep:100,bearingStep:15,pitchStep:10};class fn{constructor(e){this._tr=new mn(e);const o=Qd;this._panStep=o.panStep,this._bearingStep=o.bearingStep,this._pitchStep=o.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(e){if(e.altKey||e.ctrlKey||e.metaKey)return;let o=0,p=0,m=0,y=0,T=0;switch(e.keyCode){case 61:case 107:case 171:case 187:o=1;break;case 189:case 109:case 173:o=-1;break;case 37:e.shiftKey?p=-1:(e.preventDefault(),y=-1);break;case 39:e.shiftKey?p=1:(e.preventDefault(),y=1);break;case 38:e.shiftKey?m=1:(e.preventDefault(),T=-1);break;case 40:e.shiftKey?m=-1:(e.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,m=0),{cameraAnimation:P=>{const M=this._tr;P.easeTo({duration:300,easeId:"keyboardHandler",easing:Rn,zoom:o?Math.round(M.zoom)+o*(e.shiftKey?2:1):M.zoom,bearing:M.bearing+p*this._bearingStep,pitch:M.pitch+m*this._pitchStep,offset:[-y*this._panStep,-T*this._panStep],center:M.center},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Rn(v){return v*(2-v)}const cl=4.000244140625;class Rr{constructor(e,o){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=e,this._tr=new mn(e),this._triggerRenderFrame=o,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(e){this._defaultZoomRate=e}setWheelZoomRate(e){this._wheelZoomRate=e}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(e){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!e&&e.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(e){return!!this._map.cooperativeGestures.isEnabled()&&!(e.ctrlKey||this._map.cooperativeGestures.isBypassed(e))}wheel(e){if(!this.isEnabled())return;if(this._shouldBePrevented(e))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",e);let o=e.deltaMode===WheelEvent.DOM_DELTA_LINE?40*e.deltaY:e.deltaY;const p=D.now(),m=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,o!==0&&o%cl==0?this._type="wheel":o!==0&&Math.abs(o)<4?this._type="trackpad":m>400?(this._type=null,this._lastValue=o,this._timeout=setTimeout(this._onTimeout,40,e)):this._type||(this._type=Math.abs(m*o)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,o+=this._lastValue)),e.shiftKey&&o&&(o/=4),this._type&&(this._lastWheelEvent=e,this._delta-=o,this._active||this._start(e)),e.preventDefault()}_start(e){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const o=O.mousePos(this._map.getCanvas(),e),p=this._tr;this._around=o.y>p.transform.height/2-p.transform.getHorizon()?d.N.convert(this._aroundCenter?p.center:p.unproject(o)):d.N.convert(p.center),this._aroundPoint=p.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const e=this._tr.transform;if(this._delta!==0){const M=this._type==="wheel"&&Math.abs(this._delta)>cl?this._wheelZoomRate:this._defaultZoomRate;let B=2/(1+Math.exp(-Math.abs(this._delta*M)));this._delta<0&&B!==0&&(B=1/B);const $=typeof this._targetZoom=="number"?e.zoomScale(this._targetZoom):e.scale;this._targetZoom=Math.min(e.maxZoom,Math.max(e.minZoom,e.scaleZoom($*B))),this._type==="wheel"&&(this._startZoom=e.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const o=typeof this._targetZoom=="number"?this._targetZoom:e.zoom,p=this._startZoom,m=this._easing;let y,T=!1;const P=D.now()-this._lastWheelEventTime;if(this._type==="wheel"&&p&&m&&P){const M=Math.min(P/200,1),B=m(M);y=d.y.number(p,o,B),M<1?this._frameId||(this._frameId=!0):T=!0}else y=o,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!T,zoomDelta:y-e.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(e){let o=d.b9;if(this._prevEase){const p=this._prevEase,m=(D.now()-p.start)/p.duration,y=p.easing(m+.01)-p.easing(m),T=.27/Math.sqrt(y*y+1e-4)*.01,P=Math.sqrt(.0729-T*T);o=d.b8(T,P,.25,1)}return this._prevEase={start:D.now(),duration:e,easing:o},o}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class Pa{constructor(e,o){this._clickZoom=e,this._tapZoom=o}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Ou{constructor(e){this._tr=new mn(e),this.reset()}reset(){this._active=!1}dblclick(e,o){return e.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(e.shiftKey?-1:1),around:this._tr.unproject(o)},{originalEvent:e})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vu{constructor(){this._tap=new al({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(e,o,p){if(!this._swipePoint)if(this._tapTime){const m=o[0],y=e.timeStamp-this._tapTime<500,T=this._tapPoint.dist(m)<30;y&&T?p.length>0&&(this._swipePoint=m,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(e,o,p)}touchmove(e,o,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const m=o[0],y=m.y-this._swipePoint.y;return this._swipePoint=m,e.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(e,o,p)}touchend(e,o,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const m=this._tap.touchend(e,o,p);m&&(this._tapTime=e.timeStamp,this._tapPoint=m)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Xc{constructor(e,o,p){this._el=e,this._mousePan=o,this._touchPan=p}enable(e){this._inertiaOptions=e||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class eh{constructor(e,o,p){this._pitchWithRotate=e.pitchWithRotate,this._mouseRotate=o,this._mousePitch=p}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Yc{constructor(e,o,p,m){this._el=e,this._touchZoom=o,this._touchRotate=p,this._tapDragZoom=m,this._rotationDisabled=!1,this._enabled=!0}enable(e){this._touchZoom.enable(e),this._rotationDisabled||this._touchRotate.enable(e),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class ul{constructor(e,o){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=e,this._options=o,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const e=this._map.getCanvasContainer();e.classList.add("maplibregl-cooperative-gestures"),this._container=O.create("div","maplibregl-cooperative-gesture-screen",e);let o=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(o=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),m=document.createElement("div");m.className="maplibregl-desktop-message",m.textContent=o,this._container.appendChild(m);const y=document.createElement("div");y.className="maplibregl-mobile-message",y.textContent=p,this._container.appendChild(y),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(O.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(e){return e[this._bypassKey]}notifyGestureBlocked(e,o){this._enabled&&(this._map.fire(new d.k("cooperativegestureprevented",{gestureType:e,originalEvent:o})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const gn=v=>v.zoom||v.drag||v.pitch||v.rotate;class Ct extends d.k{}function Ln(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class Jc{constructor(e,o){this.handleWindowEvent=m=>{this.handleEvent(m,`${m.type}Window`)},this.handleEvent=(m,y)=>{if(m.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=m.type==="renderFrame"?void 0:m,P={needsRenderFrame:!1},M={},B={},$=m.touches,U=$?this._getMapTouches($):void 0,X=U?O.touchPos(this._map.getCanvas(),U):O.mousePos(this._map.getCanvas(),m);for(const{handlerName:le,handler:ue,allowed:me}of this._handlers){if(!ue.isEnabled())continue;let ye;this._blockedByActive(B,me,le)?ue.reset():ue[y||m.type]&&(ye=ue[y||m.type](m,X,U),this.mergeHandlerResult(P,M,ye,le,T),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()),(ye||ue.isActive())&&(B[le]=ue)}const ee={};for(const le in this._previousActiveHandlers)B[le]||(ee[le]=T);this._previousActiveHandlers=B,(Object.keys(ee).length||Ln(P))&&(this._changes.push([P,M,ee]),this._triggerRenderFrame()),(Object.keys(B).length||Ln(P))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ne}=P;ne&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ne(this._map))},this._map=e,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new rl(e),this._bearingSnap=o.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(o);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[m,y,T]of this._listeners)O.addEventListener(m,y,m===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[e,o,p]of this._listeners)O.removeEventListener(e,o,e===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(e){const o=this._map,p=o.getCanvasContainer();this._add("mapEvent",new Lu(o,e));const m=o.boxZoom=new Dr(o,e);this._add("boxZoom",m),e.interactive&&e.boxZoom&&m.enable();const y=o.cooperativeGestures=new ul(o,e.cooperativeGestures);this._add("cooperativeGestures",y),e.cooperativeGestures&&y.enable();const T=new Ka(o),P=new Ou(o);o.doubleClickZoom=new Pa(P,T),this._add("tapZoom",T),this._add("clickZoom",P),e.interactive&&e.doubleClickZoom&&o.doubleClickZoom.enable();const M=new Vu;this._add("tapDragZoom",M);const B=o.touchPitch=new ll(o);this._add("touchPitch",B),e.interactive&&e.touchPitch&&o.touchPitch.enable(e.touchPitch);const $=Gc(e),U=qi(e);o.dragRotate=new eh(e,$,U),this._add("mouseRotate",$,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]),e.interactive&&e.dragRotate&&o.dragRotate.enable();const X=(({enable:ye,clickTolerance:ce})=>{const Ne=new Qa({checkCorrectEvent:Ce=>O.mouseButton(Ce)===0&&!Ce.ctrlKey});return new ka({clickTolerance:ce,move:(Ce,ze)=>({around:ze,panDelta:ze.sub(Ce)}),activateOnStart:!0,moveStateManager:Ne,enable:ye,assignEvents:ec})})(e),ee=new Sa(e,o);o.dragPan=new Xc(p,X,ee),this._add("mousePan",X),this._add("touchPan",ee,["touchZoom","touchRotate"]),e.interactive&&e.dragPan&&o.dragPan.enable(e.dragPan);const ne=new ol,le=new tc;o.touchZoomRotate=new Yc(p,le,ne,M),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]),e.interactive&&e.touchZoomRotate&&o.touchZoomRotate.enable(e.touchZoomRotate);const ue=o.scrollZoom=new Rr(o,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ue,["mousePan"]),e.interactive&&e.scrollZoom&&o.scrollZoom.enable(e.scrollZoom);const me=o.keyboard=new fn(o);this._add("keyboard",me),e.interactive&&e.keyboard&&o.keyboard.enable(),this._add("blockableMapEvent",new ls(o))}_add(e,o,p){this._handlers.push({handlerName:e,handler:o,allowed:p}),this._handlersById[e]=o}stop(e){if(!this._updatingCamera){for(const{handler:o}of this._handlers)o.reset();this._inertia.clear(),this._fireEvents({},{},e),this._changes=[]}}isActive(){for(const{handler:e}of this._handlers)if(e.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!gn(this._eventsInProgress)||this.isZooming()}_blockedByActive(e,o,p){for(const m in e)if(m!==p&&(!o||o.indexOf(m)<0))return!0;return!1}_getMapTouches(e){const o=[];for(const p of e)this._el.contains(p.target)&&o.push(p);return o}mergeHandlerResult(e,o,p,m,y){if(!p)return;d.e(e,p);const T={handlerName:m,originalEvent:p.originalEvent||y};p.zoomDelta!==void 0&&(o.zoom=T),p.panDelta!==void 0&&(o.drag=T),p.pitchDelta!==void 0&&(o.pitch=T),p.bearingDelta!==void 0&&(o.rotate=T)}_applyChanges(){const e={},o={},p={};for(const[m,y,T]of this._changes)m.panDelta&&(e.panDelta=(e.panDelta||new d.P(0,0))._add(m.panDelta)),m.zoomDelta&&(e.zoomDelta=(e.zoomDelta||0)+m.zoomDelta),m.bearingDelta&&(e.bearingDelta=(e.bearingDelta||0)+m.bearingDelta),m.pitchDelta&&(e.pitchDelta=(e.pitchDelta||0)+m.pitchDelta),m.around!==void 0&&(e.around=m.around),m.pinchAround!==void 0&&(e.pinchAround=m.pinchAround),m.noInertia&&(e.noInertia=m.noInertia),d.e(o,y),d.e(p,T);this._updateMapTransform(e,o,p),this._changes=[]}_updateMapTransform(e,o,p){const m=this._map,y=m._getTransformForUpdate(),T=m.terrain;if(!(Ln(e)||T&&this._terrainMovement))return this._fireEvents(o,p,!0);let{panDelta:P,zoomDelta:M,bearingDelta:B,pitchDelta:$,around:U,pinchAround:X}=e;X!==void 0&&(U=X),m._stop(!0),U=U||m.transform.centerPoint;const ee=y.pointLocation(P?U.sub(P):U);B&&(y.bearing+=B),$&&(y.pitch+=$),M&&(y.zoom+=M),T?this._terrainMovement||!o.drag&&!o.zoom?o.drag&&this._terrainMovement?y.center=y.pointLocation(y.centerPoint.sub(P)):y.setLocationAtPoint(ee,U):(this._terrainMovement=!0,this._map._elevationFreeze=!0,y.setLocationAtPoint(ee,U)):y.setLocationAtPoint(ee,U),m._applyUpdatedTransform(y),this._map._update(),e.noInertia||this._inertia.record(e),this._fireEvents(o,p,!0)}_fireEvents(e,o,p){const m=gn(this._eventsInProgress),y=gn(e),T={};for(const U in e){const{originalEvent:X}=e[U];this._eventsInProgress[U]||(T[`${U}start`]=X),this._eventsInProgress[U]=e[U]}!m&&y&&this._fireEvent("movestart",y.originalEvent);for(const U in T)this._fireEvent(U,T[U]);y&&this._fireEvent("move",y.originalEvent);for(const U in e){const{originalEvent:X}=e[U];this._fireEvent(U,X)}const P={};let M;for(const U in this._eventsInProgress){const{handlerName:X,originalEvent:ee}=this._eventsInProgress[U];this._handlersById[X].isActive()||(delete this._eventsInProgress[U],M=o[X]||ee,P[`${U}end`]=M)}for(const U in P)this._fireEvent(U,P[U]);const B=gn(this._eventsInProgress),$=(m||y)&&!B;if($&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const U=this._map._getTransformForUpdate();U.recalculateZoom(this._map.terrain),this._map._applyUpdatedTransform(U)}if(p&&$){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),X=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!U||!U.essential&&D.prefersReducedMotion?(this._map.fire(new d.k("moveend",{originalEvent:M})),X(this._map.getBearing())&&this._map.resetNorth()):(X(U.bearing||this._map.getBearing())&&(U.bearing=0),U.freezeElevation=!0,this._map.easeTo(U,{originalEvent:M})),this._updatingCamera=!1}}_fireEvent(e,o){this._map.fire(new d.k(e,o?{originalEvent:o}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((e=>{delete this._frameId,this.handleEvent(new Ct("renderFrame",{timeStamp:e})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Do extends d.E{constructor(e,o){super(),this._renderFrameCallback=()=>{const p=Math.min((D.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(p)),p<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=e,this._bearingSnap=o.bearingSnap,this.on("moveend",(()=>{delete this._requestedCameraState}))}getCenter(){return new d.N(this.transform.center.lng,this.transform.center.lat)}setCenter(e,o){return this.jumpTo({center:e},o)}panBy(e,o,p){return e=d.P.convert(e).mult(-1),this.panTo(this.transform.center,d.e({offset:e},o),p)}panTo(e,o,p){return this.easeTo(d.e({center:e},o),p)}getZoom(){return this.transform.zoom}setZoom(e,o){return this.jumpTo({zoom:e},o),this}zoomTo(e,o,p){return this.easeTo(d.e({zoom:e},o),p)}zoomIn(e,o){return this.zoomTo(this.getZoom()+1,e,o),this}zoomOut(e,o){return this.zoomTo(this.getZoom()-1,e,o),this}getBearing(){return this.transform.bearing}setBearing(e,o){return this.jumpTo({bearing:e},o),this}getPadding(){return this.transform.padding}setPadding(e,o){return this.jumpTo({padding:e},o),this}rotateTo(e,o,p){return this.easeTo(d.e({bearing:e},o),p)}resetNorth(e,o){return this.rotateTo(0,d.e({duration:1e3},e),o),this}resetNorthPitch(e,o){return this.easeTo(d.e({bearing:0,pitch:0,duration:1e3},e),o),this}snapToNorth(e,o){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,o):this}getPitch(){return this.transform.pitch}setPitch(e,o){return this.jumpTo({pitch:e},o),this}cameraForBounds(e,o){e=Oe.convert(e).adjustAntiMeridian();const p=o&&o.bearing||0;return this._cameraForBoxAndBearing(e.getNorthWest(),e.getSouthEast(),p,o)}_cameraForBoxAndBearing(e,o,p,m){const y={top:0,bottom:0,right:0,left:0};if(typeof(m=d.e({padding:y,offset:[0,0],maxZoom:this.transform.maxZoom},m)).padding=="number"){const pt=m.padding;m.padding={top:pt,bottom:pt,right:pt,left:pt}}m.padding=d.e(y,m.padding);const T=this.transform,P=T.padding,M=new Oe(e,o),B=T.project(M.getNorthWest()),$=T.project(M.getNorthEast()),U=T.project(M.getSouthEast()),X=T.project(M.getSouthWest()),ee=d.ba(-p),ne=B.rotate(ee),le=$.rotate(ee),ue=U.rotate(ee),me=X.rotate(ee),ye=new d.P(Math.max(ne.x,le.x,me.x,ue.x),Math.max(ne.y,le.y,me.y,ue.y)),ce=new d.P(Math.min(ne.x,le.x,me.x,ue.x),Math.min(ne.y,le.y,me.y,ue.y)),Ne=ye.sub(ce),Ce=(T.width-(P.left+P.right+m.padding.left+m.padding.right))/Ne.x,ze=(T.height-(P.top+P.bottom+m.padding.top+m.padding.bottom))/Ne.y;if(ze<0||Ce<0)return void d.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");const Ge=Math.min(T.scaleZoom(T.scale*Math.min(Ce,ze)),m.maxZoom),rt=d.P.convert(m.offset),ht=new d.P((m.padding.left-m.padding.right)/2,(m.padding.top-m.padding.bottom)/2).rotate(d.ba(p)),wt=rt.add(ht).mult(T.scale/T.zoomScale(Ge));return{center:T.unproject(B.add(U).div(2).sub(wt)),zoom:Ge,bearing:p}}fitBounds(e,o,p){return this._fitInternal(this.cameraForBounds(e,o),o,p)}fitScreenCoordinates(e,o,p,m,y){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(d.P.convert(e)),this.transform.pointLocation(d.P.convert(o)),p,m),m,y)}_fitInternal(e,o,p){return e?(delete(o=d.e(e,o)).padding,o.linear?this.easeTo(o,p):this.flyTo(o,p)):this}jumpTo(e,o){this.stop();const p=this._getTransformForUpdate();let m=!1,y=!1,T=!1;return"zoom"in e&&p.zoom!==+e.zoom&&(m=!0,p.zoom=+e.zoom),e.center!==void 0&&(p.center=d.N.convert(e.center)),"bearing"in e&&p.bearing!==+e.bearing&&(y=!0,p.bearing=+e.bearing),"pitch"in e&&p.pitch!==+e.pitch&&(T=!0,p.pitch=+e.pitch),e.padding==null||p.isPaddingEqual(e.padding)||(p.padding=e.padding),this._applyUpdatedTransform(p),this.fire(new d.k("movestart",o)).fire(new d.k("move",o)),m&&this.fire(new d.k("zoomstart",o)).fire(new d.k("zoom",o)).fire(new d.k("zoomend",o)),y&&this.fire(new d.k("rotatestart",o)).fire(new d.k("rotate",o)).fire(new d.k("rotateend",o)),T&&this.fire(new d.k("pitchstart",o)).fire(new d.k("pitch",o)).fire(new d.k("pitchend",o)),this.fire(new d.k("moveend",o))}calculateCameraOptionsFromTo(e,o,p,m=0){const y=d.Z.fromLngLat(e,o),T=d.Z.fromLngLat(p,m),P=T.x-y.x,M=T.y-y.y,B=T.z-y.z,$=Math.hypot(P,M,B);if($===0)throw new Error("Can't calculate camera options with same From and To");const U=Math.hypot(P,M),X=this.transform.scaleZoom(this.transform.cameraToCenterDistance/$/this.transform.tileSize),ee=180*Math.atan2(P,-M)/Math.PI;let ne=180*Math.acos(U/$)/Math.PI;return ne=B<0?90-ne:90+ne,{center:T.toLngLat(),zoom:X,pitch:ne,bearing:ee}}easeTo(e,o){var p;this._stop(!1,e.easeId),((e=d.e({offset:[0,0],duration:500,easing:d.b9},e)).animate===!1||!e.essential&&D.prefersReducedMotion)&&(e.duration=0);const m=this._getTransformForUpdate(),y=m.zoom,T=m.bearing,P=m.pitch,M=m.padding,B="bearing"in e?this._normalizeBearing(e.bearing,T):T,$="pitch"in e?+e.pitch:P,U="padding"in e?e.padding:m.padding,X=d.P.convert(e.offset);let ee=m.centerPoint.add(X);const ne=m.pointLocation(ee),{center:le,zoom:ue}=m.getConstrained(d.N.convert(e.center||ne),(p=e.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(le,m);const me=m.project(ne),ye=m.project(le).sub(me),ce=m.zoomScale(ue-y);let Ne,Ce;e.around&&(Ne=d.N.convert(e.around),Ce=m.locationPoint(Ne));const ze={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||ue!==y,this._rotating=this._rotating||T!==B,this._pitching=this._pitching||$!==P,this._padding=!m.isPaddingEqual(U),this._easeId=e.easeId,this._prepareEase(o,e.noMoveStart,ze),this.terrain&&this._prepareElevation(le),this._ease((Ge=>{if(this._zooming&&(m.zoom=d.y.number(y,ue,Ge)),this._rotating&&(m.bearing=d.y.number(T,B,Ge)),this._pitching&&(m.pitch=d.y.number(P,$,Ge)),this._padding&&(m.interpolatePadding(M,U,Ge),ee=m.centerPoint.add(X)),this.terrain&&!e.freezeElevation&&this._updateElevation(Ge),Ne)m.setLocationAtPoint(Ne,Ce);else{const rt=m.zoomScale(m.zoom-y),ht=ue>y?Math.min(2,ce):Math.max(.5,ce),wt=Math.pow(ht,1-Ge),pt=m.unproject(me.add(ye.mult(Ge*wt)).mult(rt));m.setLocationAtPoint(m.renderWorldCopies?pt.wrap():pt,ee)}this._applyUpdatedTransform(m),this._fireMoveEvents(o)}),(Ge=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o,Ge)}),e),this}_prepareEase(e,o,p={}){this._moving=!0,o||p.moving||this.fire(new d.k("movestart",e)),this._zooming&&!p.zooming&&this.fire(new d.k("zoomstart",e)),this._rotating&&!p.rotating&&this.fire(new d.k("rotatestart",e)),this._pitching&&!p.pitching&&this.fire(new d.k("pitchstart",e))}_prepareElevation(e){this._elevationCenter=e,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(e,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(e){this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);const o=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(e<1&&o!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=e*(p-(o-(p*e+this._elevationStart))/(1-e)),this._elevationTarget=o}this.transform.elevation=d.y.number(this._elevationStart,this._elevationTarget,e)}_finalizeElevation(){this._elevationFreeze=!1,this.transform.recalculateZoom(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(e){const o=e.getCameraPosition(),p=this.terrain.getElevationForLngLatZoom(o.lngLat,e.zoom);if(o.altitude<p){const m=this.calculateCameraOptionsFromTo(o.lngLat,p,e.center,e.elevation);return{pitch:m.pitch,zoom:m.zoom}}return{}}_applyUpdatedTransform(e){const o=[];if(this.terrain&&o.push((m=>this._elevateCameraIfInsideTerrain(m))),this.transformCameraUpdate&&o.push((m=>this.transformCameraUpdate(m))),!o.length)return;const p=e.clone();for(const m of o){const y=p.clone(),{center:T,zoom:P,pitch:M,bearing:B,elevation:$}=m(y);T&&(y.center=T),P!==void 0&&(y.zoom=P),M!==void 0&&(y.pitch=M),B!==void 0&&(y.bearing=B),$!==void 0&&(y.elevation=$),p.apply(y)}this.transform.apply(p)}_fireMoveEvents(e){this.fire(new d.k("move",e)),this._zooming&&this.fire(new d.k("zoom",e)),this._rotating&&this.fire(new d.k("rotate",e)),this._pitching&&this.fire(new d.k("pitch",e))}_afterEase(e,o){if(this._easeId&&o&&this._easeId===o)return;delete this._easeId;const p=this._zooming,m=this._rotating,y=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,p&&this.fire(new d.k("zoomend",e)),m&&this.fire(new d.k("rotateend",e)),y&&this.fire(new d.k("pitchend",e)),this.fire(new d.k("moveend",e))}flyTo(e,o){var p;if(!e.essential&&D.prefersReducedMotion){const xt=d.M(e,["center","zoom","bearing","pitch","around"]);return this.jumpTo(xt,o)}this.stop(),e=d.e({offset:[0,0],speed:1.2,curve:1.42,easing:d.b9},e);const m=this._getTransformForUpdate(),y=m.zoom,T=m.bearing,P=m.pitch,M=m.padding,B="bearing"in e?this._normalizeBearing(e.bearing,T):T,$="pitch"in e?+e.pitch:P,U="padding"in e?e.padding:m.padding,X=d.P.convert(e.offset);let ee=m.centerPoint.add(X);const ne=m.pointLocation(ee),{center:le,zoom:ue}=m.getConstrained(d.N.convert(e.center||ne),(p=e.zoom)!==null&&p!==void 0?p:y);this._normalizeCenter(le,m);const me=m.zoomScale(ue-y),ye=m.project(ne),ce=m.project(le).sub(ye);let Ne=e.curve;const Ce=Math.max(m.width,m.height),ze=Ce/me,Ge=ce.mag();if("minZoom"in e){const xt=d.ac(Math.min(e.minZoom,y,ue),m.minZoom,m.maxZoom),ii=Ce/m.zoomScale(xt-y);Ne=Math.sqrt(ii/Ge*2)}const rt=Ne*Ne;function ht(xt){const ii=(ze*ze-Ce*Ce+(xt?-1:1)*rt*rt*Ge*Ge)/(2*(xt?ze:Ce)*rt*Ge);return Math.log(Math.sqrt(ii*ii+1)-ii)}function wt(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function pt(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const lt=ht(!1);let At=function(xt){return pt(lt)/pt(lt+Ne*xt)},si=function(xt){return Ce*((pt(lt)*(wt(ii=lt+Ne*xt)/pt(ii))-wt(lt))/rt)/Ge;var ii},mt=(ht(!0)-lt)/Ne;if(Math.abs(Ge)<1e-6||!isFinite(mt)){if(Math.abs(Ce-ze)<1e-6)return this.easeTo(e,o);const xt=ze<Ce?-1:1;mt=Math.abs(Math.log(ze/Ce))/Ne,si=()=>0,At=ii=>Math.exp(xt*Ne*ii)}return e.duration="duration"in e?+e.duration:1e3*mt/("screenSpeed"in e?+e.screenSpeed/Ne:+e.speed),e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this._zooming=!0,this._rotating=T!==B,this._pitching=$!==P,this._padding=!m.isPaddingEqual(U),this._prepareEase(o,!1),this.terrain&&this._prepareElevation(le),this._ease((xt=>{const ii=xt*mt,Oi=1/At(ii);m.zoom=xt===1?ue:y+m.scaleZoom(Oi),this._rotating&&(m.bearing=d.y.number(T,B,xt)),this._pitching&&(m.pitch=d.y.number(P,$,xt)),this._padding&&(m.interpolatePadding(M,U,xt),ee=m.centerPoint.add(X)),this.terrain&&!e.freezeElevation&&this._updateElevation(xt);const ci=xt===1?le:m.unproject(ye.add(ce.mult(si(ii))).mult(Oi));m.setLocationAtPoint(m.renderWorldCopies?ci.wrap():ci,ee),this._applyUpdatedTransform(m),this._fireMoveEvents(o)}),(()=>{this.terrain&&e.freezeElevation&&this._finalizeElevation(),this._afterEase(o)}),e),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(e,o){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const m=this._onEaseEnd;delete this._onEaseEnd,m.call(this,o)}return e||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(e,o,p){p.animate===!1||p.duration===0?(e(1),o()):(this._easeStart=D.now(),this._easeOptions=p,this._onEaseFrame=e,this._onEaseEnd=o,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(e,o){e=d.b3(e,-180,180);const p=Math.abs(e-o);return Math.abs(e-360-o)<p&&(e-=360),Math.abs(e+360-o)<p&&(e+=360),e}_normalizeCenter(e,o){if(!o.renderWorldCopies||o.lngRange)return;const p=e.lng-o.center.lng;e.lng+=p>180?-360:p<-180?360:0}queryTerrainElevation(e){return this.terrain?this.terrain.getElevationForLngLatZoom(d.N.convert(e),this.transform.tileZoom)-this.transform.elevation:null}}const jr={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class ra{constructor(e=jr){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=o=>{!o||o.sourceDataType!=="metadata"&&o.sourceDataType!=="visibility"&&o.dataType!=="style"&&o.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=e}getDefaultPosition(){return"bottom-right"}onAdd(e){return this._map=e,this._compact=this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(e,o){const p=this._map._getUIString(`AttributionControl.${o}`);e.title=p,e.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let e=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?e=e.concat(this.options.customAttribution.map((m=>typeof m!="string"?"":m))):typeof this.options.customAttribution=="string"&&e.push(this.options.customAttribution)),this._map.style.stylesheet){const m=this._map.style.stylesheet;this.styleOwner=m.owner,this.styleId=m.id}const o=this._map.style.sourceCaches;for(const m in o){const y=o[m];if(y.used||y.usedForTerrain){const T=y.getSource();T.attribution&&e.indexOf(T.attribution)<0&&e.push(T.attribution)}}e=e.filter((m=>String(m).trim())),e.sort(((m,y)=>m.length-y.length)),e=e.filter(((m,y)=>{for(let T=y+1;T<e.length;T++)if(e[T].indexOf(m)>=0)return!1;return!0}));const p=e.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,e.length?(this._innerContainer.innerHTML=p,this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Bn{constructor(e={}){this._updateCompact=()=>{const o=this._container.children;if(o.length){const p=o[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=e}getDefaultPosition(){return"bottom-left"}onAdd(e){this._map=e,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const o=O.create("a","maplibregl-ctrl-logo");return o.target="_blank",o.rel="noopener nofollow",o.href="https://maplibre.org/",o.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),o.setAttribute("rel","noopener nofollow"),this._container.appendChild(o),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class wi{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(e){const o=++this._id;return this._queue.push({callback:e,id:o,cancelled:!1}),o}remove(e){const o=this._currentlyRunning,p=o?this._queue.concat(o):this._queue;for(const m of p)if(m.id===e)return void(m.cancelled=!0)}run(e=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const o=this._currentlyRunning=this._queue;this._queue=[];for(const p of o)if(!p.cancelled&&(p.callback(e),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var $u=d.Y([{name:"a_pos3d",type:"Int16",components:3}]);class gp extends d.E{constructor(e){super(),this.sourceCache=e,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.deltaZoom=1,e.usedForTerrain=!0,e.tileSize=this.tileSize*2**this.deltaZoom}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(e,o){this.sourceCache.update(e,o),this._renderableTilesKeys=[];const p={};for(const m of e.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:o}))p[m.key]=!0,this._renderableTilesKeys.push(m.key),this._tiles[m.key]||(m.posMatrix=new Float64Array(16),d.aP(m.posMatrix,0,d.X,0,d.X,0,1),this._tiles[m.key]=new xr(m,this.tileSize));for(const m in this._tiles)p[m]||delete this._tiles[m]}freeRtt(e){for(const o in this._tiles){const p=this._tiles[o];(!e||p.tileID.equals(e)||p.tileID.isChildOf(e)||e.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((e=>this.getTileByID(e)))}getTileByID(e){return this._tiles[e]}getTerrainCoords(e){const o={};for(const p of this._renderableTilesKeys){const m=this._tiles[p].tileID;if(m.canonical.equals(e.canonical)){const y=e.clone();y.posMatrix=new Float64Array(16),d.aP(y.posMatrix,0,d.X,0,d.X,0,1),o[p]=y}else if(m.canonical.isChildOf(e.canonical)){const y=e.clone();y.posMatrix=new Float64Array(16);const T=m.canonical.z-e.canonical.z,P=m.canonical.x-(m.canonical.x>>T<<T),M=m.canonical.y-(m.canonical.y>>T<<T),B=d.X>>T;d.aP(y.posMatrix,0,B,0,B,0,1),d.J(y.posMatrix,y.posMatrix,[-P*B,-M*B,0]),o[p]=y}else if(e.canonical.isChildOf(m.canonical)){const y=e.clone();y.posMatrix=new Float64Array(16);const T=e.canonical.z-m.canonical.z,P=e.canonical.x-(e.canonical.x>>T<<T),M=e.canonical.y-(e.canonical.y>>T<<T),B=d.X>>T;d.aP(y.posMatrix,0,d.X,0,d.X,0,1),d.J(y.posMatrix,y.posMatrix,[P*B,M*B,0]),d.K(y.posMatrix,y.posMatrix,[1/2**T,1/2**T,0]),o[p]=y}}return o}getSourceTile(e,o){const p=this.sourceCache._source;let m=e.overscaledZ-this.deltaZoom;if(m>p.maxzoom&&(m=p.maxzoom),m<p.minzoom)return null;this._sourceTileCache[e.key]||(this._sourceTileCache[e.key]=e.scaledTo(m).key);let y=this.sourceCache.getTileByID(this._sourceTileCache[e.key]);if((!y||!y.dem)&&o)for(;m>=p.minzoom&&(!y||!y.dem);)y=this.sourceCache.getTileByID(e.scaledTo(m--).key);return y}tilesAfterTime(e=Date.now()){return Object.values(this._tiles).filter((o=>o.timeAdded>=e))}}class Ea{constructor(e,o,p){this.painter=e,this.sourceCache=new gp(o),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(e,o,p,m=d.X){var y;if(!(o>=0&&o<m&&p>=0&&p<m))return 0;const T=this.getTerrainData(e),P=(y=T.tile)===null||y===void 0?void 0:y.dem;if(!P)return 0;const M=(function(ne,le,ue){var me=le[0],ye=le[1];return ne[0]=ue[0]*me+ue[4]*ye+ue[12],ne[1]=ue[1]*me+ue[5]*ye+ue[13],ne})([],[o/m*d.X,p/m*d.X],T.u_terrain_matrix),B=[M[0]*P.dim,M[1]*P.dim],$=Math.floor(B[0]),U=Math.floor(B[1]),X=B[0]-$,ee=B[1]-U;return P.get($,U)*(1-X)*(1-ee)+P.get($+1,U)*X*(1-ee)+P.get($,U+1)*(1-X)*ee+P.get($+1,U+1)*X*ee}getElevationForLngLatZoom(e,o){if(!d.bb(o,e.wrap()))return 0;const{tileID:p,mercatorX:m,mercatorY:y}=this._getOverscaledTileIDFromLngLatZoom(e,o);return this.getElevation(p,m%d.X,y%d.X,d.X)}getElevation(e,o,p,m=d.X){return this.getDEMElevation(e,o,p,m)*this.exaggeration}getTerrainData(e){if(!this._emptyDemTexture){const m=this.painter.context,y=new d.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ct(m,y,m.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ct(m,new d.R({width:1,height:1}),m.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=d.an([])}const o=this.sourceCache.getSourceTile(e,!0);if(o&&o.dem&&(!o.demTexture||o.needsTerrainPrepare)){const m=this.painter.context;o.demTexture=this.painter.getTileTexture(o.dem.stride),o.demTexture?o.demTexture.update(o.dem.getPixels(),{premultiply:!1}):o.demTexture=new ct(m,o.dem.getPixels(),m.gl.RGBA,{premultiply:!1}),o.demTexture.bind(m.gl.NEAREST,m.gl.CLAMP_TO_EDGE),o.needsTerrainPrepare=!1}const p=o&&o+o.tileID.key+e.key;if(p&&!this._demMatrixCache[p]){const m=this.sourceCache.sourceCache._source.maxzoom;let y=e.canonical.z-o.tileID.canonical.z;e.overscaledZ>e.canonical.z&&(e.canonical.z>=m?y=e.canonical.z-m:d.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=e.canonical.x-(e.canonical.x>>y<<y),P=e.canonical.y-(e.canonical.y>>y<<y),M=d.bc(new Float64Array(16),[1/(d.X<<y),1/(d.X<<y),0]);d.J(M,M,[T*d.X,P*d.X,0]),this._demMatrixCache[e.key]={matrix:M,coord:e}}return{u_depth:2,u_terrain:3,u_terrain_dim:o&&o.dem&&o.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[e.key].matrix:this._emptyDemMatrix,u_terrain_unpack:o&&o.dem&&o.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(o&&o.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:o}}getFramebuffer(e){const o=this.painter,p=o.width/devicePixelRatio,m=o.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===m||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ct(o.context,{width:p,height:m,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ct(o.context,{width:p,height:m,data:null},o.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(o.context.gl.NEAREST,o.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=o.context.createFramebuffer(p,m,!0,!1),this._fbo.depthAttachment.set(o.context.createRenderbuffer(o.context.gl.DEPTH_COMPONENT16,p,m))),this._fbo.colorAttachment.set(e==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const e=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const o=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let y=0,T=0;y<this._coordsTextureSize;y++)for(let P=0;P<this._coordsTextureSize;P++,T+=4)o[T+0]=255&P,o[T+1]=255&y,o[T+2]=P>>8<<4|y>>8,o[T+3]=0;const p=new d.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(o.buffer)),m=new ct(e,p,e.gl.RGBA,{premultiply:!1});return m.bind(e.gl.NEAREST,e.gl.CLAMP_TO_EDGE),this._coordsTexture=m,m}pointCoordinate(e){this.painter.maybeDrawDepthAndCoords(!0);const o=new Uint8Array(4),p=this.painter.context,m=p.gl,y=Math.round(e.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(e.y*this.painter.pixelRatio/devicePixelRatio),P=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),m.readPixels(y,P-T-1,1,1,m.RGBA,m.UNSIGNED_BYTE,o),p.bindFramebuffer.set(null);const M=o[0]+(o[2]>>4<<8),B=o[1]+((15&o[2])<<8),$=this.coordsIndex[255-o[3]],U=$&&this.sourceCache.getTileByID($);if(!U)return null;const X=this._coordsTextureSize,ee=(1<<U.tileID.canonical.z)*X;return new d.Z((U.tileID.canonical.x*X+M)/ee+U.tileID.wrap,(U.tileID.canonical.y*X+B)/ee,this.getElevation(U.tileID,M,B,X))}depthAtPoint(e){const o=new Uint8Array(4),p=this.painter.context,m=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),m.readPixels(e.x,this.painter.height/devicePixelRatio-e.y-1,1,1,m.RGBA,m.UNSIGNED_BYTE,o),p.bindFramebuffer.set(null),(o[0]/16777216+o[1]/65536+o[2]/256+o[3])/256}getTerrainMesh(){if(this._mesh)return this._mesh;const e=this.painter.context,o=new d.bd,p=new d.aY,m=this.meshSize,y=d.X/m,T=m*m;for(let U=0;U<=m;U++)for(let X=0;X<=m;X++)o.emplaceBack(X*y,U*y,0);for(let U=0;U<T;U+=m+1)for(let X=0;X<m;X++)p.emplaceBack(X+U,m+X+U+1,m+X+U+2),p.emplaceBack(X+U,m+X+U+2,X+U+1);const P=o.length,M=P+2*(m+1);for(const U of[0,1])for(let X=0;X<=m;X++)for(const ee of[0,1])o.emplaceBack(X*y,U*d.X,ee);for(let U=0;U<2*m;U+=2)p.emplaceBack(M+U,M+U+1,M+U+3),p.emplaceBack(M+U,M+U+3,M+U+2),p.emplaceBack(P+U,P+U+3,P+U+1),p.emplaceBack(P+U,P+U+2,P+U+3);const B=o.length,$=B+2*(m+1);for(const U of[0,1])for(let X=0;X<=m;X++)for(const ee of[0,1])o.emplaceBack(U*d.X,X*y,ee);for(let U=0;U<2*m;U+=2)p.emplaceBack(B+U,B+U+1,B+U+3),p.emplaceBack(B+U,B+U+3,B+U+2),p.emplaceBack($+U,$+U+3,$+U+1),p.emplaceBack($+U,$+U+2,$+U+3);return this._mesh=new zr(e.createVertexBuffer(o,$u.members),e.createIndexBuffer(p),d.a0.simpleSegment(0,0,o.length,p.length)),this._mesh}getMeshFrameDelta(e){return 2*Math.PI*d.be/Math.pow(2,e)/5}getMinTileElevationForLngLatZoom(e,o){var p;const{tileID:m}=this._getOverscaledTileIDFromLngLatZoom(e,o);return(p=this.getMinMaxElevation(m).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(e){const o=this.getTerrainData(e).tile,p={minElevation:null,maxElevation:null};return o&&o.dem&&(p.minElevation=o.dem.min*this.exaggeration,p.maxElevation=o.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(e,o){const p=d.Z.fromLngLat(e.wrap()),m=(1<<o)*d.X,y=p.x*m,T=p.y*m,P=Math.floor(y/d.X),M=Math.floor(T/d.X);return{tileID:new d.S(o,0,o,P,M),mercatorX:y,mercatorY:T}}}class ic{constructor(e,o,p){this._context=e,this._size=o,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const e of this._objects)e.texture.destroy(),e.fbo.destroy()}_createObject(e){const o=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ct(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),o.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),o.colorAttachment.set(p.texture),{id:e,fbo:o,texture:p,stamp:-1,inUse:!1}}getObjectForId(e){return this._objects[e]}useObject(e){e.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((o=>e.id!==o)),this._recentlyUsed.push(e.id)}stampObject(e){e.stamp=++this._stamp}getOrCreateFreeObject(){for(const o of this._recentlyUsed)if(!this._objects[o].inUse)return this._objects[o];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const e=this._createObject(this._objects.length);return this._objects.push(e),e}freeObject(e){e.inUse=!1}freeAllObjects(){for(const e of this._objects)this.freeObject(e)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((e=>!e.inUse))===!1}}const Fn={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class sc{constructor(e,o){this.painter=e,this.terrain=o,this.pool=new ic(e.context,30,o.sourceCache.tileSize*o.qualityFactor)}destruct(){this.pool.destruct()}getTexture(e){return this.pool.getObjectForId(e.rtt[this._stacks.length-1].id).texture}prepareForRender(e,o){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=e._order.filter((p=>!e._layers[p].isHidden(o))),this._coordsDescendingInv={};for(const p in e.sourceCaches){this._coordsDescendingInv[p]={};const m=e.sourceCaches[p].getVisibleCoordinates();for(const y of m){const T=this.terrain.sourceCache.getTerrainCoords(y);for(const P in T)this._coordsDescendingInv[p][P]||(this._coordsDescendingInv[p][P]=[]),this._coordsDescendingInv[p][P].push(T[P])}}this._coordsDescendingInvStr={};for(const p of e._order){const m=e._layers[p],y=m.source;if(Fn[m.type]&&!this._coordsDescendingInvStr[y]){this._coordsDescendingInvStr[y]={};for(const T in this._coordsDescendingInv[y])this._coordsDescendingInvStr[y][T]=this._coordsDescendingInv[y][T].map((P=>P.key)).sort().join()}}for(const p of this._renderableTiles)for(const m in this._coordsDescendingInvStr){const y=this._coordsDescendingInvStr[m][p.tileID.key];y&&y!==p.rttCoords[m]&&(p.rtt=[])}}renderLayer(e){if(e.isHidden(this.painter.transform.zoom))return!1;const o=e.type,p=this.painter,m=this._renderableLayerIds[this._renderableLayerIds.length-1]===e.id;if(Fn[o]&&(this._prevType&&Fn[this._prevType]||this._stacks.push([]),this._prevType=o,this._stacks[this._stacks.length-1].push(e.id),!m))return!0;if(Fn[this._prevType]||Fn[o]&&m){this._prevType=o;const y=this._stacks.length-1,T=this._stacks[y]||[];for(const P of this._renderableTiles){if(this.pool.isFull()&&(Kd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(P),P.rtt[y]){const B=this.pool.getObjectForId(P.rtt[y].id);if(B.stamp===P.rtt[y].stamp){this.pool.useObject(B);continue}}const M=this.pool.getOrCreateFreeObject();this.pool.useObject(M),this.pool.stampObject(M),P.rtt[y]={id:M.id,stamp:M.stamp},p.context.bindFramebuffer.set(M.fbo.framebuffer),p.context.clear({color:d.aM.transparent,stencil:0}),p.currentStencilSource=void 0;for(let B=0;B<T.length;B++){const $=p.style._layers[T[B]],U=$.source?this._coordsDescendingInv[$.source][P.tileID.key]:[P.tileID];p.context.viewport.set([0,0,M.fbo.width,M.fbo.height]),p._renderTileClippingMasks($,U),p.renderLayer(p,p.style.sourceCaches[$.source],$,U),$.source&&(P.rttCoords[$.source]=this._coordsDescendingInvStr[$.source][P.tileID.key])}}return Kd(this.painter,this.terrain,this._rttTiles),this._rttTiles=[],this.pool.freeAllObjects(),Fn[o]}return!1}}const rc={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use ⌘ + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Ro=I,eo={hash:!1,interactive:!0,bearingSnap:7,attributionControl:jr,maplibreLogo:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,refreshExpiredTiles:!0,scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],zoom:0,bearing:0,pitch:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:d.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0},Gi=v=>{v.touchstart=v.dragStart,v.touchmoveWindow=v.dragMove,v.touchend=v.dragEnd},Ji={showCompass:!0,showZoom:!0,visualizePitch:!1};class to{constructor(e,o,p=!1){this.mousedown=T=>{this.startMouse(d.e({},T,{ctrlKey:!0,preventDefault:()=>T.preventDefault()}),O.mousePos(this.element,T)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=T=>{this.moveMouse(T,O.mousePos(this.element,T))},this.mouseup=T=>{this.mouseRotate.dragEnd(T),this.mousePitch&&this.mousePitch.dragEnd(T),this.offTemp()},this.touchstart=T=>{T.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,T.targetTouches)[0],this.startTouch(T,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=T=>{T.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,T.targetTouches)[0],this.moveTouch(T,this._lastPos))},this.touchend=T=>{T.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),this.touchRotate.reset(),this.touchPitch&&this.touchPitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10;const m=e.dragRotate._mouseRotate.getClickTolerance(),y=e.dragRotate._mousePitch.getClickTolerance();this.element=o,this.mouseRotate=Gc({clickTolerance:m,enable:!0}),this.touchRotate=(({enable:T,clickTolerance:P,bearingDegreesPerPixelMoved:M=.8})=>{const B=new Fu;return new ka({clickTolerance:P,move:($,U)=>({bearingDelta:(U.x-$.x)*M}),moveStateManager:B,enable:T,assignEvents:Gi})})({clickTolerance:m,enable:!0}),this.map=e,p&&(this.mousePitch=qi({clickTolerance:y,enable:!0}),this.touchPitch=(({enable:T,clickTolerance:P,pitchDegreesPerPixelMoved:M=-.5})=>{const B=new Fu;return new ka({clickTolerance:P,move:($,U)=>({pitchDelta:(U.y-$.y)*M}),moveStateManager:B,enable:T,assignEvents:Gi})})({clickTolerance:y,enable:!0})),O.addEventListener(o,"mousedown",this.mousedown),O.addEventListener(o,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(o,"touchcancel",this.reset)}startMouse(e,o){this.mouseRotate.dragStart(e,o),this.mousePitch&&this.mousePitch.dragStart(e,o),O.disableDrag()}startTouch(e,o){this.touchRotate.dragStart(e,o),this.touchPitch&&this.touchPitch.dragStart(e,o),O.disableDrag()}moveMouse(e,o){const p=this.map,{bearingDelta:m}=this.mouseRotate.dragMove(e,o)||{};if(m&&p.setBearing(p.getBearing()+m),this.mousePitch){const{pitchDelta:y}=this.mousePitch.dragMove(e,o)||{};y&&p.setPitch(p.getPitch()+y)}}moveTouch(e,o){const p=this.map,{bearingDelta:m}=this.touchRotate.dragMove(e,o)||{};if(m&&p.setBearing(p.getBearing()+m),this.touchPitch){const{pitchDelta:y}=this.touchPitch.dragMove(e,o)||{};y&&p.setPitch(p.getPitch()+y)}}off(){const e=this.element;O.removeEventListener(e,"mousedown",this.mousedown),O.removeEventListener(e,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(e,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let Vi;function bi(v,e,o){const p=new d.N(v.lng,v.lat);if(v=new d.N(v.lng,v.lat),e){const m=new d.N(v.lng-360,v.lat),y=new d.N(v.lng+360,v.lat),T=o.locationPoint(v).distSqr(e);o.locationPoint(m).distSqr(e)<T?v=m:o.locationPoint(y).distSqr(e)<T&&(v=y)}for(;Math.abs(v.lng-o.center.lng)>180;){const m=o.locationPoint(v);if(m.x>=0&&m.y>=0&&m.x<=o.width&&m.y<=o.height)break;v.lng>o.center.lng?v.lng-=360:v.lng+=360}return v.lng!==p.lng&&o.locationPoint(v).y>o.height/2-o.getHorizon()?v:p}const xn={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ma(v,e,o){const p=v.classList;for(const m in xn)p.remove(`maplibregl-${o}-anchor-${m}`);p.add(`maplibregl-${o}-anchor-${e}`)}class er extends d.E{constructor(e){if(super(),this._onKeyPress=o=>{const p=o.code,m=o.charCode||o.keyCode;p!=="Space"&&p!=="Enter"&&m!==32&&m!==13||this.togglePopup()},this._onMapClick=o=>{const p=o.originalEvent.target,m=this._element;this._popup&&(p===m||m.contains(p))&&this.togglePopup()},this._update=o=>{var p;if(!this._map)return;const m=this._map.loaded()&&!this._map.isMoving();(o?.type==="terrain"||o?.type==="render"&&!m)&&this._map.once("render",this._update),this._lngLat=this._map.transform.renderWorldCopies?bi(this._lngLat,this._flatPos,this._map.transform):(p=this._lngLat)===null||p===void 0?void 0:p.wrap(),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let T="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?T="rotateX(0deg)":this._pitchAlignment==="map"&&(T=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||o&&o.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${xn[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${T} ${y}`),D.frameAsync(new AbortController).then((()=>{this._updateOpacity(o&&o.type==="moveend")})).catch((()=>{}))},this._onMove=o=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=o.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=o.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new d.k("dragstart"))),this.fire(new d.k("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new d.k("dragend")),this._state="inactive"},this._addDragHandler=o=>{this._element.contains(o.originalEvent.target)&&(o.preventDefault(),this._positionDelta=o.point.sub(this._pos).add(this._offset),this._pointerdownPos=o.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=e&&e.anchor||"center",this._color=e&&e.color||"#3FB1CE",this._scale=e&&e.scale||1,this._draggable=e&&e.draggable||!1,this._clickTolerance=e&&e.clickTolerance||0,this._subpixelPositioning=e&&e.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=e&&e.rotation||0,this._rotationAlignment=e&&e.rotationAlignment||"auto",this._pitchAlignment=e&&e.pitchAlignment&&e.pitchAlignment!=="auto"?e.pitchAlignment:this._rotationAlignment,this.setOpacity(),this.setOpacity(e?.opacity,e?.opacityWhenCovered),e&&e.element)this._element=e.element,this._offset=d.P.convert(e&&e.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div");const o=O.createNS("http://www.w3.org/2000/svg","svg"),p=41,m=27;o.setAttributeNS(null,"display","block"),o.setAttributeNS(null,"height",`${p}px`),o.setAttributeNS(null,"width",`${m}px`),o.setAttributeNS(null,"viewBox",`0 0 ${m} ${p}`);const y=O.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"stroke","none"),y.setAttributeNS(null,"stroke-width","1"),y.setAttributeNS(null,"fill","none"),y.setAttributeNS(null,"fill-rule","evenodd");const T=O.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const P=O.createNS("http://www.w3.org/2000/svg","g");P.setAttributeNS(null,"transform","translate(3.0, 29.0)"),P.setAttributeNS(null,"fill","#000000");const M=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const me of M){const ye=O.createNS("http://www.w3.org/2000/svg","ellipse");ye.setAttributeNS(null,"opacity","0.04"),ye.setAttributeNS(null,"cx","10.5"),ye.setAttributeNS(null,"cy","5.80029008"),ye.setAttributeNS(null,"rx",me.rx),ye.setAttributeNS(null,"ry",me.ry),P.appendChild(ye)}const B=O.createNS("http://www.w3.org/2000/svg","g");B.setAttributeNS(null,"fill",this._color);const $=O.createNS("http://www.w3.org/2000/svg","path");$.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),B.appendChild($);const U=O.createNS("http://www.w3.org/2000/svg","g");U.setAttributeNS(null,"opacity","0.25"),U.setAttributeNS(null,"fill","#000000");const X=O.createNS("http://www.w3.org/2000/svg","path");X.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),U.appendChild(X);const ee=O.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const ne=O.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const le=O.createNS("http://www.w3.org/2000/svg","circle");le.setAttributeNS(null,"fill","#000000"),le.setAttributeNS(null,"opacity","0.25"),le.setAttributeNS(null,"cx","5.5"),le.setAttributeNS(null,"cy","5.5"),le.setAttributeNS(null,"r","5.4999962");const ue=O.createNS("http://www.w3.org/2000/svg","circle");ue.setAttributeNS(null,"fill","#FFFFFF"),ue.setAttributeNS(null,"cx","5.5"),ue.setAttributeNS(null,"cy","5.5"),ue.setAttributeNS(null,"r","5.4999962"),ne.appendChild(le),ne.appendChild(ue),T.appendChild(P),T.appendChild(B),T.appendChild(U),T.appendChild(ee),T.appendChild(ne),o.appendChild(T),o.setAttributeNS(null,"height",p*this._scale+"px"),o.setAttributeNS(null,"width",m*this._scale+"px"),this._element.appendChild(o),this._offset=d.P.convert(e&&e.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(o=>{o.preventDefault()})),this._element.addEventListener("mousedown",(o=>{o.preventDefault()})),Ma(this._element,this._anchor,"marker"),e&&e.className)for(const o of e.className.split(" "))this._element.classList.add(o);this._popup=null}addTo(e){return this.remove(),this._map=e,this._element.setAttribute("aria-label",e._getUIString("Marker.Title")),e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),e.on("terrain",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(e){return this._lngLat=d.N.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(e){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),e){if(!("offset"in e.options)){const m=Math.abs(13.5)/Math.SQRT2;e.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[m,-1*(38.1-13.5+m)],"bottom-right":[-m,-1*(38.1-13.5+m)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=e,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(e){return this._subpixelPositioning=e,this}getPopup(){return this._popup}togglePopup(){const e=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:e?(e.isOpen()?e.remove():(e.setLngLat(this._lngLat),e.addTo(this._map)),this):this}_updateOpacity(e=!1){var o,p;if(!(!((o=this._map)===null||o===void 0)&&o.terrain))return void(this._element.style.opacity!==this._opacity&&(this._element.style.opacity=this._opacity));if(e)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const m=this._map,y=m.terrain.depthAtPoint(this._pos),T=m.terrain.getElevationForLngLatZoom(this._lngLat,m.transform.tileZoom);if(m.transform.lngLatToCameraDepth(this._lngLat,T)-y<.006)return void(this._element.style.opacity=this._opacity);const P=-this._offset.y/m.transform._pixelPerMeter,M=Math.sin(m.getPitch()*Math.PI/180)*P,B=m.terrain.depthAtPoint(new d.P(this._pos.x,this._pos.y-this._offset.y)),$=m.transform.lngLatToCameraDepth(this._lngLat,T+M)-B>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&$&&this._popup.remove(),this._element.style.opacity=$?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(e){return this._offset=d.P.convert(e),this._update(),this}addClassName(e){this._element.classList.add(e)}removeClassName(e){this._element.classList.remove(e)}toggleClassName(e){return this._element.classList.toggle(e)}setDraggable(e){return this._draggable=!!e,this._map&&(e?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(e){return this._rotation=e||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(e){return this._rotationAlignment=e||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(e){return this._pitchAlignment=e&&e!=="auto"?e:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(e,o){return e===void 0&&o===void 0&&(this._opacity="1",this._opacityWhenCovered="0.2"),e!==void 0&&(this._opacity=e),o!==void 0&&(this._opacityWhenCovered=o),this._map&&this._updateOpacity(!0),this}}const nc={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let dl=0,hl=!1;const Kr={maxWidth:100,unit:"metric"};function pl(v,e,o){const p=o&&o.maxWidth||100,m=v._container.clientHeight/2,y=v.unproject([0,m]),T=v.unproject([p,m]),P=y.distanceTo(T);if(o&&o.unit==="imperial"){const M=3.2808*P;M>5280?Pt(e,p,M/5280,v._getUIString("ScaleControl.Miles")):Pt(e,p,M,v._getUIString("ScaleControl.Feet"))}else o&&o.unit==="nautical"?Pt(e,p,P/1852,v._getUIString("ScaleControl.NauticalMiles")):P>=1e3?Pt(e,p,P/1e3,v._getUIString("ScaleControl.Kilometers")):Pt(e,p,P,v._getUIString("ScaleControl.Meters"))}function Pt(v,e,o,p){const m=(function(y){const T=Math.pow(10,`${Math.floor(y)}`.length-1);let P=y/T;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:P>=1?1:(function(M){const B=Math.pow(10,Math.ceil(-Math.log(M)/Math.LN10));return Math.round(M*B)/B})(P),T*P})(o);v.style.width=e*(m/o)+"px",v.innerHTML=`${m}&nbsp;${p}`}const qt={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1},ml=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function ac(v){if(v){if(typeof v=="number"){const e=Math.round(Math.abs(v)/Math.SQRT2);return{center:new d.P(0,0),top:new d.P(0,v),"top-left":new d.P(e,e),"top-right":new d.P(-e,e),bottom:new d.P(0,-v),"bottom-left":new d.P(e,-e),"bottom-right":new d.P(-e,-e),left:new d.P(v,0),right:new d.P(-v,0)}}if(v instanceof d.P||Array.isArray(v)){const e=d.P.convert(v);return{center:e,top:e,"top-left":e,"top-right":e,bottom:e,"bottom-left":e,"bottom-right":e,left:e,right:e}}return{center:d.P.convert(v.center||[0,0]),top:d.P.convert(v.top||[0,0]),"top-left":d.P.convert(v["top-left"]||[0,0]),"top-right":d.P.convert(v["top-right"]||[0,0]),bottom:d.P.convert(v.bottom||[0,0]),"bottom-left":d.P.convert(v["bottom-left"]||[0,0]),"bottom-right":d.P.convert(v["bottom-right"]||[0,0]),left:d.P.convert(v.left||[0,0]),right:d.P.convert(v.right||[0,0])}}return ac(new d.P(0,0))}const Uu=I;_.AJAXError=d.bh,_.Evented=d.E,_.LngLat=d.N,_.MercatorCoordinate=d.Z,_.Point=d.P,_.addProtocol=d.bi,_.config=d.a,_.removeProtocol=d.bj,_.AttributionControl=ra,_.BoxZoomHandler=Dr,_.CanvasSource=fr,_.CooperativeGesturesHandler=ul,_.DoubleClickZoomHandler=Pa,_.DragPanHandler=Xc,_.DragRotateHandler=eh,_.EdgeInsets=Mo,_.FullscreenControl=class extends d.E{constructor(v={}){super(),this._onFullscreenChange=()=>{var e;let o=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((e=o?.shadowRoot)===null||e===void 0)&&e.fullscreenElement;)o=o.shadowRoot.fullscreenElement;o===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:d.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const v=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.title=v}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new d.k("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new d.k("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},_.GeoJSONSource=dn,_.GeolocateControl=class extends d.E{constructor(v){super(),this._onSuccess=e=>{if(this._map){if(this._isOutOfMapMaxBounds(e))return this._setErrorState(),this.fire(new d.k("outofmaxbounds",e)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(e),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new d.k("geolocate",e)),this._finish()}},this._updateCamera=e=>{const o=new d.N(e.coords.longitude,e.coords.latitude),p=e.coords.accuracy,m=this._map.getBearing(),y=d.e({bearing:m},this.options.fitBoundsOptions),T=Oe.fromLngLat(o,p);this._map.fitBounds(T,y,{geolocateSource:!0})},this._updateMarker=e=>{if(e){const o=new d.N(e.coords.longitude,e.coords.latitude);this._accuracyCircleMarker.setLngLat(o).addTo(this._map),this._userLocationDotMarker.setLngLat(o).addTo(this._map),this._accuracy=e.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=e=>{if(this._map){if(this.options.trackUserLocation)if(e.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(e.code===3&&hl)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new d.k("error",e)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=e=>{if(this._map){if(e===!1){d.w("Geolocation support is not available so the GeolocateControl will be disabled.");const o=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}else{const o=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=o,this._geolocateButton.setAttribute("aria-label",o)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new er({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new er({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(o=>{o.geolocateSource||this._watchState!=="ACTIVE_LOCK"||o.originalEvent&&o.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new d.k("trackuserlocationend")),this.fire(new d.k("userlocationlostfocus")))}))}},this.options=d.e({},nc,v)}onAdd(v){return this._map=v,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return d._(this,arguments,void 0,(function*(e=!1){if(Vi!==void 0&&!e)return Vi;if(window.navigator.permissions===void 0)return Vi=!!window.navigator.geolocation,Vi;try{Vi=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{Vi=!!window.navigator.geolocation}return Vi}))})().then((e=>this._finishSetupUI(e))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,dl=0,hl=!1}_isOutOfMapMaxBounds(v){const e=this._map.getMaxBounds(),o=v.coords;return e&&(o.longitude<e.getWest()||o.longitude>e.getEast()||o.latitude<e.getSouth()||o.latitude>e.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const v=this._map.getBounds(),e=v.getSouthEast(),o=v.getNorthEast(),p=e.distanceTo(o),m=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${m}px`,this._circleElement.style.height=`${m}px`}trigger(){if(!this._setup)return d.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new d.k("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":dl--,hl=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new d.k("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new d.k("trackuserlocationstart")),this.fire(new d.k("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),dl++,dl>1?(v={maximumAge:6e5,timeout:0},hl=!0):(v=this.options.positionOptions,hl=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},_.Hash=Wc,_.ImageSource=Js,_.KeyboardHandler=fn,_.LngLatBounds=Oe,_.LogoControl=Bn,_.Map=class extends Do{constructor(v){d.bf.mark(d.bg.create);const e=Object.assign(Object.assign({},eo),v);if(e.minZoom!=null&&e.maxZoom!=null&&e.minZoom>e.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(e.minPitch!=null&&e.maxPitch!=null&&e.minPitch>e.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(e.minPitch!=null&&e.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(e.maxPitch!=null&&e.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(super(new Ja(e.minZoom,e.maxZoom,e.minPitch,e.maxPitch,e.renderWorldCopies),{bearingSnap:e.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new wi,this._controls=[],this._mapId=d.a4(),this._contextLost=o=>{o.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new d.k("webglcontextlost",{originalEvent:o}))},this._contextRestored=o=>{this._setupPainter(),this.resize(),this._update(),this.fire(new d.k("webglcontextrestored",{originalEvent:o}))},this._onMapScroll=o=>{if(o.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=e.interactive,this._maxTileCacheSize=e.maxTileCacheSize,this._maxTileCacheZoomLevels=e.maxTileCacheZoomLevels,this._failIfMajorPerformanceCaveat=e.failIfMajorPerformanceCaveat===!0,this._preserveDrawingBuffer=e.preserveDrawingBuffer===!0,this._antialias=e.antialias===!0,this._trackResize=e.trackResize===!0,this._bearingSnap=e.bearingSnap,this._refreshExpiredTiles=e.refreshExpiredTiles===!0,this._fadeDuration=e.fadeDuration,this._crossSourceCollisions=e.crossSourceCollisions===!0,this._collectResourceTiming=e.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},rc),e.locale),this._clickTolerance=e.clickTolerance,this._overridePixelRatio=e.pixelRatio,this._maxCanvasSize=e.maxCanvasSize,this.transformCameraUpdate=e.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=e.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=Ie.addThrottleControl((()=>this.isMoving())),this._requestManager=new Ze(e.transformRequest),typeof e.container=="string"){if(this._container=document.getElementById(e.container),!this._container)throw new Error(`Container '${e.container}' not found.`)}else{if(!(e.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=e.container}if(e.maxBounds&&this.setMaxBounds(e.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))).on("moveend",(()=>this._update(!1))).on("zoom",(()=>this._update(!0))).on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})).once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let o=!1;const p=Yl((m=>{this._trackResize&&!this._removed&&(this.resize(m),this.redraw())}),50);this._resizeObserver=new ResizeObserver((m=>{o?p(m):o=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Jc(this,e),this._hash=e.hash&&new Wc(typeof e.hash=="string"&&e.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:e.center,zoom:e.zoom,bearing:e.bearing,pitch:e.pitch}),e.bounds&&(this.resize(),this.fitBounds(e.bounds,d.e({},e.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=e.localIdeographFontFamily,this._validateStyle=e.validateStyle,e.style&&this.setStyle(e.style,{localIdeographFontFamily:e.localIdeographFontFamily}),e.attributionControl&&this.addControl(new ra(typeof e.attributionControl=="boolean"?void 0:e.attributionControl)),e.maplibreLogo&&this.addControl(new Bn,e.logoPosition),this.on("style.load",(()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)})),this.on("data",(o=>{this._update(o.dataType==="style"),this.fire(new d.k(`${o.dataType}data`,o))})),this.on("dataloading",(o=>{this.fire(new d.k(`${o.dataType}dataloading`,o))})),this.on("dataabort",(o=>{this.fire(new d.k("sourcedataabort",o))}))}_getMapId(){return this._mapId}addControl(v,e){if(e===void 0&&(e=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new d.j(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const o=v.onAdd(this);this._controls.push(v);const p=this._controlPositions[e];return e.indexOf("bottom")!==-1?p.insertBefore(o,p.firstChild):p.appendChild(o),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new d.j(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const e=this._controls.indexOf(v);return e>-1&&this._controls.splice(e,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}calculateCameraOptionsFromTo(v,e,o,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(o,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(v,e,o,p)}resize(v){var e;const o=this._containerDimensions(),p=o[0],m=o[1],y=this._getClampedPixelRatio(p,m);if(this._resizeCanvas(p,m,y),this.painter.resize(p,m,y),this.painter.overLimit()){const P=this.painter.context.gl;this._maxCanvasSize=[P.drawingBufferWidth,P.drawingBufferHeight];const M=this._getClampedPixelRatio(p,m);this._resizeCanvas(p,m,M),this.painter.resize(p,m,M)}this.transform.resize(p,m),(e=this._requestedCameraState)===null||e===void 0||e.resize(p,m);const T=!this._moving;return T&&(this.stop(),this.fire(new d.k("movestart",v)).fire(new d.k("move",v))),this.fire(new d.k("resize",v)),T&&this.fire(new d.k("moveend",v)),this}_getClampedPixelRatio(v,e){const{0:o,1:p}=this._maxCanvasSize,m=this.getPixelRatio(),y=v*m,T=e*m;return Math.min(y>o?o/y:1,T>p?p/T:1)*m}getPixelRatio(){var v;return(v=this._overridePixelRatio)!==null&&v!==void 0?v:devicePixelRatio}setPixelRatio(v){this._overridePixelRatio=v,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(v){return this.transform.setMaxBounds(Oe.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v&&this.setZoom(v),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v&&this.setZoom(v),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v&&this.setPitch(v),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??60)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v&&this.setPitch(v),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this._update()}project(v){return this.transform.locationPoint(d.N.convert(v),this.style&&this.terrain)}unproject(v){return this.transform.pointLocation(d.P.convert(v),this.terrain)}isMoving(){var v;return this._moving||((v=this.handlers)===null||v===void 0?void 0:v.isMoving())}isZooming(){var v;return this._zooming||((v=this.handlers)===null||v===void 0?void 0:v.isZooming())}isRotating(){var v;return this._rotating||((v=this.handlers)===null||v===void 0?void 0:v.isRotating())}_createDelegatedListener(v,e,o){if(v==="mouseenter"||v==="mouseover"){let p=!1;return{layers:e,listener:o,delegates:{mousemove:y=>{const T=e.filter((M=>this.getLayer(M))),P=T.length!==0?this.queryRenderedFeatures(y.point,{layers:T}):[];P.length?p||(p=!0,o.call(this,new Qs(v,this,y.originalEvent,{features:P}))):p=!1},mouseout:()=>{p=!1}}}}if(v==="mouseleave"||v==="mouseout"){let p=!1;return{layers:e,listener:o,delegates:{mousemove:T=>{const P=e.filter((M=>this.getLayer(M)));(P.length!==0?this.queryRenderedFeatures(T.point,{layers:P}):[]).length?p=!0:p&&(p=!1,o.call(this,new Qs(v,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,o.call(this,new Qs(v,this,T.originalEvent)))}}}}{const p=m=>{const y=e.filter((P=>this.getLayer(P))),T=y.length!==0?this.queryRenderedFeatures(m.point,{layers:y}):[];T.length&&(m.features=T,o.call(this,m),delete m.features)};return{layers:e,listener:o,delegates:{[v]:p}}}}_saveDelegatedListener(v,e){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(e)}_removeDelegatedListener(v,e,o){if(!this._delegatedListeners||!this._delegatedListeners[v])return;const p=this._delegatedListeners[v];for(let m=0;m<p.length;m++){const y=p[m];if(y.listener===o&&y.layers.length===e.length&&y.layers.every((T=>e.includes(T)))){for(const T in y.delegates)this.off(T,y.delegates[T]);return void p.splice(m,1)}}}on(v,e,o){if(o===void 0)return super.on(v,e);const p=this._createDelegatedListener(v,typeof e=="string"?[e]:e,o);this._saveDelegatedListener(v,p);for(const m in p.delegates)this.on(m,p.delegates[m]);return this}once(v,e,o){if(o===void 0)return super.once(v,e);const p=typeof e=="string"?[e]:e,m=this._createDelegatedListener(v,p,o);for(const y in m.delegates){const T=m.delegates[y];m.delegates[y]=(...P)=>{this._removeDelegatedListener(v,p,o),T(...P)}}this._saveDelegatedListener(v,m);for(const y in m.delegates)this.once(y,m.delegates[y]);return this}off(v,e,o){return o===void 0?super.off(v,e):(this._removeDelegatedListener(v,typeof e=="string"?[e]:e,o),this)}queryRenderedFeatures(v,e){if(!this.style)return[];let o;const p=v instanceof d.P||Array.isArray(v),m=p?v:[[0,0],[this.transform.width,this.transform.height]];if(e=e||(p?{}:v)||{},m instanceof d.P||typeof m[0]=="number")o=[d.P.convert(m)];else{const y=d.P.convert(m[0]),T=d.P.convert(m[1]);o=[y,new d.P(T.x,y.y),T,new d.P(y.x,T.y),y]}return this.style.queryRenderedFeatures(o,e,this.transform)}querySourceFeatures(v,e){return this.style.querySourceFeatures(v,e)}setStyle(v,e){return(e=d.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},e)).diff!==!1&&e.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&v?(this._diffStyle(v,e),this):(this._localIdeographFontFamily=e.localIdeographFontFamily,this._updateStyle(v,e))}setTransformRequest(v){return this._requestManager.setTransformRequest(v),this}_getUIString(v){const e=this._locale[v];if(e==null)throw new Error(`Missing UI string '${v}'`);return e}_updateStyle(v,e){if(e.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(v,e)));const o=this.style&&e.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!v)),v?(this.style=new Pc(this,e||{}),this.style.setEventedParent(this,{style:this.style}),typeof v=="string"?this.style.loadURL(v,e,o):this.style.loadJSON(v,e,o),this):(delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Pc(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(v,e){if(typeof v=="string"){const o=this._requestManager.transformRequest(v,"Style");d.h(o,new AbortController).then((p=>{this._updateDiff(p.data,e)})).catch((p=>{p&&this.fire(new d.j(p))}))}else typeof v=="object"&&this._updateDiff(v,e)}_updateDiff(v,e){try{this.style.setState(v,e)&&this._update(!0)}catch(o){d.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(v,e)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():d.w("There is no style added to the map.")}addSource(v,e){return this._lazyInitEmptyStyle(),this.style.addSource(v,e),this._update(!0)}isSourceLoaded(v){const e=this.style&&this.style.sourceCaches[v];if(e!==void 0)return e.loaded();this.fire(new d.j(new Error(`There is no source with ID '${v}'`)))}setTerrain(v){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),v){const e=this.style.sourceCaches[v.source];if(!e)throw new Error(`cannot load terrain, because there exists no source with ID: ${v.source}`);this.terrain===null&&e.reload();for(const o in this.style._layers){const p=this.style._layers[o];p.type==="hillshade"&&p.source===v.source&&d.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ea(this.painter,e,v),this.painter.renderToTexture=new sc(this.painter,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._terrainDataCallback=o=>{o.dataType==="style"?this.terrain.sourceCache.freeRtt():o.dataType==="source"&&o.tile&&(o.sourceId!==v.source||this._elevationFreeze||(this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.terrain.sourceCache.freeRtt(o.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.minElevationForCurrentTile=0,this.transform.elevation=0;return this.fire(new d.k("terrain",{terrain:v})),this}getTerrain(){var v,e;return(e=(v=this.terrain)===null||v===void 0?void 0:v.options)!==null&&e!==void 0?e:null}areTilesLoaded(){const v=this.style&&this.style.sourceCaches;for(const e in v){const o=v[e]._tiles;for(const p in o){const m=o[p];if(m.state!=="loaded"&&m.state!=="errored")return!1}}return!0}removeSource(v){return this.style.removeSource(v),this._update(!0)}getSource(v){return this.style.getSource(v)}addImage(v,e,o={}){const{pixelRatio:p=1,sdf:m=!1,stretchX:y,stretchY:T,content:P,textFitWidth:M,textFitHeight:B}=o;if(this._lazyInitEmptyStyle(),!(e instanceof HTMLImageElement||d.b(e))){if(e.width===void 0||e.height===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:$,height:U,data:X}=e,ee=e;return this.style.addImage(v,{data:new d.R({width:$,height:U},new Uint8Array(X)),pixelRatio:p,stretchX:y,stretchY:T,content:P,textFitWidth:M,textFitHeight:B,sdf:m,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,v),this}}{const{width:$,height:U,data:X}=D.getImageData(e);this.style.addImage(v,{data:new d.R({width:$,height:U},X),pixelRatio:p,stretchX:y,stretchY:T,content:P,textFitWidth:M,textFitHeight:B,sdf:m,version:0})}}updateImage(v,e){const o=this.style.getImage(v);if(!o)return this.fire(new d.j(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=e instanceof HTMLImageElement||d.b(e)?D.getImageData(e):e,{width:m,height:y,data:T}=p;if(m===void 0||y===void 0)return this.fire(new d.j(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(m!==o.data.width||y!==o.data.height)return this.fire(new d.j(new Error("The width and height of the updated image must be that same as the previous version of the image")));const P=!(e instanceof HTMLImageElement||d.b(e));return o.data.replace(T,P),this.style.updateImage(v,o),this}getImage(v){return this.style.getImage(v)}hasImage(v){return v?!!this.style.getImage(v):(this.fire(new d.j(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v){return Ie.getImage(this._requestManager.transformRequest(v,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(v,e){return this._lazyInitEmptyStyle(),this.style.addLayer(v,e),this._update(!0)}moveLayer(v,e){return this.style.moveLayer(v,e),this._update(!0)}removeLayer(v){return this.style.removeLayer(v),this._update(!0)}getLayer(v){return this.style.getLayer(v)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(v,e,o){return this.style.setLayerZoomRange(v,e,o),this._update(!0)}setFilter(v,e,o={}){return this.style.setFilter(v,e,o),this._update(!0)}getFilter(v){return this.style.getFilter(v)}setPaintProperty(v,e,o,p={}){return this.style.setPaintProperty(v,e,o,p),this._update(!0)}getPaintProperty(v,e){return this.style.getPaintProperty(v,e)}setLayoutProperty(v,e,o,p={}){return this.style.setLayoutProperty(v,e,o,p),this._update(!0)}getLayoutProperty(v,e){return this.style.getLayoutProperty(v,e)}setGlyphs(v,e={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(v,e),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(v,e,o={}){return this._lazyInitEmptyStyle(),this.style.addSprite(v,e,o,(p=>{p||this._update(!0)})),this}removeSprite(v){return this._lazyInitEmptyStyle(),this.style.removeSprite(v),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(v,e={}){return this._lazyInitEmptyStyle(),this.style.setSprite(v,e,(o=>{o||this._update(!0)})),this}setLight(v,e={}){return this._lazyInitEmptyStyle(),this.style.setLight(v,e),this._update(!0)}getLight(){return this.style.getLight()}setSky(v){return this._lazyInitEmptyStyle(),this.style.setSky(v),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(v,e){return this.style.setFeatureState(v,e),this._update()}removeFeatureState(v,e){return this.style.removeFeatureState(v,e),this._update()}getFeatureState(v){return this.style.getFeatureState(v)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let v=0,e=0;return this._container&&(v=this._container.clientWidth||400,e=this._container.clientHeight||300),[v,e]}_setupContainer(){const v=this._container;v.classList.add("maplibregl-map");const e=this._canvasContainer=O.create("div","maplibregl-canvas-container",v);this._interactive&&e.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",e),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const o=this._containerDimensions(),p=this._getClampedPixelRatio(o[0],o[1]);this._resizeCanvas(o[0],o[1],p);const m=this._controlContainer=O.create("div","maplibregl-control-container",v),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((T=>{y[T]=O.create("div",`maplibregl-ctrl-${T} `,m)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,e,o){this._canvas.width=Math.floor(o*v),this._canvas.height=Math.floor(o*e),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${e}px`}_setupPainter(){const v={alpha:!0,stencil:!0,depth:!0,failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1};let e=null;this._canvas.addEventListener("webglcontextcreationerror",(p=>{e={requestedAttributes:v},p&&(e.statusMessage=p.statusMessage,e.type=p.type)}),{once:!0});const o=this._canvas.getContext("webgl2",v)||this._canvas.getContext("webgl",v);if(!o){const p="Failed to initialize WebGL";throw e?(e.message=p,new Error(JSON.stringify(e))):new Error(p)}this.painter=new Ya(o,this.transform),ie.testSupport(o)}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(v){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_render(v){const e=this._idleTriggered?this._fadeDuration:0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(v),this._removed)return;let o=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const m=this.transform.zoom,y=D.now();this.style.zoomHistory.update(m,y);const T=new d.z(m,{now:y,fadeDuration:e,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),P=T.crossFadingFactor();P===1&&P===this._crossFadingFactor||(o=!0,this._crossFadingFactor=P),this.style.update(T)}this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.minElevationForCurrentTile=this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom),this._elevationFreeze||(this.transform.elevation=this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.minElevationForCurrentTile=0,this.transform.elevation=0),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,e,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:e,showPadding:this.showPadding}),this.fire(new d.k("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,d.bf.mark(d.bg.load),this.fire(new d.k("load"))),this.style&&(this.style.hasTransitions()||o)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const p=this._sourcesDirty||this._styleDirty||this._placementDirty;return p||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new d.k("idle")),!this._loaded||this._fullyLoaded||p||(this._fullyLoaded=!0,d.bf.mark(d.bg.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var v;this._hash&&this._hash.remove();for(const o of this._controls)o.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),Ie.removeThrottleControl(this._imageQueueHandle),(v=this._resizeObserver)===null||v===void 0||v.disconnect();const e=this.painter.context.gl.getExtension("WEBGL_lose_context");e?.loseContext&&e.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.classList.remove("maplibregl-map"),d.bf.clearMetrics(),this._removed=!0,this.fire(new d.k("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,D.frameAsync(this._frameRequest).then((v=>{d.bf.frame(v),this._frameRequest=null,this._render(v)})).catch((()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get version(){return Ro}getCameraTargetElevation(){return this.transform.elevation}},_.MapMouseEvent=Qs,_.MapTouchEvent=ia,_.MapWheelEvent=Ru,_.Marker=er,_.NavigationControl=class{constructor(v){this._updateZoomButtons=()=>{const e=this._map.getZoom(),o=e===this._map.getMaxZoom(),p=e===this._map.getMinZoom();this._zoomInButton.disabled=o,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",o.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{const e=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${this._map.transform.angle*(180/Math.PI)}deg)`:`rotate(${this._map.transform.angle*(180/Math.PI)}deg)`;this._compassIcon.style.transform=e},this._setButtonTitle=(e,o)=>{const p=this._map._getUIString(`NavigationControl.${o}`);e.title=p,e.setAttribute("aria-label",p)},this.options=d.e({},Ji,v),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(e=>e.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(e=>this._map.zoomIn({},{originalEvent:e}))),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(e=>this._map.zoomOut({},{originalEvent:e}))),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(e=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:e}):this._map.resetNorth({},{originalEvent:e})})),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new to(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(v,e){const o=O.create("button",v,this._container);return o.type="button",o.addEventListener("click",e),o}},_.Popup=class extends d.E{constructor(v){super(),this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new d.k("close"))),this),this._onMouseUp=e=>{this._update(e.point)},this._onMouseMove=e=>{this._update(e.point)},this._onDrag=e=>{this._update(e.point)},this._update=e=>{var o;if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const P of this.options.className.split(" "))this._container.classList.add(P);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=this._map.transform.renderWorldCopies&&!this._trackPointer?bi(this._lngLat,this._flatPos,this._map.transform):(o=this._lngLat)===null||o===void 0?void 0:o.wrap(),this._trackPointer&&!e)return;const p=this._flatPos=this._pos=this._trackPointer&&e?e:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&e?e:this._map.transform.locationPoint(this._lngLat));let m=this.options.anchor;const y=ac(this.options.offset);if(!m){const P=this._container.offsetWidth,M=this._container.offsetHeight;let B;B=p.y+y.bottom.y<M?["top"]:p.y>this._map.transform.height-M?["bottom"]:[],p.x<P/2?B.push("left"):p.x>this._map.transform.width-P/2&&B.push("right"),m=B.length===0?"bottom":B.join("-")}let T=p.add(y[m]);this.options.subpixelPositioning||(T=T.round()),O.setTransform(this._container,`${xn[m]} translate(${T.x}px,${T.y}px)`),Ma(this._container,m,"popup")},this._onClose=()=>{this.remove()},this.options=d.e(Object.create(qt),v)}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new d.k("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(v){return this._lngLat=d.N.convert(v),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const e=document.createDocumentFragment(),o=document.createElement("body");let p;for(o.innerHTML=v;p=o.firstChild,p;)e.appendChild(p);return this.setDOMContent(e)}getMaxWidth(){var v;return(v=this._container)===null||v===void 0?void 0:v.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(v){return this._container&&this._container.classList.add(v),this}removeClassName(v){return this._container&&this._container.classList.remove(v),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){if(this._container)return this._container.classList.toggle(v)}setSubpixelPositioning(v){this.options.subpixelPositioning=v}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(ml);v&&v.focus()}},_.RasterDEMTileSource=Fi,_.RasterTileSource=hi,_.ScaleControl=class{constructor(v){this._onMove=()=>{pl(this._map,this._container,this.options)},this.setUnit=e=>{this.options.unit=e,pl(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Kr),v)}getDefaultPosition(){return"bottom-left"}onAdd(v){return this._map=v,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",v.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},_.ScrollZoomHandler=Rr,_.Style=Pc,_.TerrainControl=class{constructor(v){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=v}onAdd(v){return this._map=v,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},_.TwoFingersTouchPitchHandler=ll,_.TwoFingersTouchRotateHandler=ol,_.TwoFingersTouchZoomHandler=tc,_.TwoFingersTouchZoomRotateHandler=Yc,_.VectorTileSource=ma,_.VideoSource=fa,_.addSourceType=(v,e)=>d._(void 0,void 0,void 0,(function*(){if(ga(v))throw new Error(`A source type called "${v}" already exists.`);((o,p)=>{Mn[o]=p})(v,e)})),_.clearPrewarmedResources=function(){const v=Ot;v&&(v.isPreloaded()&&v.numActive()===1?(v.release(_t),Ot=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},_.getMaxParallelImageRequests=function(){return d.a.MAX_PARALLEL_IMAGE_REQUESTS},_.getRTLTextPluginStatus=function(){return Ks().getRTLTextPluginStatus()},_.getVersion=function(){return Uu},_.getWorkerCount=function(){return zt.workerCount},_.getWorkerUrl=function(){return d.a.WORKER_URL},_.importScriptInWorkers=function(v){return Ys().broadcast("IS",v)},_.prewarm=function(){xi().acquire(_t)},_.setMaxParallelImageRequests=function(v){d.a.MAX_PARALLEL_IMAGE_REQUESTS=v},_.setRTLTextPlugin=function(v,e){return Ks().setRTLTextPlugin(v,e)},_.setWorkerCount=function(v){zt.workerCount=v},_.setWorkerUrl=function(v){d.a.WORKER_URL=v}}));var k=h;return k}))})(If)),If.exports}var Eb=bP();const Mb=Bx(Eb),jP=Kb({__proto__:null,default:Mb},[Eb]),Jg=[{id:"netarhat",name:"Netarhat - Queen of Chotanagpur",coordinates:[84.2609,23.467],type:"nature",rating:4.8,difficulty:"Moderate",highlights:["Sunrise Point","Pine Forests","Magnolia Point","Tribal Villages"],description:'The "Queen of Chotanagpur" offers breathtaking sunrise views, dense pine forests, and serene natural beauty.',bestTime:"October to March",duration:"2-3 days",price:"₹8,500",image:"🌄"},{id:"hundru-falls",name:"Hundru Falls",coordinates:[85.5897,23.421],type:"adventure",rating:4.6,difficulty:"Challenging",highlights:["320ft Waterfall","Rock Climbing","Trekking Trails","Photography"],description:"A spectacular 320-foot waterfall perfect for adventure enthusiasts and nature photographers.",bestTime:"July to February",duration:"1-2 days",price:"₹4,500",image:"💦"},{id:"betla-national-park",name:"Betla National Park",coordinates:[84.1892,23.8738],type:"nature",rating:4.9,difficulty:"Easy",highlights:["Tiger Safari","Elephant Spotting","Bird Watching","Nature Trails"],description:"Home to Bengal tigers, Asian elephants, and diverse wildlife in pristine forest settings.",bestTime:"November to May",duration:"3-4 days",price:"₹12,000",image:"🐅"},{id:"deoghar",name:"Deoghar - Sacred Land",coordinates:[86.6908,24.4847],type:"spiritual",rating:4.7,difficulty:"Easy",highlights:["Baidyanath Temple","Sacred Shravan Month","Spiritual Ceremonies","Cultural Heritage"],description:"One of the 12 Jyotirlingas, this sacred destination attracts millions of devotees annually.",bestTime:"October to March",duration:"2-3 days",price:"₹6,000",image:"🕉️"},{id:"patratu-valley",name:"Patratu Valley",coordinates:[84.9294,23.6693],type:"adventure",rating:4.5,difficulty:"Moderate",highlights:["Valley Views","Boating","Sunset Point","Adventure Sports"],description:"A stunning valley offering panoramic views, water sports, and adventure activities.",bestTime:"October to April",duration:"1-2 days",price:"₹5,500",image:"🏞️"}];function zy({selectedDestination:a,onDestinationSelect:l,showAllDestinations:h=!0,height:x="500px",interactive:j=!0,styleVariant:k="dark",category:_="all",textColorClass:d="text-white"}){const I=G.useRef(null),[z,R]=G.useState(null),[D,O]=G.useState(null),[ie,Q]=G.useState(!0),[ae,se]=G.useState(k),[pe,Pe]=G.useState(""),[Ie,Ze]=G.useState(null),Je=G.useMemo(()=>({longitude:85.5,latitude:23.6,zoom:7.2}),[]),Xe=G.useMemo(()=>{let Ve=Jg;return _&&_!=="all"&&(_==="wildlife"?Ve=Ve.filter(at=>at.highlights.some(Tt=>/(Tiger|Elephant|Wildlife)/i.test(Tt))):_==="culture"?Ve=Ve.filter(at=>at.type==="cultural"):Ve=Ve.filter(at=>at.type===_)),!h&&a&&(Ve=Ve.filter(at=>at.id===a)),Ve},[h,a,_]),ut=Ve=>{switch(Ve){case"nature":return"🌿";case"cultural":return"🎭";case"adventure":return"🏔️";case"spiritual":return"🕉️";default:return"📍"}},je=Ve=>{switch(Ve){case"nature":return"from-green-400 to-emerald-500";case"cultural":return"from-purple-400 to-pink-500";case"adventure":return"from-orange-400 to-red-500";case"spiritual":return"from-yellow-400 to-orange-500";default:return"from-blue-400 to-indigo-500"}},Ae=G.useCallback(Ve=>{I.current&&I.current.flyTo({center:Ve.coordinates,zoom:9.5,duration:1400,essential:!0})},[]),He=Ve=>{O(Ve),Ae(Ve),l?.(Ve)};G.useEffect(()=>{if(a){const Ve=Jg.find(at=>at.id===a);Ve&&(O(Ve),Ae(Ve))}},[a,Ae]);const ct=G.useMemo(()=>({version:8,sources:{osm:{type:"raster",tiles:["https://tile.openstreetmap.org/{z}/{x}/{y}.png"],tileSize:256,attribution:"© OpenStreetMap contributors"}},layers:[{id:"osm-base",type:"raster",source:"osm",paint:{"raster-saturation":ae==="dark"?-.35:0,"raster-brightness-min":ae==="dark"?.2:.9,"raster-brightness-max":ae==="dark"?.8:1.15,"raster-contrast":ae==="dark"?.35:.05,"raster-opacity":1}}]}),[ae]);G.useEffect(()=>{"geolocation"in navigator&&navigator.geolocation.getCurrentPosition(Ve=>Ze([Ve.coords.longitude,Ve.coords.latitude]),()=>{},{enableHighAccuracy:!0,timeout:8e3})},[]),G.useEffect(()=>{if(!I.current||D)return;const Ve=Jt;if(!Ve.length)return;if(Ve.length===1){I.current.flyTo({center:Ve[0].coordinates,zoom:9.5,duration:1e3});return}const at=Ve.map(it=>it.coordinates[0]),Tt=Ve.map(it=>it.coordinates[1]),Et=Math.min(...at),gt=Math.max(...at),Be=Math.min(...Tt),Nt=Math.max(...Tt);try{I.current.fitBounds([[Et,Be],[gt,Nt]],{padding:80,duration:1e3})}catch{}},[_,pe]);const Jt=G.useMemo(()=>{const Ve=pe.trim().toLowerCase();return Ve?Xe.filter(at=>at.name.toLowerCase().includes(Ve)||at.highlights.some(Tt=>Tt.toLowerCase().includes(Ve))):Xe},[Xe,pe]);return i.jsxs("div",{className:`relative w-full rounded-2xl overflow-hidden ring-1 ring-white/10 bg-white ${d}`,style:{height:x},children:[i.jsxs(yP,{ref:I,mapLib:Mb,initialViewState:Je,mapStyle:ct,style:{width:"100%",height:"100%",background:"#ffffff"},attributionControl:!1,interactive:j,children:[i.jsx(_P,{position:"bottom-right"}),Jt.map(Ve=>i.jsx(qv,{longitude:Ve.coordinates[0],latitude:Ve.coordinates[1],anchor:"bottom",onClick:at=>{at.originalEvent.stopPropagation(),He(Ve)},children:i.jsxs(re.div,{whileHover:{scale:1.15,y:-4},whileTap:{scale:.9},onHoverStart:()=>R(Ve.id),onHoverEnd:()=>R(null),className:`relative flex items-center justify-center w-10 h-10 rounded-2xl shadow-lg cursor-pointer transition-all duration-300 border border-white/20 ${D?.id===Ve.id?`bg-gradient-to-r ${je(Ve.type)} shadow-2xl`:"glass-dark hover:bg-white/10"}`,children:[i.jsx("span",{className:"text-xl leading-none",children:ut(Ve.type)}),i.jsx("div",{className:`absolute inset-0 rounded-2xl bg-gradient-to-r ${je(Ve.type)} opacity-20 animate-ping`})]})},Ve.id)),z&&!D&&(()=>{const Ve=Jg.find(at=>at.id===z);return Ve?i.jsx(vP,{longitude:Ve.coordinates[0],latitude:Ve.coordinates[1],anchor:"top",closeButton:!1,closeOnClick:!1,offset:25,className:"!p-0",children:i.jsxs("div",{className:"px-3 py-2 text-xs font-medium bg-white/90 backdrop-blur rounded-md shadow border border-black/10 text-black",children:[i.jsxs("div",{className:"flex items-center gap-1 text-amber-600 font-semibold",children:[i.jsx(Xs,{className:"w-3 h-3"})," ",Ve.rating]}),i.jsx("div",{className:"font-semibold leading-snug",children:Ve.name})]})}):null})(),Ie&&i.jsx(qv,{longitude:Ie[0],latitude:Ie[1],anchor:"bottom",children:i.jsx("div",{className:"w-3.5 h-3.5 rounded-full bg-sky-400 ring-4 ring-sky-400/30 shadow animate-pulse"})}),i.jsx("div",{className:"absolute bottom-1 left-2 z-10 text-[10px] opacity-70",children:"© OpenStreetMap • Aaranya"})]}),D&&i.jsx(re.div,{initial:{opacity:0,x:300},animate:{opacity:1,x:0},exit:{opacity:0,x:300},className:"absolute top-4 left-4 z-30 max-w-sm",children:i.jsxs("div",{className:"rounded-2xl p-6 text-black bg-white/95 backdrop-blur shadow-lg border border-black/10",children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsx("div",{className:"flex-1",children:i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("span",{className:"text-3xl",children:D.image}),i.jsxs("div",{children:[i.jsx("h3",{className:"font-bold text-lg text-gray-900",children:D.name}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600",children:[i.jsx(Xs,{className:"w-4 h-4 text-yellow-500 fill-current"}),i.jsx("span",{className:"font-medium",children:D.rating}),i.jsx("span",{className:"text-gray-400",children:"•"}),i.jsx("span",{className:"capitalize",children:D.type})]})]})]})}),i.jsx(re.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>O(null),className:"w-8 h-8 rounded-full flex items-center justify-center bg-black/5 hover:bg-black/10 transition-colors",children:"✕"})]}),i.jsx("p",{className:"text-sm text-gray-700 mb-4 leading-relaxed",children:D.description}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[i.jsxs("div",{className:"rounded-lg p-3 bg-emerald-50",children:[i.jsxs("div",{className:"flex items-center gap-2 text-emerald-600 mb-1",children:[i.jsx(Tc,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs font-medium",children:"Duration"})]}),i.jsx("span",{className:"text-sm text-emerald-800 font-medium",children:D.duration})]}),i.jsxs("div",{className:"rounded-lg p-3 bg-sky-50",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sky-600 mb-1",children:[i.jsx(En,{className:"w-4 h-4"}),i.jsx("span",{className:"text-xs font-medium",children:"Difficulty"})]}),i.jsx("span",{className:"text-sm text-sky-800 font-medium",children:D.difficulty})]})]}),i.jsxs("div",{className:"mb-4",children:[i.jsx("span",{className:"text-emerald-600 text-sm font-medium",children:"Highlights:"}),i.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:D.highlights.map((Ve,at)=>i.jsx("span",{className:"text-xs px-2 py-1 bg-gray-100 rounded-full text-gray-700 border border-gray-200",children:Ve},at))})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-2xl font-bold text-emerald-600",children:D.price}),i.jsx("span",{className:"text-xs text-gray-500 ml-1",children:"per person"})]}),i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>window.open(`/destinations/${D.id}`,"_blank"),className:"px-4 py-2 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl hover:shadow-lg transition-all duration-300 text-sm",children:"Explore"})]})]})}),h&&i.jsx(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},className:"absolute bottom-4 right-4 z-20",children:i.jsxs("div",{className:"bg-white rounded-xl p-4 shadow-md border border-gray-200",children:[i.jsx("h4",{className:"text-black font-bold text-sm mb-3",children:"Destination Types"}),i.jsx("div",{className:"space-y-2",children:[{type:"nature",icon:"🌿",label:"Nature & Wildlife"},{type:"adventure",icon:"🏔️",label:"Adventure Sports"},{type:"spiritual",icon:"🕉️",label:"Spiritual Sites"},{type:"cultural",icon:"🎭",label:"Cultural Heritage"}].map(Ve=>i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:Ve.icon}),i.jsx("span",{className:"text-xs text-black",children:Ve.label})]},Ve.type))})]})}),i.jsxs("div",{className:"absolute top-4 right-4 z-30 flex flex-col gap-3 items-end w-60 max-w-full",children:[i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>se(Ve=>Ve==="dark"?"light":"dark"),className:"px-3 py-2 text-xs rounded-lg bg-black/40 backdrop-blur text-white hover:bg-black/60 transition",title:"Toggle map style",children:ae==="dark"?"Light":"Dark"}),i.jsx("button",{onClick:()=>I.current?.flyTo({center:{lon:85.5,lat:23.6},zoom:7.2,duration:1200}),className:"px-3 py-2 text-xs rounded-lg bg-black/40 backdrop-blur text-white hover:bg-black/60 transition",title:"Reset view",children:"Reset"}),i.jsx("button",{onClick:()=>{Ie&&I.current?.flyTo({center:Ie,zoom:11,duration:1e3})},className:"px-3 py-2 text-xs rounded-lg bg-black/40 backdrop-blur text-white hover:bg-black/60 transition disabled:opacity-40",disabled:!Ie,title:"Go to my location",children:"Me"})]}),i.jsx("div",{className:"w-full",children:i.jsx("input",{value:pe,onChange:Ve=>Pe(Ve.target.value),placeholder:"Search destinations...",className:"w-full text-xs px-3 py-2 rounded-lg bg-white/90 text-black placeholder-gray-500 shadow focus:outline-none focus:ring-2 focus:ring-emerald-400"})}),pe&&i.jsxs("div",{className:"w-full text-[10px] text-white/70 text-right",children:[Jt.length," match",Jt.length!==1&&"es"]})]})]})}const Kg=[{id:1,name:"Netarhat",description:"Queen of Chotanagpur, known for mesmerizing sunsets and misty mornings",image:"https://images.unsplash.com/photo-1596688382656-a341e7deeeb6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb3VudGFpbiUyMGxhbmRzY2FwZSUyMHNjZW5pYyUyMHZpZXd8ZW58MXx8fHwxNzU2NTU5OTM5fDA&ixlib=rb-4.1.0&q=80&w=1080",position:{top:"25%",left:"30%"},highlights:["Hill Station","Sunset Point","Pine Forests"],category:"nature",rating:4.8,bestTime:"Oct - Mar",duration:"2-3 days",route:"/destinations/netarhat"},{id:2,name:"Hundru Falls",description:"Spectacular 320-meter waterfall cascading through rocky terrain",image:"https://images.unsplash.com/photo-1735567065045-97ba386867ad?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx3YXRlcmZhbGxzJTIwZm9yZXN0JTIwbmF0dXJlJTIwamhhcmtoYW5kfGVufDF8fHx8MTc1NjY3MjU5OXww&ixlib=rb-4.1.0&q=80&w=1080",position:{top:"60%",left:"45%"},highlights:["Waterfall","Trekking","Photography"],category:"adventure",rating:4.9,bestTime:"Jun - Nov",duration:"1-2 days",route:"/destinations/hundru-falls"},{id:3,name:"Betla National Park",description:"Rich wildlife sanctuary with tigers, elephants, and diverse flora",image:"https://images.unsplash.com/photo-1596688382656-a341e7deeeb6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHhtb3VudGFpbiUyMGxhbmRzY2FwZSUyMHNjZW5pYyUyMHZpZXd8ZW58MXx8fHwxNzU2NTU5OTM5fDA&ixlib=rb-4.1.0&q=80&w=1080",position:{top:"40%",left:"20%"},highlights:["Wildlife","Safari","Conservation"],category:"wildlife",rating:4.7,bestTime:"Nov - Apr",duration:"2-3 days",route:"/destinations/betla-national-park"},{id:4,name:"Deoghar",description:"Sacred temple town with spiritual significance and natural beauty",image:"https://images.unsplash.com/photo-1667115788157-72f063f2a7a3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0ZW1wbGUlMjBhcmNoaXRlY3R1cmUlMjBoZXJpdGFnZXxlbnwxfHx8fDE3NTY2NzI2MDB8MA&ixlib=rb-4.1.0&q=80&w=1080",position:{top:"20%",left:"65%"},highlights:["Temples","Spirituality","Heritage"],category:"spiritual",rating:4.6,bestTime:"Oct - Mar",duration:"2-3 days",route:"/destinations/deoghar"},{id:5,name:"Patratu Valley",description:"Serene valley with pristine lake surrounded by rolling hills",image:"https://images.unsplash.com/photo-1596688382656-a341e7deeeb6?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb3VudGFpbiUyMGxhbmRzY2FwZSUyMHNjZW5pYyUyMHZpZXd8ZW58MXx8fHwxNzU2NTU5OTM5fDA&ixlib=rb-4.1.0&q=80&w=1080",position:{top:"50%",left:"60%"},highlights:["Lake","Boating","Scenic Views"],category:"nature",rating:4.5,bestTime:"Sep - Mar",duration:"1-2 days",route:"/destinations/patratu-valley"},{id:6,name:"Dassam Falls",description:"Beautiful multi-tiered waterfall perfect for picnics and photography",image:"https://images.unsplash.com/photo-1735567065045-97ba386867ad?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx3YXRlcmZhbGxzJTIwZm9yZXN0JTIwbmF0dXJlJTIwamhhcmtoYW5kfGVufDF8fHx8MTc1NjY3MjU5OXww&ixlib=rb-4.1.0&q=80&w=1080",position:{top:"70%",left:"35%"},highlights:["Waterfall","Picnic Spot","Photography"],category:"adventure",rating:4.4,bestTime:"Jul - Dec",duration:"1 day",route:"#"}],NP=[{id:"all",name:"All Destinations",icon:"🗺️"},{id:"nature",name:"Nature",icon:"🌿"},{id:"adventure",name:"Adventure",icon:"🏔️"},{id:"wildlife",name:"Wildlife",icon:"🦌"},{id:"spiritual",name:"Spiritual",icon:"🕉️"}];function kP(){const[a,l]=G.useState(null),[h,x]=G.useState("all"),[j,k]=G.useState("map"),_=un(),d=h==="all"?Kg:Kg.filter(I=>I.category===h);return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-slate-900 to-black pt-24 pb-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:[i.jsx("span",{className:"text-[#18B668]",children:"Explore"}),i.jsx("span",{className:"text-white",children:" Destinations"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Discover the hidden gems of Jharkhand through our interactive exploration"})]}),i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"flex justify-center mb-8",children:i.jsx("div",{className:"flex flex-wrap gap-3 glass rounded-2xl p-4",children:NP.map(I=>i.jsxs(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>x(I.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 ${h===I.id?"bg-[#18B668] text-white":"glass-dark border border-white/20 text-white hover:border-[#18B668]"}`,children:[i.jsx("span",{className:"mr-2",children:I.icon}),I.name]},I.id))})}),i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"flex justify-center mb-12",children:i.jsxs("div",{className:"flex gap-2 glass rounded-xl p-2",children:[i.jsx("button",{onClick:()=>k("map"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${j==="map"?"bg-[#18B668] text-white":"text-white hover:bg-white/10"}`,children:"🗺️ Map View"}),i.jsx("button",{onClick:()=>k("grid"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-300 ${j==="grid"?"bg-[#18B668] text-white":"text-white hover:bg-white/10"}`,children:"⊞ Grid View"})]})}),j==="map"&&i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12 items-center",children:[i.jsx(re.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.4},className:"relative",children:i.jsx(zy,{height:"600px",category:h,textColorClass:"text-white",onDestinationSelect:I=>{const z=Kg.find(R=>I.name.toLowerCase().includes(R.name.toLowerCase()));z&&z.route!=="#"&&_(z.route)}})}),i.jsx(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.4},className:"space-y-6",children:d.map((I,z)=>i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6+z*.1,duration:.5},whileHover:{scale:1.02},className:`glass rounded-2xl p-6 cursor-pointer transition-all duration-300 ${a===I.id?"ring-2 ring-[#18B668]":""}`,onMouseEnter:()=>l(I.id),onMouseLeave:()=>l(null),onClick:()=>I.route!=="#"&&_(I.route),children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("div",{className:"w-20 h-20 rounded-xl overflow-hidden flex-shrink-0",children:i.jsx(qr,{src:I.image,alt:I.name,className:"w-full h-full object-cover"})}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex items-start justify-between mb-2",children:[i.jsx("h3",{className:"text-white text-xl font-semibold",children:I.name}),i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-yellow-400",children:"⭐"}),i.jsx("span",{className:"text-white text-sm",children:I.rating})]})]}),i.jsx("p",{className:"text-gray-300 text-sm mb-3",children:I.description}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-3",children:[i.jsxs("span",{children:["📅 Best: ",I.bestTime]}),i.jsxs("span",{children:["⏱️ Duration: ",I.duration]})]}),i.jsx("div",{className:"flex gap-2 flex-wrap",children:I.highlights.map((R,D)=>i.jsx("span",{className:"px-3 py-1 bg-[#18B668]/20 text-[#18B668] text-xs rounded-full border border-[#18B668]/30",children:R},D))})]})]})},I.id))})]}),j==="grid"&&i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8",children:d.map((I,z)=>i.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:z*.1,duration:.6},whileHover:{y:-10,scale:1.02},className:"glass rounded-2xl overflow-hidden group hover:bg-white/10 transition-all duration-300",children:[i.jsxs("div",{className:"relative h-48 overflow-hidden",children:[i.jsx(qr,{src:I.image,alt:I.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),i.jsxs("div",{className:"absolute top-4 right-4 flex items-center gap-1 glass-dark rounded-full px-2 py-1",children:[i.jsx("span",{className:"text-yellow-400 text-sm",children:"⭐"}),i.jsx("span",{className:"text-white text-sm",children:I.rating})]})]}),i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:I.name}),i.jsx("p",{className:"text-gray-300 text-sm mb-4 leading-relaxed",children:I.description}),i.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-400 mb-4",children:[i.jsxs("span",{children:["📅 ",I.bestTime]}),i.jsxs("span",{children:["⏱️ ",I.duration]})]}),i.jsx("div",{className:"flex gap-2 flex-wrap mb-4",children:I.highlights.map((R,D)=>i.jsx("span",{className:"px-2 py-1 bg-[#18B668]/20 text-[#18B668] text-xs rounded-full border border-[#18B668]/30",children:R},D))}),i.jsxs("div",{className:"flex gap-3",children:[i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>I.route!=="#"&&_(I.route),className:"flex-1 py-2 bg-[#18B668] hover:bg-[#18B668]/80 text-white font-medium rounded-lg hover:shadow-lg transition-all duration-300",children:"Explore"}),i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"px-4 py-2 glass-dark border border-white/20 text-white rounded-lg hover:border-[#18B668] transition-all duration-300",children:"♡"})]})]})]},I.id))})]})})}const SP=[{id:1,title:"Tribal Dance Traditions",description:"Experience the vibrant Santhal, Munda, and Ho tribal dances that celebrate harvest, festivals, and life milestones with rhythmic beats and colorful costumes.",image:"https://images.unsplash.com/photo-1708434866032-90aedbeddabb?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0cmliYWwlMjBhcnQlMjBwYXR0ZXJucyUyMGN1bHR1cmV8ZW58MXx8fHwxNzU2NjcyNTk5fDA&ixlib=rb-4.1.0&q=80&w=1080",highlights:["Santhal Dance","Tribal Music","Festival Celebrations"],category:"performing-arts"},{id:2,title:"Traditional Handicrafts",description:"Discover intricate bell metal work, bamboo crafts, and stone sculptures created by skilled artisans using techniques passed down through generations.",image:"https://images.unsplash.com/photo-1724709166740-96947d362a17?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0cmFkaXRpb25hbCUyMGhhbmRpY3JhZnRzJTIwYXJ0aXNhbnxlbnwxfHx8fDE3NTY2NzI2MDB8MA&ixlib=rb-4.1.0&q=80&w=1080",highlights:["Bell Metal","Bamboo Craft","Stone Carving"],category:"handicrafts"},{id:3,title:"Sacred Architecture",description:"Marvel at ancient temples like Baidyanath Dham and architectural wonders that blend spiritual significance with artistic excellence.",image:"https://images.unsplash.com/photo-1667115788157-72f063f2a7a3?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0ZW1wbGUlMjBhcmNoaXRlY3R1cmUlMjBoZXJpdGFnZXxlbnwxfHx8fDE3NTY2NzI2MDB8MA&ixlib=rb-4.1.0&q=80&w=1080",highlights:["Ancient Temples","Sacred Architecture","Spiritual Heritage"],category:"architecture"}],TP=[{id:"textiles",name:"Textiles & Weaving",icon:"🧵",count:45,color:"#8B5CF6"},{id:"metalwork",name:"Metal Works",icon:"⚒️",count:32,color:"#F59E0B"},{id:"pottery",name:"Pottery & Ceramics",icon:"🏺",count:28,color:"#0EA5E9"},{id:"woodcraft",name:"Wood Crafts",icon:"🪵",count:21,color:"#18B668"}];function CP(){return Cc(),i.jsx("div",{className:"min-h-screen bg-black pt-24 pb-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-20",children:[i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:[i.jsx("span",{className:"text-white",children:"Culture & "}),i.jsx("span",{className:"text-[#F59E0B]",children:"Heritage"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"Immerse yourself in the rich tapestry of tribal traditions, ancient wisdom, and artistic excellence"})]}),i.jsx("div",{className:"space-y-32 mb-32",children:SP.map((a,l)=>i.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:l*.2},viewport:{once:!0},className:`grid lg:grid-cols-2 gap-12 items-center ${l%2===1?"lg:flex-row-reverse":""}`,children:[i.jsx("div",{className:`${l%2===1?"lg:order-2":""}`,children:i.jsx(re.div,{whileHover:{scale:1.02},className:"relative group",children:i.jsx("div",{className:"glass rounded-3xl p-4 overflow-hidden",children:i.jsxs("div",{className:"relative h-80 lg:h-96 rounded-2xl overflow-hidden",children:[i.jsx(qr,{src:a.image,alt:a.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),i.jsx("div",{className:"absolute top-4 right-4",children:i.jsx(re.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},className:"w-12 h-12 border-2 border-[#F59E0B]/30 rounded-full",children:i.jsx("div",{className:"w-full h-full border-2 border-[#F59E0B]/50 rounded-full rotate-45"})})}),i.jsx("div",{className:"absolute inset-0 border-2 border-[#F59E0B]/30 rounded-2xl animate-pulse-glow"})]})})})}),i.jsx("div",{className:`${l%2===1?"lg:order-1":""}`,children:i.jsxs(re.div,{initial:{opacity:0,x:l%2===0?-50:50},whileInView:{opacity:1,x:0},transition:{duration:.8,delay:.3},viewport:{once:!0},className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-12 h-12 rounded-full bg-[#F59E0B] flex items-center justify-center",children:i.jsx("span",{className:"text-white font-bold text-xl",children:a.id})}),i.jsx("div",{className:"h-0.5 flex-1 bg-[#F59E0B]"})]}),i.jsx("h3",{className:"text-4xl font-bold text-white mb-4",children:a.title}),i.jsx("p",{className:"text-lg text-gray-300 leading-relaxed mb-8",children:a.description}),i.jsx("div",{className:"space-y-3",children:a.highlights.map((h,x)=>i.jsxs(re.div,{initial:{opacity:0,x:-20},whileInView:{opacity:1,x:0},transition:{delay:.5+x*.1},viewport:{once:!0},className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-2 h-2 bg-[#F59E0B] rounded-full"}),i.jsx("span",{className:"text-gray-300",children:h})]},x))}),i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"mt-8 px-8 py-3 bg-[#F59E0B] hover:bg-[#F59E0B]/90 text-white font-semibold rounded-2xl hover:shadow-lg hover:shadow-[#F59E0B]/25 transition-all duration-300",children:"Explore More"})]})})]},a.id))}),i.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"text-center mb-16",children:[i.jsxs("h2",{className:"text-4xl font-bold text-white mb-6",children:["Meet Our ",i.jsx("span",{className:"text-[#F59E0B]",children:"Master Artisans"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto mb-12",children:"Discover authentic handicrafts and connect directly with the skilled artisans who preserve these ancient traditions"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-8 mb-12",children:TP.map((a,l)=>i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:l*.1,duration:.6},viewport:{once:!0},whileHover:{y:-10,scale:1.02},className:"glass rounded-2xl p-6 text-center group hover:bg-white/10 transition-all duration-300",children:[i.jsx(re.div,{whileHover:{scale:1.2,rotate:5},className:"w-16 h-16 mx-auto mb-4 rounded-2xl flex items-center justify-center",style:{backgroundColor:a.color},children:i.jsx("span",{className:"text-3xl",children:a.icon})}),i.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:a.name}),i.jsxs("p",{className:"text-gray-400 text-sm mb-4",children:[a.count," Master Artisans"]}),i.jsx(re.div,{initial:{scaleX:0},whileInView:{scaleX:1},transition:{delay:.5+l*.1,duration:.8},viewport:{once:!0},className:"h-1 rounded-full origin-left opacity-0 group-hover:opacity-100 transition-opacity duration-300",style:{backgroundColor:a.color}})]},a.id))}),i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.8,delay:.4},viewport:{once:!0},className:"glass rounded-3xl p-8",children:[i.jsxs("h3",{className:"text-3xl font-bold text-white mb-4",children:["Discover Authentic ",i.jsx("span",{className:"text-[#18B668]",children:"Handicrafts"})]}),i.jsx("p",{className:"text-gray-300 text-lg mb-8 max-w-2xl mx-auto",children:"Support local artisans and bring home unique pieces that tell the story of Jharkhand's rich cultural heritage"}),i.jsx(mi,{to:"/marketplace",children:i.jsxs(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-flex items-center gap-3 px-8 py-4 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-bold rounded-2xl hover:shadow-lg hover:shadow-[#18B668]/25 transition-all duration-300",children:[i.jsx("span",{className:"text-xl",children:"🔍"}),"Visit Our Marketplace",i.jsx("span",{className:"text-xl",children:"→"})]})}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6 mt-12",children:[{icon:"🏆",label:"Quality Guaranteed",desc:"Authentic handmade products"},{icon:"🤝",label:"Direct from Artisans",desc:"Supporting local communities"},{icon:"🚚",label:"Nationwide Delivery",desc:"Free shipping on orders above ₹2000"}].map((a,l)=>i.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:.6+l*.1,duration:.5},viewport:{once:!0},className:"text-center",children:[i.jsx("div",{className:"text-3xl mb-3",children:a.icon}),i.jsx("h4",{className:"text-white font-semibold mb-2",children:a.label}),i.jsx("p",{className:"text-gray-400 text-sm",children:a.desc})]},l))})]})]}),i.jsxs(re.div,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.8},viewport:{once:!0},className:"mb-20",children:[i.jsxs("h3",{className:"text-3xl font-bold text-center text-white mb-12",children:["Cultural ",i.jsx("span",{className:"text-[#F59E0B]",children:"Events & Festivals"})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[{name:"Sarhul Festival",date:"March - April",description:"Celebration of nature and harvest by tribal communities",image:"🌸"},{name:"Karam Festival",date:"September",description:"Traditional festival honoring the Karam tree and folklore",image:"🌳"},{name:"Tusu Parab",date:"December - January",description:"Winter harvest festival with folk songs and dances",image:"🎭"}].map((a,l)=>i.jsxs(re.div,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{delay:l*.2,duration:.6},viewport:{once:!0},whileHover:{y:-5},className:"glass rounded-2xl p-6 text-center group hover:bg-white/10 transition-all duration-300",children:[i.jsx("div",{className:"text-4xl mb-4",children:a.image}),i.jsx("h4",{className:"text-white font-bold text-lg mb-2",children:a.name}),i.jsx("p",{className:"text-[#18B668] text-sm mb-3",children:a.date}),i.jsx("p",{className:"text-gray-400 text-sm",children:a.description})]},a.name))})]})]})})}const PP=[{id:"nature",label:"Nature & Wildlife",icon:"🌿",color:"from-green-400 to-emerald-500",description:"Ancient forests, cascading waterfalls, rare wildlife safaris"},{id:"culture",label:"Tribal Heritage",icon:"🎭",color:"from-purple-400 to-pink-500",description:"Indigenous cultures, sacred traditions, authentic villages"},{id:"adventure",label:"Extreme Adventures",icon:"🏔️",color:"from-orange-400 to-red-500",description:"Adrenaline sports, mountain expeditions, thrill activities"},{id:"spiritual",label:"Sacred Journeys",icon:"🕉️",color:"from-yellow-400 to-orange-500",description:"Holy temples, meditation retreats, spiritual awakening"},{id:"photography",label:"Visual Storytelling",icon:"📸",color:"from-blue-400 to-indigo-500",description:"Breathtaking landscapes, wildlife photography, cultural portraits"},{id:"food",label:"Culinary Exploration",icon:"🍽️",color:"from-pink-400 to-rose-500",description:"Traditional tribal cuisine, cooking masterclasses, food heritage"},{id:"wellness",label:"Holistic Wellness",icon:"🧘‍♀️",color:"from-teal-400 to-cyan-500",description:"Ayurvedic healing, yoga retreats, natural therapies"},{id:"history",label:"Ancient Mysteries",icon:"🏛️",color:"from-amber-400 to-yellow-500",description:"Prehistoric rock art, archaeological wonders, historical sites"}],EP=[{id:"budget",label:"Forest Explorer",range:"₹12,000 - ₹25,000",icon:"💰",features:["Eco-lodges","Group adventures","Local transport","Basic amenities"]},{id:"standard",label:"Heritage Traveler",range:"₹25,000 - ₹55,000",icon:"💳",features:["Heritage hotels","Private guides","Comfort transport","Premium experiences"]},{id:"premium",label:"Luxury Explorer",range:"₹55,000 - ₹95,000",icon:"💎",features:["Luxury resorts","Exclusive experiences","Personal concierge","Private transport"]},{id:"luxury",label:"Elite Aaranya",range:"₹95,000+",icon:"👑",features:["Ultra-luxury accommodations","Helicopter access","Celebrity chef","Bespoke experiences"]}],MP=[{id:"tribal-homestay",label:"Tribal Homestay",icon:"🏠",description:"Live with indigenous families, authentic cultural immersion"},{id:"heritage-palace",label:"Heritage Palace",icon:"🏰",description:"Royal accommodations with regal ambiance and modern luxury"},{id:"eco-luxury-resort",label:"Eco-Luxury Resort",icon:"🌳",description:"Sustainable luxury amidst pristine forests"},{id:"adventure-basecamp",label:"Adventure Basecamp",icon:"⛺",description:"High-altitude camps with stunning mountain views"},{id:"forest-treehouse",label:"Canopy Treehouse",icon:"🌲",description:"Elevated stays in ancient tree canopies"},{id:"wellness-retreat",label:"Wellness Sanctuary",icon:"🧘",description:"Healing centers focused on mind-body rejuvenation"}],AP=a=>{const l=(d,I,z,R,D=1)=>{let O=d*I;return O*={budget:.75,standard:1,premium:1.6,luxury:2.5}[z]||1,O*=R*.18+D*.3,Math.round(O)},x=(()=>{if(a.startDate&&a.endDate){const d=new Date(a.startDate),I=new Date(a.endDate),z=Math.abs(I.getTime()-d.getTime()),R=Math.ceil(z/(1e3*60*60*24));return Math.max(R,3)}return 7})(),j=18e3,k=[{id:"ultimate-nature",title:"🌿 Ultimate Aaranya Wildlife Expedition",subtitle:"Deep Forest Immersion with Rare Wildlife Encounters",duration:`${x} Days / ${x-1} Nights`,destinations:[{name:"Betla National Park Core Zone",type:"primary",coordinates:"23.8738° N, 84.1892° E",highlights:["Tiger tracking","Elephant corridors","Night safari"]},{name:"Netarhat Queen of Chotanagpur",type:"primary",coordinates:"23.4670° N, 84.2609° E",highlights:["Sunrise viewpoint","Pine forests","Tribal villages"]},{name:"Hundru Falls Adventure Zone",type:"secondary",coordinates:"23.4210° N, 85.5897° E",highlights:["320ft waterfall","Rock climbing","Photography"]},{name:"Hidden Tribal Settlement",type:"hidden-gem",coordinates:"Undisclosed for protection",highlights:["Authentic culture","Traditional crafts","Oral histories"]}],detailedHighlights:[{category:"Wildlife Encounters",icon:"🐅",experiences:["Track Bengal tigers with expert naturalists using advanced camera traps","Witness Asian elephant herds at secret watering holes during golden hour","Night safari with thermal imaging to spot leopards and sloth bears","Rare bird watching: 300+ species including endangered hornbills","Butterfly expedition with endemic species documentation"]},{category:"Adventure Thrills",icon:"🧗‍♂️",experiences:["Multi-pitch rock climbing on Hundru Falls granite walls","Rappelling down 320ft waterfall with professional equipment","Forest canopy walk 100ft above ground on suspension bridges","White water rafting on seasonal rapids (monsoon season)","Mountain biking through ancient forest trails"]},{category:"Cultural Deep Dive",icon:"🏘️",experiences:["Live with Santhal families for authentic cultural exchange","Learn traditional hunting techniques with bamboo tools","Participate in sacred forest rituals under full moon","Master tribal art forms: Pattachitra painting and bamboo crafts","Experience shamanic healing ceremonies with tribal medicine men"]}],price:`₹${l(j,a.groupSize,a.budget,x,1.5).toLocaleString()}`,priceBreakdown:{accommodation:35,transport:15,activities:25,meals:12,guide:8,miscellaneous:5},difficulty:"Challenging",bestFor:["Wildlife photographers","Adventure seekers","Nature enthusiasts","Cultural explorers"],seasonality:{best:["October-March (Cool & Clear)","November-February (Peak Wildlife)"],good:["April-May (Pre-monsoon)","September (Post-monsoon)"],avoid:["June-August (Heavy rains)","Extreme summer periods"]},inclusions:["Professional wildlife guide with 15+ years experience","All park entry fees and special permits","High-quality camping and photography equipment","Expert-led cultural immersion sessions","Emergency satellite communication device","Comprehensive travel insurance","All meals including traditional tribal cuisine","Private transportation with backup vehicle"],exclusions:["Personal photography equipment (rentals available)","Alcoholic beverages","Personal shopping and souvenirs","Medical expenses not covered by insurance","Tips for local staff and guides"],expertTips:["Carry telephoto lens minimum 400mm for wildlife photography","Pack neutral colors - avoid bright clothing in forest areas","Bring power banks - limited charging in forest camps","Learn basic Santhal greetings for cultural interactions","Download offline maps - network coverage is patchy"],localSecrets:["Visit the hidden waterfall behind Hundru - known only to locals","Best tiger sighting spot: Southern boundary near Kechki bridge at dawn","Secret tribal market opens every Wednesday in Netarhat village","Ancient rock paintings location - shared only with respectful visitors","Traditional honey harvesting spot - seasonal September activity"],sustainabilityScore:9.2,culturalImpact:"High positive impact - 70% of tour fees support local tribal communities and forest conservation initiatives",itinerary:[{day:1,title:"Forest Gateway & First Encounters",location:"Ranchi to Betla National Park",theme:"Arrival and Orientation",weather:"Clear skies, 22-28°C",sunrise:"06:15 AM",sunset:"05:45 PM",activities:[{time:"08:00 AM",duration:"2 hours",activity:"Departure from Ranchi",description:"Private vehicle journey through scenic Chotanagpur plateau with expert guide providing historical context and wildlife briefing",difficulty:"Easy",cost:0},{time:"12:00 PM",duration:"3 hours",activity:"Forest Border Entry & Setup",description:"Check into eco-lodge, equipment briefing, forest department permits, and orientation session with chief naturalist",difficulty:"Easy",cost:2500},{time:"04:00 PM",duration:"3 hours",activity:"Sunset Wildlife Safari",description:"First game drive in open jeep through core area with chances of spotted deer, peacocks, and if lucky - big cats",difficulty:"Moderate",cost:3500},{time:"08:00 PM",duration:"2 hours",activity:"Night Photography Workshop",description:"Learn advanced techniques for low-light wildlife photography with professional wildlife photographer",difficulty:"Easy",cost:1500}],meals:[{type:"breakfast",venue:"Hotel in Ranchi",cuisine:"Continental & Indian",speciality:"Fresh fruit platter & energy bars for journey",cost:350},{type:"lunch",venue:"Forest Rest House",cuisine:"Traditional Jharkhand",speciality:"Handia (rice beer) and wild mushroom curry",cost:450},{type:"dinner",venue:"Eco-Lodge",cuisine:"Organic Farm-to-Table",speciality:"Grilled forest honey chicken with tribal rice",cost:650}],accommodation:{name:"Aaranya Forest Lodge",type:"Eco-Luxury Tented Camp",rating:4.8,amenities:["Solar powered","Organic toiletries","Private bathrooms","Forest view deck"],sustainabilityFeatures:["Rainwater harvesting","Solar energy","Waste composting","Local staff employment"]},transportation:{mode:"Private 4WD Vehicle",distance:"165 km",duration:"4 hours",scenicValue:8.5},emergencyContacts:{local:"+91 8987654321 (Forest Guide)",medical:"+91 8765432109 (Nearest Hospital)",police:"100 (Emergency)"},packingTips:["Binoculars essential for wildlife spotting","Flashlight with red filter for night activities","Insect repellent for evening activities","Warm jacket for early morning safaris"],culturalEtiquette:["Maintain silence during wildlife encounters","Seek permission before photographing locals","Respect tribal customs and traditions","Do not litter in forest areas"]},{day:2,title:"Deep Forest Expedition",location:"Betla Core Zone Exploration",theme:"Wildlife Tracking Adventure",weather:"Cool morning, warm afternoon 18-26°C",sunrise:"06:15 AM",sunset:"05:45 PM",activities:[{time:"05:30 AM",duration:"4 hours",activity:"Dawn Tiger Tracking Expedition",description:"Follow fresh tiger pugmarks with expert tracker, use camera traps, and experience the forest awakening with 300+ bird species",difficulty:"Challenging",cost:4500},{time:"11:00 AM",duration:"2 hours",activity:"Elephant Corridor Walk",description:"Guided walk through elephant migration paths, observe feeding signs, and learn about human-animal conflict resolution",difficulty:"Moderate",cost:2e3},{time:"02:30 PM",duration:"3 hours",activity:"Canopy Research Station Visit",description:"Climb 80ft observation tower, butterfly identification workshop, and contribute to citizen science data collection",difficulty:"Moderate",cost:2500},{time:"07:00 PM",duration:"2.5 hours",activity:"Night Safari with Thermal Imaging",description:"Advanced night safari using thermal cameras to spot leopards, sloth bears, and nocturnal wildlife behavior",difficulty:"Challenging",cost:5e3}],meals:[{type:"breakfast",venue:"Forest Camp",cuisine:"Energy-rich expedition food",speciality:"Hot oats with forest honey and nuts",cost:300},{type:"lunch",venue:"Canopy Observation Deck",cuisine:"Packed gourmet meal",speciality:"Tribal-spiced chicken wraps with herbal tea",cost:500},{type:"dinner",venue:"Eco-Lodge",cuisine:"Traditional Tribal Feast",speciality:"Wild boar curry with bamboo shoot vegetables",cost:750}],accommodation:{name:"Aaranya Forest Lodge",type:"Eco-Luxury Tented Camp",rating:4.8,amenities:["Solar powered","Organic toiletries","Private bathrooms","Forest view deck"],sustainabilityFeatures:["Rainwater harvesting","Solar energy","Waste composting","Local staff employment"]},transportation:{mode:"Forest Department Jeep + Walking",distance:"45 km + 8 km walking",duration:"Multiple trips",scenicValue:9.5},emergencyContacts:{local:"+91 8987654321 (Forest Guide)",medical:"+91 8765432109 (Nearest Hospital)",police:"100 (Emergency)"},packingTips:["Sturdy trekking boots for forest walks","Headlamp for night safari","Daypack for equipment","Extra batteries for devices"],culturalEtiquette:["Follow forest guide instructions strictly","No loud noises during wildlife tracking","Respect wildlife photography guidelines","Support local conservation efforts"]}],testimonials:[{name:"Dr. Sarah Williams",location:"Wildlife Photographer, UK",rating:5,review:"Absolutely extraordinary! The level of detail and expertise exceeded all expectations. Captured Bengal tiger shots that are now featured in National Geographic.",highlight:"Professional guides made all the difference"},{name:"Rajesh Mehta",location:"Adventure Enthusiast, Mumbai",rating:5,review:"This wasn't just a trip, it was a life-changing experience. The cultural immersion with tribal families gave me perspectives I never imagined.",highlight:"Authentic cultural experiences"}]},{id:"cultural-heritage",title:"🎭 Sacred Aaranya Heritage Immersion",subtitle:"Spiritual Awakening Through Ancient Traditions",duration:`${Math.max(x,8)} Days / ${Math.max(x,8)-1} Nights`,destinations:[{name:"Deoghar - Sacred Jyotirlinga Complex",type:"primary",coordinates:"24.4847° N, 86.6908° E",highlights:["Baidyanath Temple","Spiritual ceremonies","Sacred geography"]},{name:"Ancient Santhal Heartland - Dumka",type:"primary",coordinates:"24.2676° N, 87.2454° E",highlights:["Traditional villages","Living heritage","Oral traditions"]},{name:"Prehistoric Rock Art Galleries - Hazaribagh",type:"secondary",coordinates:"23.9929° N, 85.3647° E",highlights:["10,000-year-old paintings","Archaeological sites","Historical mysteries"]},{name:"Secret Shamanic Caves",type:"hidden-gem",coordinates:"Protected sacred location",highlights:["Healing ceremonies","Ancient rituals","Spiritual masters"]}],detailedHighlights:[{category:"Spiritual Experiences",icon:"🕉️",experiences:["Participate in 4 AM Rudra Abhishek at Baidyanath Jyotirlinga with 108 sacred chants","Receive blessings from 300-year-old banyan tree considered highly sacred","Experience Santhal Sohrai festival rituals with traditional drum ceremonies","Meditation sessions in ancient caves used by sages for 1000+ years","Sacred geometry workshop: Understanding temple architecture and cosmic alignments"]},{category:"Cultural Deep Dive",icon:"👥",experiences:["Live with Santhal families: Learn traditional hunting, farming, and craft techniques","Master the art of Pattachitra painting with 4th generation artists","Participate in traditional wedding ceremony (if timing permits)","Learn oral histories passed down through 40+ generations","Traditional music lessons: Santhal drums, flutes, and folk songs"]},{category:"Historical Exploration",icon:"🏛️",experiences:["Decode 10,000-year-old rock paintings with leading archaeologists","Explore underground temple complexes hidden for centuries","Visit manuscript libraries with Sanskrit texts dating back 800 years","Archaeological dig participation with proper permissions","Ancient metallurgy workshop: Traditional iron-making techniques"]}],price:`₹${l(j*1.3,a.groupSize,a.budget,Math.max(x,8),1.8).toLocaleString()}`,priceBreakdown:{accommodation:30,transport:20,activities:25,meals:15,guide:10,miscellaneous:0},difficulty:"Moderate",bestFor:["Spiritual seekers","Cultural enthusiasts","History buffs","Art lovers","Philosophy students"],seasonality:{best:["October-March (Festival season)","November-January (Perfect weather)"],good:["April-June (Pre-monsoon)","September (Post-monsoon clear skies)"],avoid:["July-August (Monsoon affects outdoor activities)"]},inclusions:["Sanskrit scholar guide with PhD in Indian philosophy","All temple and archaeological site permissions","Cultural workshop materials and certifications","Traditional clothing for ceremonies","Spiritual consultation with authenticated gurus","Historical documents and research materials access","Photography permits for restricted areas","Cultural exchange program certification"],exclusions:["Personal spiritual accessories","Donation to temples (optional but recommended)","Personal meditation equipment","Shopping for antiques and artifacts","Extended private sessions with spiritual teachers"],expertTips:["Learn basic Sanskrit phrases - enhances temple experiences significantly","Carry white or light-colored cotton clothing for temple visits","Respect photography restrictions in sacred spaces","Participate actively in cultural activities for deeper understanding","Keep an open mind - some experiences may challenge preconceptions"],localSecrets:["Hidden underground passage in Baidyanath temple complex - ask priest Pandit Ramji","Secret rock art site accessible only during dry season - local guide required","Traditional healer who uses 200+ forest herbs - consultation by appointment","Ancient library with palm leaf manuscripts - special permission needed","Sacred grove where tribal shamans conduct healing ceremonies"],sustainabilityScore:9.5,culturalImpact:"Maximum positive impact - direct support to traditional artisans, cultural preservation, and community development",itinerary:[{day:1,title:"Sacred Journey Begins",location:"Ranchi to Deoghar Spiritual Complex",theme:"Spiritual Initiation",weather:"Pleasant, 20-25°C",sunrise:"06:10 AM",sunset:"05:50 PM",activities:[{time:"05:00 AM",duration:"4 hours",activity:"Spiritual Preparation & Travel",description:"Traditional purification rituals, Sanskrit introduction session, and scenic journey through spiritual landscapes",difficulty:"Easy",cost:1500},{time:"11:00 AM",duration:"3 hours",activity:"Baidyanath Temple Complex Exploration",description:"Detailed temple architecture study, historical significance briefing, and participation in daily ceremonies",difficulty:"Easy",cost:2e3},{time:"03:00 PM",duration:"2 hours",activity:"Sacred Geography Walking Tour",description:"Explore 12 connected temples, understand cosmic alignments, and learn about temple construction mysteries",difficulty:"Moderate",cost:1500},{time:"07:00 PM",duration:"2 hours",activity:"Evening Aarti & Meditation",description:"Participate in traditional evening prayers with hundreds of devotees, followed by guided meditation session",difficulty:"Easy",cost:500}],meals:[{type:"breakfast",venue:"Sattvic Restaurant",cuisine:"Pure Vegetarian",speciality:"Traditional temple breakfast with herbal tea",cost:200},{type:"lunch",venue:"Temple Community Kitchen",cuisine:"Sacred Food (Prasadam)",speciality:"Free community meal served to all visitors",cost:0},{type:"dinner",venue:"Heritage Haveli",cuisine:"Royal Vegetarian",speciality:"Traditional Maithil cuisine with 12 courses",cost:800}],accommodation:{name:"Sacred Heritage Hotel",type:"Spiritual Retreat Center",rating:4.6,amenities:["Meditation rooms","Prayer halls","Spiritual library","Ayurvedic spa"],sustainabilityFeatures:["Solar heating","Organic gardens","Rainwater systems","Zero plastic policy"]},transportation:{mode:"Private Comfortable Vehicle",distance:"280 km",duration:"6 hours with stops",scenicValue:7.5},emergencyContacts:{local:"+91 9876543210 (Cultural Guide)",medical:"+91 8765432100 (Deoghar Hospital)",police:"100 (Emergency)"},packingTips:["Conservative clothing for temple visits","Cotton scarves for head covering","Comfortable walking shoes (removable)","Personal meditation cushion if preferred"],culturalEtiquette:["Remove shoes before entering temples","Maintain silence in meditation areas","Follow photography guidelines strictly","Respect local customs and traditions"]}],testimonials:[{name:"Professor Maria Rodriguez",location:"Religious Studies, Spain",rating:5,review:"Incredible depth of knowledge from guides. The cultural immersion was authentic and respectful. Learned more in 8 days than years of academic study.",highlight:"Authentic spiritual experiences"}]},{id:"extreme-adventure",title:"🏔️ Aaranya Extreme Adventure Challenge",subtitle:"Ultimate Adrenaline Rush in Pristine Wilderness",duration:`${Math.max(x,7)} Days / ${Math.max(x,7)-1} Nights`,destinations:[{name:"Patratu Valley Adventure Hub",type:"primary",coordinates:"23.6693° N, 84.9294° E",highlights:["Water sports","Valley expeditions","Extreme camping"]},{name:"Hundru Falls Vertical Challenge",type:"primary",coordinates:"23.4210° N, 85.5897° E",highlights:["Rappelling","Rock climbing","Cliff jumping"]},{name:"Secret High-Altitude Base Camp",type:"hidden-gem",coordinates:"Undisclosed for safety",highlights:["Extreme camping","Survival training","Elite challenges"]}],detailedHighlights:[{category:"Extreme Sports",icon:"🪂",experiences:["Multi-pitch rock climbing on 400ft granite walls with certified instructors","320ft waterfall rappelling with advanced equipment and safety protocols","Tandem paragliding from 2000ft altitude with breathtaking valley views","White water rafting Grade IV rapids during monsoon season","Zip-lining across valleys at 80kmph on 500-meter steel cables"]},{category:"Survival Mastery",icon:"🔥",experiences:["3-day wilderness survival course with ex-military instructors","Learn fire-making, shelter building, and water purification techniques","Night navigation using stars and natural landmarks","Wild edible plant identification and emergency food procurement","Advanced first aid and emergency response training in wilderness"]},{category:"Elite Challenges",icon:"🏆",experiences:["24-hour endurance challenge combining multiple adventure sports","Solo wilderness camping with minimal equipment (supervised)","Rock climbing competition with difficulty grades up to 5.10","Night rappelling using only moonlight and minimal artificial lighting","Cross-country navigation challenge through unmarked forest terrain"]}],price:`₹${l(j*1.8,a.groupSize,a.budget,Math.max(x,7),2.2).toLocaleString()}`,priceBreakdown:{accommodation:25,transport:15,activities:40,meals:8,guide:10,miscellaneous:2},difficulty:"Extreme",bestFor:["Adrenaline junkies","Adventure athletes","Survival enthusiasts","Extreme sports professionals"],seasonality:{best:["October-February (Perfect weather)","March-May (Clear skies)"],good:["September (Post-monsoon)","June (Pre-monsoon activities)"],avoid:["July-August (Monsoon - safety concerns)","Peak summer for altitude activities"]},inclusions:["International-standard safety equipment for all activities","Certified adventure sports instructors with rescue training","Comprehensive adventure sports insurance coverage","Emergency helicopter evacuation facility","Professional adventure photography and videography","Survival course completion certificates","High-energy nutrition supplements and sports drinks","Emergency satellite communication devices"],exclusions:["Personal extreme sports equipment (rentals available)","Medical expenses for pre-existing conditions","Additional rescue operations if required","Personal adventure gear purchases","Additional instructor fees for private sessions"],expertTips:["Physical fitness training 6 weeks before trip is essential","Bring personal climbing shoes for better grip and comfort","Waterproof action camera recommended for water activities","Pack extra dry clothes - you will get wet frequently","Learn basic rope knots beforehand to maximize climbing time"],localSecrets:["Hidden cliff jumping spot with 60ft deep natural pool - locals only","Secret cave system behind waterfall - advanced spelunking opportunity","Unmarked mountain biking trail with 15% gradient - extreme challenge","Natural rock slide formation perfect for extreme sliding experiences","Underground river system for advanced cave diving (experienced only)"],sustainabilityScore:8,culturalImpact:"Moderate positive impact - supports local adventure tourism and employs tribal youth as guides",itinerary:[{day:1,title:"Adventure Base Setup",location:"Ranchi to Patratu Valley",theme:"Arrival and Equipment Briefing",weather:"Clear, 18-24°C",sunrise:"06:12 AM",sunset:"05:48 PM",activities:[{time:"07:00 AM",duration:"3 hours",activity:"Journey to Adventure Base",description:"Scenic drive to Patratu Valley with equipment loading and safety briefing during transport",difficulty:"Easy",cost:2e3},{time:"12:00 PM",duration:"4 hours",activity:"Equipment Familiarization & Basic Training",description:"Complete equipment check, safety protocol training, and basic rope techniques practice",difficulty:"Moderate",cost:3500},{time:"05:00 PM",duration:"2 hours",activity:"Valley Reconnaissance & Planning",description:"Explore activity zones, weather briefing, and customize adventure plan based on group skills",difficulty:"Easy",cost:1e3},{time:"08:00 PM",duration:"2 hours",activity:"Team Building & Strategy Session",description:"Group bonding activities, safety protocols review, and preparation for upcoming challenges",difficulty:"Easy",cost:500}],meals:[{type:"breakfast",venue:"Adventure Base Cafe",cuisine:"High-Energy Breakfast",speciality:"Protein-rich breakfast with energy bars",cost:400},{type:"lunch",venue:"Valley Viewpoint",cuisine:"Packed Adventure Meal",speciality:"High-calorie trail mix and energizing beverages",cost:350},{type:"dinner",venue:"Base Camp",cuisine:"Hearty Adventure Food",speciality:"Grilled meats with complex carbohydrates",cost:600}],accommodation:{name:"Extreme Adventure Base Camp",type:"High-Altitude Camping",rating:4.3,amenities:["Weather-resistant tents","Shared facilities","Equipment storage","Emergency communication"],sustainabilityFeatures:["Solar power","Waste management","Local sourcing","Environmental impact minimization"]},transportation:{mode:"4WD Adventure Vehicle",distance:"120 km",duration:"3 hours",scenicValue:8.8},emergencyContacts:{local:"+91 9988776655 (Adventure Guide)",medical:"+91 8877665544 (Emergency Medical)",police:"100 (Emergency)"},packingTips:["High-quality adventure gear essential","Waterproof clothing and equipment","Personal first aid kit","High-energy snacks and hydration"],culturalEtiquette:["Respect safety guidelines absolutely","Support team members in challenges","Follow Leave No Trace principles","Respect local environmental regulations"]}],testimonials:[{name:"Alex Thompson",location:"Extreme Sports Athlete, Australia",rating:5,review:"Incredible adrenaline rush! The safety standards were top-notch and the challenges pushed my limits. Best adventure experience in Asia.",highlight:"World-class safety standards"}]}],_=k.filter(d=>{const I=a.selectedInterests.reduce((O,ie)=>{switch(ie){case"nature":return O+(d.id.includes("nature")?10:0)+(d.id.includes("ultimate")?5:0);case"culture":return O+(d.id.includes("heritage")||d.id.includes("cultural")?10:0);case"adventure":return O+(d.id.includes("adventure")||d.id.includes("extreme")?10:0);case"spiritual":return O+(d.id.includes("heritage")||d.id.includes("cultural")?8:0);case"photography":return O+(d.id.includes("nature")||d.id.includes("ultimate")?7:0);default:return O+3}},0),z=(()=>{switch(a.budget){case"budget":return d.difficulty==="Extreme"?3:10;case"standard":return d.difficulty==="Extreme"?7:10;case"premium":return 10;case"luxury":return d.difficulty==="Extreme"||d.difficulty==="Challenging"?10:8;default:return 5}})(),R=a.groupSize<=2?d.difficulty==="Extreme"?6:10:a.groupSize<=4?10:a.groupSize<=8?d.id.includes("heritage")?10:8:d.id.includes("nature")?9:7;return I+z+R>15});return _.length>=2?_.slice(0,3):k.slice(0,3)};function IP(){const a=un(),[l,h]=G.useState(1),[x,j]=G.useState({startDate:"",endDate:"",groupSize:1,selectedInterests:[],budget:"",accommodation:"",travelStyle:"guided",specialRequests:"",fitnessLevel:"moderate",previousExperience:"some"}),[k,_]=G.useState([]),[d,I]=G.useState(null),[z,R]=G.useState(!1),[D,O]=G.useState("overview"),ie=se=>{j(pe=>({...pe,selectedInterests:pe.selectedInterests.includes(se)?pe.selectedInterests.filter(Pe=>Pe!==se):[...pe.selectedInterests,se]}))},Q=async()=>{R(!0);const se=["🧠 AI analyzing 200+ data points from your preferences...","🗺️ Mapping optimal routes using satellite imagery and local intelligence...","🏨 Scanning 500+ accommodations for perfect matches...","💰 Calculating dynamic pricing with 15 cost factors...","👥 Consulting local experts and tribal leaders...","🌟 Crafting your ultimate Aaranya experience...","✨ Finalizing your personalized adventure masterpiece..."];for(let Pe=0;Pe<se.length;Pe++)await new Promise(Ie=>setTimeout(Ie,800));const pe=AP(x);_(pe),R(!1),h(3)},ae=[{number:1,title:"Travel Details",icon:"📅",description:"When & Who"},{number:2,title:"Preferences",icon:"🎯",description:"What & How"},{number:3,title:"Your Aaranya Plans",icon:"🗺️",description:"Customized Adventures"}];return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-slate-900 to-black pt-24 pb-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[i.jsxs(re.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:1,delay:.2},className:"mb-8",children:[i.jsxs("h1",{className:"text-6xl md:text-8xl font-bold mb-6",children:[i.jsx("span",{className:"bg-gradient-to-r from-emerald-400 via-sky-400 to-emerald-400 bg-clip-text text-transparent",children:"Aaranya"}),i.jsx("br",{}),i.jsx("span",{className:"text-white",children:"Smart Planner"})]}),i.jsx("p",{className:"text-2xl text-gray-300 max-w-4xl mx-auto mb-6",children:"AI-Powered Forest Adventure Architect"}),i.jsx("p",{className:"text-lg text-gray-400 max-w-3xl mx-auto",children:"Advanced algorithms analyze 500+ variables to craft your perfect Jharkhand wilderness experience"})]}),i.jsxs(re.div,{className:"flex justify-center gap-6 mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:[i.jsx(re.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(24, 182, 104, 0.3)"},whileTap:{scale:.95},className:"px-8 py-4 bg-[#18B668] text-white font-bold rounded-2xl hover:bg-[#065F46] transition-all duration-300 shadow-lg",children:"🚀 Current Advanced Planner"}),i.jsx(mi,{to:"/travel-planner-map",children:i.jsx(re.button,{whileHover:{scale:1.05,borderColor:"#18B668"},whileTap:{scale:.95},className:"px-8 py-4 glass-dark border border-white/20 text-white font-bold rounded-2xl hover:border-[#18B668] transition-all duration-300",children:"🗺️ Interactive Map Version"})})]}),i.jsx(re.div,{className:"grid md:grid-cols-3 gap-4 max-w-4xl mx-auto",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.6},children:[{icon:"🧠",title:"AI-Powered",desc:"Advanced algorithms"},{icon:"🌿",title:"Eco-Conscious",desc:"Sustainable tourism"},{icon:"🏆",title:"Expert-Curated",desc:"Local insider knowledge"}].map((se,pe)=>i.jsxs(re.div,{whileHover:{y:-5},className:"glass-card rounded-xl p-4",children:[i.jsx("div",{className:"text-2xl mb-2",children:se.icon}),i.jsx("div",{className:"text-white font-medium",children:se.title}),i.jsx("div",{className:"text-gray-400 text-sm",children:se.desc})]},pe))})]}),i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"flex justify-center mb-16",children:i.jsx("div",{className:"flex items-center gap-8",children:ae.map((se,pe)=>i.jsxs("div",{className:"flex items-center",children:[i.jsxs(re.div,{className:`flex items-center gap-4 ${l>=se.number?"text-emerald-400":"text-gray-500"}`,whileHover:{scale:1.05},children:[i.jsx("div",{className:`w-16 h-16 rounded-2xl flex items-center justify-center text-2xl font-bold transition-all duration-500 ${l>=se.number?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black shadow-lg":"glass-dark border border-gray-500"}`,children:l>se.number?"✓":se.icon}),i.jsxs("div",{children:[i.jsx("div",{className:"font-bold text-lg",children:se.title}),i.jsx("div",{className:"text-sm opacity-70",children:se.description})]})]}),pe<ae.length-1&&i.jsx("div",{className:`w-20 h-1 mx-6 transition-all duration-500 rounded-full ${l>se.number?"bg-gradient-to-r from-emerald-400 to-sky-400":"bg-gray-600"}`})]},se.number))})}),i.jsxs("div",{className:"glass-premium rounded-3xl p-10 mb-12 border border-white/20",children:[l===1&&i.jsxs(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6},children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:["Plan Your ",i.jsx("span",{className:"text-emerald-400",children:"Aaranya"})," Adventure"]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:[i.jsxs(re.div,{whileHover:{scale:1.02},className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(ds,{className:"w-5 h-5 text-emerald-400"}),"Journey Start Date"]}),i.jsx("input",{type:"date",value:x.startDate,onChange:se=>j(pe=>({...pe,startDate:se.target.value})),className:"w-full glass-dark rounded-xl px-4 py-4 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:border-white/40"})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(ds,{className:"w-5 h-5 text-emerald-400"}),"Journey End Date"]}),i.jsx("input",{type:"date",value:x.endDate,onChange:se=>j(pe=>({...pe,endDate:se.target.value})),className:"w-full glass-dark rounded-xl px-4 py-4 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:border-white/40"})]})]}),i.jsxs(re.div,{whileHover:{scale:1.02},className:"space-y-6",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(fo,{className:"w-5 h-5 text-emerald-400"}),"Adventure Group Size"]}),i.jsxs("select",{value:x.groupSize,onChange:se=>j(pe=>({...pe,groupSize:parseInt(se.target.value)})),className:"w-full glass-dark rounded-xl px-4 py-4 text-white border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:border-white/40",children:[i.jsx("option",{value:1,children:"Solo Explorer (1 person)"}),i.jsx("option",{value:2,children:"Couple Adventure (2 people)"}),i.jsx("option",{value:4,children:"Small Squad (3-4 people)"}),i.jsx("option",{value:8,children:"Large Group (5-8 people)"}),i.jsx("option",{value:12,children:"Extended Family/Corporate (9+ people)"})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(yu,{className:"w-5 h-5 text-emerald-400"}),"Adventure Style"]}),i.jsxs("select",{value:x.travelStyle,onChange:se=>j(pe=>({...pe,travelStyle:se.target.value})),className:"w-full glass-dark rounded-xl px-4 py-4 text-white border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300 hover:border-white/40",children:[i.jsx("option",{value:"guided",children:"Expert-Guided Journey"}),i.jsx("option",{value:"self",children:"Independent Exploration"}),i.jsx("option",{value:"custom",children:"Bespoke Experience"}),i.jsx("option",{value:"luxury",children:"Ultra-Premium Adventure"})]})]})]})]}),i.jsx("div",{className:"text-center mt-12",children:i.jsx(re.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(24, 182, 104, 0.3)"},whileTap:{scale:.95},onClick:()=>h(2),disabled:!x.startDate||!x.endDate,className:"px-12 py-4 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl transition-all duration-300 text-lg",children:"Next: Customize Your Adventure →"})})]}),l===2&&i.jsxs(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6},children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:["Craft Your Perfect ",i.jsx("span",{className:"text-emerald-400",children:"Aaranya"})," Experience"]}),i.jsxs("div",{className:"mb-12",children:[i.jsxs("h3",{className:"text-white font-bold text-xl mb-6 flex items-center gap-2",children:[i.jsx($a,{className:"w-6 h-6 text-emerald-400"}),"What Sets Your Soul on Fire? (Select Multiple)"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:PP.map(se=>i.jsx(re.button,{whileHover:{scale:1.03,y:-5},whileTap:{scale:.98},onClick:()=>ie(se.id),className:`p-6 rounded-2xl text-left transition-all duration-300 ${x.selectedInterests.includes(se.id)?`bg-gradient-to-r ${se.color} text-white shadow-2xl`:"glass-dark border border-white/20 text-white hover:border-emerald-400 hover:bg-white/5"}`,children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("span",{className:"text-3xl",children:se.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold text-lg mb-2",children:se.label}),i.jsx("div",{className:"text-sm opacity-90",children:se.description})]}),x.selectedInterests.includes(se.id)&&i.jsx(re.span,{initial:{scale:0},animate:{scale:1},className:"text-2xl",children:"✓"})]})},se.id))})]}),i.jsxs("div",{className:"mb-12",children:[i.jsxs("h3",{className:"text-white font-bold text-xl mb-6 flex items-center gap-2",children:[i.jsx(Xs,{className:"w-6 h-6 text-emerald-400"}),"Choose Your Adventure Investment Level"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:EP.map(se=>i.jsx(re.button,{whileHover:{scale:1.03,y:-5},whileTap:{scale:.98},onClick:()=>j(pe=>({...pe,budget:se.id})),className:`p-6 rounded-2xl text-left transition-all duration-300 ${x.budget===se.id?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black shadow-2xl":"glass-dark border border-white/20 text-white hover:border-emerald-400"}`,children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("span",{className:"text-3xl",children:se.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold text-lg mb-1",children:se.label}),i.jsx("div",{className:"text-lg font-medium mb-3",children:se.range}),i.jsx("div",{className:"text-sm grid grid-cols-2 gap-2",children:se.features.map((pe,Pe)=>i.jsx("span",{className:"inline-block px-3 py-1 bg-black/20 rounded-full text-xs",children:pe},Pe))})]}),x.budget===se.id&&i.jsx(re.span,{initial:{scale:0},animate:{scale:1},className:"text-2xl",children:"✓"})]})},se.id))})]}),i.jsxs("div",{className:"mb-12",children:[i.jsxs("h3",{className:"text-white font-bold text-xl mb-6 flex items-center gap-2",children:[i.jsx(dm,{className:"w-6 h-6 text-emerald-400"}),"Your Preferred Forest Sanctuary"]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:MP.map(se=>i.jsx(re.button,{whileHover:{scale:1.05,y:-5},whileTap:{scale:.98},onClick:()=>j(pe=>({...pe,accommodation:se.id})),className:`p-6 rounded-2xl text-left transition-all duration-300 ${x.accommodation===se.id?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black shadow-2xl":"glass-dark border border-white/20 text-white hover:border-emerald-400"}`,children:i.jsxs("div",{className:"flex items-start gap-3 mb-3",children:[i.jsx("span",{className:"text-3xl",children:se.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:"font-bold text-lg mb-2",children:se.label}),i.jsx("div",{className:"text-sm opacity-90",children:se.description})]}),x.accommodation===se.id&&i.jsx(re.span,{initial:{scale:0},animate:{scale:1},className:"text-2xl",children:"✓"})]})},se.id))})]}),i.jsxs("div",{className:"mb-12",children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-bold text-xl mb-4",children:[i.jsx(En,{className:"w-6 h-6 text-emerald-400"}),"Special Requirements & Dreams"]}),i.jsx("textarea",{value:x.specialRequests,onChange:se=>j(pe=>({...pe,specialRequests:se.target.value})),placeholder:"Tell us about dietary needs, accessibility requirements, special occasions, or any unique experiences you're dreaming of...",className:"w-full glass-dark rounded-2xl px-6 py-4 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300 h-32 resize-none hover:border-white/40"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(re.button,{whileHover:{scale:1.05,borderColor:"#18B668"},whileTap:{scale:.95},onClick:()=>h(1),className:"px-8 py-4 glass-dark border border-white/20 text-white font-bold rounded-2xl hover:border-emerald-400 transition-all duration-300",children:"← Back to Details"}),i.jsx(re.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(24, 182, 104, 0.3)"},whileTap:{scale:.95},onClick:Q,disabled:x.selectedInterests.length===0||!x.budget,className:"px-12 py-4 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-2xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-xl transition-all duration-300 text-lg",children:z?"Crafting Magic...":"Generate My Aaranya Adventure 🚀"})]})]}),l===3&&i.jsx(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6},children:z?i.jsxs("div",{className:"text-center py-20",children:[i.jsx(re.div,{animate:{rotate:360},transition:{duration:2,repeat:1/0,ease:"linear"},className:"w-20 h-20 mx-auto mb-8 bg-gradient-to-r from-emerald-400 to-sky-400 rounded-2xl flex items-center justify-center",children:i.jsx("span",{className:"text-3xl",children:"🧠"})}),i.jsx("h3",{className:"text-3xl font-bold text-white mb-6",children:"🚀 Advanced AI Crafting Your Perfect Adventure"}),i.jsx("p",{className:"text-gray-400 mb-8 text-lg",children:"Our sophisticated algorithms are analyzing hundreds of variables to create your ultimate Aaranya experience..."}),i.jsx("div",{className:"space-y-4 max-w-lg mx-auto",children:["🧠 AI analyzing 200+ data points from your preferences...","🗺️ Mapping optimal routes using satellite imagery and local intelligence...","🏨 Scanning 500+ accommodations for perfect matches...","💰 Calculating dynamic pricing with 15 cost factors...","👥 Consulting local experts and tribal leaders...","🌟 Crafting your ultimate Aaranya experience...","✨ Finalizing your personalized adventure masterpiece..."].map((se,pe)=>i.jsxs(re.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{delay:pe*.6,duration:.6},className:"flex items-center gap-4 text-sm text-gray-300",children:[i.jsx(re.div,{className:"w-3 h-3 bg-emerald-400 rounded-full",animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0}}),se]},pe))})]}):i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-center mb-12",children:[i.jsxs("h2",{className:"text-4xl font-bold text-white mb-4",children:["Your Personalized ",i.jsx("span",{className:"text-emerald-400",children:"Aaranya"})," Adventures"]}),i.jsx("p",{className:"text-xl text-gray-300",children:"Expertly crafted experiences tailored to your preferences"})]}),i.jsx("div",{className:"flex justify-center mb-8",children:i.jsx("div",{className:"glass-dark rounded-2xl p-2 flex gap-2",children:[{mode:"overview",label:"Overview",icon:"👁️"},{mode:"detailed",label:"Detailed",icon:"📋"},{mode:"comparison",label:"Compare",icon:"⚖️"}].map(se=>i.jsxs(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>O(se.mode),className:`px-6 py-3 rounded-xl transition-all duration-300 ${D===se.mode?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold":"text-white hover:bg-white/10"}`,children:[se.icon," ",se.label]},se.mode))})}),i.jsx("div",{className:"grid lg:grid-cols-2 xl:grid-cols-3 gap-8 mb-12",children:k.map((se,pe)=>i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{delay:pe*.2,duration:.6},whileHover:{y:-10,boxShadow:"0 25px 50px rgba(24, 182, 104, 0.2)"},className:`glass-premium rounded-3xl p-8 cursor-pointer transition-all duration-500 ${d?.id===se.id?"ring-2 ring-emerald-400 bg-gradient-to-br from-emerald-400/10 to-sky-400/10":"hover:bg-white/5"}`,onClick:()=>I(se),children:[i.jsxs("div",{className:"flex items-start justify-between mb-6",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-white font-bold text-2xl mb-2",children:se.title}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:se.subtitle}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-400",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Tc,{className:"w-4 h-4"}),se.duration]}),i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(Xs,{className:"w-4 h-4 text-yellow-400"}),se.difficulty]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold bg-gradient-to-r from-emerald-400 to-sky-400 bg-clip-text text-transparent",children:se.price}),i.jsx("div",{className:"text-xs text-gray-400",children:"per person"})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("span",{className:"text-emerald-400 font-medium text-sm",children:"Key Destinations:"}),i.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:se.destinations.slice(0,3).map((Pe,Ie)=>i.jsxs("span",{className:"text-xs px-3 py-1 bg-white/10 rounded-full text-gray-300",children:["�� ",Pe.name]},Ie))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("span",{className:"text-sky-400 font-medium text-sm",children:"Experience Highlights:"}),i.jsx("ul",{className:"mt-2 space-y-2",children:se.detailedHighlights[0]?.experiences.slice(0,3).map((Pe,Ie)=>i.jsxs("li",{className:"text-xs text-gray-300 flex items-start gap-2",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-gradient-to-r from-emerald-400 to-sky-400 rounded-full mt-1.5 flex-shrink-0"}),Pe]},Ie))})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[i.jsxs("div",{className:"text-center p-3 glass-dark rounded-xl",children:[i.jsxs("div",{className:"text-emerald-400 font-bold",children:[se.sustainabilityScore,"/10"]}),i.jsx("div",{className:"text-xs text-gray-400",children:"Eco Score"})]}),i.jsxs("div",{className:"text-center p-3 glass-dark rounded-xl",children:[i.jsx("div",{className:"text-sky-400 font-bold",children:se.destinations.length}),i.jsx("div",{className:"text-xs text-gray-400",children:"Destinations"})]})]}),i.jsx("div",{className:"mb-6",children:i.jsx("div",{className:"flex flex-wrap gap-2",children:se.bestFor.slice(0,2).map((Pe,Ie)=>i.jsx("span",{className:"text-xs px-2 py-1 bg-gradient-to-r from-emerald-400/20 to-sky-400/20 rounded-full text-emerald-400",children:Pe},Ie))})}),i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:`w-full py-4 font-bold rounded-2xl text-lg transition-all duration-300 ${d?.id===se.id?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black shadow-lg":"glass-dark border border-white/20 text-white hover:border-emerald-400"}`,children:d?.id===se.id?"✓ Selected - View Details":"Select This Adventure"})]},se.id))}),d&&i.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"glass-premium rounded-3xl p-8 mb-8",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("h3",{className:"text-3xl font-bold text-white",children:["Complete Journey: ",d.title]}),i.jsx("div",{className:"flex gap-4",children:i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:[d.sustainabilityScore,"/10"]}),i.jsx("div",{className:"text-xs text-gray-400",children:"Sustainability"})]})})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:d.detailedHighlights.map((se,pe)=>i.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:pe*.1},className:"glass-dark rounded-2xl p-6",children:[i.jsxs("h4",{className:"flex items-center gap-2 text-white font-bold mb-4",children:[i.jsx("span",{className:"text-2xl",children:se.icon}),se.category]}),i.jsx("ul",{className:"space-y-2",children:se.experiences.map((Pe,Ie)=>i.jsxs("li",{className:"text-sm text-gray-300 flex items-start gap-2",children:[i.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-400 rounded-full mt-1.5 flex-shrink-0"}),Pe]},Ie))})]},pe))}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h4",{className:"text-2xl font-bold text-white mb-6",children:"Detailed Day-by-Day Journey"}),i.jsx("div",{className:"space-y-6",children:d.itinerary.map((se,pe)=>i.jsx(re.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:pe*.1},className:"glass-dark rounded-2xl p-6",children:i.jsxs("div",{className:"flex items-start gap-6",children:[i.jsx("div",{className:"flex-shrink-0",children:i.jsxs("div",{className:"w-16 h-16 bg-gradient-to-r from-emerald-400 to-sky-400 rounded-2xl flex items-center justify-center text-black font-bold text-xl",children:["Day ",se.day]})}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h5",{className:"text-white font-bold text-xl mb-2",children:se.title}),i.jsxs("p",{className:"text-gray-400 mb-4",children:[se.location," • ",se.theme]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-6",children:[i.jsxs("div",{children:[i.jsx("h6",{className:"text-emerald-400 font-medium mb-3",children:"🎯 Activities & Experiences"}),i.jsx("div",{className:"space-y-3",children:se.activities.map((Pe,Ie)=>i.jsxs("div",{className:"glass rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white font-medium",children:Pe.time}),i.jsx("span",{className:"text-xs px-2 py-1 bg-emerald-400/20 rounded-full text-emerald-400",children:Pe.duration})]}),i.jsx("div",{className:"text-white font-medium text-sm",children:Pe.activity}),i.jsx("p",{className:"text-gray-400 text-xs mt-1",children:Pe.description}),i.jsxs("div",{className:"flex justify-between mt-2 text-xs",children:[i.jsxs("span",{className:"text-gray-400",children:["Difficulty: ",Pe.difficulty]}),i.jsxs("span",{className:"text-emerald-400",children:["₹",Pe.cost]})]})]},Ie))})]}),i.jsxs("div",{children:[i.jsx("h6",{className:"text-sky-400 font-medium mb-3",children:"🍽️ Culinary Journey"}),i.jsx("div",{className:"space-y-3",children:se.meals.map((Pe,Ie)=>i.jsxs("div",{className:"glass rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("span",{className:"text-white font-medium capitalize",children:Pe.type}),i.jsxs("span",{className:"text-sky-400 text-xs",children:["₹",Pe.cost]})]}),i.jsx("p",{className:"text-gray-400 text-sm",children:Pe.venue}),i.jsx("p",{className:"text-white text-xs mt-1",children:Pe.speciality})]},Ie))})]})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-xs",children:[i.jsxs("div",{className:"glass rounded-xl p-3",children:[i.jsx("span",{className:"text-emerald-400 font-medium",children:"🏨 Stay:"}),i.jsx("p",{className:"text-white mt-1",children:se.accommodation.name}),i.jsxs("p",{className:"text-gray-400",children:[se.accommodation.type," • ⭐ ",se.accommodation.rating]})]}),i.jsxs("div",{className:"glass rounded-xl p-3",children:[i.jsx("span",{className:"text-sky-400 font-medium",children:"🚗 Transport:"}),i.jsx("p",{className:"text-white mt-1",children:se.transportation.mode}),i.jsxs("p",{className:"text-gray-400",children:[se.transportation.distance," • ",se.transportation.duration]})]}),i.jsxs("div",{className:"glass rounded-xl p-3",children:[i.jsx("span",{className:"text-yellow-400 font-medium",children:"☀️ Weather:"}),i.jsx("p",{className:"text-white mt-1",children:se.weather}),i.jsxs("p",{className:"text-gray-400",children:["🌅 ",se.sunrise," | 🌅 ",se.sunset]})]})]})]})]})},se.day))})]}),i.jsxs("div",{className:"glass-dark rounded-2xl p-6 mb-8",children:[i.jsx("h4",{className:"text-xl font-bold text-white mb-4",children:"💰 Investment Breakdown"}),i.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:Object.entries(d.priceBreakdown).map(([se,pe])=>i.jsxs("div",{className:"flex justify-between items-center p-3 glass rounded-xl",children:[i.jsx("span",{className:"text-gray-300 capitalize",children:se}),i.jsxs("span",{className:"text-emerald-400 font-bold",children:[pe,"%"]})]},se))})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{className:"glass-dark rounded-2xl p-6",children:[i.jsx("h4",{className:"text-xl font-bold text-emerald-400 mb-4",children:"💡 Expert Insider Tips"}),i.jsx("ul",{className:"space-y-2",children:d.expertTips.map((se,pe)=>i.jsxs("li",{className:"text-sm text-gray-300 flex items-start gap-2",children:[i.jsx("span",{className:"text-emerald-400 font-bold",children:"•"}),se]},pe))})]}),i.jsxs("div",{className:"glass-dark rounded-2xl p-6",children:[i.jsx("h4",{className:"text-xl font-bold text-sky-400 mb-4",children:"🤫 Local Secrets"}),i.jsx("ul",{className:"space-y-2",children:d.localSecrets.map((se,pe)=>i.jsxs("li",{className:"text-sm text-gray-300 flex items-start gap-2",children:[i.jsx("span",{className:"text-sky-400 font-bold",children:"•"}),se]},pe))})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h4",{className:"text-2xl font-bold text-white mb-6",children:"🌟 Traveler Experiences"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:d.testimonials.map((se,pe)=>i.jsxs(re.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:pe*.1},className:"glass-dark rounded-2xl p-6",children:[i.jsx("div",{className:"flex items-center gap-2 mb-3",children:[...Array(se.rating)].map((Pe,Ie)=>i.jsx(Xs,{className:"w-4 h-4 text-yellow-400 fill-current"},Ie))}),i.jsxs("p",{className:"text-gray-300 text-sm mb-4",children:['"',se.review,'"']}),i.jsx("div",{className:"text-emerald-400 text-xs font-medium mb-1",children:se.highlight}),i.jsxs("div",{className:"text-gray-400 text-xs",children:["— ",se.name,", ",se.location]})]},pe))})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(re.button,{whileHover:{scale:1.02,boxShadow:"0 20px 40px rgba(24, 182, 104, 0.3)"},whileTap:{scale:.98},onClick:()=>a("/booking",{state:{planId:d.id,planTitle:d.title,duration:d.duration,price:parseInt(d.price.replace(/[₹,]/g,"")),type:"plan"}}),className:"flex-1 py-4 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-2xl hover:shadow-xl transition-all duration-300 text-lg",children:"🎯 Book This Epic Adventure"}),i.jsx(re.button,{whileHover:{scale:1.02,borderColor:"#18B668"},whileTap:{scale:.98},className:"px-8 py-4 glass-dark border border-white/20 text-white font-bold rounded-2xl hover:border-emerald-400 transition-all duration-300",children:"✏️ Customize Further"}),i.jsx(re.button,{whileHover:{scale:1.02,borderColor:"#18B668"},whileTap:{scale:.98},className:"px-8 py-4 glass-dark border border-white/20 text-white font-bold rounded-2xl hover:border-emerald-400 transition-all duration-300",children:"📤 Share Plan"})]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx(re.button,{whileHover:{scale:1.05,borderColor:"#18B668"},whileTap:{scale:.95},onClick:()=>h(2),className:"px-8 py-4 glass-dark border border-white/20 text-white font-bold rounded-2xl hover:border-emerald-400 transition-all duration-300",children:"← Modify Preferences"}),i.jsx(re.button,{whileHover:{scale:1.05,boxShadow:"0 20px 40px rgba(24, 182, 104, 0.3)"},whileTap:{scale:.95},onClick:Q,className:"px-8 py-4 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-2xl hover:shadow-xl transition-all duration-300",children:"🔄 Generate New Adventures"})]})]})})]}),i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"text-center",children:[i.jsxs("h3",{className:"text-2xl font-bold text-white mb-6",children:["Powered by Advanced ",i.jsx("span",{className:"text-emerald-400",children:"Aaranya AI"})]}),i.jsx("div",{className:"grid md:grid-cols-4 gap-6",children:[{icon:"🧠",title:"Smart Learning",desc:"AI learns from every interaction"},{icon:"🔄",title:"Real-time Updates",desc:"Weather, events, and conditions"},{icon:"🎯",title:"Precision Matching",desc:"99.2% satisfaction rate"},{icon:"🌱",title:"Sustainable Focus",desc:"Eco-conscious recommendations"}].map((se,pe)=>i.jsxs(re.div,{whileHover:{y:-5,scale:1.05},className:"glass-card rounded-2xl p-6",children:[i.jsx("div",{className:"text-3xl mb-3",children:se.icon}),i.jsx("h4",{className:"text-white font-bold mb-2",children:se.title}),i.jsx("p",{className:"text-gray-400 text-sm",children:se.desc})]},pe))})]})]})})}const zP=[{id:"nature",label:"Nature & Wildlife",icon:"🌿",color:"from-green-400 to-emerald-500"},{id:"culture",label:"Culture & Heritage",icon:"🎭",color:"from-purple-400 to-pink-500"},{id:"adventure",label:"Adventure Sports",icon:"🏔️",color:"from-orange-400 to-red-500"},{id:"spiritual",label:"Spiritual Journey",icon:"🕉️",color:"from-yellow-400 to-orange-500"},{id:"photography",label:"Photography",icon:"📸",color:"from-blue-400 to-indigo-500"},{id:"food",label:"Local Cuisine",icon:"🍽️",color:"from-pink-400 to-rose-500"}],DP=[{id:"budget",label:"Budget (₹10,000 - ₹25,000)",icon:"💰"},{id:"standard",label:"Standard (₹25,000 - ₹50,000)",icon:"💳"},{id:"premium",label:"Premium (₹50,000 - ₹1,00,000)",icon:"💎"},{id:"luxury",label:"Luxury (₹1,00,000+)",icon:"👑"}],RP=[{id:"homestay",label:"Homestay",icon:"🏠"},{id:"hotel",label:"Hotel",icon:"🏨"},{id:"resort",label:"Resort",icon:"🏖️"},{id:"camping",label:"Camping",icon:"⛺"}],LP=a=>[{id:"1",title:"Nature Explorer",duration:"5 Days / 4 Nights",destinations:["Netarhat","Hundru Falls","Betla National Park"],highlights:["Sunrise viewpoint","Waterfall trekking","Wildlife safari","Night camping"],price:"₹18,500",difficulty:"Moderate",bestFor:["Nature lovers","Adventure seekers","Photography enthusiasts"],itinerary:[{day:1,location:"Ranchi to Netarhat",activities:["Travel to Netarhat","Check-in accommodation","Evening nature walk","Sunset viewing"],accommodation:"Forest Guest House"},{day:2,location:"Netarhat",activities:["Early morning sunrise","Pine forest exploration","Local tribal village visit","Bonfire evening"],accommodation:"Forest Guest House"},{day:3,location:"Netarhat to Hundru Falls",activities:["Travel to Hundru","Waterfall trekking","Rock climbing","Photography session"],accommodation:"Eco Lodge"},{day:4,location:"Hundru to Betla National Park",activities:["Wildlife safari","Bird watching","Nature interpretation","Night camping"],accommodation:"Forest Camp"},{day:5,location:"Betla to Ranchi",activities:["Morning safari","Travel back to Ranchi","Departure"],accommodation:"Day trip"}]},{id:"2",title:"Cultural Heritage",duration:"7 Days / 6 Nights",destinations:["Deoghar","Dumka","Hazaribagh"],highlights:["Temple visits","Tribal village stays","Handicraft workshops","Cultural performances"],price:"₹25,200",difficulty:"Easy",bestFor:["Culture enthusiasts","Spiritual seekers","Art lovers"],itinerary:[{day:1,location:"Ranchi to Deoghar",activities:["Travel to Deoghar","Baidyanath Temple visit","Evening aarti","Local market exploration"],accommodation:"Heritage Hotel"},{day:2,location:"Deoghar",activities:["Temple complex tour","Spiritual discourse","Local cuisine tasting","Cultural show"],accommodation:"Heritage Hotel"},{day:3,location:"Deoghar to Dumka",activities:["Travel to Dumka","Santhal village visit","Traditional music session","Handicraft workshop"],accommodation:"Tribal Homestay"},{day:4,location:"Dumka",activities:["Tribal dance learning","Organic farming experience","Traditional cooking","Storytelling evening"],accommodation:"Tribal Homestay"},{day:5,location:"Dumka to Hazaribagh",activities:["Travel to Hazaribagh","Rock paintings visit","Local art gallery","Craft shopping"],accommodation:"Boutique Hotel"},{day:6,location:"Hazaribagh",activities:["National park visit","Wildlife photography","Local artisan meetup","Cultural dinner"],accommodation:"Boutique Hotel"},{day:7,location:"Hazaribagh to Ranchi",activities:["Final shopping","Travel back to Ranchi","Departure"],accommodation:"Day trip"}]},{id:"3",title:"Adventure Seeker",duration:"6 Days / 5 Nights",destinations:["Patratu Valley","Hundru Falls","Rock Garden","Dassam Falls"],highlights:["Water sports","Rock climbing","Paragliding","River rafting"],price:"₹22,800",difficulty:"Challenging",bestFor:["Adventure enthusiasts","Thrill seekers","Sports lovers"],itinerary:[{day:1,location:"Ranchi to Patratu Valley",activities:["Travel to Patratu","Valley exploration","Boating setup","Sunset photography"],accommodation:"Adventure Camp"},{day:2,location:"Patratu Valley",activities:["Water sports","Kayaking","Valley trekking","Campfire evening"],accommodation:"Adventure Camp"},{day:3,location:"Patratu to Hundru Falls",activities:["Travel to Hundru","Rock climbing","Rappelling","Photography workshop"],accommodation:"Adventure Lodge"},{day:4,location:"Hundru Falls",activities:["Advanced trekking","Waterfall exploration","Survival skills training","Night camping"],accommodation:"Camping"},{day:5,location:"Rock Garden",activities:["Rock climbing","Zip lining","Adventure photography","Team activities"],accommodation:"Resort"},{day:6,location:"Return to Ranchi",activities:["Final adventure activity","Certificate ceremony","Travel back","Departure"],accommodation:"Day trip"}]}].filter(h=>a.selectedInterests.includes("nature")&&h.title.includes("Nature")||a.selectedInterests.includes("culture")&&h.title.includes("Cultural")||a.selectedInterests.includes("adventure")&&h.title.includes("Adventure")?!0:a.selectedInterests.length===0);function BP(){const a=un(),[l,h]=G.useState(1),[x,j]=G.useState({startDate:"",endDate:"",groupSize:1,selectedInterests:[],budget:"",accommodation:"",travelStyle:"guided",specialRequests:""}),[k,_]=G.useState([]),[d,I]=G.useState(null),[z,R]=G.useState(!1),D=Q=>{j(ae=>({...ae,selectedInterests:ae.selectedInterests.includes(Q)?ae.selectedInterests.filter(se=>se!==Q):[...ae.selectedInterests,Q]}))},O=async()=>{R(!0),await new Promise(ae=>setTimeout(ae,2e3));const Q=LP(x);_(Q),R(!1),h(3)},ie=[{number:1,title:"Travel Details",icon:"📅"},{number:2,title:"Preferences",icon:"🎯"},{number:3,title:"Your Plans",icon:"🗺️"}];return i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-slate-900 to-black pt-24 pb-20",children:i.jsxs("div",{className:"max-w-6xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:[i.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-sky-400 bg-clip-text text-transparent",children:"Smart Travel"}),i.jsx("span",{className:"text-white",children:" Planner"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"AI-powered personalized itinerary generation with free interactive map"})]}),i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"flex justify-center mb-12",children:i.jsx("div",{className:"flex items-center gap-8",children:ie.map((Q,ae)=>i.jsxs("div",{className:"flex items-center",children:[i.jsxs("div",{className:`flex items-center gap-3 ${l>=Q.number?"text-emerald-400":"text-gray-500"}`,children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center text-lg font-bold transition-all duration-300 ${l>=Q.number?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black":"glass-dark border border-gray-500"}`,children:l>Q.number?"✓":Q.icon}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:Q.title}),i.jsxs("div",{className:"text-sm opacity-70",children:["Step ",Q.number]})]})]}),ae<ie.length-1&&i.jsx("div",{className:`w-16 h-0.5 mx-4 transition-colors duration-300 ${l>Q.number?"bg-emerald-400":"bg-gray-600"}`})]},Q.number))})}),i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.4},className:"glass-premium rounded-3xl p-8 mb-12",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsxs("h2",{className:"text-4xl font-bold text-white mb-4",children:[i.jsx("span",{className:"text-[#18B668]",children:"Aaranya"})," Interactive Map"]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-4xl mx-auto",children:"Explore Jharkhand's pristine destinations with our advanced interactive map. Discover hidden gems, plan your route, and get detailed information about each location."})]}),i.jsx("div",{className:"mb-6",children:i.jsx(zy,{height:"600px",onDestinationSelect:Q=>{console.log("Selected destination:",Q),j(ae=>({...ae,selectedInterests:Q.type?[Q.type]:ae.selectedInterests}))}})}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-6 text-center",children:[i.jsxs("div",{className:"glass-dark rounded-xl p-4",children:[i.jsx(yu,{className:"w-8 h-8 text-emerald-400 mx-auto mb-2"}),i.jsx("h3",{className:"text-white font-bold mb-1",children:"50+ Destinations"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Curated locations across Jharkhand"})]}),i.jsxs("div",{className:"glass-dark rounded-xl p-4",children:[i.jsx(Xs,{className:"w-8 h-8 text-yellow-400 mx-auto mb-2"}),i.jsx("h3",{className:"text-white font-bold mb-1",children:"Expert Reviewed"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"All destinations verified by local experts"})]}),i.jsxs("div",{className:"glass-dark rounded-xl p-4",children:[i.jsx(fo,{className:"w-8 h-8 text-sky-400 mx-auto mb-2"}),i.jsx("h3",{className:"text-white font-bold mb-1",children:"Community Driven"}),i.jsx("p",{className:"text-gray-400 text-sm",children:"Reviews and tips from fellow travelers"})]})]}),i.jsx("div",{className:"text-center mt-6",children:i.jsxs("p",{className:"text-gray-400 text-sm",children:["This interactive map is powered by OpenStreetMap and is completely free to use.",i.jsx("span",{className:"text-[#18B668]",children:" No registration required - explore at your own pace!"})]})})]}),i.jsxs("div",{className:"glass rounded-3xl p-8 mb-12",children:[l===1&&i.jsxs(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6},children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-8 text-center",children:"When are you planning to travel?"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-8 max-w-4xl mx-auto",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-3",children:"Start Date"}),i.jsx("input",{type:"date",value:x.startDate,onChange:Q=>j(ae=>({...ae,startDate:Q.target.value})),className:"w-full glass-dark rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-3",children:"End Date"}),i.jsx("input",{type:"date",value:x.endDate,onChange:Q=>j(ae=>({...ae,endDate:Q.target.value})),className:"w-full glass-dark rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-colors"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-3",children:"Group Size"}),i.jsxs("select",{value:x.groupSize,onChange:Q=>j(ae=>({...ae,groupSize:parseInt(Q.target.value)})),className:"w-full glass-dark rounded-xl px-4 py-3 text-white border border-white/20 focus:border-emerald-400 focus:outline-none transition-colors",children:[i.jsx("option",{value:1,children:"Solo (1 person)"}),i.jsx("option",{value:2,children:"Couple (2 people)"}),i.jsx("option",{value:4,children:"Small Group (3-4 people)"}),i.jsx("option",{value:8,children:"Large Group (5-8 people)"}),i.jsx("option",{value:12,children:"Family/Extended Group (9+ people)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-3",children:"Travel Style"}),i.jsxs("select",{value:x.travelStyle,onChange:Q=>j(ae=>({...ae,travelStyle:Q.target.value})),className:"w-full glass-dark rounded-xl px-4 py-3 text-white border border-white/20 focus:border-emerald-400 focus:outline-none transition-colors",children:[i.jsx("option",{value:"guided",children:"Guided Tour"}),i.jsx("option",{value:"self",children:"Self-Guided"}),i.jsx("option",{value:"custom",children:"Custom Experience"})]})]})]}),i.jsx("div",{className:"text-center mt-8",children:i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(2),disabled:!x.startDate||!x.endDate,className:"px-8 py-3 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all duration-300",children:"Next: Choose Preferences →"})})]}),l===2&&i.jsxs(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6},children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-8 text-center",children:"What interests you most?"}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-white font-medium mb-4",children:"Select your interests (choose multiple)"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:zP.map(Q=>i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>D(Q.id),className:`p-4 rounded-xl text-left transition-all duration-300 ${x.selectedInterests.includes(Q.id)?`bg-gradient-to-r ${Q.color} text-white`:"glass-dark border border-white/20 text-white hover:border-emerald-400"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-2xl",children:Q.icon}),i.jsx("span",{className:"font-medium",children:Q.label})]})},Q.id))})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-white font-medium mb-4",children:"Budget Range"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:DP.map(Q=>i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(ae=>({...ae,budget:Q.id})),className:`p-4 rounded-xl text-left transition-all duration-300 ${x.budget===Q.id?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black":"glass-dark border border-white/20 text-white hover:border-emerald-400"}`,children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{className:"text-xl",children:Q.icon}),i.jsx("span",{className:"font-medium",children:Q.label})]})},Q.id))})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-white font-medium mb-4",children:"Preferred Accommodation"}),i.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:RP.map(Q=>i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>j(ae=>({...ae,accommodation:Q.id})),className:`p-4 rounded-xl text-center transition-all duration-300 ${x.accommodation===Q.id?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black":"glass-dark border border-white/20 text-white hover:border-emerald-400"}`,children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("span",{className:"text-2xl",children:Q.icon}),i.jsx("span",{className:"font-medium text-sm",children:Q.label})]})},Q.id))})]}),i.jsxs("div",{className:"mb-8",children:[i.jsx("h3",{className:"text-white font-medium mb-4",children:"Special Requests (Optional)"}),i.jsx("textarea",{value:x.specialRequests,onChange:Q=>j(ae=>({...ae,specialRequests:Q.target.value})),placeholder:"Any specific requirements, dietary restrictions, accessibility needs, or special interests...",className:"w-full glass-dark rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-colors h-32 resize-none"})]}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(1),className:"px-8 py-3 glass-dark border border-white/20 text-white font-bold rounded-xl hover:bg-white/10 transition-all duration-300",children:"← Back"}),i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:O,disabled:x.selectedInterests.length===0||!x.budget,className:"px-8 py-3 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all duration-300",children:"Generate Travel Plans →"})]})]}),l===3&&i.jsxs(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6},children:[i.jsx("h2",{className:"text-2xl font-bold text-white mb-8 text-center",children:"Your Personalized Travel Plans"}),z?i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"inline-block animate-spin rounded-full h-16 w-16 border-t-2 border-b-2 border-emerald-400 mb-4"}),i.jsx("p",{className:"text-white text-lg",children:"Generating your perfect itinerary..."}),i.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Analyzing your preferences and matching destinations"})]}):k.length>0?i.jsx("div",{className:"grid gap-8",children:k.map(Q=>i.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"glass-card rounded-2xl p-6 hover:shadow-xl transition-all duration-300",children:[i.jsxs("div",{className:"flex justify-between items-start mb-6",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:Q.title}),i.jsx("p",{className:"text-emerald-400 font-medium",children:Q.duration}),i.jsxs("p",{className:"text-gray-300 text-sm",children:["Difficulty: ",Q.difficulty]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("div",{className:"text-3xl font-bold text-emerald-400 mb-1",children:Q.price}),i.jsx("div",{className:"text-gray-400 text-sm",children:"per person"})]})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-white font-semibold mb-3",children:"Destinations"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Q.destinations.map((ae,se)=>i.jsx("span",{className:"px-3 py-1 bg-emerald-500/20 text-emerald-300 rounded-full text-sm",children:ae},se))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-white font-semibold mb-3",children:"Highlights"}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:Q.highlights.map((ae,se)=>i.jsxs("div",{className:"flex items-center gap-2 text-gray-300",children:[i.jsx("span",{className:"text-emerald-400",children:"•"}),ae]},se))})]}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-white font-semibold mb-3",children:"Perfect For"}),i.jsx("div",{className:"flex flex-wrap gap-2",children:Q.bestFor.map((ae,se)=>i.jsx("span",{className:"px-3 py-1 glass text-white rounded-full text-sm",children:ae},se))})]}),i.jsxs("div",{className:"flex gap-4",children:[i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>I(d?.id===Q.id?null:Q),className:"flex-1 py-3 px-4 glass border border-white/20 text-white rounded-xl font-medium hover:bg-white/10 transition-colors",children:d?.id===Q.id?"Hide Details":"View Detailed Itinerary"}),i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>a("/booking",{state:{planId:Q.id,planTitle:Q.title,duration:Q.duration,price:parseInt(Q.price.replace(/[₹,]/g,"")),type:"plan"}}),className:"flex-1 py-3 px-4 bg-gradient-to-r from-emerald-400 to-sky-400 text-black rounded-xl font-bold hover:shadow-lg transition-all duration-300",children:"Book This Plan"})]}),d?.id===Q.id&&i.jsxs(re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mt-6 pt-6 border-t border-white/10",children:[i.jsx("h4",{className:"text-white font-semibold mb-4",children:"Detailed Itinerary"}),i.jsx("div",{className:"space-y-4",children:Q.itinerary.map(ae=>i.jsxs("div",{className:"glass rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[i.jsx("div",{className:"w-8 h-8 bg-emerald-500 rounded-full flex items-center justify-center text-black font-bold text-sm",children:ae.day}),i.jsx("h5",{className:"text-white font-medium",children:ae.location})]}),i.jsxs("div",{className:"ml-11",children:[i.jsxs("div",{className:"mb-2",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Activities:"}),i.jsx("ul",{className:"text-gray-300 text-sm mt-1",children:ae.activities.map((se,pe)=>i.jsxs("li",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-emerald-400",children:"•"}),se]},pe))})]}),i.jsxs("div",{className:"text-sm",children:[i.jsx("span",{className:"text-gray-400",children:"Accommodation:"}),i.jsx("span",{className:"text-emerald-300 ml-2",children:ae.accommodation})]})]})]},ae.day))})]})]},Q.id))}):i.jsxs("div",{className:"text-center py-16",children:[i.jsx("p",{className:"text-white text-lg mb-4",children:"No plans match your criteria"}),i.jsx("p",{className:"text-gray-400 mb-6",children:"Try adjusting your preferences to see more options"}),i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(2),className:"px-8 py-3 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl hover:shadow-lg transition-all duration-300",children:"Modify Preferences"})]}),k.length>0&&!z&&i.jsx("div",{className:"text-center mt-8",children:i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>h(2),className:"px-8 py-3 glass-dark border border-white/20 text-white font-bold rounded-xl hover:bg-white/10 transition-all duration-300",children:"← Modify Preferences"})})]})]})]})})}const FP=[{id:"all",name:"All Products",icon:"🛍️"},{id:"pottery",name:"Pottery & Ceramics",icon:"🏺"},{id:"textiles",name:"Textiles & Fabrics",icon:"🧵"},{id:"woodcraft",name:"Wood Crafts",icon:"🪵"},{id:"metalwork",name:"Metal Works",icon:"⚒️"},{id:"jewelry",name:"Jewelry",icon:"💎"},{id:"paintings",name:"Art & Paintings",icon:"🎨"}],OP=[{id:1,name:"Sunita Devi",specialty:"Master Weaver",location:"Dumka, Jharkhand",rating:4.9,orders:234,avatar:"👩‍🦳",verified:!0,products:12},{id:2,name:"Birsa Munda",specialty:"Wood Sculptor",location:"Ranchi, Jharkhand",rating:4.8,orders:156,avatar:"👨‍🦲",verified:!0,products:8},{id:3,name:"Prema Kumari",specialty:"Bell Metal Artist",location:"Dhanbad, Jharkhand",rating:5,orders:89,avatar:"👩‍🎨",verified:!0,products:15}],Zv=[{id:1,name:"Traditional Dokra Horse",artisan:"Ramesh Kumar",category:"metalwork",price:2500,originalPrice:3500,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=500",rating:4.8,reviews:127,inStock:!0,featured:!0,description:"A beautiful handcrafted Dokra horse made using the ancient lost-wax casting technique."},{id:2,name:"Tribal Bamboo Wall Art",artisan:"Sukanti Devi",category:"woodcraft",price:1800,originalPrice:2200,image:"https://images.unsplash.com/photo-1544966503-7e22750c67b4?w=500",rating:4.9,reviews:89,inStock:!0,featured:!0,description:"Intricate bamboo weaving showcasing traditional tribal patterns and motifs."},{id:3,name:"Handwoven Tribal Textile",artisan:"Sunita Devi",category:"textiles",price:2850,originalPrice:3200,image:"https://images.unsplash.com/photo-1562469162-c17fc5155156?w=500",rating:4.9,reviews:23,inStock:!0,featured:!0,description:"Authentic Santhal tribal pattern textile hand-woven using traditional techniques."},{id:4,name:"Traditional Clay Pottery Set",artisan:"Rama Devi",category:"pottery",price:1650,originalPrice:2e3,image:"https://images.unsplash.com/photo-1715463846875-0dd99c72899a?w=500",rating:4.7,reviews:45,inStock:!0,featured:!1,description:"Beautiful clay pottery set with intricate tribal motifs, perfect for traditional dining."},{id:5,name:"Carved Wooden Sculpture",artisan:"Birsa Munda",category:"woodcraft",price:4500,originalPrice:5200,image:"https://images.unsplash.com/photo-1562468147-521b210456d2?w=500",rating:5,reviews:12,inStock:!0,featured:!0,description:"Intricate wooden sculpture depicting tribal folklore, carved from sustainable local wood."},{id:6,name:"Bell Metal Decorative Bowl",artisan:"Prema Kumari",category:"metalwork",price:3200,originalPrice:3800,image:"https://images.unsplash.com/photo-1671476963151-b99a873e2bf3?w=500",rating:4.8,reviews:34,inStock:!0,featured:!1,description:"Handcrafted bell metal bowl with traditional patterns, perfect for ceremonies."},{id:7,name:"Tribal Pattern Shawl",artisan:"Sunita Devi",category:"textiles",price:1850,originalPrice:2200,image:"https://images.unsplash.com/photo-1506629905607-265d3ec047d6?w=500",rating:4.6,reviews:67,inStock:!1,featured:!1,description:"Warm and comfortable shawl with authentic tribal patterns, ideal for winter wear."},{id:8,name:"Handmade Jewelry Set",artisan:"Maya Devi",category:"jewelry",price:2400,originalPrice:2800,image:"https://images.unsplash.com/photo-1515562141207-7a88fb7ce338?w=500",rating:4.9,reviews:28,inStock:!0,featured:!0,description:"Elegant jewelry set made with traditional techniques and natural materials."},{id:9,name:"Terracotta Garden Planters",artisan:"Santosh Das",category:"pottery",price:850,originalPrice:1200,image:"https://images.unsplash.com/photo-1578320339732-ec27b5a90d2e?w=500",rating:4.5,reviews:53,inStock:!0,featured:!1,description:"Beautiful terracotta planters with traditional tribal motifs, perfect for gardens."},{id:10,name:"Tribal Art Canvas Painting",artisan:"Anita Kumari",category:"paintings",price:3500,originalPrice:4e3,image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=500",rating:4.7,reviews:19,inStock:!0,featured:!0,description:"Vibrant tribal art painting depicting the rich cultural heritage of Jharkhand."},{id:11,name:"Bamboo Basket Collection",artisan:"Rajesh Oraon",category:"woodcraft",price:1200,originalPrice:1500,image:"https://images.unsplash.com/photo-1578951447037-0e20ede2bd20?w=500",rating:4.4,reviews:76,inStock:!0,featured:!1,description:"Set of handwoven bamboo baskets in various sizes, perfect for storage and decor."},{id:12,name:"Silver Tribal Necklace",artisan:"Kumari Devi",category:"jewelry",price:5500,originalPrice:6500,image:"https://images.unsplash.com/photo-1506630448388-4e683c67ddb0?w=500",rating:4.9,reviews:41,inStock:!0,featured:!0,description:"Exquisite silver necklace with traditional tribal designs, handcrafted by master jewelers."}];function VP(){Cc();const[a,l]=G.useState("all"),[h,x]=G.useState("featured"),[j,k]=G.useState("grid"),[_,d]=G.useState([]),{addToCart:I}=sp(),z=ie=>{I({id:ie.id.toString(),name:ie.name,price:ie.price,image:ie.image,category:ie.category,artisan:ie.artisan,quantity:1})},R=ie=>{d(Q=>Q.includes(ie)?Q.filter(ae=>ae!==ie):[...Q,ie])},O=[...a==="all"?Zv:Zv.filter(ie=>ie.category===a)].sort((ie,Q)=>{switch(h){case"price-low":return ie.price-Q.price;case"price-high":return Q.price-ie.price;case"rating":return Q.rating-ie.rating;case"featured":return Q.featured?1:-1;default:return 0}});return i.jsx("div",{className:"min-h-screen bg-black pt-24 pb-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-16",children:[i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:[i.jsx("span",{className:"text-white",children:"Artisan "}),i.jsx("span",{className:"text-[#18B668]",children:"Marketplace"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto mb-8",children:"Discover authentic handicrafts directly from master artisans of Jharkhand"}),i.jsxs(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"inline-flex items-center gap-3 px-8 py-4 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-bold rounded-2xl hover:shadow-lg hover:shadow-[#18B668]/25 transition-all duration-300",children:[i.jsx("span",{className:"text-xl",children:"🔍"}),"View All Destinations",i.jsx("span",{className:"text-xl",children:"→"})]})]}),i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},className:"mb-16",children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:["Meet Our ",i.jsx("span",{className:"text-[#18B668]",children:"Master Artisans"})]}),i.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:OP.map((ie,Q)=>i.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:Q*.1,duration:.6},whileHover:{y:-10,scale:1.02},className:"glass rounded-2xl p-6 text-center group hover:bg-white/10 transition-all duration-300",children:[i.jsxs("div",{className:"relative mb-4",children:[i.jsx("div",{className:"w-20 h-20 mx-auto bg-[#18B668] rounded-full flex items-center justify-center text-3xl",children:ie.avatar}),ie.verified&&i.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-gradient-to-r from-yellow-400 to-orange-500 rounded-full flex items-center justify-center",children:i.jsx("span",{className:"text-black text-xs",children:"✓"})})]}),i.jsx("h3",{className:"text-white font-bold text-xl mb-2",children:ie.name}),i.jsx("p",{className:"text-[#18B668] font-medium mb-1",children:ie.specialty}),i.jsx("p",{className:"text-gray-400 text-sm mb-4",children:ie.location}),i.jsxs("div",{className:"flex justify-center gap-4 text-sm text-gray-300 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx("span",{className:"text-yellow-400",children:"⭐"}),i.jsx("span",{children:ie.rating})]}),i.jsxs("div",{children:[ie.orders," orders"]}),i.jsxs("div",{children:[ie.products," products"]})]}),i.jsx(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full py-2 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-medium rounded-lg hover:shadow-lg transition-all duration-300",children:"View Products"})]},ie.id))})]}),i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"mb-12",children:i.jsxs("div",{className:"glass rounded-2xl p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h3",{className:"text-white font-semibold mb-4",children:"Categories"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:FP.map(ie=>i.jsxs(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(ie.id),className:`px-4 py-2 rounded-xl text-sm font-medium transition-all duration-300 ${a===ie.id?"bg-[#18B668] text-white":"glass-dark border border-white/20 text-white hover:border-[#18B668]"}`,children:[i.jsx("span",{className:"mr-2",children:ie.icon}),ie.name]},ie.id))})]}),i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"Sort by:"}),i.jsxs("select",{value:h,onChange:ie=>x(ie.target.value),className:"glass-dark rounded-lg px-3 py-2 text-white text-sm border border-white/20 focus:border-[#18B668] focus:outline-none",children:[i.jsx("option",{value:"featured",children:"Featured"}),i.jsx("option",{value:"price-low",children:"Price: Low to High"}),i.jsx("option",{value:"price-high",children:"Price: High to Low"}),i.jsx("option",{value:"rating",children:"Highest Rated"})]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{className:"text-gray-400 text-sm",children:"View:"}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx("button",{onClick:()=>k("grid"),className:`w-8 h-8 rounded-lg flex items-center justify-center ${j==="grid"?"bg-[#18B668] text-white":"glass-dark text-white"}`,children:"⊞"}),i.jsx("button",{onClick:()=>k("list"),className:`w-8 h-8 rounded-lg flex items-center justify-center ${j==="list"?"bg-[#18B668] text-white":"glass-dark text-white"}`,children:"≡"})]})]})]})]})}),i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},className:j==="grid"?"grid md:grid-cols-2 lg:grid-cols-3 gap-8":"space-y-6",children:O.map((ie,Q)=>i.jsxs(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:Q*.1,duration:.6},whileHover:{y:-5,scale:1.02},className:`glass rounded-2xl overflow-hidden group hover:bg-white/10 transition-all duration-300 ${j==="list"?"flex gap-6":""}`,children:[i.jsxs("div",{className:`relative overflow-hidden ${j==="list"?"w-48 h-48":"h-64"}`,children:[i.jsx(qr,{src:ie.image,alt:ie.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),i.jsxs("div",{className:"absolute top-4 left-4 flex flex-col gap-2",children:[ie.featured&&i.jsx("span",{className:"px-2 py-1 bg-gradient-to-r from-yellow-400 to-orange-500 text-black text-xs font-medium rounded-full",children:"Featured"}),!ie.inStock&&i.jsx("span",{className:"px-2 py-1 bg-red-500 text-white text-xs font-medium rounded-full",children:"Out of Stock"}),ie.originalPrice>ie.price&&i.jsxs("span",{className:"px-2 py-1 bg-emerald-500 text-white text-xs font-medium rounded-full",children:[Math.round((ie.originalPrice-ie.price)/ie.originalPrice*100),"% Off"]})]}),i.jsx(re.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>R(ie.id),className:"absolute top-4 right-4 w-8 h-8 glass-dark rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx($a,{className:`w-4 h-4 ${_.includes(ie.id)?"fill-red-500 text-red-500":"text-white"}`})})]}),i.jsxs("div",{className:`p-6 ${j==="list"?"flex-1":""}`,children:[i.jsx("div",{className:"flex items-start justify-between mb-2",children:i.jsx("h3",{className:"text-white font-bold text-lg leading-tight",children:ie.name})}),i.jsxs("p",{className:"text-emerald-400 text-sm font-medium mb-2",children:["by ",ie.artisan]}),i.jsx("p",{className:"text-gray-400 text-sm mb-4 leading-relaxed",children:ie.description}),i.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Xs,{className:"w-4 h-4 fill-yellow-400 text-yellow-400"}),i.jsx("span",{className:"text-white text-sm",children:ie.rating})]}),i.jsxs("span",{className:"text-gray-400 text-sm",children:["(",ie.reviews," reviews)"]})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsxs("span",{className:"text-white font-bold text-xl",children:["₹",ie.price.toLocaleString()]}),ie.originalPrice>ie.price&&i.jsxs("span",{className:"text-gray-500 line-through text-sm",children:["₹",ie.originalPrice.toLocaleString()]})]}),i.jsxs("div",{className:"flex gap-3",children:[i.jsxs(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>z(ie),disabled:!ie.inStock,className:"flex-1 py-2 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-medium rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all duration-300 flex items-center justify-center gap-2",children:[i.jsx(Md,{className:"w-4 h-4"}),ie.inStock?"Add to Cart":"Out of Stock"]}),i.jsxs(mi,{to:`/product/${ie.id}`,className:"px-4 py-2 glass-dark border border-white/20 text-white rounded-lg hover:border-[#18B668] transition-all duration-300 flex items-center justify-center gap-2",children:[i.jsx(po,{className:"w-4 h-4"}),"View"]})]})]})]},ie.id))}),i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.8},className:"text-center mt-12",children:i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"px-8 py-3 glass-dark border border-white/20 text-white font-medium rounded-xl hover:border-[#18B668] transition-all duration-300",children:"Load More Products"})})]})})}function $P(){const{state:a,removeItem:l,updateQuantity:h,clearCart:x}=sp(),{items:j,total:k,itemCount:_}=a;return j.length===0?i.jsx("div",{className:"min-h-screen pt-24 pb-12",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"text-center py-16",children:[i.jsx("div",{className:"w-32 h-32 mx-auto mb-8 glass-card rounded-full flex items-center justify-center",children:i.jsx(jc,{className:"w-16 h-16 text-[#18B668]"})}),i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Your Cart is Empty"}),i.jsx("p",{className:"text-xl mb-8 text-gray-400",children:"Discover amazing artisan products from Jharkhand"}),i.jsxs(mi,{to:"/marketplace",className:"inline-flex items-center gap-2 bg-[#18B668] text-white px-8 py-3 rounded-xl hover:bg-[#065F46] transition-all duration-300 hover:scale-105",children:[i.jsx(jc,{className:"w-5 h-5"}),"Start Shopping"]})]})})}):i.jsx("div",{className:"min-h-screen pt-24 pb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center gap-4 mb-8",children:i.jsxs(mi,{to:"/marketplace",className:"flex items-center gap-2 text-[#18B668] hover:text-white transition-colors",children:[i.jsx(Ho,{className:"w-5 h-5"}),"Continue Shopping"]})}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Shopping Cart"}),i.jsx("div",{className:"space-y-4",children:j.map(d=>i.jsx("div",{className:"glass-card rounded-xl p-6",children:i.jsxs("div",{className:"flex gap-4",children:[i.jsx("img",{src:d.image,alt:d.name,className:"w-24 h-24 object-cover rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-xl font-semibold",children:d.name}),i.jsx("p",{className:"text-gray-400",children:d.category})]}),i.jsx("button",{onClick:()=>l(d.id),className:"text-red-400 hover:text-red-300 transition-colors",children:i.jsx(Py,{className:"w-5 h-5"})})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>h(d.id,Math.max(1,d.quantity-1)),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:i.jsx(pm,{className:"w-4 h-4"})}),i.jsx("span",{className:"text-lg font-semibold w-8 text-center",children:d.quantity}),i.jsx("button",{onClick:()=>h(d.id,d.quantity+1),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:i.jsx(mo,{className:"w-4 h-4"})})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"text-2xl font-bold text-[#18B668]",children:["₹",(d.price*d.quantity).toLocaleString()]}),d.quantity>1&&i.jsxs("p",{className:"text-sm text-gray-400",children:["₹",d.price.toLocaleString()," each"]})]})]})]})]})},d.id))})]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"glass-card rounded-xl p-6 sticky top-24",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Order Summary"}),i.jsxs("div",{className:"space-y-4 mb-6",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{children:["Subtotal (",_," items)"]}),i.jsxs("span",{children:["₹",k.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Shipping"}),i.jsx("span",{className:"text-[#18B668]",children:"Free"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Taxes"}),i.jsxs("span",{children:["₹",Math.round(k*.18).toLocaleString()]})]}),i.jsx("div",{className:"border-t border-gray-700 pt-4",children:i.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[i.jsx("span",{children:"Total"}),i.jsxs("span",{className:"text-[#18B668]",children:["₹",Math.round(k*1.18).toLocaleString()]})]})})]}),i.jsx(mi,{to:"/checkout",className:"w-full bg-[#18B668] text-white py-3 rounded-xl hover:bg-[#065F46] transition-all duration-300 hover:scale-105 flex items-center justify-center gap-2",children:"Proceed to Checkout"}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-sm text-gray-400",children:"Secure checkout with 256-bit SSL encryption"})})]})})]})]})})}function UP(){const{state:a,clearCart:l}=sp(),{items:h,total:x}=a,j=un(),[k,_]=G.useState(1),[d,I]=G.useState(!1),[z,R]=G.useState({email:"",phone:"",firstName:"",lastName:"",address:"",city:"",state:"Jharkhand",pincode:"",cardNumber:"",expiryDate:"",cvv:"",cardName:"",notes:""}),D=se=>{R({...z,[se.target.name]:se.target.value})},O=()=>{I(!0),setTimeout(()=>{l(),j("/marketplace")},3e3)};if(h.length===0&&!d)return i.jsx("div",{className:"min-h-screen pt-24 pb-12",children:i.jsxs("div",{className:"container mx-auto px-4 text-center py-16",children:[i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"No Items to Checkout"}),i.jsx("p",{className:"text-xl mb-8 text-gray-400",children:"Add some items to your cart first"}),i.jsx(mi,{to:"/marketplace",className:"inline-flex items-center gap-2 bg-[#18B668] text-white px-8 py-3 rounded-xl hover:bg-[#065F46] transition-all duration-300",children:"Go to Marketplace"})]})});if(d)return i.jsx("div",{className:"min-h-screen pt-24 pb-12",children:i.jsx("div",{className:"container mx-auto px-4",children:i.jsxs("div",{className:"max-w-2xl mx-auto text-center py-16",children:[i.jsx("div",{className:"w-32 h-32 mx-auto mb-8 bg-[#18B668] rounded-full flex items-center justify-center",children:i.jsx(mu,{className:"w-16 h-16 text-white"})}),i.jsx("h1",{className:"text-4xl font-bold mb-4",children:"Order Placed Successfully!"}),i.jsx("p",{className:"text-xl mb-8 text-gray-400",children:"Thank you for supporting local artisans. You'll receive a confirmation email shortly."}),i.jsx("div",{className:"glass-card rounded-xl p-6 mb-8",children:i.jsxs("p",{className:"text-lg",children:["Order ID: ",i.jsxs("span",{className:"text-[#18B668] font-bold",children:["#JH",Date.now().toString().slice(-6)]})]})}),i.jsx("p",{className:"text-gray-400",children:"Redirecting to marketplace..."})]})})});const ie=x,Q=Math.round(ie*.18),ae=ie+Q;return i.jsx("div",{className:"min-h-screen pt-24 pb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsx("div",{className:"flex items-center gap-4 mb-8",children:i.jsxs(mi,{to:"/cart",className:"flex items-center gap-2 text-[#18B668] hover:text-white transition-colors",children:[i.jsx(Ho,{className:"w-5 h-5"}),"Back to Cart"]})}),i.jsx("div",{className:"flex items-center justify-center mb-8",children:i.jsx("div",{className:"flex items-center space-x-4",children:[1,2,3].map(se=>i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${k>=se?"bg-[#18B668] text-white":"bg-gray-700 text-gray-400"}`,children:se}),se<3&&i.jsx("div",{className:`w-16 h-1 mx-2 ${k>se?"bg-[#18B668]":"bg-gray-700"}`})]},se))})}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"glass-card rounded-xl p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-[#18B668] rounded-full flex items-center justify-center text-sm",children:"1"}),"Contact Information"]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"Email Address"}),i.jsx("input",{type:"email",name:"email",value:z.email,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"your@email.com",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",name:"phone",value:z.phone,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"+91 98765 43210",required:!0})]})]})]}),i.jsxs("div",{className:"glass-card rounded-xl p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-[#18B668] rounded-full flex items-center justify-center text-sm",children:"2"}),"Shipping Address"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"First Name"}),i.jsx("input",{type:"text",name:"firstName",value:z.firstName,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"Last Name"}),i.jsx("input",{type:"text",name:"lastName",value:z.lastName,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",required:!0})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"Address"}),i.jsx("input",{type:"text",name:"address",value:z.address,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"Street address",required:!0})]}),i.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"City"}),i.jsx("input",{type:"text",name:"city",value:z.city,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"State"}),i.jsxs("select",{name:"state",value:z.state,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",children:[i.jsx("option",{value:"Jharkhand",children:"Jharkhand"}),i.jsx("option",{value:"Bihar",children:"Bihar"}),i.jsx("option",{value:"West Bengal",children:"West Bengal"}),i.jsx("option",{value:"Odisha",children:"Odisha"}),i.jsx("option",{value:"Chhattisgarh",children:"Chhattisgarh"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"PIN Code"}),i.jsx("input",{type:"text",name:"pincode",value:z.pincode,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"834001",required:!0})]})]})]})]}),i.jsxs("div",{className:"glass-card rounded-xl p-6",children:[i.jsxs("h2",{className:"text-2xl font-bold mb-6 flex items-center gap-2",children:[i.jsx("span",{className:"w-8 h-8 bg-[#18B668] rounded-full flex items-center justify-center text-sm",children:"3"}),"Payment Information"]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"Cardholder Name"}),i.jsx("input",{type:"text",name:"cardName",value:z.cardName,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"Name as on card",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"Card Number"}),i.jsx("input",{type:"text",name:"cardNumber",value:z.cardNumber,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"1234 5678 9012 3456",required:!0})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"Expiry Date"}),i.jsx("input",{type:"text",name:"expiryDate",value:z.expiryDate,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"MM/YY",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block mb-2",children:"CVV"}),i.jsx("input",{type:"text",name:"cvv",value:z.cvv,onChange:D,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"123",required:!0})]})]})]})]}),i.jsxs("div",{className:"glass-card rounded-xl p-6",children:[i.jsx("h3",{className:"text-xl font-bold mb-4",children:"Order Notes (Optional)"}),i.jsx("textarea",{name:"notes",value:z.notes,onChange:D,rows:3,className:"w-full bg-gray-800 border border-gray-700 rounded-lg px-4 py-3 focus:outline-none focus:border-[#18B668]",placeholder:"Special instructions for delivery..."})]})]})}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs("div",{className:"glass-card rounded-xl p-6 sticky top-24",children:[i.jsx("h2",{className:"text-2xl font-bold mb-6",children:"Order Summary"}),i.jsx("div",{className:"space-y-4 mb-6",children:h.map(se=>i.jsxs("div",{className:"flex gap-3",children:[i.jsx("img",{src:se.image,alt:se.name,className:"w-16 h-16 object-cover rounded-lg"}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-semibold",children:se.name}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Qty: ",se.quantity]}),i.jsxs("p",{className:"text-[#18B668] font-semibold",children:["₹",(se.price*se.quantity).toLocaleString()]})]})]},se.id))}),i.jsxs("div",{className:"space-y-3 mb-6",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Subtotal"}),i.jsxs("span",{children:["₹",ie.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Shipping"}),i.jsx("span",{className:"text-[#18B668]",children:"Free"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{children:"Taxes (18%)"}),i.jsxs("span",{children:["₹",Q.toLocaleString()]})]}),i.jsx("div",{className:"border-t border-gray-700 pt-3",children:i.jsxs("div",{className:"flex justify-between text-xl font-bold",children:[i.jsx("span",{children:"Total"}),i.jsxs("span",{className:"text-[#18B668]",children:["₹",ae.toLocaleString()]})]})})]}),i.jsxs("div",{className:"space-y-3 mb-6 text-sm text-gray-400",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Td,{className:"w-4 h-4"}),i.jsx("span",{children:"256-bit SSL Encryption"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Zw,{className:"w-4 h-4"}),i.jsx("span",{children:"Free Shipping Across India"})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(hm,{className:"w-4 h-4"}),i.jsx("span",{children:"Secure Payment Gateway"})]})]}),i.jsxs("button",{onClick:O,className:"w-full bg-[#18B668] text-white py-3 rounded-xl hover:bg-[#065F46] transition-all duration-300 hover:scale-105 flex items-center justify-center gap-2",children:[i.jsx(hm,{className:"w-5 h-5"}),"Place Order - ₹",ae.toLocaleString()]})]})})]})]})})}const Xv=[{id:1,name:"Traditional Dokra Horse",price:2500,originalPrice:3500,category:"Metal Art",description:"A beautiful handcrafted Dokra horse made using the ancient lost-wax casting technique. This piece represents the rich tribal heritage of Jharkhand and showcases the exceptional skills of local artisans.",fullDescription:`This exquisite Dokra horse is a testament to the centuries-old craftsmanship of Jharkhand's tribal artisans. Created using the traditional lost-wax casting technique, each piece is unique and carries the soul of ancient artistic traditions.

The Dokra art form dates back over 4,000 years and is practiced by the tribal communities of Central and Eastern India. The process involves creating a clay core, covering it with wax, and then encasing it in clay again. When heated, the wax melts away, leaving a hollow space for molten metal.

This particular horse design is inspired by the sacred animals revered in tribal folklore and represents strength, loyalty, and prosperity. The intricate detailing and rustic finish make it a perfect centerpiece for any home or office.`,images:["https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=500","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=500","https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=500"],artist:"Ramesh Kumar",location:"Dumka",rating:4.8,reviews:127,inStock:!0,features:["Handcrafted using traditional Dokra technique","Made from brass and bronze alloy",'Dimensions: 8" x 6" x 3"',"Weight: 850g","Unique patina finish","Certificate of authenticity included"],specifications:{Material:"Brass & Bronze Alloy",Technique:"Lost-wax casting (Dokra)",Dimensions:'8" L x 6" H x 3" W',Weight:"850 grams",Origin:"Dumka, Jharkhand",Care:"Clean with dry cloth, avoid water"}},{id:2,name:"Tribal Bamboo Wall Art",price:1800,originalPrice:2200,category:"Bamboo Art",description:"Intricate bamboo weaving showcasing traditional tribal patterns and motifs from the heart of Jharkhand.",fullDescription:`This stunning bamboo wall art piece represents the sophisticated weaving techniques passed down through generations of tribal communities in Jharkhand. The intricate patterns tell stories of nature, mythology, and daily life.

Bamboo craft is one of the most sustainable art forms, utilizing the abundant natural resources of Jharkhand's forests. The artisans carefully select mature bamboo, treat it naturally, and weave it into complex geometric patterns that have deep cultural significance.

Each pattern in this piece has a meaning - the spirals represent the cycle of life, the diamond shapes symbolize protection, and the flowing lines represent the rivers that nourish the land. This art form not only preserves cultural heritage but also provides sustainable livelihoods to tribal communities.`,images:["https://images.unsplash.com/photo-1544966503-7e22750c67b4?w=500","https://images.unsplash.com/photo-1544966503-7e22750c67b4?w=500","https://images.unsplash.com/photo-1544966503-7e22750c67b4?w=500"],artist:"Sukanti Devi",location:"Khunti",rating:4.9,reviews:89,inStock:!0,features:["Sustainable bamboo construction","Traditional tribal patterns","Ready to hang with mounting hardware",'Dimensions: 24" x 18"',"Natural eco-friendly finish","Lightweight yet durable"],specifications:{Material:"Natural Bamboo",Technique:"Traditional Weaving",Dimensions:'24" L x 18" H x 2" D',Weight:"450 grams",Origin:"Khunti, Jharkhand",Care:"Dust with soft brush, avoid moisture"}}];function HP(){const{id:a}=R1(),{addToCart:l}=sp(),[h,x]=G.useState(null),[j,k]=G.useState(0),[_,d]=G.useState(1),[I,z]=G.useState(!1),[R,D]=G.useState("description");if(G.useEffect(()=>{const ie=Xv.find(Q=>Q.id===parseInt(a||"1"));x(ie||Xv[0])},[a]),!h)return i.jsx("div",{className:"min-h-screen pt-24 pb-12",children:i.jsx("div",{className:"container mx-auto px-4 text-center",children:i.jsx("p",{className:"text-xl",children:"Loading product..."})})});const O=()=>{l({id:h.id.toString(),name:h.name,price:h.price,image:h.images[0],category:h.category,artisan:h.artist,quantity:_})};return i.jsx("div",{className:"min-h-screen pt-24 pb-12",children:i.jsxs("div",{className:"container mx-auto px-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-8 text-sm",children:[i.jsx(mi,{to:"/marketplace",className:"text-[#18B668] hover:text-white transition-colors",children:"Marketplace"}),i.jsx("span",{className:"text-gray-400",children:"/"}),i.jsx("span",{className:"text-gray-400",children:h.category}),i.jsx("span",{className:"text-gray-400",children:"/"}),i.jsx("span",{children:h.name})]}),i.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[i.jsxs("div",{children:[i.jsx("div",{className:"mb-4",children:i.jsx("img",{src:h.images[j],alt:h.name,className:"w-full h-96 object-cover rounded-xl"})}),i.jsx("div",{className:"flex gap-4",children:h.images.map((ie,Q)=>i.jsx("button",{onClick:()=>k(Q),className:`w-20 h-20 rounded-lg overflow-hidden border-2 transition-colors ${j===Q?"border-[#18B668]":"border-gray-700"}`,children:i.jsx("img",{src:ie,alt:`${h.name} ${Q+1}`,className:"w-full h-full object-cover"})},Q))})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold mb-2",children:h.name}),i.jsx("p",{className:"text-gray-400 mb-4",children:h.category})]}),i.jsx("button",{onClick:()=>z(!I),className:`p-2 rounded-lg transition-colors ${I?"text-red-400 bg-red-400/10":"text-gray-400 hover:text-red-400"}`,children:i.jsx($a,{className:`w-6 h-6 ${I?"fill-current":""}`})})]}),i.jsx("div",{className:"flex items-center gap-4 mb-6",children:i.jsxs("div",{className:"flex items-center gap-1",children:[[...Array(5)].map((ie,Q)=>i.jsx(Xs,{className:`w-5 h-5 ${Q<Math.floor(h.rating)?"text-yellow-400 fill-current":"text-gray-600"}`},Q)),i.jsxs("span",{className:"ml-2 text-gray-400",children:["(",h.reviews," reviews)"]})]})}),i.jsx("div",{className:"mb-6",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsxs("span",{className:"text-3xl font-bold text-[#18B668]",children:["₹",h.price.toLocaleString()]}),h.originalPrice&&i.jsxs("span",{className:"text-xl text-gray-400 line-through",children:["₹",h.originalPrice.toLocaleString()]}),h.originalPrice&&i.jsxs("span",{className:"bg-[#18B668] text-white px-2 py-1 rounded text-sm",children:[Math.round((1-h.price/h.originalPrice)*100),"% OFF"]})]})}),i.jsx("div",{className:"mb-6",children:i.jsx("p",{className:"text-gray-300 leading-relaxed",children:h.description})}),i.jsxs("div",{className:"mb-6",children:[i.jsxs("p",{className:"text-sm text-gray-400 mb-2",children:["Artist: ",i.jsx("span",{className:"text-white",children:h.artist})]}),i.jsxs("p",{className:"text-sm text-gray-400",children:["Location: ",i.jsx("span",{className:"text-white",children:h.location})]})]}),i.jsx("div",{className:"flex items-center gap-4 mb-8",children:i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("span",{children:"Quantity:"}),i.jsx("button",{onClick:()=>d(Math.max(1,_-1)),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:i.jsx(pm,{className:"w-4 h-4"})}),i.jsx("span",{className:"text-lg font-semibold w-8 text-center",children:_}),i.jsx("button",{onClick:()=>d(_+1),className:"w-8 h-8 rounded-lg bg-gray-800 hover:bg-gray-700 flex items-center justify-center transition-colors",children:i.jsx(mo,{className:"w-4 h-4"})})]})}),i.jsxs("div",{className:"space-y-4 mb-8",children:[i.jsxs("button",{onClick:O,className:"w-full bg-[#18B668] text-white py-3 rounded-xl hover:bg-[#065F46] transition-all duration-300 hover:scale-105",children:["Add to Cart - ₹",(h.price*_).toLocaleString()]}),i.jsx("button",{className:"w-full bg-gray-800 text-white py-3 rounded-xl hover:bg-gray-700 transition-colors",children:"Buy Now"})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[i.jsx(Zw,{className:"w-4 h-4"}),i.jsx("span",{children:"Free shipping across India"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[i.jsx(Td,{className:"w-4 h-4"}),i.jsx("span",{children:"Authentic handcrafted product"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-400",children:[i.jsx(vT,{className:"w-4 h-4"}),i.jsx("span",{children:"Supporting local artisan communities"})]})]})]})]}),i.jsxs("div",{className:"mt-16",children:[i.jsx("div",{className:"flex gap-8 border-b border-gray-700 mb-8",children:["description","specifications","features"].map(ie=>i.jsx("button",{onClick:()=>D(ie),className:`pb-4 px-2 capitalize transition-colors ${R===ie?"text-[#18B668] border-b-2 border-[#18B668]":"text-gray-400 hover:text-white"}`,children:ie},ie))}),i.jsxs("div",{className:"glass-card rounded-xl p-8",children:[R==="description"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"About This Product"}),i.jsx("div",{className:"prose prose-invert max-w-none",children:h.fullDescription.split(`

`).map((ie,Q)=>i.jsx("p",{className:"mb-4 text-gray-300 leading-relaxed",children:ie},Q))})]}),R==="specifications"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Specifications"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Object.entries(h.specifications).map(([ie,Q])=>i.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-700",children:[i.jsxs("span",{className:"text-gray-400",children:[ie,":"]}),i.jsx("span",{children:Q})]},ie))})]}),R==="features"&&i.jsxs("div",{children:[i.jsx("h3",{className:"text-2xl font-bold mb-4",children:"Key Features"}),i.jsx("ul",{className:"space-y-3",children:h.features.map((ie,Q)=>i.jsxs("li",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"w-2 h-2 bg-[#18B668] rounded-full"}),i.jsx("span",{children:ie})]},Q))})]})]})]})]})})}function WP(){Cc();const a=un(),{user:l}=Rd();return G.useEffect(()=>{if(!l){a("/");return}l.userType==="host"?a("/host-dashboard"):a("/guest-dashboard")},[l,a]),i.jsx("div",{className:"min-h-screen pt-24 pb-16 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"w-12 h-12 border-4 border-[#18B668]/30 border-t-[#18B668] rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"Redirecting to dashboard..."})]})})}var qP="Label",Ab=G.forwardRef((a,l)=>i.jsx(ap.label,{...a,ref:l,onMouseDown:h=>{h.target.closest("button, input, select, textarea")||(a.onMouseDown?.(h),!h.defaultPrevented&&h.detail>1&&h.preventDefault())}}));Ab.displayName=qP;var GP=Ab;function Ss({className:a,...l}){return i.jsx(GP,{"data-slot":"label",className:vu("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",a),...l})}const Qg=()=>{Cc();const a=un(),[l]=S2(),{user:h,login:x,signup:j,isLoading:k}=Rd(),[_,d]=G.useState(l.get("mode")==="signup"?"signup":"signin"),[I,z]=G.useState(!1),[R,D]=G.useState(!1),[O,ie]=G.useState("guest"),[Q,ae]=G.useState("vendor"),[se,pe]=G.useState(""),[Pe,Ie]=G.useState(0),[Ze,Je]=G.useState({email:"",password:"",rememberMe:!1}),[Xe,ut]=G.useState({firstName:"",lastName:"",email:"",phone:"",password:"",confirmPassword:"",agreeToTerms:!1,subscribeNewsletter:!0});G.useEffect(()=>{const Ve=()=>Ie(window.scrollY);return window.addEventListener("scroll",Ve),()=>window.removeEventListener("scroll",Ve)},[]),G.useEffect(()=>{h&&(h.userType==="host"?a("/host-dashboard"):a("/guest-dashboard"))},[h,a]);const je=async Ve=>{Ve.preventDefault(),pe("");try{await x(Ze.email,Ze.password,O),_c.success("🎉 Welcome back!",{description:`Successfully signed in as ${O}. Redirecting to your dashboard...`,duration:3e3})}catch{const Tt="Login failed. Please check your credentials.";pe(Tt),_c.error("Sign In Failed",{description:Tt,duration:4e3})}},Ae=async Ve=>{if(Ve.preventDefault(),pe(""),Xe.password!==Xe.confirmPassword){const at="Passwords do not match!";pe(at),_c.error("Password Mismatch",{description:at,duration:3e3});return}if(Xe.password.length<6){const at="Password must be at least 6 characters long.";pe(at),_c.error("Weak Password",{description:at,duration:3e3});return}if(!Xe.agreeToTerms){const at="Please agree to the terms and conditions.";pe(at),_c.error("Terms Required",{description:at,duration:3e3});return}try{await j({firstName:Xe.firstName,lastName:Xe.lastName,email:Xe.email,password:Xe.password,phone:Xe.phone,userType:O,hostType:O==="host"?Q:void 0}),_c.success("🎉 Welcome to Jharkhand Tourism!",{description:`Account created successfully. Welcome ${Xe.firstName}!`,duration:3e3})}catch{const Tt="Signup failed. Please try again.";pe(Tt),_c.error("Account Creation Failed",{description:Tt,duration:4e3})}},He=Ve=>{const{name:at,value:Tt,type:Et,checked:gt}=Ve.target;Je(Be=>({...Be,[at]:Et==="checkbox"?gt:Tt}))},ct=Ve=>{const{name:at,value:Tt,type:Et,checked:gt}=Ve.target;ut(Be=>({...Be,[at]:Et==="checkbox"?gt:Tt}))},Jt=Ve=>{d(Ve),pe("");const at=new URL(window.location.href);at.searchParams.set("mode",Ve),window.history.replaceState({},"",at.toString())};return i.jsxs("div",{className:"min-h-screen bg-black relative overflow-hidden",children:[i.jsxs("div",{className:"fixed inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#000410] to-black"}),i.jsxs("div",{className:"absolute inset-0",children:[i.jsx(re.div,{className:"absolute top-20 left-10 w-32 h-32 opacity-10",animate:{rotate:360},transition:{duration:30,repeat:1/0,ease:"linear"},children:i.jsx("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-[#18B668]",children:i.jsx("path",{fill:"currentColor",d:"M50 10 L90 50 L50 90 L10 50 Z M50 20 L80 50 L50 80 L20 50 Z"})})}),i.jsx(re.div,{className:"absolute bottom-20 right-10 w-24 h-24 opacity-10",animate:{rotate:-360},transition:{duration:25,repeat:1/0,ease:"linear"},children:i.jsxs("svg",{viewBox:"0 0 100 100",className:"w-full h-full text-[#F59E0B]",children:[i.jsx("circle",{cx:"50",cy:"50",r:"30",fill:"none",stroke:"currentColor",strokeWidth:"4"}),i.jsx("circle",{cx:"50",cy:"50",r:"20",fill:"none",stroke:"currentColor",strokeWidth:"2"}),i.jsx("circle",{cx:"50",cy:"50",r:"10",fill:"currentColor"})]})})]}),i.jsx(re.div,{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#18B668]/20 rounded-full blur-3xl",animate:{scale:[1,1.2,1],opacity:[.2,.4,.2]},transition:{duration:4,repeat:1/0}}),i.jsx(re.div,{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-[#F59E0B]/15 rounded-full blur-3xl",animate:{scale:[1.2,1,1.2],opacity:[.15,.3,.15]},transition:{duration:5,repeat:1/0}}),i.jsx(re.div,{className:"absolute top-1/2 right-1/3 w-64 h-64 bg-[#0EA5E9]/10 rounded-full blur-2xl",animate:{x:[0,50,0],y:[0,-30,0]},transition:{duration:8,repeat:1/0}}),[...Array(20)].map((Ve,at)=>i.jsx(re.div,{className:"absolute w-2 h-2 bg-[#18B668] rounded-full opacity-30",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`},animate:{y:[0,-100,0],opacity:[.3,.8,.3]},transition:{duration:3+Math.random()*4,repeat:1/0,delay:Math.random()*2}},at))]}),i.jsxs("div",{className:"relative z-10 min-h-screen flex",children:[i.jsx("div",{className:"hidden lg:flex lg:w-1/2 xl:w-3/5 flex-col justify-center p-12 xl:p-16",children:i.jsxs(re.div,{initial:{opacity:0,x:-50},animate:{opacity:1,x:0},transition:{duration:.8},children:[i.jsxs(vt,{variant:"ghost",onClick:()=>a(-1),className:"mb-8 text-white/70 hover:text-white hover:bg-white/10 w-fit",children:[i.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Back to Home"]}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"inline-flex items-center gap-2 glass px-4 py-2 rounded-full",children:_==="signin"?i.jsxs(i.Fragment,{children:[i.jsx(Gw,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-[#18B668] text-sm font-medium",children:"Welcome Back"})]}):i.jsxs(i.Fragment,{children:[i.jsx(Mx,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-[#18B668] text-sm font-medium",children:"Join the Adventure"})]})}),i.jsxs("h1",{className:"text-5xl xl:text-7xl font-bold text-white leading-tight",children:[_==="signin"?"Continue Your":"Start Your",i.jsx("span",{className:"block bg-gradient-to-r from-[#18B668] via-[#0EA5E9] to-[#F59E0B] bg-clip-text text-transparent",children:_==="signin"?"Adventure":"Journey"})]}),i.jsx("p",{className:"text-xl text-white/70 max-w-lg leading-relaxed",children:_==="signin"?"Sign in to access your personalized travel dashboard and continue exploring the wonders of Jharkhand.":"Join thousands of explorers discovering the hidden gems of Jharkhand. Create your account and unlock exclusive access to curated experiences."}),i.jsxs("div",{className:"grid grid-cols-1 gap-6 pt-8 max-w-md",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 glass rounded-full flex items-center justify-center",children:i.jsx(En,{className:"w-6 h-6 text-[#18B668]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Explore Hill Stations"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Netarhat, Deoghar, and more scenic destinations"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 glass rounded-full flex items-center justify-center",children:i.jsx(Zf,{className:"w-6 h-6 text-[#0EA5E9]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Discover Waterfalls"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Hundru Falls and pristine natural wonders"})]})]}),i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 glass rounded-full flex items-center justify-center",children:i.jsx(Dd,{className:"w-6 h-6 text-[#065F46]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white font-medium",children:"Wildlife Adventures"}),i.jsx("p",{className:"text-white/60 text-sm",children:"Betla National Park safari experiences"})]})]})]})]})]})}),i.jsx("div",{className:"w-full lg:w-1/2 xl:w-2/5 flex items-center justify-center p-6 lg:p-12 overflow-y-auto",children:i.jsxs(re.div,{className:"w-full max-w-md",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:[i.jsxs(vt,{variant:"ghost",onClick:()=>a(-1),className:"lg:hidden mb-6 text-white/70 hover:text-white hover:bg-white/10 w-fit",children:[i.jsx(Ho,{className:"w-4 h-4 mr-2"}),"Back"]}),i.jsxs("div",{className:"glass-premium rounded-3xl p-8 relative overflow-hidden backdrop-blur-xl",children:[i.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#18B668]/20 rounded-full blur-xl"}),i.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-[#F59E0B]/20 rounded-full blur-xl"}),i.jsxs("div",{className:"lg:hidden text-center mb-8 relative z-10",children:[i.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 glass rounded-2xl mb-4",children:i.jsx(Uh,{className:"w-8 h-8 text-[#18B668]"})}),i.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:_==="signin"?"Welcome Back":"Join the Adventure"}),i.jsx("p",{className:"text-white/70",children:_==="signin"?"Continue your Jharkhand adventure":"Create your Jharkhand tourism account"})]}),i.jsx("div",{className:"mb-8 relative z-10",children:i.jsxs("div",{className:"flex glass rounded-xl p-1",children:[i.jsx("button",{onClick:()=>Jt("signin"),className:`flex-1 py-3 px-4 rounded-lg transition-all duration-300 font-medium text-sm ${_==="signin"?"bg-[#18B668] text-white shadow-lg":"text-white/70 hover:text-white"}`,children:"Sign In"}),i.jsx("button",{onClick:()=>Jt("signup"),className:`flex-1 py-3 px-4 rounded-lg transition-all duration-300 font-medium text-sm ${_==="signup"?"bg-[#18B668] text-white shadow-lg":"text-white/70 hover:text-white"}`,children:"Sign Up"})]})}),i.jsxs("div",{className:"mb-8 relative z-10",children:[i.jsx(Ss,{className:"text-white/90 text-sm mb-4 block",children:_==="signin"?"Sign in as:":"Join as:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(re.button,{type:"button",onClick:()=>ie("guest"),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-4 rounded-xl border-2 transition-all duration-300 ${O==="guest"?"border-[#18B668] bg-[#18B668]/10 shadow-lg shadow-[#18B668]/20":"border-white/20 hover:border-white/40"}`,children:[i.jsx(fo,{className:`w-6 h-6 mx-auto mb-2 ${O==="guest"?"text-[#18B668]":"text-white/70"}`}),i.jsx("div",{className:`font-medium text-sm ${O==="guest"?"text-[#18B668]":"text-white"}`,children:"Guest"}),i.jsx("div",{className:"text-xs text-white/60 mt-1",children:"Explore & Book"})]}),i.jsxs(re.button,{type:"button",onClick:()=>ie("host"),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-4 rounded-xl border-2 transition-all duration-300 ${O==="host"?"border-[#18B668] bg-[#18B668]/10 shadow-lg shadow-[#18B668]/20":"border-white/20 hover:border-white/40"}`,children:[i.jsx(kT,{className:`w-6 h-6 mx-auto mb-2 ${O==="host"?"text-[#18B668]":"text-white/70"}`}),i.jsx("div",{className:`font-medium text-sm ${O==="host"?"text-[#18B668]":"text-white"}`,children:"Host"}),i.jsx("div",{className:"text-xs text-white/60 mt-1",children:"List & Manage"})]})]})]}),_==="signup"&&O==="host"&&i.jsxs("div",{className:"mb-8 relative z-10",children:[i.jsx(Ss,{className:"text-white/90 text-sm mb-4 block",children:"Host Type:"}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs(re.button,{type:"button",onClick:()=>ae("vendor"),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-4 rounded-xl border-2 transition-all duration-300 ${Q==="vendor"?"border-[#F59E0B] bg-[#F59E0B]/10 shadow-lg shadow-[#F59E0B]/20":"border-white/20 hover:border-white/40"}`,children:[i.jsx(Ex,{className:`w-6 h-6 mx-auto mb-2 ${Q==="vendor"?"text-[#F59E0B]":"text-white/70"}`}),i.jsx("div",{className:`font-medium text-sm ${Q==="vendor"?"text-[#F59E0B]":"text-white"}`,children:"Vendor"}),i.jsx("div",{className:"text-xs text-white/60 mt-1",children:"Sell Products"})]}),i.jsxs(re.button,{type:"button",onClick:()=>ae("hotel-owner"),whileHover:{scale:1.02},whileTap:{scale:.98},className:`p-4 rounded-xl border-2 transition-all duration-300 ${Q==="hotel-owner"?"border-[#0EA5E9] bg-[#0EA5E9]/10 shadow-lg shadow-[#0EA5E9]/20":"border-white/20 hover:border-white/40"}`,children:[i.jsx(Tx,{className:`w-6 h-6 mx-auto mb-2 ${Q==="hotel-owner"?"text-[#0EA5E9]":"text-white/70"}`}),i.jsx("div",{className:`font-medium text-sm ${Q==="hotel-owner"?"text-[#0EA5E9]":"text-white"}`,children:"Hotel Owner"}),i.jsx("div",{className:"text-xs text-white/60 mt-1",children:"Manage Property"})]})]})]}),se&&i.jsx(re.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-6 p-4 bg-red-500/10 border border-red-500/20 rounded-xl relative z-10",children:i.jsx("p",{className:"text-red-400 text-sm",children:se})}),_==="signin"?i.jsxs("form",{onSubmit:je,className:"space-y-6 relative z-10",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"email",className:"text-white/90",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(Cx,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/50 w-5 h-5"}),i.jsx(Zs,{id:"email",name:"email",type:"email",value:Ze.email,onChange:He,required:!0,className:"pl-12 h-12 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl",placeholder:"your@email.com"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"password",className:"text-white/90",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(qg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-white/50 w-5 h-5"}),i.jsx(Zs,{id:"password",name:"password",type:I?"text":"password",value:Ze.password,onChange:He,required:!0,className:"pl-12 pr-12 h-12 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl",placeholder:"Enter your password"}),i.jsx("button",{type:"button",onClick:()=>z(!I),className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white transition-colors",children:I?i.jsx(Wg,{className:"w-5 h-5"}):i.jsx(po,{className:"w-5 h-5"})})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[i.jsx("input",{type:"checkbox",name:"rememberMe",checked:Ze.rememberMe,onChange:He,className:"w-4 h-4 rounded border-white/20 text-[#18B668] focus:ring-[#18B668]/20 bg-transparent"}),i.jsx("span",{className:"text-sm text-white/70",children:"Remember me"})]}),i.jsx(mi,{to:"/forgot-password",className:"text-sm text-[#18B668] hover:text-[#18B668]/80 transition-colors font-medium",children:"Forgot password?"})]}),i.jsx(re.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:i.jsx(vt,{type:"submit",disabled:k,className:"w-full h-12 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-semibold rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-[#18B668]/30 disabled:opacity-50",children:k?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Signing In..."]}):`Sign In as ${O==="guest"?"Guest":"Host"}`})})]}):i.jsxs("form",{onSubmit:Ae,className:"space-y-5 relative z-10",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"firstName",className:"text-white/90 text-sm",children:"First Name"}),i.jsxs("div",{className:"relative",children:[i.jsx(Hh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx(Zs,{id:"firstName",name:"firstName",type:"text",value:Xe.firstName,onChange:ct,required:!0,className:"pl-10 h-11 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl text-sm",placeholder:"First name"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"lastName",className:"text-white/90 text-sm",children:"Last Name"}),i.jsx(Zs,{id:"lastName",name:"lastName",type:"text",value:Xe.lastName,onChange:ct,required:!0,className:"h-11 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl text-sm",placeholder:"Last name"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"signupEmail",className:"text-white/90 text-sm",children:"Email Address"}),i.jsxs("div",{className:"relative",children:[i.jsx(Cx,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx(Zs,{id:"signupEmail",name:"email",type:"email",value:Xe.email,onChange:ct,required:!0,className:"pl-10 h-11 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl text-sm",placeholder:"your@email.com"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"phone",className:"text-white/90 text-sm",children:"Phone Number"}),i.jsxs("div",{className:"relative",children:[i.jsx(Af,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx(Zs,{id:"phone",name:"phone",type:"tel",value:Xe.phone,onChange:ct,required:!0,className:"pl-10 h-11 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl text-sm",placeholder:"+91 98765 43210"})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"signupPassword",className:"text-white/90 text-sm",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(qg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx(Zs,{id:"signupPassword",name:"password",type:I?"text":"password",value:Xe.password,onChange:ct,required:!0,className:"pl-10 pr-10 h-11 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl text-sm",placeholder:"Create password"}),i.jsx("button",{type:"button",onClick:()=>z(!I),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white transition-colors",children:I?i.jsx(Wg,{className:"w-4 h-4"}):i.jsx(po,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-2",children:[i.jsx(Ss,{htmlFor:"confirmPassword",className:"text-white/90 text-sm",children:"Confirm Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(qg,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx(Zs,{id:"confirmPassword",name:"confirmPassword",type:R?"text":"password",value:Xe.confirmPassword,onChange:ct,required:!0,className:"pl-10 pr-10 h-11 glass-dark border-white/20 text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 rounded-xl text-sm",placeholder:"Confirm password"}),i.jsx("button",{type:"button",onClick:()=>D(!R),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/50 hover:text-white transition-colors",children:R?i.jsx(Wg,{className:"w-4 h-4"}):i.jsx(po,{className:"w-4 h-4"})})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",name:"agreeToTerms",checked:Xe.agreeToTerms,onChange:ct,required:!0,className:"w-4 h-4 mt-0.5 rounded border-white/20 text-[#18B668] focus:ring-[#18B668]/20 bg-transparent"}),i.jsxs("span",{className:"text-xs text-white/70 leading-relaxed",children:["I agree to the"," ",i.jsx(mi,{to:"/terms",className:"text-[#18B668] hover:text-[#18B668]/80 font-medium",children:"Terms of Service"})," ","and"," ",i.jsx(mi,{to:"/privacy",className:"text-[#18B668] hover:text-[#18B668]/80 font-medium",children:"Privacy Policy"})]})]}),i.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[i.jsx("input",{type:"checkbox",name:"subscribeNewsletter",checked:Xe.subscribeNewsletter,onChange:ct,className:"w-4 h-4 mt-0.5 rounded border-white/20 text-[#18B668] focus:ring-[#18B668]/20 bg-transparent"}),i.jsx("span",{className:"text-xs text-white/70 leading-relaxed",children:"Subscribe to newsletter for travel updates and offers"})]})]}),i.jsx(re.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:i.jsx(vt,{type:"submit",disabled:!Xe.agreeToTerms||k,className:"w-full h-12 bg-[#18B668] hover:bg-[#18B668]/90 text-white font-semibold rounded-xl transition-all duration-300 hover:shadow-lg hover:shadow-[#18B668]/30 disabled:opacity-50 disabled:cursor-not-allowed mt-6",children:k?i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}),"Creating Account..."]}):`Create ${O==="guest"?"Guest":O==="host"&&Q==="vendor"?"Vendor":O==="host"&&Q==="hotel-owner"?"Hotel Owner":"Host"} Account`})})]}),i.jsxs("div",{className:"relative my-6",children:[i.jsx("div",{className:"absolute inset-0 flex items-center",children:i.jsx("div",{className:"w-full border-t border-white/20"})}),i.jsx("div",{className:"relative flex justify-center text-sm",children:i.jsxs("span",{className:"px-4 glass-dark text-white/70 rounded-full",children:["Or ",_==="signin"?"continue":"sign up"," with"]})})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsx(re.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:i.jsxs(vt,{type:"button",variant:"outline",className:"w-full h-12 glass-dark border-white/20 text-white hover:bg-white/10 rounded-xl",children:[i.jsxs("svg",{className:"w-5 h-5 mr-2",viewBox:"0 0 24 24",children:[i.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),i.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),i.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),i.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Google"]})}),i.jsx(re.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:i.jsxs(vt,{type:"button",variant:"outline",className:"w-full h-12 glass-dark border-white/20 text-white hover:bg-white/10 rounded-xl",children:[i.jsx("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),"Facebook"]})})]})]})]})})]})]})};function ni({className:a,...l}){return i.jsx("div",{"data-slot":"card",className:vu("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",a),...l})}function Kn({className:a,...l}){return i.jsx("div",{"data-slot":"card-content",className:vu("px-6 [&:last-child]:pb-6",a),...l})}const Yv=[{id:"1",destination:"Netarhat Hill Station",date:"2024-03-15",status:"confirmed",image:"https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop",price:"₹12,500",type:"accommodation",duration:"3 days"},{id:"2",destination:"Hundru Falls Trek",date:"2024-03-22",status:"pending",image:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=400&h=300&fit=crop",price:"₹8,750",type:"adventure",duration:"1 day"},{id:"3",destination:"Betla National Park Safari",date:"2024-02-28",status:"completed",image:"https://images.unsplash.com/photo-1549366021-9f761d040a94?w=400&h=300&fit=crop",price:"₹6,200",type:"wildlife",duration:"2 days"}],ex=[{id:"1",item:"Tribal Handwoven Shawl",date:"2024-02-20",price:"₹2,850",image:"https://images.unsplash.com/photo-1581833971358-2c8b550f87b3?w=400&h=300&fit=crop",vendor:"Jharkhand Crafts",rating:5},{id:"2",item:"Jharkhand Honey (500g)",date:"2024-02-15",price:"₹650",image:"https://images.unsplash.com/photo-1587049352846-4a222e784d38?w=400&h=300&fit=crop",vendor:"Pure Honey Store",rating:4},{id:"3",item:"Dokra Art Elephant",date:"2024-02-10",price:"₹1,850",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400&h=300&fit=crop",vendor:"Traditional Arts",rating:5}],tx=[{id:"1",name:"Deoghar Temple Stay",price:"₹3,500/night",image:"https://images.unsplash.com/photo-1564507592333-c60657eea523?w=400&h=300&fit=crop",rating:4.8},{id:"2",name:"Sohrai Art Workshop",price:"₹2,200/person",image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400&h=300&fit=crop",rating:4.9}];function ZP(){Cc();const{user:a}=Rd(),[l,h]=G.useState("overview");if(!a||a.userType!=="guest")return i.jsx("div",{className:"min-h-screen pt-24 pb-16 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Access Denied"}),i.jsx("p",{className:"text-gray-400",children:"This page is only accessible to guests."}),i.jsx(mi,{to:"/",className:"text-[#18B668] hover:underline mt-4 inline-block",children:"Return Home"})]})});const x=[{id:"overview",label:"Overview",icon:mm},{id:"bookings",label:"My Trips",icon:ds},{id:"purchases",label:"Purchases",icon:jc},{id:"wishlist",label:"Wishlist",icon:$a},{id:"reviews",label:"Reviews",icon:Xs},{id:"profile",label:"Profile",icon:Hh}],j=z=>{switch(z){case"confirmed":return"bg-green-500/20 text-green-400 border-green-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"completed":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},k=()=>i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#18B668]/20 rounded-xl flex items-center justify-center",children:i.jsx(yu,{className:"w-6 h-6 text-[#18B668]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Total Trips"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:a.totalBookings||0})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#F59E0B]/20 rounded-xl flex items-center justify-center",children:i.jsx(hm,{className:"w-6 h-6 text-[#F59E0B]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Total Spent"}),i.jsxs("p",{className:"text-2xl font-bold text-white",children:["₹",a.totalSpent?.toLocaleString()||"0"]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#0EA5E9]/20 rounded-xl flex items-center justify-center",children:i.jsx($a,{className:"w-6 h-6 text-[#0EA5E9]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Wishlist Items"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:tx.length})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#8B4513]/20 rounded-xl flex items-center justify-center",children:i.jsx(jc,{className:"w-6 h-6 text-[#8B4513]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Purchases"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:ex.length})]})]})})})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsx(mi,{to:"/travel-planner",children:i.jsxs(vt,{className:"h-auto p-6 bg-[#18B668] hover:bg-[#18B668]/90 flex-col gap-3 w-full",children:[i.jsx(f4,{className:"w-8 h-8"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold",children:"Plan New Trip"}),i.jsx("div",{className:"text-sm opacity-80",children:"AI-powered trip planning"})]})]})}),i.jsx(mi,{to:"/destinations",children:i.jsxs(vt,{variant:"outline",className:"h-auto p-6 border-white/20 hover:bg-white/10 flex-col gap-3 w-full",children:[i.jsx(Uh,{className:"w-8 h-8 text-[#F59E0B]"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold",children:"Explore Destinations"}),i.jsx("div",{className:"text-sm opacity-60",children:"Discover new places"})]})]})}),i.jsx(mi,{to:"/marketplace",children:i.jsxs(vt,{variant:"outline",className:"h-auto p-6 border-white/20 hover:bg-white/10 flex-col gap-3 w-full",children:[i.jsx(WT,{className:"w-8 h-8 text-[#0EA5E9]"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold",children:"Shop Local Crafts"}),i.jsx("div",{className:"text-sm opacity-60",children:"Support local artisans"})]})]})})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Recent Trips"}),i.jsx(vt,{variant:"outline",size:"sm",onClick:()=>h("bookings"),children:"View All"})]}),i.jsx("div",{className:"space-y-4",children:Yv.slice(0,2).map(z=>i.jsxs("div",{className:"flex items-center gap-4 p-4 glass rounded-xl",children:[i.jsx("div",{className:"w-16 h-16 rounded-lg bg-cover bg-center",style:{backgroundImage:`url(${z.image})`}}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-white",children:z.destination}),i.jsxs("p",{className:"text-sm text-white/60",children:[z.date," • ",z.duration]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx(ar,{className:`text-xs ${j(z.status)}`,children:z.status}),i.jsx("span",{className:"text-sm font-semibold text-[#18B668]",children:z.price})]})]})]},z.id))})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Recent Purchases"}),i.jsx(vt,{variant:"outline",size:"sm",onClick:()=>h("purchases"),children:"View All"})]}),i.jsx("div",{className:"space-y-4",children:ex.slice(0,2).map(z=>i.jsxs("div",{className:"flex items-center gap-4 p-4 glass rounded-xl",children:[i.jsx("div",{className:"w-16 h-16 rounded-lg bg-cover bg-center",style:{backgroundImage:`url(${z.image})`}}),i.jsxs("div",{className:"flex-1",children:[i.jsx("h4",{className:"font-medium text-white",children:z.item}),i.jsxs("p",{className:"text-sm text-white/60",children:["by ",z.vendor]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[i.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((R,D)=>i.jsx(Xs,{className:`w-3 h-3 ${D<z.rating?"text-yellow-400 fill-current":"text-gray-600"}`},D))}),i.jsx("span",{className:"text-sm font-semibold text-[#18B668]",children:z.price})]})]})]},z.id))})]})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Your Favorite Destinations"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:a.favoriteDestinations?.map((z,R)=>i.jsxs("div",{className:"flex items-center gap-3 p-4 glass rounded-xl",children:[i.jsxs("div",{className:"w-10 h-10 bg-[#18B668]/20 rounded-lg flex items-center justify-center",children:[R===0&&i.jsx(En,{className:"w-5 h-5 text-[#18B668]"}),R===1&&i.jsx(Zf,{className:"w-5 h-5 text-[#0EA5E9]"}),R===2&&i.jsx(Dd,{className:"w-5 h-5 text-[#065F46]"})]}),i.jsx("span",{className:"text-white font-medium",children:z})]},R))||i.jsxs("div",{className:"col-span-3 text-center py-8 text-white/60",children:[i.jsx($a,{className:"w-12 h-12 mx-auto mb-4 text-white/30"}),i.jsx("p",{children:"No favorite destinations yet. Start exploring!"})]})})]})]}),_=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Trips"}),i.jsx("p",{className:"text-white/60",children:"Track your bookings and travel history"})]}),i.jsx(mi,{to:"/travel-planner",children:i.jsxs(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(mo,{className:"w-4 h-4 mr-2"}),"Plan New Trip"]})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Yv.map(z=>i.jsx(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:i.jsxs(ni,{className:"glass-card border-white/10 overflow-hidden hover:scale-105 transition-transform duration-300",children:[i.jsx("div",{className:"aspect-video bg-cover bg-center",style:{backgroundImage:`url(${z.image})`},children:i.jsxs("div",{className:"w-full h-full bg-black/40 p-4 flex justify-between items-start",children:[i.jsx(ar,{className:`${j(z.status)}`,children:z.status}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-white/20 hover:bg-white/20",children:i.jsx(po,{className:"w-4 h-4"})}),i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-white/20 hover:bg-white/20",children:i.jsx(N4,{className:"w-4 h-4"})})]})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"font-semibold text-white mb-2",children:z.destination}),i.jsxs("div",{className:"space-y-2 text-sm text-white/60",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(ds,{className:"w-4 h-4"}),i.jsx("span",{children:z.date})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Tc,{className:"w-4 h-4"}),i.jsx("span",{children:z.duration})]}),i.jsx("div",{className:"flex items-center gap-2",children:i.jsx(ar,{variant:"outline",className:"text-xs border-white/20 text-white/70",children:z.type})})]}),i.jsxs("div",{className:"flex justify-between items-center mt-4",children:[i.jsx("span",{className:"text-lg font-bold text-[#18B668]",children:z.price}),i.jsx(vt,{size:"sm",className:"bg-[#18B668] hover:bg-[#18B668]/90",children:"View Details"})]})]})]})},z.id))})]}),d=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Purchases"}),i.jsx("p",{className:"text-white/60",children:"Your marketplace purchase history"})]}),i.jsx(mi,{to:"/marketplace",children:i.jsxs(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(jc,{className:"w-4 h-4 mr-2"}),"Shop More"]})})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:ex.map(z=>i.jsx(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:i.jsxs(ni,{className:"glass-card border-white/10 overflow-hidden hover:scale-105 transition-transform duration-300",children:[i.jsx("div",{className:"aspect-square bg-cover bg-center",style:{backgroundImage:`url(${z.image})`},children:i.jsx("div",{className:"w-full h-full bg-black/20 p-4 flex justify-end items-start",children:i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-white/20 hover:bg-white/20",children:i.jsx(po,{className:"w-4 h-4"})})})}),i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"font-semibold text-white mb-2",children:z.item}),i.jsxs("p",{className:"text-sm text-white/60 mb-3",children:["by ",z.vendor]}),i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("div",{className:"flex items-center gap-1",children:[...Array(5)].map((R,D)=>i.jsx(Xs,{className:`w-4 h-4 ${D<z.rating?"text-yellow-400 fill-current":"text-gray-600"}`},D))}),i.jsx("span",{className:"text-lg font-bold text-[#18B668]",children:z.price})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsxs(vt,{size:"sm",variant:"outline",className:"flex-1 border-white/20 hover:bg-white/10",children:[i.jsx(Px,{className:"w-4 h-4 mr-2"}),"Review"]}),i.jsx(vt,{size:"sm",className:"flex-1 bg-[#18B668] hover:bg-[#18B668]/90",children:"Buy Again"})]})]})]})},z.id))})]}),I=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Wishlist"}),i.jsx("p",{className:"text-white/60",children:"Save your favorite destinations and experiences"})]}),tx.length>0?i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:tx.map(z=>i.jsx(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:i.jsxs(ni,{className:"glass-card border-white/10 overflow-hidden hover:scale-105 transition-transform duration-300",children:[i.jsx("div",{className:"aspect-video bg-cover bg-center",style:{backgroundImage:`url(${z.image})`},children:i.jsxs("div",{className:"w-full h-full bg-black/40 p-4 flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-center gap-1",children:[i.jsx(Xs,{className:"w-4 h-4 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-white text-sm",children:z.rating})]}),i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-red-500/20 hover:bg-red-500/20 text-red-400",children:i.jsx($a,{className:"w-4 h-4 fill-current"})})]})}),i.jsxs("div",{className:"p-6",children:[i.jsx("h3",{className:"font-semibold text-white mb-2",children:z.name}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-lg font-bold text-[#18B668]",children:z.price}),i.jsx(vt,{size:"sm",className:"bg-[#18B668] hover:bg-[#18B668]/90",children:"Book Now"})]})]})]})},z.id))}):i.jsxs(ni,{className:"glass-card p-12 border-white/10 text-center",children:[i.jsx($a,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Your wishlist is empty"}),i.jsx("p",{className:"text-white/60 mb-6",children:"Start exploring and save your favorite destinations!"}),i.jsx(mi,{to:"/destinations",children:i.jsxs(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(Uh,{className:"w-4 h-4 mr-2"}),"Explore Destinations"]})})]})]});return i.jsxs("div",{className:"min-h-screen bg-black pt-24 pb-12",children:[i.jsxs("div",{className:"fixed inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#000410] to-black"}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#18B668]/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-[#F59E0B]/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-[#18B668]/20 rounded-2xl flex items-center justify-center",children:i.jsx(Hh,{className:"w-8 h-8 text-[#18B668]"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"My Dashboard"}),i.jsxs("p",{className:"text-white/60",children:["Welcome back, ",a.name,"!"]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:x.map(z=>{const R=z.icon;return i.jsxs("button",{onClick:()=>h(z.id),className:`flex items-center gap-2 px-4 py-3 rounded-xl transition-all duration-300 ${l===z.id?"bg-[#18B668] text-white shadow-lg":"glass hover:bg-white/10 text-white/70 hover:text-white"}`,children:[i.jsx(R,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:z.label})]},z.id)})})]}),i.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[l==="overview"&&k(),l==="bookings"&&_(),l==="purchases"&&d(),l==="wishlist"&&I(),l==="reviews"&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Px,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Reviews & Ratings"}),i.jsx("p",{className:"text-white/60",children:"Share your experiences and help other travelers"})]}),l==="profile"&&i.jsxs("div",{className:"text-center py-12",children:[i.jsx(Hh,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Profile Settings"}),i.jsx("p",{className:"text-white/60",children:"Manage your account information and preferences"}),i.jsx(mi,{to:"/profile",className:"inline-block mt-4",children:i.jsxs(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(Cy,{className:"w-4 h-4 mr-2"}),"Edit Profile"]})})]})]},l)]})]})}const Lx=()=>{Cc();const{user:a}=Rd(),[l,h]=G.useState("overview"),[x,j]=G.useState(""),k={totalProducts:45,totalSales:125e3,pendingOrders:12,totalCustomers:890,monthlyGrowth:15.3,rating:4.7},_=[{id:"1",name:"Traditional Dokra Art Elephant",price:2500,category:"Handicrafts",stock:15,sales:45,image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",status:"active",description:"Handcrafted brass elephant using traditional Dokra technique"},{id:"2",name:"Jharkhand Tribal Jewelry Set",price:1800,category:"Jewelry",stock:8,sales:23,image:"https://images.unsplash.com/photo-1506630448388-4e683c67ddb0?w=400",status:"active",description:"Authentic tribal jewelry with traditional patterns"},{id:"3",name:"Sohrai Painted Wall Hanging",price:3200,category:"Art",stock:0,sales:18,image:"https://images.unsplash.com/photo-1541961017774-22349e4a1262?w=400",status:"out-of-stock",description:"Traditional Sohrai art on wood panel"}],d=[{id:"ORD001",customerName:"Priya Sharma",items:["Dokra Art Elephant","Tribal Jewelry"],total:4300,status:"pending",date:"2024-01-15"},{id:"ORD002",customerName:"Rajesh Kumar",items:["Sohrai Wall Hanging"],total:3200,status:"shipped",date:"2024-01-14"}],I=ae=>{switch(ae){case"active":return"bg-green-500/20 text-green-400 border-green-500/30";case"inactive":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"out-of-stock":return"bg-red-500/20 text-red-400 border-red-500/30";case"pending":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"confirmed":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"shipped":return"bg-purple-500/20 text-purple-400 border-purple-500/30";case"delivered":return"bg-green-500/20 text-green-400 border-green-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},z=[{id:"overview",label:"Overview",icon:mm},{id:"products",label:"Products",icon:Nv},{id:"orders",label:"Orders",icon:Md},{id:"analytics",label:"Analytics",icon:mm},{id:"profile",label:"Store Profile",icon:Ex}],R=()=>i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#18B668]/20 rounded-xl flex items-center justify-center",children:i.jsx(Nv,{className:"w-6 h-6 text-[#18B668]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Total Products"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:k.totalProducts})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#F59E0B]/20 rounded-xl flex items-center justify-center",children:i.jsx(qw,{className:"w-6 h-6 text-[#F59E0B]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Total Sales"}),i.jsxs("p",{className:"text-2xl font-bold text-white",children:["₹",k.totalSales.toLocaleString()]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#0EA5E9]/20 rounded-xl flex items-center justify-center",children:i.jsx(Md,{className:"w-6 h-6 text-[#0EA5E9]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Pending Orders"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:k.pendingOrders})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#8B4513]/20 rounded-xl flex items-center justify-center",children:i.jsx(fo,{className:"w-6 h-6 text-[#8B4513]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Total Customers"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:k.totalCustomers})]})]})})})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Quick Actions"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[i.jsxs(vt,{className:"h-auto p-6 bg-[#18B668] hover:bg-[#18B668]/90 flex-col gap-3",children:[i.jsx(mo,{className:"w-8 h-8"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold",children:"Add New Product"}),i.jsx("div",{className:"text-sm opacity-80",children:"List a new item in your store"})]})]}),i.jsxs(vt,{variant:"outline",className:"h-auto p-6 border-white/20 hover:bg-white/10 flex-col gap-3",children:[i.jsx(po,{className:"w-8 h-8 text-[#F59E0B]"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold",children:"View Analytics"}),i.jsx("div",{className:"text-sm opacity-60",children:"Check your sales performance"})]})]}),i.jsxs(vt,{variant:"outline",className:"h-auto p-6 border-white/20 hover:bg-white/10 flex-col gap-3",children:[i.jsx(Md,{className:"w-8 h-8 text-[#0EA5E9]"}),i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"font-semibold",children:"Manage Orders"}),i.jsx("div",{className:"text-sm opacity-60",children:"Process pending orders"})]})]})]})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Recent Orders"}),i.jsx(vt,{variant:"outline",size:"sm",onClick:()=>h("orders"),children:"View All"})]}),i.jsx("div",{className:"space-y-4",children:d.slice(0,3).map(ae=>i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-[#18B668]/20 rounded-lg flex items-center justify-center",children:i.jsx(Md,{className:"w-5 h-5 text-[#18B668]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:ae.customerName}),i.jsx("p",{className:"text-sm text-white/60",children:ae.items.join(", ")})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-white",children:["₹",ae.total.toLocaleString()]}),i.jsx(ar,{className:`text-xs ${I(ae.status)}`,children:ae.status})]})]},ae.id))})]})]}),D=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"My Products"}),i.jsx("p",{className:"text-white/60",children:"Manage your store inventory"})]}),i.jsxs(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(mo,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[i.jsxs("div",{className:"flex-1 relative",children:[i.jsx(x4,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-white/50 w-4 h-4"}),i.jsx(Zs,{placeholder:"Search products...",value:x,onChange:ae=>j(ae.target.value),className:"pl-10 glass-dark border-white/20 text-white"})]}),i.jsxs(vt,{variant:"outline",className:"border-white/20 hover:bg-white/10",children:[i.jsx(UT,{className:"w-4 h-4 mr-2"}),"Filter"]})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:_.map(ae=>i.jsx(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:i.jsxs(ni,{className:"glass-card border-white/10 overflow-hidden hover:scale-105 transition-transform duration-300",children:[i.jsx("div",{className:"aspect-video bg-cover bg-center",style:{backgroundImage:`url(${ae.image})`},children:i.jsxs("div",{className:"w-full h-full bg-black/40 p-4 flex justify-between items-start",children:[i.jsx(ar,{className:`${I(ae.status)}`,children:ae.status.replace("-"," ")}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-white/20 hover:bg-white/20",children:i.jsx(po,{className:"w-4 h-4"})}),i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-white/20 hover:bg-white/20",children:i.jsx(Cy,{className:"w-4 h-4"})}),i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-red-500/20 hover:bg-red-500/20 text-red-400",children:i.jsx(Py,{className:"w-4 h-4"})})]})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"font-semibold text-white line-clamp-2",children:ae.name}),i.jsxs("span",{className:"text-lg font-bold text-[#18B668]",children:["₹",ae.price.toLocaleString()]})]}),i.jsx("p",{className:"text-white/60 text-sm mb-4 line-clamp-2",children:ae.description}),i.jsxs("div",{className:"flex justify-between items-center text-sm",children:[i.jsxs("span",{className:"text-white/60",children:["Stock: ",i.jsx("span",{className:"text-white",children:ae.stock})]}),i.jsxs("span",{className:"text-white/60",children:["Sales: ",i.jsx("span",{className:"text-white",children:ae.sales})]})]})]})]})},ae.id))})]}),O=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Orders Management"}),i.jsx("p",{className:"text-white/60",children:"Track and manage customer orders"})]}),i.jsx(ni,{className:"glass-card border-white/10",children:i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-white/10",children:[i.jsx("th",{className:"text-left py-3 text-white/80",children:"Order ID"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Customer"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Items"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Total"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Status"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Date"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Actions"})]})}),i.jsx("tbody",{children:d.map(ae=>i.jsxs("tr",{className:"border-b border-white/5",children:[i.jsx("td",{className:"py-4 text-white font-medium",children:ae.id}),i.jsx("td",{className:"py-4 text-white",children:ae.customerName}),i.jsx("td",{className:"py-4 text-white/70",children:ae.items.join(", ")}),i.jsxs("td",{className:"py-4 text-white font-semibold",children:["₹",ae.total.toLocaleString()]}),i.jsx("td",{className:"py-4",children:i.jsx(ar,{className:`${I(ae.status)}`,children:ae.status})}),i.jsx("td",{className:"py-4 text-white/70",children:ae.date}),i.jsx("td",{className:"py-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{size:"sm",variant:"outline",className:"border-white/20 hover:bg-white/10",children:i.jsx(po,{className:"w-4 h-4"})}),i.jsx(vt,{size:"sm",className:"bg-[#18B668] hover:bg-[#18B668]/90",children:i.jsx(mu,{className:"w-4 h-4"})})]})})]},ae.id))})]})})})})]}),ie=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Store Profile"}),i.jsx("p",{className:"text-white/60",children:"Manage your store information and settings"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Store Information"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Store Name"}),i.jsx(Zs,{defaultValue:a?.storeName||"Tribal Crafts Store",className:"mt-2 glass-dark border-white/20 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Category"}),i.jsx(Zs,{defaultValue:"Handicrafts & Art",className:"mt-2 glass-dark border-white/20 text-white"})]})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Store Description"}),i.jsx("textarea",{rows:4,defaultValue:a?.storeDescription||"Traditional handicrafts and tribal art from Jharkhand",className:"mt-2 w-full p-3 glass-dark border border-white/20 rounded-xl text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Phone Number"}),i.jsx(Zs,{defaultValue:a?.phone||"+91 98765 43210",className:"mt-2 glass-dark border-white/20 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Email"}),i.jsx(Zs,{defaultValue:a?.email,className:"mt-2 glass-dark border-white/20 text-white"})]})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Location"}),i.jsx(Zs,{defaultValue:a?.location||"Ranchi, Jharkhand",className:"mt-2 glass-dark border-white/20 text-white"})]}),i.jsx(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:"Update Store Profile"})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Store Performance"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Store Rating"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"w-5 h-5 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-white font-semibold",children:k.rating})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Verification Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mu,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-[#18B668] font-medium",children:"Verified"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Monthly Growth"}),i.jsxs("span",{className:"text-[#18B668] font-semibold",children:["+",k.monthlyGrowth,"%"]})]})]})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Stats"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Total Revenue"}),i.jsxs("span",{className:"text-white font-semibold",children:["₹",k.totalSales.toLocaleString()]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Products Listed"}),i.jsx("span",{className:"text-white font-semibold",children:k.totalProducts})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Happy Customers"}),i.jsx("span",{className:"text-white font-semibold",children:k.totalCustomers})]})]})]})]})]})]}),Q=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics & Insights"}),i.jsx("p",{className:"text-white/60",children:"Track your store performance and sales data"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Sales Overview"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsx("span",{className:"text-white/70",children:"This Month"}),i.jsx("span",{className:"text-[#18B668] font-semibold text-lg",children:"₹35,000"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsx("span",{className:"text-white/70",children:"Last Month"}),i.jsx("span",{className:"text-white font-semibold",children:"₹28,500"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsx("span",{className:"text-white/70",children:"Growth"}),i.jsx("span",{className:"text-[#18B668] font-semibold",children:"+22.8%"})]})]})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Top Categories"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Handicrafts"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-24 h-2 bg-white/20 rounded-full",children:i.jsx("div",{className:"w-3/4 h-full bg-[#18B668] rounded-full"})}),i.jsx("span",{className:"text-white text-sm",children:"75%"})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Jewelry"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-24 h-2 bg-white/20 rounded-full",children:i.jsx("div",{className:"w-1/2 h-full bg-[#F59E0B] rounded-full"})}),i.jsx("span",{className:"text-white text-sm",children:"50%"})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Art"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-24 h-2 bg-white/20 rounded-full",children:i.jsx("div",{className:"w-1/3 h-full bg-[#0EA5E9] rounded-full"})}),i.jsx("span",{className:"text-white text-sm",children:"33%"})]})]})]})]})]})]});return i.jsxs("div",{className:"min-h-screen bg-black pt-24 pb-12",children:[i.jsxs("div",{className:"fixed inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#000410] to-black"}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#18B668]/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-[#F59E0B]/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-[#F59E0B]/20 rounded-2xl flex items-center justify-center",children:i.jsx(Ex,{className:"w-8 h-8 text-[#F59E0B]"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Vendor Dashboard"}),i.jsxs("p",{className:"text-white/60",children:["Welcome back, ",a?.name,"!"]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:z.map(ae=>{const se=ae.icon;return i.jsxs("button",{onClick:()=>h(ae.id),className:`flex items-center gap-2 px-4 py-3 rounded-xl transition-all duration-300 ${l===ae.id?"bg-[#18B668] text-white shadow-lg":"glass hover:bg-white/10 text-white/70 hover:text-white"}`,children:[i.jsx(se,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:ae.label})]},ae.id)})})]}),i.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[l==="overview"&&R(),l==="products"&&D(),l==="orders"&&O(),l==="analytics"&&Q(),l==="profile"&&ie()]},l)]})]})},Ib=()=>{Cc();const{user:a}=Rd(),[l,h]=G.useState("overview"),x={totalRooms:25,occupiedRooms:18,totalRevenue:45e4,averageRating:4.6,totalGuests:156,occupancyRate:72,monthlyGrowth:18.5},j=[{id:"1",type:"Deluxe Suite",price:4500,capacity:4,amenities:["AC","WiFi","TV","Balcony"],status:"occupied",bookings:28,image:"https://images.unsplash.com/photo-1566665797739-1674de7a421a?w=400"},{id:"2",type:"Standard Room",price:2500,capacity:2,amenities:["AC","WiFi","TV"],status:"available",bookings:45,image:"https://images.unsplash.com/photo-1586023492125-27b2c045efd7?w=400"},{id:"3",type:"Family Room",price:3800,capacity:6,amenities:["AC","WiFi","TV","Kitchen"],status:"maintenance",bookings:22,image:"https://images.unsplash.com/photo-1611892440504-42a792e24d32?w=400"}],k=[{id:"BK001",guestName:"Amit Sharma",roomType:"Deluxe Suite",checkIn:"2024-01-20",checkOut:"2024-01-23",guests:2,total:13500,status:"confirmed"},{id:"BK002",guestName:"Priya Patel",roomType:"Standard Room",checkIn:"2024-01-18",checkOut:"2024-01-22",guests:2,total:1e4,status:"checked-in"}],_=ae=>{switch(ae){case"available":return"bg-green-500/20 text-green-400 border-green-500/30";case"occupied":return"bg-blue-500/20 text-blue-400 border-blue-500/30";case"maintenance":return"bg-red-500/20 text-red-400 border-red-500/30";case"confirmed":return"bg-yellow-500/20 text-yellow-400 border-yellow-500/30";case"checked-in":return"bg-green-500/20 text-green-400 border-green-500/30";case"checked-out":return"bg-gray-500/20 text-gray-400 border-gray-500/30";case"cancelled":return"bg-red-500/20 text-red-400 border-red-500/30";default:return"bg-gray-500/20 text-gray-400 border-gray-500/30"}},d=ae=>{switch(ae){case"available":return i.jsx(mu,{className:"w-4 h-4"});case"occupied":return i.jsx(kv,{className:"w-4 h-4"});case"maintenance":return i.jsx(w4,{className:"w-4 h-4"});case"confirmed":return i.jsx(Tc,{className:"w-4 h-4"});case"checked-in":return i.jsx(mu,{className:"w-4 h-4"});case"checked-out":return i.jsx(mu,{className:"w-4 h-4"});case"cancelled":return i.jsx(Sx,{className:"w-4 h-4"});default:return i.jsx(Sx,{className:"w-4 h-4"})}},I=[{id:"overview",label:"Overview",icon:mm},{id:"rooms",label:"Rooms",icon:dm},{id:"bookings",label:"Bookings",icon:ds},{id:"guests",label:"Guests",icon:fo},{id:"analytics",label:"Analytics",icon:mm},{id:"property",label:"Property Info",icon:Tx}],z=()=>i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#0EA5E9]/20 rounded-xl flex items-center justify-center",children:i.jsx(dm,{className:"w-6 h-6 text-[#0EA5E9]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Total Rooms"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:x.totalRooms})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#18B668]/20 rounded-xl flex items-center justify-center",children:i.jsx(kv,{className:"w-6 h-6 text-[#18B668]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Occupied Rooms"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:x.occupiedRooms})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#F59E0B]/20 rounded-xl flex items-center justify-center",children:i.jsx(qw,{className:"w-6 h-6 text-[#F59E0B]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Total Revenue"}),i.jsxs("p",{className:"text-2xl font-bold text-white",children:["₹",x.totalRevenue.toLocaleString()]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-12 h-12 bg-[#8B4513]/20 rounded-xl flex items-center justify-center",children:i.jsx(Xs,{className:"w-6 h-6 text-[#F59E0B]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"text-white/60 text-sm",children:"Average Rating"}),i.jsx("p",{className:"text-2xl font-bold text-white",children:x.averageRating})]})]})})})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-xl font-semibold text-white mb-6",children:"Occupancy Overview"}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsxs("div",{className:"w-24 h-24 mx-auto mb-4 relative",children:[i.jsxs("svg",{className:"w-full h-full transform -rotate-90",viewBox:"0 0 100 100",children:[i.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"rgba(255,255,255,0.1)",strokeWidth:"8",fill:"none"}),i.jsx("circle",{cx:"50",cy:"50",r:"40",stroke:"#18B668",strokeWidth:"8",fill:"none",strokeDasharray:`${x.occupancyRate*2.51} 251`,strokeLinecap:"round"})]}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:i.jsxs("span",{className:"text-xl font-bold text-white",children:[x.occupancyRate,"%"]})})]}),i.jsx("p",{className:"text-white/60",children:"Current Occupancy"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Available Rooms"}),i.jsx("span",{className:"text-[#18B668] font-semibold",children:x.totalRooms-x.occupiedRooms})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Occupied Rooms"}),i.jsx("span",{className:"text-[#0EA5E9] font-semibold",children:x.occupiedRooms})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Total Guests"}),i.jsx("span",{className:"text-white font-semibold",children:x.totalGuests})]})]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(mo,{className:"w-4 h-4 mr-2"}),"Add New Booking"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 hover:bg-white/10",children:[i.jsx(ds,{className:"w-4 h-4 mr-2"}),"View Calendar"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 hover:bg-white/10",children:[i.jsx(po,{className:"w-4 h-4 mr-2"}),"Check Availability"]})]})]})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsxs("div",{className:"flex justify-between items-center mb-6",children:[i.jsx("h3",{className:"text-xl font-semibold text-white",children:"Recent Bookings"}),i.jsx(vt,{variant:"outline",size:"sm",onClick:()=>h("bookings"),children:"View All"})]}),i.jsx("div",{className:"space-y-4",children:k.slice(0,3).map(ae=>i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsxs("div",{className:"flex items-center gap-4",children:[i.jsx("div",{className:"w-10 h-10 bg-[#0EA5E9]/20 rounded-lg flex items-center justify-center",children:i.jsx(ds,{className:"w-5 h-5 text-[#0EA5E9]"})}),i.jsxs("div",{children:[i.jsx("p",{className:"font-medium text-white",children:ae.guestName}),i.jsxs("p",{className:"text-sm text-white/60",children:[ae.roomType," • ",ae.guests," guests"]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsxs("p",{className:"font-semibold text-white",children:["₹",ae.total.toLocaleString()]}),i.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[d(ae.status),i.jsx(ar,{className:`text-xs ${_(ae.status)}`,children:ae.status.replace("-"," ")})]})]})]},ae.id))})]})]}),R=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Room Management"}),i.jsx("p",{className:"text-white/60",children:"Manage your property rooms and pricing"})]}),i.jsxs(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(mo,{className:"w-4 h-4 mr-2"}),"Add Room"]})]}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(ae=>i.jsx(re.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.3},children:i.jsxs(ni,{className:"glass-card border-white/10 overflow-hidden hover:scale-105 transition-transform duration-300",children:[i.jsx("div",{className:"aspect-video bg-cover bg-center",style:{backgroundImage:`url(${ae.image})`},children:i.jsxs("div",{className:"w-full h-full bg-black/40 p-4 flex justify-between items-start",children:[i.jsxs("div",{className:"flex items-center gap-2",children:[d(ae.status),i.jsx(ar,{className:`${_(ae.status)}`,children:ae.status})]}),i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-white/20 hover:bg-white/20",children:i.jsx(po,{className:"w-4 h-4"})}),i.jsx(vt,{size:"sm",variant:"outline",className:"w-8 h-8 p-0 border-white/20 hover:bg-white/20",children:i.jsx(Cy,{className:"w-4 h-4"})})]})]})}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"font-semibold text-white",children:ae.type}),i.jsxs("span",{className:"text-lg font-bold text-[#18B668]",children:["₹",ae.price,"/night"]})]}),i.jsxs("div",{className:"flex items-center gap-4 text-sm text-white/60 mb-4",children:[i.jsxs("span",{className:"flex items-center gap-1",children:[i.jsx(fo,{className:"w-4 h-4"}),ae.capacity," guests"]}),i.jsxs("span",{children:[ae.bookings," bookings"]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:ae.amenities.map(se=>i.jsx(ar,{variant:"outline",className:"text-xs border-white/20 text-white/70",children:se},se))})]})]})},ae.id))})]}),D=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Bookings Management"}),i.jsx("p",{className:"text-white/60",children:"Track and manage guest reservations"})]}),i.jsx(ni,{className:"glass-card border-white/10",children:i.jsx("div",{className:"p-6",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-white/10",children:[i.jsx("th",{className:"text-left py-3 text-white/80",children:"Booking ID"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Guest"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Room Type"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Check-in"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Check-out"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Guests"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Total"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Status"}),i.jsx("th",{className:"text-left py-3 text-white/80",children:"Actions"})]})}),i.jsx("tbody",{children:k.map(ae=>i.jsxs("tr",{className:"border-b border-white/5",children:[i.jsx("td",{className:"py-4 text-white font-medium",children:ae.id}),i.jsx("td",{className:"py-4 text-white",children:ae.guestName}),i.jsx("td",{className:"py-4 text-white/70",children:ae.roomType}),i.jsx("td",{className:"py-4 text-white/70",children:ae.checkIn}),i.jsx("td",{className:"py-4 text-white/70",children:ae.checkOut}),i.jsx("td",{className:"py-4 text-white/70",children:ae.guests}),i.jsxs("td",{className:"py-4 text-white font-semibold",children:["₹",ae.total.toLocaleString()]}),i.jsx("td",{className:"py-4",children:i.jsxs("div",{className:"flex items-center gap-2",children:[d(ae.status),i.jsx(ar,{className:`${_(ae.status)}`,children:ae.status.replace("-"," ")})]})}),i.jsx("td",{className:"py-4",children:i.jsxs("div",{className:"flex gap-2",children:[i.jsx(vt,{size:"sm",variant:"outline",className:"border-white/20 hover:bg-white/10",children:i.jsx(po,{className:"w-4 h-4"})}),i.jsx(vt,{size:"sm",className:"bg-[#18B668] hover:bg-[#18B668]/90",children:i.jsx(mu,{className:"w-4 h-4"})})]})})]},ae.id))})]})})})})]}),O=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Property Information"}),i.jsx("p",{className:"text-white/60",children:"Manage your property details and amenities"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsx("div",{className:"lg:col-span-2",children:i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-6",children:"Property Details"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Property Name"}),i.jsx(Zs,{defaultValue:a?.propertyName||"Jharkhand Heritage Hotel",className:"mt-2 glass-dark border-white/20 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Property Type"}),i.jsx(Zs,{defaultValue:a?.propertyType||"Hotel",className:"mt-2 glass-dark border-white/20 text-white"})]})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Description"}),i.jsx("textarea",{rows:4,defaultValue:"A beautiful heritage property showcasing the rich culture and hospitality of Jharkhand",className:"mt-2 w-full p-3 glass-dark border border-white/20 rounded-xl text-white placeholder:text-white/50 focus:border-[#18B668] focus:ring-[#18B668]/20 resize-none"})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Total Rooms"}),i.jsx(Zs,{defaultValue:a?.roomCount||x.totalRooms,type:"number",className:"mt-2 glass-dark border-white/20 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Check-in Time"}),i.jsx(Zs,{defaultValue:"2:00 PM",className:"mt-2 glass-dark border-white/20 text-white"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Phone Number"}),i.jsx(Zs,{defaultValue:a?.phone||"+91 98765 43210",className:"mt-2 glass-dark border-white/20 text-white"})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Email"}),i.jsx(Zs,{defaultValue:a?.email,className:"mt-2 glass-dark border-white/20 text-white"})]})]}),i.jsxs("div",{children:[i.jsx(Ss,{className:"text-white/80 text-sm",children:"Address"}),i.jsx(Zs,{defaultValue:a?.location||"Main Road, Ranchi, Jharkhand",className:"mt-2 glass-dark border-white/20 text-white"})]}),i.jsx(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:"Update Property Info"})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Property Stats"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Property Rating"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"w-5 h-5 text-yellow-400 fill-current"}),i.jsx("span",{className:"text-white font-semibold",children:x.averageRating})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Verification Status"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(mu,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-[#18B668] font-medium",children:"Verified"})]})]}),i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Occupancy Rate"}),i.jsxs("span",{className:"text-[#18B668] font-semibold",children:[x.occupancyRate,"%"]})]})]})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Amenities"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(W4,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-white",children:"Free WiFi"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(PT,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-white",children:"Parking"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(Ww,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-white",children:"Restaurant"})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx(ds,{className:"w-5 h-5 text-[#18B668]"}),i.jsx("span",{className:"text-white",children:"24/7 Front Desk"})]})]})]})]})]})]}),ie=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Analytics & Performance"}),i.jsx("p",{className:"text-white/60",children:"Track your property performance and revenue"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Revenue Overview"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsx("span",{className:"text-white/70",children:"This Month"}),i.jsx("span",{className:"text-[#18B668] font-semibold text-lg",children:"₹85,000"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsx("span",{className:"text-white/70",children:"Last Month"}),i.jsx("span",{className:"text-white font-semibold",children:"₹72,000"})]}),i.jsxs("div",{className:"flex items-center justify-between p-4 glass rounded-xl",children:[i.jsx("span",{className:"text-white/70",children:"Growth"}),i.jsxs("span",{className:"text-[#18B668] font-semibold",children:["+",x.monthlyGrowth,"%"]})]})]})]}),i.jsxs(ni,{className:"glass-card p-6 border-white/10",children:[i.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Room Performance"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Deluxe Suite"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-24 h-2 bg-white/20 rounded-full",children:i.jsx("div",{className:"w-4/5 h-full bg-[#18B668] rounded-full"})}),i.jsx("span",{className:"text-white text-sm",children:"80%"})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Standard Room"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-24 h-2 bg-white/20 rounded-full",children:i.jsx("div",{className:"w-3/5 h-full bg-[#F59E0B] rounded-full"})}),i.jsx("span",{className:"text-white text-sm",children:"60%"})]})]}),i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsx("span",{className:"text-white/70",children:"Family Room"}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("div",{className:"w-24 h-2 bg-white/20 rounded-full",children:i.jsx("div",{className:"w-3/4 h-full bg-[#0EA5E9] rounded-full"})}),i.jsx("span",{className:"text-white text-sm",children:"75%"})]})]})]})]})]})]}),Q=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-white",children:"Guest Management"}),i.jsx("p",{className:"text-white/60",children:"View and manage guest information"})]}),i.jsx(ni,{className:"glass-card p-6 border-white/10",children:i.jsxs("div",{className:"text-center py-12",children:[i.jsx(fo,{className:"w-16 h-16 text-white/30 mx-auto mb-4"}),i.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Guest Management"}),i.jsx("p",{className:"text-white/60 mb-6",children:"Track guest preferences, history, and feedback"}),i.jsxs(vt,{className:"bg-[#18B668] hover:bg-[#18B668]/90",children:[i.jsx(mo,{className:"w-4 h-4 mr-2"}),"Add Guest Record"]})]})})]});return i.jsxs("div",{className:"min-h-screen bg-black pt-24 pb-12",children:[i.jsxs("div",{className:"fixed inset-0 z-0",children:[i.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-black via-[#000410] to-black"}),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#0EA5E9]/5 rounded-full blur-3xl"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-80 h-80 bg-[#18B668]/5 rounded-full blur-3xl"})]}),i.jsxs("div",{className:"relative z-10 max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"mb-8",children:[i.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[i.jsx("div",{className:"w-16 h-16 bg-[#0EA5E9]/20 rounded-2xl flex items-center justify-center",children:i.jsx(Tx,{className:"w-8 h-8 text-[#0EA5E9]"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Hotel Dashboard"}),i.jsxs("p",{className:"text-white/60",children:["Welcome back, ",a?.name,"!"]})]})]}),i.jsx("div",{className:"flex flex-wrap gap-2",children:I.map(ae=>{const se=ae.icon;return i.jsxs("button",{onClick:()=>h(ae.id),className:`flex items-center gap-2 px-4 py-3 rounded-xl transition-all duration-300 ${l===ae.id?"bg-[#18B668] text-white shadow-lg":"glass hover:bg-white/10 text-white/70 hover:text-white"}`,children:[i.jsx(se,{className:"w-4 h-4"}),i.jsx("span",{className:"font-medium",children:ae.label})]},ae.id)})})]}),i.jsxs(re.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},children:[l==="overview"&&z(),l==="rooms"&&R(),l==="bookings"&&D(),l==="guests"&&Q(),l==="analytics"&&ie(),l==="property"&&O()]},l)]})]})},XP=()=>{const{user:a}=Rd(),l=un();return G.useEffect(()=>{if(a&&a.userType!=="host"){l("/guest-dashboard");return}},[a,l]),a?a.hostType==="vendor"?i.jsx(Lx,{}):a.hostType==="hotel-owner"?i.jsx(Ib,{}):i.jsx(Lx,{}):(l("/login"),null)};function YP(){const a=xo(),l=un(),h=a.state,[x,j]=G.useState(1),[k,_]=G.useState({startDate:"",endDate:"",travelers:1,rooms:1,accommodationType:"standard",specialRequests:"",addOns:[],totalAmount:h?.price||25e3}),[d,I]=G.useState([{name:"",email:"",phone:"",age:18,emergencyContact:"",dietaryRequirements:"",medicalConditions:""}]),[z,R]=G.useState("card"),[D,O]=G.useState(!1),[ie,Q]=G.useState(!1),ae=[{id:"budget",name:"Budget Stay",price:0,description:"Comfortable homestays and guesthouses"},{id:"standard",name:"Standard Hotel",price:2e3,description:"Well-appointed hotels with modern amenities"},{id:"premium",name:"Premium Resort",price:5e3,description:"Luxury resorts with spa and fine dining"},{id:"luxury",name:"Ultra Luxury",price:1e4,description:"Exclusive properties with personal service"}],se=[{id:"guide",name:"Personal Guide",price:1500,description:"Expert local guide for entire trip"},{id:"photography",name:"Photography Package",price:3e3,description:"Professional photographer for memories"},{id:"transport",name:"Private Transport",price:2500,description:"Dedicated vehicle with driver"},{id:"meals",name:"All Meals Included",price:2e3,description:"Breakfast, lunch, and dinner"},{id:"adventure",name:"Adventure Activities",price:4e3,description:"Rock climbing, trekking, rafting"},{id:"cultural",name:"Cultural Experiences",price:1800,description:"Tribal village visits and workshops"}];G.useEffect(()=>{h||l("/travel-planner")},[h,l]),G.useEffect(()=>{pe()},[k.accommodationType,k.addOns,k.travelers,k.rooms]);const pe=()=>{let je=h?.price||25e3,Ae=ae.find(Ve=>Ve.id===k.accommodationType)?.price||0,He=k.addOns.reduce((Ve,at)=>{const Tt=se.find(Et=>Et.id===at);return Ve+(Tt?.price||0)},0),Jt=(je+Ae+He)*k.travelers+(k.rooms-1)*2e3;_(Ve=>({...Ve,totalAmount:Jt}))},Pe=()=>{I([...d,{name:"",email:"",phone:"",age:18,emergencyContact:"",dietaryRequirements:"",medicalConditions:""}]),_(je=>({...je,travelers:je.travelers+1}))},Ie=je=>{if(d.length>1){const Ae=d.filter((He,ct)=>ct!==je);I(Ae),_(He=>({...He,travelers:He.travelers-1}))}},Ze=(je,Ae,He)=>{const ct=[...d];ct[je]={...ct[je],[Ae]:He},I(ct)},Je=je=>{_(Ae=>({...Ae,addOns:Ae.addOns.includes(je)?Ae.addOns.filter(He=>He!==je):[...Ae.addOns,je]}))},Xe=[{number:1,title:"Trip Details",icon:ds,description:"When & Where"},{number:2,title:"Travelers",icon:fo,description:"Who's Going"},{number:3,title:"Add-ons",icon:Xs,description:"Enhance Your Experience"},{number:4,title:"Payment",icon:hm,description:"Secure Checkout"},{number:5,title:"Confirmation",icon:Xp,description:"Almost Done!"}],ut=je=>{switch(je){case 1:return k.startDate&&k.endDate;case 2:return d.every(Ae=>Ae.name&&Ae.email&&Ae.phone);case 3:return!0;case 4:return D;default:return!1}};return h?i.jsx("div",{className:"min-h-screen bg-gradient-to-b from-black via-slate-900 to-black pt-24 pb-20",children:i.jsxs("div",{className:"max-w-7xl mx-auto px-4",children:[i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center mb-12",children:[i.jsxs(mi,{to:"/travel-planner",className:"inline-flex items-center gap-2 text-emerald-400 hover:text-emerald-300 transition-colors mb-6",children:[i.jsx(Ho,{className:"w-5 h-5"}),"Back to Travel Planner"]}),i.jsxs("h1",{className:"text-5xl md:text-6xl font-bold mb-6",children:[i.jsx("span",{className:"bg-gradient-to-r from-emerald-400 to-sky-400 bg-clip-text text-transparent",children:"Book Your"}),i.jsx("span",{className:"text-white",children:" Aaranya Adventure"})]}),i.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto",children:"You're just a few steps away from your dream journey through the forests of Jharkhand"})]}),i.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[i.jsxs("div",{className:"lg:col-span-2",children:[i.jsx(re.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"glass-premium rounded-2xl p-6 mb-8",children:i.jsx("div",{className:"flex items-center justify-between",children:Xe.map((je,Ae)=>i.jsxs("div",{className:"flex items-center flex-1",children:[i.jsxs(re.div,{className:`flex items-center gap-3 ${x>=je.number?"text-emerald-400":"text-gray-500"}`,whileHover:{scale:1.05},children:[i.jsx("div",{className:`w-12 h-12 rounded-full flex items-center justify-center transition-all duration-300 ${x>=je.number?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black":"glass-dark border border-gray-500"}`,children:x>je.number?i.jsx(Xp,{className:"w-6 h-6"}):i.jsx(je.icon,{className:"w-6 h-6"})}),i.jsxs("div",{className:"hidden md:block",children:[i.jsx("div",{className:"font-bold text-sm",children:je.title}),i.jsx("div",{className:"text-xs opacity-70",children:je.description})]})]}),Ae<Xe.length-1&&i.jsx("div",{className:`flex-1 h-0.5 mx-4 transition-all duration-300 ${x>je.number?"bg-gradient-to-r from-emerald-400 to-sky-400":"bg-gray-600"}`})]},je.number))})}),i.jsxs(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.6},className:"glass-premium rounded-2xl p-8",children:[x===1&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"When would you like to travel?"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(ds,{className:"w-5 h-5 text-emerald-400"}),"Start Date"]}),i.jsx("input",{type:"date",value:k.startDate,onChange:je=>_(Ae=>({...Ae,startDate:je.target.value})),className:"w-full glass-dark rounded-xl px-4 py-4 text-white border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",min:new Date().toISOString().split("T")[0]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(ds,{className:"w-5 h-5 text-emerald-400"}),"End Date"]}),i.jsx("input",{type:"date",value:k.endDate,onChange:je=>_(Ae=>({...Ae,endDate:je.target.value})),className:"w-full glass-dark rounded-xl px-4 py-4 text-white border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",min:k.startDate||new Date().toISOString().split("T")[0]})]})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:[i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(fo,{className:"w-5 h-5 text-emerald-400"}),"Number of Travelers"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>_(je=>({...je,travelers:Math.max(1,je.travelers-1)})),className:"w-12 h-12 glass-dark rounded-xl flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx(pm,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-2xl font-bold text-white min-w-[3rem] text-center",children:k.travelers}),i.jsx("button",{onClick:()=>_(je=>({...je,travelers:Math.min(10,je.travelers+1)})),className:"w-12 h-12 glass-dark rounded-xl flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx(mo,{className:"w-5 h-5 text-white"})})]})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(dm,{className:"w-5 h-5 text-emerald-400"}),"Number of Rooms"]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("button",{onClick:()=>_(je=>({...je,rooms:Math.max(1,je.rooms-1)})),className:"w-12 h-12 glass-dark rounded-xl flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx(pm,{className:"w-5 h-5 text-white"})}),i.jsx("span",{className:"text-2xl font-bold text-white min-w-[3rem] text-center",children:k.rooms}),i.jsx("button",{onClick:()=>_(je=>({...je,rooms:Math.min(5,je.rooms+1)})),className:"w-12 h-12 glass-dark rounded-xl flex items-center justify-center hover:bg-white/10 transition-colors",children:i.jsx(mo,{className:"w-5 h-5 text-white"})})]})]})]}),i.jsxs("div",{className:"mb-8",children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-4",children:[i.jsx(dm,{className:"w-5 h-5 text-emerald-400"}),"Accommodation Type"]}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:ae.map(je=>i.jsxs(re.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>_(Ae=>({...Ae,accommodationType:je.id})),className:`p-4 rounded-xl text-left transition-all duration-300 ${k.accommodationType===je.id?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black":"glass-dark border border-white/20 text-white hover:border-emerald-400"}`,children:[i.jsxs("div",{className:"flex justify-between items-start mb-2",children:[i.jsx("h3",{className:"font-bold",children:je.name}),i.jsx("span",{className:"font-bold",children:je.price>0?`+₹${je.price.toLocaleString()}`:"Included"})]}),i.jsx("p",{className:"text-sm opacity-80",children:je.description})]},je.id))})]}),i.jsxs("div",{children:[i.jsxs("label",{className:"flex items-center gap-2 text-white font-medium mb-3",children:[i.jsx(tp,{className:"w-5 h-5 text-emerald-400"}),"Special Requests (Optional)"]}),i.jsx("textarea",{value:k.specialRequests,onChange:je=>_(Ae=>({...Ae,specialRequests:je.target.value})),placeholder:"Any special dietary requirements, accessibility needs, celebration occasions, or specific preferences...",className:"w-full glass-dark rounded-xl px-4 py-4 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300 h-32 resize-none"})]})]}),x===2&&i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsx("h2",{className:"text-3xl font-bold text-white",children:"Traveler Information"}),i.jsxs(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:Pe,className:"px-4 py-2 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl hover:shadow-lg transition-all duration-300 text-sm",children:[i.jsx(mo,{className:"w-4 h-4 inline mr-2"}),"Add Traveler"]})]}),i.jsx("div",{className:"space-y-6",children:d.map((je,Ae)=>i.jsxs(re.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Ae*.1},className:"glass-dark rounded-2xl p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("h3",{className:"text-xl font-bold text-white",children:["Traveler ",Ae+1," ",Ae===0&&"(Lead Traveler)"]}),Ae>0&&i.jsx("button",{onClick:()=>Ie(Ae),className:"text-red-400 hover:text-red-300 transition-colors",children:"Remove"})]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-2",children:"Full Name *"}),i.jsx("input",{type:"text",value:je.name,onChange:He=>Ze(Ae,"name",He.target.value),className:"w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",placeholder:"Enter full name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-2",children:"Age *"}),i.jsx("input",{type:"number",value:je.age,onChange:He=>Ze(Ae,"age",parseInt(He.target.value)||18),className:"w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",min:"1",max:"100"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-2",children:"Email Address *"}),i.jsx("input",{type:"email",value:je.email,onChange:He=>Ze(Ae,"email",He.target.value),className:"w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",placeholder:"Enter email address"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-2",children:"Phone Number *"}),i.jsx("input",{type:"tel",value:je.phone,onChange:He=>Ze(Ae,"phone",He.target.value),className:"w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",placeholder:"+91 98765 43210"})]}),i.jsxs("div",{className:"md:col-span-2",children:[i.jsx("label",{className:"block text-white font-medium mb-2",children:"Emergency Contact"}),i.jsx("input",{type:"text",value:je.emergencyContact,onChange:He=>Ze(Ae,"emergencyContact",He.target.value),className:"w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",placeholder:"Name and phone number of emergency contact"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-2",children:"Dietary Requirements"}),i.jsx("input",{type:"text",value:je.dietaryRequirements,onChange:He=>Ze(Ae,"dietaryRequirements",He.target.value),className:"w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",placeholder:"Vegetarian, vegan, allergies, etc."})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-white font-medium mb-2",children:"Medical Conditions"}),i.jsx("input",{type:"text",value:je.medicalConditions,onChange:He=>Ze(Ae,"medicalConditions",He.target.value),className:"w-full glass rounded-xl px-4 py-3 text-white placeholder-gray-400 border border-white/20 focus:border-emerald-400 focus:outline-none transition-all duration-300",placeholder:"Any medical conditions we should know about"})]})]})]},Ae))})]}),x===3&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-6",children:"Enhance Your Experience"}),i.jsx("p",{className:"text-gray-300 mb-8",children:"Add optional services to make your journey even more memorable"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:se.map(je=>i.jsxs(re.div,{whileHover:{scale:1.02},className:`glass-dark rounded-2xl p-6 cursor-pointer transition-all duration-300 ${k.addOns.includes(je.id)?"ring-2 ring-emerald-400 bg-gradient-to-r from-emerald-400/10 to-sky-400/10":"hover:border-emerald-400/50"}`,onClick:()=>Je(je.id),children:[i.jsxs("div",{className:"flex items-start justify-between mb-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("h3",{className:"text-white font-bold text-lg mb-2",children:je.name}),i.jsx("p",{className:"text-gray-300 text-sm mb-3",children:je.description})]}),i.jsxs("div",{className:"ml-4 text-right",children:[i.jsxs("div",{className:"text-emerald-400 font-bold text-xl",children:["₹",je.price.toLocaleString()]}),i.jsx("div",{className:"text-gray-400 text-xs",children:"per person"})]})]}),i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all duration-300 ${k.addOns.includes(je.id)?"border-emerald-400 bg-emerald-400":"border-gray-400"}`,children:k.addOns.includes(je.id)&&i.jsx(Xp,{className:"w-4 h-4 text-black"})}),i.jsx("span",{className:"text-white font-medium",children:k.addOns.includes(je.id)?"Added":"Add to package"})]})]},je.id))})]}),x===4&&i.jsxs("div",{children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Secure Payment"}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-8",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-bold mb-4",children:"Payment Method"}),i.jsx("div",{className:"space-y-3",children:[{id:"card",name:"Credit/Debit Card",icon:hm},{id:"upi",name:"UPI Payment",icon:Af},{id:"netbanking",name:"Net Banking",icon:Td}].map(({id:je,name:Ae,icon:He})=>i.jsxs(re.button,{whileHover:{scale:1.02},onClick:()=>R(je),className:`w-full p-4 rounded-xl flex items-center gap-3 transition-all duration-300 ${z===je?"bg-gradient-to-r from-emerald-400 to-sky-400 text-black":"glass-dark text-white hover:bg-white/10"}`,children:[i.jsx(He,{className:"w-5 h-5"}),i.jsx("span",{className:"font-medium",children:Ae}),z===je&&i.jsx(Xp,{className:"w-5 h-5 ml-auto"})]},je))})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-white font-bold mb-4",children:"Security Features"}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(Td,{className:"w-5 h-5 text-emerald-400"}),i.jsx("span",{children:"SSL Encrypted Transaction"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(Td,{className:"w-5 h-5 text-emerald-400"}),i.jsx("span",{children:"PCI DSS Compliant"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(Td,{className:"w-5 h-5 text-emerald-400"}),i.jsx("span",{children:"Money Back Guarantee"})]}),i.jsxs("div",{className:"flex items-center gap-3 text-gray-300",children:[i.jsx(Af,{className:"w-5 h-5 text-emerald-400"}),i.jsx("span",{children:"24/7 Support Available"})]})]})]})]}),i.jsx("div",{className:"glass-dark rounded-xl p-6 mb-8",children:i.jsxs("div",{className:"flex items-start gap-4",children:[i.jsx("input",{type:"checkbox",id:"terms",checked:D,onChange:je=>O(je.target.checked),className:"mt-1 w-4 h-4 text-emerald-400 bg-transparent border border-gray-300 rounded focus:ring-emerald-400 focus:ring-2"}),i.jsxs("label",{htmlFor:"terms",className:"text-gray-300 text-sm",children:["I agree to the"," ",i.jsx(mi,{to:"/terms",className:"text-emerald-400 hover:text-emerald-300",children:"Terms and Conditions"})," ","and"," ",i.jsx(mi,{to:"/privacy",className:"text-emerald-400 hover:text-emerald-300",children:"Privacy Policy"}),". I understand that this booking is subject to availability and confirmation from Aaranya Jharkhand."]})]})}),i.jsxs("div",{className:"glass-dark rounded-xl p-6",children:[i.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[i.jsx(Sx,{className:"w-5 h-5 text-yellow-400"}),i.jsx("h4",{className:"text-white font-bold",children:"Important Information"})]}),i.jsxs("ul",{className:"text-gray-300 text-sm space-y-2",children:[i.jsx("li",{children:"• Booking confirmation will be sent via email within 24 hours"}),i.jsx("li",{children:"• Full payment is required to confirm your reservation"}),i.jsx("li",{children:"• Cancellation policy applies as per terms and conditions"}),i.jsx("li",{children:"• Travel insurance is recommended but not included"}),i.jsx("li",{children:"• Valid ID proof required for all travelers"})]})]})]}),x===5&&i.jsxs("div",{className:"text-center",children:[i.jsx(re.div,{initial:{scale:0},animate:{scale:1},transition:{duration:.5},className:"w-24 h-24 bg-gradient-to-r from-emerald-400 to-sky-400 rounded-full flex items-center justify-center mx-auto mb-6",children:i.jsx(Xp,{className:"w-12 h-12 text-black"})}),i.jsx("h2",{className:"text-4xl font-bold text-white mb-6",children:"Booking Confirmed!"}),i.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Thank you for choosing Aaranya Jharkhand. Your forest adventure awaits!"}),i.jsxs("div",{className:"glass-dark rounded-2xl p-8 mb-8 text-left",children:[i.jsxs("h3",{className:"text-white font-bold text-xl mb-4",children:["Booking Reference: #ARN",Date.now()]}),i.jsxs("div",{className:"grid md:grid-cols-2 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Trip:"}),i.jsx("span",{className:"text-white ml-2",children:h.planTitle})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Travelers:"}),i.jsx("span",{className:"text-white ml-2",children:k.travelers})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"Start Date:"}),i.jsx("span",{className:"text-white ml-2",children:k.startDate})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-gray-400",children:"End Date:"}),i.jsx("span",{className:"text-white ml-2",children:k.endDate})]})]})]}),i.jsxs("div",{className:"flex gap-4 justify-center",children:[i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l("/guest-dashboard"),className:"px-8 py-3 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl hover:shadow-lg transition-all duration-300",children:"View My Bookings"}),i.jsx(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>l("/"),className:"px-8 py-3 glass-dark text-white font-bold rounded-xl hover:bg-white/10 transition-all duration-300",children:"Back to Home"})]})]}),x<5&&i.jsxs("div",{className:"flex justify-between mt-8 pt-6 border-t border-white/10",children:[i.jsxs(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(Math.max(1,x-1)),disabled:x===1,className:"px-6 py-3 glass-dark text-white font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:bg-white/10 transition-all duration-300",children:[i.jsx(Ho,{className:"w-5 h-5 inline mr-2"}),"Previous"]}),i.jsxs(re.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(Math.min(5,x+1)),disabled:!ut(x),className:"px-8 py-3 bg-gradient-to-r from-emerald-400 to-sky-400 text-black font-bold rounded-xl disabled:opacity-50 disabled:cursor-not-allowed hover:shadow-lg transition-all duration-300",children:[x===4?"Complete Booking":"Continue",i.jsx(Kp,{className:"w-5 h-5 inline ml-2"})]})]})]},x)]}),i.jsx("div",{className:"lg:col-span-1",children:i.jsxs(re.div,{initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},className:"glass-premium rounded-2xl p-6 sticky top-24",children:[i.jsx("h3",{className:"text-2xl font-bold text-white mb-6",children:"Booking Summary"}),i.jsxs("div",{className:"mb-6",children:[i.jsx("h4",{className:"text-emerald-400 font-bold mb-3",children:h.planTitle}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Duration:"}),i.jsx("span",{className:"text-white",children:h.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Travelers:"}),i.jsx("span",{className:"text-white",children:k.travelers})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Rooms:"}),i.jsx("span",{className:"text-white",children:k.rooms})]}),k.startDate&&k.endDate&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Dates:"}),i.jsxs("span",{className:"text-white text-xs",children:[new Date(k.startDate).toLocaleDateString()," - ",new Date(k.endDate).toLocaleDateString()]})]})]})]}),i.jsxs("div",{className:"border-t border-white/10 pt-4 mb-6",children:[i.jsxs("button",{onClick:()=>Q(!ie),className:"flex items-center justify-between w-full text-white font-medium mb-3",children:[i.jsx("span",{children:"Price Breakdown"}),i.jsx(AT,{className:`w-5 h-5 transition-transform ${ie?"rotate-180":""}`})]}),ie&&i.jsxs(re.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-gray-400",children:["Base Price (",k.travelers,"x):"]}),i.jsxs("span",{className:"text-white",children:["₹",((h.price||25e3)*k.travelers).toLocaleString()]})]}),k.accommodationType!=="budget"&&i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-gray-400",children:"Accommodation Upgrade:"}),i.jsxs("span",{className:"text-white",children:["₹",((ae.find(je=>je.id===k.accommodationType)?.price||0)*k.travelers).toLocaleString()]})]}),k.rooms>1&&i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-gray-400",children:["Extra Rooms (",k.rooms-1,"):"]}),i.jsxs("span",{className:"text-white",children:["₹",((k.rooms-1)*2e3).toLocaleString()]})]}),k.addOns.map(je=>{const Ae=se.find(He=>He.id===je);return Ae?i.jsxs("div",{className:"flex justify-between",children:[i.jsxs("span",{className:"text-gray-400",children:[Ae.name,":"]}),i.jsxs("span",{className:"text-white",children:["₹",(Ae.price*k.travelers).toLocaleString()]})]},je):null})]})]}),i.jsxs("div",{className:"border-t border-white/10 pt-4",children:[i.jsxs("div",{className:"flex justify-between items-center mb-4",children:[i.jsx("span",{className:"text-xl font-bold text-white",children:"Total Amount:"}),i.jsxs("span",{className:"text-2xl font-bold text-emerald-400",children:["₹",k.totalAmount.toLocaleString()]})]}),i.jsx("div",{className:"text-xs text-gray-400 mb-4",children:"*Final price may vary based on availability and seasonal rates"}),i.jsxs("div",{className:"glass-dark rounded-xl p-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(Td,{className:"w-4 h-4 text-emerald-400"}),i.jsx("span",{className:"text-white font-medium text-sm",children:"100% Secure Payment"})]}),i.jsx("p",{className:"text-gray-400 text-xs",children:"Your payment information is encrypted and secure. We never store your card details."})]})]}),i.jsxs("div",{className:"mt-6 pt-6 border-t border-white/10",children:[i.jsx("h4",{className:"text-white font-bold mb-3",children:"Need Help?"}),i.jsxs("div",{className:"space-y-2",children:[i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[i.jsx(Af,{className:"w-4 h-4 text-emerald-400"}),i.jsx("span",{children:"+91 98765 43210"})]}),i.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[i.jsx(Cx,{className:"w-4 h-4 text-emerald-400"}),i.jsx("span",{children:"support@aaranya.com"})]})]}),i.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"24/7 customer support available"})]})]})})]})]})}):null}const is={name:"Netarhat",tagline:"The Queen of Chotanagpur",description:"Netarhat, situated at an elevation of 1,128 meters, is a picturesque hill station known for its breathtaking sunrise and sunset views, dense forests, and pleasant climate throughout the year.",heroImage:"https://images.unsplash.com/photo-1629977681408-e6e6876645c0?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb3VudGFpbiUyMHN1bnJpc2UlMjBsYW5kc2NhcGV8ZW58MXx8fHwxNzU2NTA1MzQ5fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",gallery:["https://images.unsplash.com/photo-1629977681408-e6e6876645c0?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxtb3VudGFpbiUyMHN1bnJpc2UlMjBsYW5kc2NhcGV8ZW58MXx8fHwxNzU2NTA1MzQ5fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1663998846330-d99c8c3fe4fd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHxtb3VudGFpbiUyMGxhbmRzY2FwZSUyMGhpbGxzfGVufDF8fHx8MTc1NjU0MjA1OXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1727891729717-d5ab6a060b01?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxkZW5zZSUyMGZvcmVzdCUyMHdpbGRsaWZlJTIwbmF0dXJlfGVufDF8fHx8MTc1NjU0MjA1OXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"],rating:4.8,reviews:127,location:"Latehar District, Jharkhand",bestTime:"October to March",duration:"2-3 days",difficulty:"Easy",elevation:"1,128m",temperature:"15-25°C",highlights:[{icon:En,title:"Sunrise Point",description:"Spectacular sunrise views from the hilltop"},{icon:Dd,title:"Dense Forests",description:"Rich biodiversity and peaceful nature walks"},{icon:Rl,title:"Photography",description:"Perfect for landscape and nature photography"},{icon:ip,title:"Pleasant Climate",description:"Cool weather throughout the year"}],activities:["Sunrise/Sunset Viewing","Nature Photography","Trekking & Hiking","Forest Walks","Bird Watching","Camping (with permits)"],nearbyAttractions:[{name:"Betla National Park",distance:"25km",type:"Wildlife"},{name:"Koel View Point",distance:"8km",type:"Scenic"},{name:"Palamau Tiger Reserve",distance:"30km",type:"Wildlife"}],tips:["Carry warm clothes as it gets cold in the evenings","Book accommodation in advance, especially during peak season","Start early for sunrise point (around 5:30 AM)","Carry camera with extra batteries for photography","Respect local forest rules and don't litter"]};function JP(){const[a,l]=G.useState(0),[h,x]=G.useState(0),j=un();G.useEffect(()=>{const _=()=>x(window.scrollY);return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const k=()=>{j("/destinations")};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("section",{className:"relative h-screen overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 w-full h-full",style:{transform:`translateY(${h*.5}px)`},children:[i.jsx(qr,{src:is.heroImage,alt:is.name,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),i.jsx(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:k,className:"absolute top-24 left-4 z-20 glass text-white p-3 rounded-full hover:bg-white/20 transition-all duration-300",children:i.jsx(Ho,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center z-10",children:i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,delay:.5},className:"max-w-4xl px-4",children:[i.jsx(re.h1,{className:"text-6xl md:text-8xl font-bold text-white mb-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.7},children:is.name}),i.jsx(re.p,{className:"text-2xl md:text-3xl text-white/90 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.9},children:is.tagline}),i.jsxs(re.div,{className:"flex items-center justify-center gap-6 text-white/80 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.1},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"h-5 w-5 text-amber-400"}),i.jsx("span",{children:is.rating}),i.jsxs("span",{children:["(",is.reviews," reviews)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yu,{className:"h-5 w-5"}),i.jsx("span",{children:is.location})]})]}),i.jsxs(re.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.3},children:[i.jsxs(vt,{size:"lg",className:"bg-[#18B668] hover:bg-[#18B668]/80 text-white px-8",onClick:()=>j("/booking",{state:{planTitle:`${is.name} Experience`,destination:is.name,duration:is.duration,price:8500,type:"destination"}}),children:[i.jsx(ds,{className:"mr-2 h-5 w-5"}),"Book Experience"]}),i.jsxs(vt,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[i.jsx($a,{className:"mr-2 h-5 w-5"}),"Add to Wishlist"]})]})]})}),i.jsx(re.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:"Discover More"}),i.jsx("div",{className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:i.jsx(re.div,{className:"w-1 h-3 bg-white/70 rounded-full mt-2",animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0}})})]})})]}),i.jsx(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"py-8 glass sticky top-0 z-30",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4",children:i.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(Tc,{className:"h-5 w-5 text-[#18B668]"}),i.jsx("span",{className:"text-sm",children:is.duration})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ds,{className:"h-5 w-5 text-[#0EA5E9]"}),i.jsx("span",{className:"text-sm",children:is.bestTime})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(En,{className:"h-5 w-5 text-[#F59E0B]"}),i.jsx("span",{className:"text-sm",children:is.elevation})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ip,{className:"h-5 w-5 text-[#8B4513]"}),i.jsx("span",{className:"text-sm",children:is.temperature})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-6",children:["About ",is.name]}),i.jsx("p",{className:"text-white/80 leading-relaxed text-lg",children:is.description})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"What Makes It Special"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:is.highlights.map((_,d)=>i.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 hover:scale-105 transition-transform duration-300 rounded-xl",children:[i.jsx(_.icon,{className:"h-12 w-12 text-[#18B668] mb-4"}),i.jsx("h3",{className:"text-white font-semibold text-xl mb-2",children:_.title}),i.jsx("p",{className:"text-white/70",children:_.description})]},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Things To Do"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:is.activities.map((_,d)=>i.jsx(ar,{variant:"secondary",className:"bg-[#18B668]/20 text-[#18B668] border-[#18B668]/30 px-4 py-2 text-sm",children:_},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Gallery"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:is.gallery.map((_,d)=>i.jsxs(re.div,{className:"relative overflow-hidden rounded-xl cursor-pointer group",whileHover:{scale:1.02},onClick:()=>l(d),children:[i.jsx(qr,{src:_,alt:`${is.name} gallery ${d+1}`,className:"w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors duration-300"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx(Rl,{className:"h-8 w-8 text-white"})})]},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Location & Nearby Attractions"}),i.jsxs("div",{className:"glass-premium rounded-2xl p-6",children:[i.jsx(zy,{height:"400px",selectedDestination:"netarhat",showAllDestinations:!0}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("p",{className:"text-gray-400 text-sm",children:"Interactive map showing Netarhat and nearby attractions in Jharkhand"})})]})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},children:i.jsx(ni,{className:"glass sticky top-32",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Plan Your Visit"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/80 text-white",onClick:()=>j("/booking",{state:{planTitle:`${is.name} Experience`,destination:is.name,duration:is.duration,price:8500,type:"destination"}}),children:[i.jsx(ds,{className:"mr-2 h-4 w-4"}),"Book Now - ₹8,500"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(bm,{className:"mr-2 h-4 w-4"}),"Share Destination"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(wm,{className:"mr-2 h-4 w-4"}),"Get Directions"]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Info"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Best Time:"}),i.jsx("span",{className:"text-white",children:is.bestTime})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Duration:"}),i.jsx("span",{className:"text-white",children:is.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Difficulty:"}),i.jsx("span",{className:"text-white",children:is.difficulty})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Temperature:"}),i.jsx("span",{className:"text-white",children:is.temperature})]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Nearby Attractions"}),i.jsx("div",{className:"space-y-3",children:is.nearbyAttractions.map((_,d)=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm font-medium",children:_.name}),i.jsx("p",{className:"text-white/60 text-xs",children:_.type})]}),i.jsx(ar,{variant:"outline",className:"border-white/20 text-white/70 text-xs",children:_.distance})]},d))})]})})})]})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"mt-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Travel Tips"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:is.tips.map((_,d)=>i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 rounded-xl",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(tp,{className:"h-5 w-5 text-[#0EA5E9] mt-1 flex-shrink-0"}),i.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:_})]})},d))})]})]})]})}const Rs={name:"Hundru Falls",tagline:"Spectacular 320ft Waterfall",description:"Hundru Falls is a magnificent waterfall cascading from a height of 320 feet, formed by the river Subarnarekha. It's one of the highest waterfalls in Jharkhand and offers breathtaking views and adventure activities.",heroImage:"https://images.unsplash.com/photo-1678914903641-5f59d34a85da?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx3YXRlcmZhbGwlMjBmb3Jlc3QlMjBuYXR1cmUlMjBqaGFya2hhbmR8ZW58MXx8fHwxNzU2NTQyMDU3fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",gallery:["https://images.unsplash.com/photo-1678914903641-5f59d34a85da?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx3YXRlcmZhbGwlMjBmb3Jlc3QlMjBuYXR1cmUlMjBqaGFya2hhbmR8ZW58MXx8fHwxNzU2NTQyMDU3fDA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1663998846330-d99c8c3fe4fd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHxtb3VudGFpbiUyMGxhbmRzY2FwZSUyMGhpbGxzfGVufDF8fHx8MTc1NjU0MjA1OXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"],rating:4.9,reviews:203,location:"Ranchi District, Jharkhand",bestTime:"July to February",duration:"1-2 days",difficulty:"Moderate",elevation:"625m",temperature:"20-30°C",highlights:[{icon:Zf,title:"320ft Waterfall",description:"One of the highest waterfalls in Jharkhand"},{icon:Rl,title:"Photography Paradise",description:"Perfect for waterfall and landscape photography"},{icon:En,title:"Trekking Trail",description:"Moderate trek to reach the base of the falls"},{icon:Dd,title:"Natural Pool",description:"Swimming and bathing area at the base"}],activities:["Waterfall Photography","Swimming in Natural Pool","Rock Climbing","Trekking to Base","Picnicking","Nature Walks"],nearbyAttractions:[{name:"Johna Falls",distance:"12km",type:"Waterfall"},{name:"Ranchi Hill",distance:"45km",type:"Hill Station"},{name:"Tagore Hill",distance:"50km",type:"Cultural"}],tips:["Visit during monsoon for maximum water flow","Wear non-slip shoes for the trek","Carry waterproof bags for cameras","Don't venture too close to the falls","Best photography time is morning (9-11 AM)"]};function KP(){const[a,l]=G.useState(0),[h,x]=G.useState(0),j=un();G.useEffect(()=>{const _=()=>x(window.scrollY);return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const k=()=>{j("/destinations")};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("section",{className:"relative h-screen overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 w-full h-full",style:{transform:`translateY(${h*.5}px)`},children:[i.jsx(qr,{src:Rs.heroImage,alt:Rs.name,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),i.jsx(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:k,className:"absolute top-24 left-4 z-20 glass text-white p-3 rounded-full hover:bg-white/20 transition-all duration-300",children:i.jsx(Ho,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center z-10",children:i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,delay:.5},className:"max-w-4xl px-4",children:[i.jsx(re.h1,{className:"text-6xl md:text-8xl font-bold text-white mb-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.7},children:Rs.name}),i.jsx(re.p,{className:"text-2xl md:text-3xl text-white/90 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.9},children:Rs.tagline}),i.jsxs(re.div,{className:"flex items-center justify-center gap-6 text-white/80 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.1},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"h-5 w-5 text-amber-400"}),i.jsx("span",{children:Rs.rating}),i.jsxs("span",{children:["(",Rs.reviews," reviews)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yu,{className:"h-5 w-5"}),i.jsx("span",{children:Rs.location})]})]}),i.jsxs(re.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.3},children:[i.jsxs(vt,{size:"lg",className:"bg-[#18B668] hover:bg-[#18B668]/80 text-white px-8",children:[i.jsx(ds,{className:"mr-2 h-5 w-5"}),"Book Experience"]}),i.jsxs(vt,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[i.jsx($a,{className:"mr-2 h-5 w-5"}),"Add to Wishlist"]})]})]})}),i.jsx(re.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:"Discover More"}),i.jsx("div",{className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:i.jsx(re.div,{className:"w-1 h-3 bg-white/70 rounded-full mt-2",animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0}})})]})})]}),i.jsx(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"py-8 glass sticky top-0 z-30",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4",children:i.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(Tc,{className:"h-5 w-5 text-[#18B668]"}),i.jsx("span",{className:"text-sm",children:Rs.duration})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ds,{className:"h-5 w-5 text-[#0EA5E9]"}),i.jsx("span",{className:"text-sm",children:Rs.bestTime})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(En,{className:"h-5 w-5 text-[#F59E0B]"}),i.jsx("span",{className:"text-sm",children:Rs.elevation})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ip,{className:"h-5 w-5 text-[#8B4513]"}),i.jsx("span",{className:"text-sm",children:Rs.temperature})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-6",children:["About ",Rs.name]}),i.jsx("p",{className:"text-white/80 leading-relaxed text-lg",children:Rs.description})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"What Makes It Special"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Rs.highlights.map((_,d)=>i.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 hover:scale-105 transition-transform duration-300 rounded-xl",children:[i.jsx(_.icon,{className:"h-12 w-12 text-[#18B668] mb-4"}),i.jsx("h3",{className:"text-white font-semibold text-xl mb-2",children:_.title}),i.jsx("p",{className:"text-white/70",children:_.description})]},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Things To Do"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Rs.activities.map((_,d)=>i.jsx(ar,{variant:"secondary",className:"bg-[#18B668]/20 text-[#18B668] border-[#18B668]/30 px-4 py-2 text-sm",children:_},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Gallery"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Rs.gallery.map((_,d)=>i.jsxs(re.div,{className:"relative overflow-hidden rounded-xl cursor-pointer group",whileHover:{scale:1.02},onClick:()=>l(d),children:[i.jsx(qr,{src:_,alt:`${Rs.name} gallery ${d+1}`,className:"w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors duration-300"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx(Rl,{className:"h-8 w-8 text-white"})})]},d))})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},children:i.jsx(ni,{className:"glass sticky top-32",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Plan Your Visit"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/80 text-white",children:[i.jsx(ds,{className:"mr-2 h-4 w-4"}),"Check Availability"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(bm,{className:"mr-2 h-4 w-4"}),"Share Destination"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(wm,{className:"mr-2 h-4 w-4"}),"Get Directions"]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Quick Info"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Best Time:"}),i.jsx("span",{className:"text-white",children:Rs.bestTime})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Duration:"}),i.jsx("span",{className:"text-white",children:Rs.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Difficulty:"}),i.jsx("span",{className:"text-white",children:Rs.difficulty})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Temperature:"}),i.jsx("span",{className:"text-white",children:Rs.temperature})]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Nearby Attractions"}),i.jsx("div",{className:"space-y-3",children:Rs.nearbyAttractions.map((_,d)=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm font-medium",children:_.name}),i.jsx("p",{className:"text-white/60 text-xs",children:_.type})]}),i.jsx(ar,{variant:"outline",className:"border-white/20 text-white/70 text-xs",children:_.distance})]},d))})]})})})]})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"mt-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Travel Tips"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Rs.tips.map((_,d)=>i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 rounded-xl",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(tp,{className:"h-5 w-5 text-[#0EA5E9] mt-1 flex-shrink-0"}),i.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:_})]})},d))})]})]})]})}const Ls={name:"Betla National Park",tagline:"Wildlife & Forest Reserve",description:"Betla National Park, part of the Palamau Tiger Reserve, is a pristine wilderness area home to tigers, elephants, leopards, and over 170 bird species. It offers exceptional wildlife viewing and forest experiences.",heroImage:"https://images.unsplash.com/photo-1734373810483-af9b277b4bed?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxmb3Jlc3QlMjB3aWxkbGlmZSUyMHNhZmFyaXxlbnwxfHx8fDE3NTY1NDI3OTh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",gallery:["https://images.unsplash.com/photo-1734373810483-af9b277b4bed?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxmb3Jlc3QlMjB3aWxkbGlmZSUyMHNhZmFyaXxlbnwxfHx8fDE3NTY1NDI3OTh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1727891729717-d5ab6a060b01?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHxkZW5zZSUyMGZvcmVzdCUyMHdpbGRsaWZlJTIwbmF0dXJlfGVufDF8fHx8MTc1NjU0MjA1OXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"],rating:4.7,reviews:189,location:"Latehar District, Jharkhand",bestTime:"November to April",duration:"2-3 days",difficulty:"Easy to Moderate",elevation:"300-600m",temperature:"15-35°C",highlights:[{icon:bT,title:"Tiger Safari",description:"One of the best places to spot tigers in Jharkhand"},{icon:Dd,title:"Dense Forests",description:"Pristine sal and bamboo forests"},{icon:fo,title:"Bird Watching",description:"Over 170 species of birds"},{icon:Rl,title:"Wildlife Photography",description:"Excellent opportunities for wildlife shots"}],activities:["Tiger Safari","Elephant Safari","Bird Watching","Wildlife Photography","Nature Walks","Forest Camping"],nearbyAttractions:[{name:"Netarhat Hill Station",distance:"25km",type:"Hill Station"},{name:"Palamau Fort",distance:"20km",type:"Historical"},{name:"Lodh Falls",distance:"60km",type:"Waterfall"}],tips:["Book safari permits in advance","Carry binoculars for better wildlife viewing","Early morning safaris have better tiger sighting chances","Maintain silence during safari","Follow park rules and guide instructions"]};function QP(){const[a,l]=G.useState(0),[h,x]=G.useState(0),j=un();G.useEffect(()=>{const _=()=>x(window.scrollY);return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const k=()=>{j("/destinations")};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("section",{className:"relative h-screen overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 w-full h-full",style:{transform:`translateY(${h*.5}px)`},children:[i.jsx(qr,{src:Ls.heroImage,alt:Ls.name,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),i.jsx(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:k,className:"absolute top-24 left-4 z-20 glass text-white p-3 rounded-full hover:bg-white/20 transition-all duration-300",children:i.jsx(Ho,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center z-10",children:i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,delay:.5},className:"max-w-4xl px-4",children:[i.jsx(re.h1,{className:"text-6xl md:text-8xl font-bold text-white mb-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.7},children:Ls.name}),i.jsx(re.p,{className:"text-2xl md:text-3xl text-white/90 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.9},children:Ls.tagline}),i.jsxs(re.div,{className:"flex items-center justify-center gap-6 text-white/80 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.1},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"h-5 w-5 text-amber-400"}),i.jsx("span",{children:Ls.rating}),i.jsxs("span",{children:["(",Ls.reviews," reviews)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yu,{className:"h-5 w-5"}),i.jsx("span",{children:Ls.location})]})]}),i.jsxs(re.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.3},children:[i.jsxs(vt,{size:"lg",className:"bg-[#18B668] hover:bg-[#18B668]/80 text-white px-8",children:[i.jsx(ds,{className:"mr-2 h-5 w-5"}),"Book Safari"]}),i.jsxs(vt,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[i.jsx($a,{className:"mr-2 h-5 w-5"}),"Add to Wishlist"]})]})]})}),i.jsx(re.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:"Discover More"}),i.jsx("div",{className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:i.jsx(re.div,{className:"w-1 h-3 bg-white/70 rounded-full mt-2",animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0}})})]})})]}),i.jsx(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"py-8 glass sticky top-0 z-30",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4",children:i.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(Tc,{className:"h-5 w-5 text-[#18B668]"}),i.jsx("span",{className:"text-sm",children:Ls.duration})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ds,{className:"h-5 w-5 text-[#0EA5E9]"}),i.jsx("span",{className:"text-sm",children:Ls.bestTime})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(En,{className:"h-5 w-5 text-[#F59E0B]"}),i.jsx("span",{className:"text-sm",children:Ls.elevation})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ip,{className:"h-5 w-5 text-[#8B4513]"}),i.jsx("span",{className:"text-sm",children:Ls.temperature})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-6",children:["About ",Ls.name]}),i.jsx("p",{className:"text-white/80 leading-relaxed text-lg",children:Ls.description})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"What Makes It Special"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Ls.highlights.map((_,d)=>i.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 hover:scale-105 transition-transform duration-300 rounded-xl",children:[i.jsx(_.icon,{className:"h-12 w-12 text-[#18B668] mb-4"}),i.jsx("h3",{className:"text-white font-semibold text-xl mb-2",children:_.title}),i.jsx("p",{className:"text-white/70",children:_.description})]},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Safari & Activities"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Ls.activities.map((_,d)=>i.jsx(ar,{variant:"secondary",className:"bg-[#18B668]/20 text-[#18B668] border-[#18B668]/30 px-4 py-2 text-sm",children:_},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Wildlife Gallery"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Ls.gallery.map((_,d)=>i.jsxs(re.div,{className:"relative overflow-hidden rounded-xl cursor-pointer group",whileHover:{scale:1.02},onClick:()=>l(d),children:[i.jsx(qr,{src:_,alt:`${Ls.name} gallery ${d+1}`,className:"w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors duration-300"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx(Rl,{className:"h-8 w-8 text-white"})})]},d))})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},children:i.jsx(ni,{className:"glass sticky top-32",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Book Safari"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/80 text-white",children:[i.jsx(ds,{className:"mr-2 h-4 w-4"}),"Check Safari Slots"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(bm,{className:"mr-2 h-4 w-4"}),"Share Park Info"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(wm,{className:"mr-2 h-4 w-4"}),"Get Directions"]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Safari Info"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Best Time:"}),i.jsx("span",{className:"text-white",children:Ls.bestTime})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Duration:"}),i.jsx("span",{className:"text-white",children:Ls.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Difficulty:"}),i.jsx("span",{className:"text-white",children:Ls.difficulty})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Temperature:"}),i.jsx("span",{className:"text-white",children:Ls.temperature})]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Nearby Attractions"}),i.jsx("div",{className:"space-y-3",children:Ls.nearbyAttractions.map((_,d)=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm font-medium",children:_.name}),i.jsx("p",{className:"text-white/60 text-xs",children:_.type})]}),i.jsx(ar,{variant:"outline",className:"border-white/20 text-white/70 text-xs",children:_.distance})]},d))})]})})})]})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"mt-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Safari Tips"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Ls.tips.map((_,d)=>i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 rounded-xl",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(tp,{className:"h-5 w-5 text-[#0EA5E9] mt-1 flex-shrink-0"}),i.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:_})]})},d))})]})]})]})}const Bs={name:"Deoghar",tagline:"Sacred Temple Town",description:'Deoghar, meaning "abode of gods," is one of the most sacred pilgrimage sites in India, famous for the Baidyanath Temple, one of the twelve Jyotirlingas. The town combines spiritual significance with natural beauty.',heroImage:"https://images.unsplash.com/photo-1656947165986-9f0696776dd4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0ZW1wbGUlMjBhcmNoaXRlY3R1cmUlMjBpbmRpYXxlbnwxfHx8fDE3NTY0OTEyMzV8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",gallery:["https://images.unsplash.com/photo-1656947165986-9f0696776dd4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0ZW1wbGUlMjBhcmNoaXRlY3R1cmUlMjBpbmRpYXxlbnwxfHx8fDE3NTY0OTEyMzV8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1585563741139-4d488b8291c4?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx0cmliYWwlMjBjdWx0dXJlJTIwZGFuY2UlMjBpbmRpYXxlbnwxfHx8fDE3NTY1NDIwNTh8MA&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"],rating:4.6,reviews:334,location:"Deoghar District, Jharkhand",bestTime:"October to March",duration:"2-4 days",difficulty:"Easy",elevation:"254m",temperature:"15-30°C",highlights:[{icon:En,title:"Baidyanath Temple",description:"One of the twelve sacred Jyotirlingas"},{icon:fo,title:"Spiritual Journey",description:"Deep cultural and religious experiences"},{icon:Dd,title:"Trikuta Hills",description:"Sacred hills with multiple temples"},{icon:Rl,title:"Cultural Heritage",description:"Rich traditions and festivals"}],activities:["Temple Visits","Spiritual Tours","Cultural Exploration","Ropeway Ride (Trikuta Hills)","Local Markets","Photography"],nearbyAttractions:[{name:"Trikuta Hills",distance:"10km",type:"Religious"},{name:"Nandan Pahar",distance:"12km",type:"Hill Station"},{name:"Mayurbhanj Palace",distance:"5km",type:"Historical"}],tips:["Dress modestly while visiting temples","Carry sufficient cash as many places don't accept cards","Book accommodation early during festivals","Respect local customs and traditions","Try local prasadam and traditional food"]};function eE(){const[a,l]=G.useState(0),[h,x]=G.useState(0),j=un();G.useEffect(()=>{const _=()=>x(window.scrollY);return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const k=()=>{j("/destinations")};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("section",{className:"relative h-screen overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 w-full h-full",style:{transform:`translateY(${h*.5}px)`},children:[i.jsx(qr,{src:Bs.heroImage,alt:Bs.name,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),i.jsx(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:k,className:"absolute top-24 left-4 z-20 glass text-white p-3 rounded-full hover:bg-white/20 transition-all duration-300",children:i.jsx(Ho,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center z-10",children:i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,delay:.5},className:"max-w-4xl px-4",children:[i.jsx(re.h1,{className:"text-6xl md:text-8xl font-bold text-white mb-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.7},children:Bs.name}),i.jsx(re.p,{className:"text-2xl md:text-3xl text-white/90 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.9},children:Bs.tagline}),i.jsxs(re.div,{className:"flex items-center justify-center gap-6 text-white/80 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.1},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"h-5 w-5 text-amber-400"}),i.jsx("span",{children:Bs.rating}),i.jsxs("span",{children:["(",Bs.reviews," reviews)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yu,{className:"h-5 w-5"}),i.jsx("span",{children:Bs.location})]})]}),i.jsxs(re.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.3},children:[i.jsxs(vt,{size:"lg",className:"bg-[#18B668] hover:bg-[#18B668]/80 text-white px-8",children:[i.jsx(ds,{className:"mr-2 h-5 w-5"}),"Plan Pilgrimage"]}),i.jsxs(vt,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[i.jsx($a,{className:"mr-2 h-5 w-5"}),"Add to Wishlist"]})]})]})}),i.jsx(re.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:"Discover More"}),i.jsx("div",{className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:i.jsx(re.div,{className:"w-1 h-3 bg-white/70 rounded-full mt-2",animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0}})})]})})]}),i.jsx(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"py-8 glass sticky top-0 z-30",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4",children:i.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(Tc,{className:"h-5 w-5 text-[#18B668]"}),i.jsx("span",{className:"text-sm",children:Bs.duration})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ds,{className:"h-5 w-5 text-[#0EA5E9]"}),i.jsx("span",{className:"text-sm",children:Bs.bestTime})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(En,{className:"h-5 w-5 text-[#F59E0B]"}),i.jsx("span",{className:"text-sm",children:Bs.elevation})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ip,{className:"h-5 w-5 text-[#8B4513]"}),i.jsx("span",{className:"text-sm",children:Bs.temperature})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-6",children:["About ",Bs.name]}),i.jsx("p",{className:"text-white/80 leading-relaxed text-lg",children:Bs.description})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Sacred Highlights"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Bs.highlights.map((_,d)=>i.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 hover:scale-105 transition-transform duration-300 rounded-xl",children:[i.jsx(_.icon,{className:"h-12 w-12 text-[#18B668] mb-4"}),i.jsx("h3",{className:"text-white font-semibold text-xl mb-2",children:_.title}),i.jsx("p",{className:"text-white/70",children:_.description})]},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Spiritual Activities"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Bs.activities.map((_,d)=>i.jsx(ar,{variant:"secondary",className:"bg-[#18B668]/20 text-[#18B668] border-[#18B668]/30 px-4 py-2 text-sm",children:_},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Sacred Gallery"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Bs.gallery.map((_,d)=>i.jsxs(re.div,{className:"relative overflow-hidden rounded-xl cursor-pointer group",whileHover:{scale:1.02},onClick:()=>l(d),children:[i.jsx(qr,{src:_,alt:`${Bs.name} gallery ${d+1}`,className:"w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors duration-300"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx(Rl,{className:"h-8 w-8 text-white"})})]},d))})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},children:i.jsx(ni,{className:"glass sticky top-32",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Plan Pilgrimage"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/80 text-white",children:[i.jsx(ds,{className:"mr-2 h-4 w-4"}),"Temple Timings"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(bm,{className:"mr-2 h-4 w-4"}),"Share Sacred Info"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(wm,{className:"mr-2 h-4 w-4"}),"Get Directions"]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Pilgrimage Info"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Best Time:"}),i.jsx("span",{className:"text-white",children:Bs.bestTime})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Duration:"}),i.jsx("span",{className:"text-white",children:Bs.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Difficulty:"}),i.jsx("span",{className:"text-white",children:Bs.difficulty})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Temperature:"}),i.jsx("span",{className:"text-white",children:Bs.temperature})]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Sacred Sites Nearby"}),i.jsx("div",{className:"space-y-3",children:Bs.nearbyAttractions.map((_,d)=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm font-medium",children:_.name}),i.jsx("p",{className:"text-white/60 text-xs",children:_.type})]}),i.jsx(ar,{variant:"outline",className:"border-white/20 text-white/70 text-xs",children:_.distance})]},d))})]})})})]})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"mt-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Pilgrimage Tips"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Bs.tips.map((_,d)=>i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 rounded-xl",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(tp,{className:"h-5 w-5 text-[#0EA5E9] mt-1 flex-shrink-0"}),i.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:_})]})},d))})]})]})]})}const Fs={name:"Patratu Valley",tagline:"Valley of Enchantment",description:"Patratu Valley is a scenic destination known for its beautiful dam, serene lake, and picturesque landscapes. It's perfect for nature lovers seeking tranquility and natural beauty.",heroImage:"https://images.unsplash.com/photo-1710349603727-57855d011a01?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx2YWxsZXklMjBsYWtlJTIwc2NlbmljJTIwbmF0dXJlfGVufDF8fHx8MTc1NjU0Mjc5NXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral",gallery:["https://images.unsplash.com/photo-1710349603727-57855d011a01?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHNlYXJjaHwxfHx2YWxsZXklMjBsYWtlJTIwc2NlbmljJTIwbmF0dXJlfGVufDF8fHx8MTc1NjU0Mjc5NXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral","https://images.unsplash.com/photo-1663998846330-d99c8c3fe4fd?crop=entropy&cs=tinysrgb&fit=max&fm=jpg&ixid=M3w3Nzg4Nzd8MHwxfHxtb3VudGFpbiUyMGxhbmRzY2FwZSUyMGhpbGxzfGVufDF8fHx8MTc1NjU0MjA1OXww&ixlib=rb-4.1.0&q=80&w=1080&utm_source=figma&utm_medium=referral"],rating:4.5,reviews:156,location:"Ramgarh District, Jharkhand",bestTime:"September to March",duration:"1-2 days",difficulty:"Easy",elevation:"600m",temperature:"18-28°C",highlights:[{icon:Zf,title:"Patratu Dam",description:"Beautiful dam with scenic lake views"},{icon:En,title:"Valley Views",description:"Stunning panoramic valley landscapes"},{icon:Rl,title:"Photography",description:"Perfect for landscape photography"},{icon:Dd,title:"Peaceful Environment",description:"Serene and tranquil atmosphere"}],activities:["Dam Views","Boating","Photography","Picnicking","Nature Walks","Meditation"],nearbyAttractions:[{name:"Ramgarh Cantonment",distance:"15km",type:"Historical"},{name:"Chinnamasta Temple",distance:"25km",type:"Religious"},{name:"Rajrappa Falls",distance:"30km",type:"Waterfall"}],tips:["Best visited during clear weather for valley views","Carry snacks as limited food options available","Early morning visits offer best photography light","Respect the dam area restrictions","Ideal for peaceful getaways"]};function tE(){const[a,l]=G.useState(0),[h,x]=G.useState(0),j=un();G.useEffect(()=>{const _=()=>x(window.scrollY);return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]);const k=()=>{j("/destinations")};return i.jsxs("div",{className:"min-h-screen bg-background",children:[i.jsxs("section",{className:"relative h-screen overflow-hidden",children:[i.jsxs("div",{className:"absolute inset-0 w-full h-full",style:{transform:`translateY(${h*.5}px)`},children:[i.jsx(qr,{src:Fs.heroImage,alt:Fs.name,className:"w-full h-full object-cover"}),i.jsx("div",{className:"absolute inset-0 bg-black/50"})]}),i.jsx(re.button,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},onClick:k,className:"absolute top-24 left-4 z-20 glass text-white p-3 rounded-full hover:bg-white/20 transition-all duration-300",children:i.jsx(Ho,{className:"h-6 w-6"})}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center text-center z-10",children:i.jsxs(re.div,{initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:1,delay:.5},className:"max-w-4xl px-4",children:[i.jsx(re.h1,{className:"text-6xl md:text-8xl font-bold text-white mb-4",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.7},children:Fs.name}),i.jsx(re.p,{className:"text-2xl md:text-3xl text-white/90 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:.9},children:Fs.tagline}),i.jsxs(re.div,{className:"flex items-center justify-center gap-6 text-white/80 mb-8",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.1},children:[i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(Xs,{className:"h-5 w-5 text-amber-400"}),i.jsx("span",{children:Fs.rating}),i.jsxs("span",{children:["(",Fs.reviews," reviews)"]})]}),i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(yu,{className:"h-5 w-5"}),i.jsx("span",{children:Fs.location})]})]}),i.jsxs(re.div,{className:"flex flex-col sm:flex-row gap-4 justify-center",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:1,delay:1.3},children:[i.jsxs(vt,{size:"lg",className:"bg-[#18B668] hover:bg-[#18B668]/80 text-white px-8",children:[i.jsx(ds,{className:"mr-2 h-5 w-5"}),"Plan Visit"]}),i.jsxs(vt,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white/10",children:[i.jsx($a,{className:"mr-2 h-5 w-5"}),"Add to Wishlist"]})]})]})}),i.jsx(re.div,{className:"absolute bottom-8 left-1/2 transform -translate-x-1/2 text-white",animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0},children:i.jsxs("div",{className:"flex flex-col items-center gap-2",children:[i.jsx("span",{className:"text-sm",children:"Discover More"}),i.jsx("div",{className:"w-6 h-10 border-2 border-white/50 rounded-full flex justify-center",children:i.jsx(re.div,{className:"w-1 h-3 bg-white/70 rounded-full mt-2",animate:{y:[0,12,0]},transition:{duration:2,repeat:1/0}})})]})})]}),i.jsx(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"py-8 glass sticky top-0 z-30",children:i.jsx("div",{className:"max-w-7xl mx-auto px-4",children:i.jsxs("div",{className:"flex flex-wrap justify-center gap-8 text-center",children:[i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(Tc,{className:"h-5 w-5 text-[#18B668]"}),i.jsx("span",{className:"text-sm",children:Fs.duration})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ds,{className:"h-5 w-5 text-[#0EA5E9]"}),i.jsx("span",{className:"text-sm",children:Fs.bestTime})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(En,{className:"h-5 w-5 text-[#F59E0B]"}),i.jsx("span",{className:"text-sm",children:Fs.elevation})]}),i.jsxs("div",{className:"flex items-center gap-2 text-white",children:[i.jsx(ip,{className:"h-5 w-5 text-[#8B4513]"}),i.jsx("span",{className:"text-sm",children:Fs.temperature})]})]})})}),i.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-12",children:[i.jsxs("div",{className:"grid lg:grid-cols-3 gap-12",children:[i.jsxs("div",{className:"lg:col-span-2 space-y-12",children:[i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsxs("h2",{className:"text-3xl font-bold text-white mb-6",children:["About ",Fs.name]}),i.jsx("p",{className:"text-white/80 leading-relaxed text-lg",children:Fs.description})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Natural Highlights"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-6",children:Fs.highlights.map((_,d)=>i.jsxs(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 hover:scale-105 transition-transform duration-300 rounded-xl",children:[i.jsx(_.icon,{className:"h-12 w-12 text-[#18B668] mb-4"}),i.jsx("h3",{className:"text-white font-semibold text-xl mb-2",children:_.title}),i.jsx("p",{className:"text-white/70",children:_.description})]},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Activities & Recreation"}),i.jsx("div",{className:"flex flex-wrap gap-3",children:Fs.activities.map((_,d)=>i.jsx(ar,{variant:"secondary",className:"bg-[#18B668]/20 text-[#18B668] border-[#18B668]/30 px-4 py-2 text-sm",children:_},d))})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8",children:"Scenic Gallery"}),i.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:Fs.gallery.map((_,d)=>i.jsxs(re.div,{className:"relative overflow-hidden rounded-xl cursor-pointer group",whileHover:{scale:1.02},onClick:()=>l(d),children:[i.jsx(qr,{src:_,alt:`${Fs.name} gallery ${d+1}`,className:"w-full h-64 object-cover transition-transform duration-500 group-hover:scale-110"}),i.jsx("div",{className:"absolute inset-0 bg-black/20 group-hover:bg-black/40 transition-colors duration-300"}),i.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:i.jsx(Rl,{className:"h-8 w-8 text-white"})})]},d))})]})]}),i.jsxs("div",{className:"space-y-8",children:[i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},children:i.jsx(ni,{className:"glass sticky top-32",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-xl font-bold text-white mb-4",children:"Plan Your Visit"}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs(vt,{className:"w-full bg-[#18B668] hover:bg-[#18B668]/80 text-white",children:[i.jsx(ds,{className:"mr-2 h-4 w-4"}),"Check Weather"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(bm,{className:"mr-2 h-4 w-4"}),"Share Location"]}),i.jsxs(vt,{variant:"outline",className:"w-full border-white/20 text-white hover:bg-white/10",children:[i.jsx(wm,{className:"mr-2 h-4 w-4"}),"Get Directions"]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.2},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Visit Info"}),i.jsxs("div",{className:"space-y-3 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Best Time:"}),i.jsx("span",{className:"text-white",children:Fs.bestTime})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Duration:"}),i.jsx("span",{className:"text-white",children:Fs.duration})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Difficulty:"}),i.jsx("span",{className:"text-white",children:Fs.difficulty})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-white/70",children:"Temperature:"}),i.jsx("span",{className:"text-white",children:Fs.temperature})]})]})]})})}),i.jsx(re.div,{initial:{opacity:0,x:30},whileInView:{opacity:1,x:0},transition:{delay:.4},children:i.jsx(ni,{className:"glass",children:i.jsxs(Kn,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-bold text-white mb-4",children:"Nearby Places"}),i.jsx("div",{className:"space-y-3",children:Fs.nearbyAttractions.map((_,d)=>i.jsxs("div",{className:"flex justify-between items-center",children:[i.jsxs("div",{children:[i.jsx("p",{className:"text-white text-sm font-medium",children:_.name}),i.jsx("p",{className:"text-white/60 text-xs",children:_.type})]}),i.jsx(ar,{variant:"outline",className:"border-white/20 text-white/70 text-xs",children:_.distance})]},d))})]})})})]})]}),i.jsxs(re.section,{initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},className:"mt-16",children:[i.jsx("h2",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Visit Tips"}),i.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:Fs.tips.map((_,d)=>i.jsx(re.div,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{delay:d*.1},className:"glass p-6 rounded-xl",children:i.jsxs("div",{className:"flex items-start gap-3",children:[i.jsx(tp,{className:"h-5 w-5 text-[#0EA5E9] mt-1 flex-shrink-0"}),i.jsx("p",{className:"text-white/80 text-sm leading-relaxed",children:_})]})},d))})]})]})]})}const iE=()=>(Cc(),null);function sE(){return i.jsx(Z4,{children:i.jsx(G4,{children:i.jsx(w2,{children:i.jsxs("div",{className:"min-h-screen bg-black text-white overflow-x-hidden",children:[i.jsx(iE,{}),i.jsx(LC,{}),i.jsx("main",{children:i.jsxs(J1,{children:[i.jsx(gs,{path:"/",element:i.jsx($3,{})}),i.jsx(gs,{path:"/destinations",element:i.jsx(kP,{})}),i.jsx(gs,{path:"/destinations/netarhat",element:i.jsx(JP,{})}),i.jsx(gs,{path:"/destinations/hundru-falls",element:i.jsx(KP,{})}),i.jsx(gs,{path:"/destinations/betla-national-park",element:i.jsx(QP,{})}),i.jsx(gs,{path:"/destinations/deoghar",element:i.jsx(eE,{})}),i.jsx(gs,{path:"/destinations/patratu-valley",element:i.jsx(tE,{})}),i.jsx(gs,{path:"/culture",element:i.jsx(CP,{})}),i.jsx(gs,{path:"/travel-planner",element:i.jsx(IP,{})}),i.jsx(gs,{path:"/travel-planner-map",element:i.jsx(BP,{})}),i.jsx(gs,{path:"/marketplace",element:i.jsx(VP,{})}),i.jsx(gs,{path:"/cart",element:i.jsx($P,{})}),i.jsx(gs,{path:"/checkout",element:i.jsx(UP,{})}),i.jsx(gs,{path:"/product/:id",element:i.jsx(HP,{})}),i.jsx(gs,{path:"/profile",element:i.jsx(WP,{})}),i.jsx(gs,{path:"/guest-dashboard",element:i.jsx(ZP,{})}),i.jsx(gs,{path:"/host-dashboard",element:i.jsx(XP,{})}),i.jsx(gs,{path:"/vendor-dashboard",element:i.jsx(Lx,{})}),i.jsx(gs,{path:"/hotel-dashboard",element:i.jsx(Ib,{})}),i.jsx(gs,{path:"/booking",element:i.jsx(YP,{})}),i.jsx(gs,{path:"/login",element:i.jsx(Qg,{})}),i.jsx(gs,{path:"/signup",element:i.jsx(Qg,{})}),i.jsx(gs,{path:"/auth",element:i.jsx(Qg,{})}),i.jsx(gs,{path:"/preview_page.html",element:i.jsx(c0,{to:"/",replace:!0})}),i.jsx(gs,{path:"*",element:i.jsx(c0,{to:"/",replace:!0})})]})}),i.jsx(OC,{}),i.jsx(O3,{}),i.jsx(F3,{}),i.jsx("div",{className:"fixed left-6 top-1/2 transform -translate-y-1/2 z-40 hidden lg:block",children:i.jsxs("div",{className:"flex flex-col gap-4",children:[i.jsxs("div",{className:"w-12 h-12 glass rounded-full flex items-center justify-center cursor-pointer hover:scale-110 transition-all duration-300 group",children:[i.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"📞"}),i.jsx("div",{className:"absolute left-16 glass-dark rounded-lg px-3 py-2 text-xs text-white whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"+91 98765 43210"})]}),i.jsxs("div",{className:"w-12 h-12 glass rounded-full flex items-center justify-center cursor-pointer hover:scale-110 transition-all duration-300 group",children:[i.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"🆘"}),i.jsx("div",{className:"absolute left-16 glass-dark rounded-lg px-3 py-2 text-xs text-white whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"24/7 Support"})]}),i.jsxs("div",{className:"w-12 h-12 glass rounded-full flex items-center justify-center cursor-pointer hover:scale-110 transition-all duration-300 group",children:[i.jsx("span",{className:"text-xl group-hover:animate-pulse",children:"🌐"}),i.jsx("div",{className:"absolute left-16 glass-dark rounded-lg px-3 py-2 text-xs text-white whitespace-nowrap opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:"EN | HI | Others"})]})]})}),i.jsxs("div",{className:"fixed inset-0 pointer-events-none z-0",children:[[...Array(15)].map((a,l)=>i.jsx("div",{className:"absolute w-1 h-1 bg-[#18B668] rounded-full opacity-20 animate-float",style:{top:`${Math.random()*100}%`,left:`${Math.random()*100}%`,animationDelay:`${Math.random()*5}s`,animationDuration:`${5+Math.random()*5}s`}},l)),i.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-[#18B668]/5 rounded-full blur-3xl animate-pulse"}),i.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-96 h-96 bg-[#F59E0B]/5 rounded-full blur-3xl animate-pulse",style:{animationDelay:"2s"}})]})]})})})})}a1.createRoot(document.getElementById("root")).render(i.jsx(sE,{}));
